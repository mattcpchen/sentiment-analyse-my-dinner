/* Copyright 2019 Observable, Inc. */
!function(){"use strict";var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function t(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function n(e,t){return e(t={exports:{}},t.exports),t.exports}var r=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable;var a=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(e){r[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(i){return!1}}()?Object.assign:function(e,t){for(var n,a,o=function(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),l=1;l<arguments.length;l++){for(var c in n=Object(arguments[l]))i.call(n,c)&&(o[c]=n[c]);if(r){a=r(n);for(var u=0;u<a.length;u++)s.call(n,a[u])&&(o[a[u]]=n[a[u]])}}return o},o="function"==typeof Symbol&&Symbol.for,l=o?Symbol.for("react.element"):60103,c=o?Symbol.for("react.portal"):60106,u=o?Symbol.for("react.fragment"):60107,h=o?Symbol.for("react.strict_mode"):60108,p=o?Symbol.for("react.profiler"):60114,d=o?Symbol.for("react.provider"):60109,f=o?Symbol.for("react.context"):60110,m=o?Symbol.for("react.concurrent_mode"):60111,g=o?Symbol.for("react.forward_ref"):60112,v=o?Symbol.for("react.suspense"):60113,b=o?Symbol.for("react.memo"):60115,y=o?Symbol.for("react.lazy"):60116,w="function"==typeof Symbol&&Symbol.iterator;function x(e){for(var t=arguments.length-1,n="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=0;r<t;r++)n+="&args[]="+encodeURIComponent(arguments[r+1]);!function(e,t,n,r,i,s,a,o){if(!e){if(e=void 0,void 0===t)e=Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=[n,r,i,s,a,o],c=0;(e=Error(t.replace(/%s/g,function(){return l[c++]}))).name="Invariant Violation"}throw e.framesToPop=1,e}}(!1,"Minified React error #"+e+"; visit %s for the full message or use the non-minified dev environment for full errors and additional helpful warnings. ",n)}var E={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},k={};function C(e,t,n){this.props=e,this.context=t,this.refs=k,this.updater=n||E}function _(){}function S(e,t,n){this.props=e,this.context=t,this.refs=k,this.updater=n||E}C.prototype.isReactComponent={},C.prototype.setState=function(e,t){"object"!=typeof e&&"function"!=typeof e&&null!=e&&x("85"),this.updater.enqueueSetState(this,e,t,"setState")},C.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},_.prototype=C.prototype;var N=S.prototype=new _;N.constructor=S,a(N,C.prototype),N.isPureReactComponent=!0;var T={current:null},A={current:null},L=Object.prototype.hasOwnProperty,P={key:!0,ref:!0,__self:!0,__source:!0};function I(e,t,n){var r=void 0,i={},s=null,a=null;if(null!=t)for(r in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(s=""+t.key),t)L.call(t,r)&&!P.hasOwnProperty(r)&&(i[r]=t[r]);var o=arguments.length-2;if(1===o)i.children=n;else if(1<o){for(var c=Array(o),u=0;u<o;u++)c[u]=arguments[u+2];i.children=c}if(e&&e.defaultProps)for(r in o=e.defaultProps)void 0===i[r]&&(i[r]=o[r]);return{$$typeof:l,type:e,key:s,ref:a,props:i,_owner:A.current}}function O(e){return"object"==typeof e&&null!==e&&e.$$typeof===l}var M=/\/+/g,R=[];function D(e,t,n,r){if(R.length){var i=R.pop();return i.result=e,i.keyPrefix=t,i.func=n,i.context=r,i.count=0,i}return{result:e,keyPrefix:t,func:n,context:r,count:0}}function F(e){e.result=null,e.keyPrefix=null,e.func=null,e.context=null,e.count=0,10>R.length&&R.push(e)}function V(e,t,n){return null==e?0:function e(t,n,r,i){var s=typeof t;"undefined"!==s&&"boolean"!==s||(t=null);var a=!1;if(null===t)a=!0;else switch(s){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case l:case c:a=!0}}if(a)return r(i,t,""===n?"."+j(t,0):n),1;if(a=0,n=""===n?".":n+":",Array.isArray(t))for(var o=0;o<t.length;o++){var u=n+j(s=t[o],o);a+=e(s,u,r,i)}else if(u=null===t||"object"!=typeof t?null:"function"==typeof(u=w&&t[w]||t["@@iterator"])?u:null,"function"==typeof u)for(t=u.call(t),o=0;!(s=t.next()).done;)a+=e(s=s.value,u=n+j(s,o++),r,i);else"object"===s&&x("31","[object Object]"==(r=""+t)?"object with keys {"+Object.keys(t).join(", ")+"}":r,"");return a}(e,"",t,n)}function j(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+(""+e).replace(/[=:]/g,function(e){return t[e]})}(e.key):t.toString(36)}function B(e,t){e.func.call(e.context,t,e.count++)}function U(e,t,n){var r=e.result,i=e.keyPrefix;e=e.func.call(e.context,t,e.count++),Array.isArray(e)?H(e,r,n,function(e){return e}):null!=e&&(O(e)&&(e=function(e,t){return{$$typeof:l,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(e,i+(!e.key||t&&t.key===e.key?"":(""+e.key).replace(M,"$&/")+"/")+n)),r.push(e))}function H(e,t,n,r,i){var s="";null!=n&&(s=(""+n).replace(M,"$&/")+"/"),V(e,U,t=D(t,s,r,i)),F(t)}function $(){var e=T.current;return null===e&&x("321"),e}var z={Children:{map:function(e,t,n){if(null==e)return e;var r=[];return H(e,r,null,t,n),r},forEach:function(e,t,n){if(null==e)return e;V(e,B,t=D(null,null,t,n)),F(t)},count:function(e){return V(e,function(){return null},null)},toArray:function(e){var t=[];return H(e,t,null,function(e){return e}),t},only:function(e){return O(e)||x("143"),e}},createRef:function(){return{current:null}},Component:C,PureComponent:S,createContext:function(e,t){return void 0===t&&(t=null),(e={$$typeof:f,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:d,_context:e},e.Consumer=e},forwardRef:function(e){return{$$typeof:g,render:e}},lazy:function(e){return{$$typeof:y,_ctor:e,_status:-1,_result:null}},memo:function(e,t){return{$$typeof:b,type:e,compare:void 0===t?null:t}},useCallback:function(e,t){return $().useCallback(e,t)},useContext:function(e,t){return $().useContext(e,t)},useEffect:function(e,t){return $().useEffect(e,t)},useImperativeHandle:function(e,t,n){return $().useImperativeHandle(e,t,n)},useDebugValue:function(){},useLayoutEffect:function(e,t){return $().useLayoutEffect(e,t)},useMemo:function(e,t){return $().useMemo(e,t)},useReducer:function(e,t,n){return $().useReducer(e,t,n)},useRef:function(e){return $().useRef(e)},useState:function(e){return $().useState(e)},Fragment:u,StrictMode:h,Suspense:v,createElement:I,cloneElement:function(e,t,n){null==e&&x("267",e);var r=void 0,i=a({},e.props),s=e.key,o=e.ref,c=e._owner;if(null!=t){void 0!==t.ref&&(o=t.ref,c=A.current),void 0!==t.key&&(s=""+t.key);var u=void 0;for(r in e.type&&e.type.defaultProps&&(u=e.type.defaultProps),t)L.call(t,r)&&!P.hasOwnProperty(r)&&(i[r]=void 0===t[r]&&void 0!==u?u[r]:t[r])}if(1===(r=arguments.length-2))i.children=n;else if(1<r){u=Array(r);for(var h=0;h<r;h++)u[h]=arguments[h+2];i.children=u}return{$$typeof:l,type:e.type,key:s,ref:o,props:i,_owner:c}},createFactory:function(e){var t=I.bind(null,e);return t.type=e,t},isValidElement:O,version:"16.8.6",unstable_ConcurrentMode:m,unstable_Profiler:p,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{ReactCurrentDispatcher:T,ReactCurrentOwner:A,assign:a}},W={default:z},q=W&&z||W,G=q.default||q,K="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Y=(n(function(e){}),n(function(e){e.exports=G})),Z=(Y.useCallback,Y.useState),Q=Y.useEffect,X=Y.useReducer,J=Y.useRef,ee=Y.useContext,te=Y.Component,ne=Y.createElement,re=Y.createRef,ie=Y.PureComponent,se=Y.Children,ae=Y.cloneElement,oe=Y.Fragment,le=n(function(t,n){Object.defineProperty(n,"__esModule",{value:!0});var r=null,i=!1,s=3,a=-1,o=-1,l=!1,c=!1;function u(){if(!l){var e=r.expirationTime;c?C():c=!0,k(d,e)}}function h(){var e=r,t=r.next;if(r===t)r=null;else{var n=r.previous;r=n.next=t,t.previous=n}e.next=e.previous=null,n=e.callback,t=e.expirationTime,e=e.priorityLevel;var i=s,a=o;s=e,o=t;try{var l=n()}finally{s=i,o=a}if("function"==typeof l)if(l={callback:l,priorityLevel:e,expirationTime:t,next:null,previous:null},null===r)r=l.next=l.previous=l;else{n=null,e=r;do{if(e.expirationTime>=t){n=e;break}e=e.next}while(e!==r);null===n?n=r:n===r&&(r=l,u()),(t=n.previous).next=n.previous=l,l.next=n,l.previous=t}}function p(){if(-1===a&&null!==r&&1===r.priorityLevel){l=!0;try{do{h()}while(null!==r&&1===r.priorityLevel)}finally{l=!1,null!==r?u():c=!1}}}function d(e){l=!0;var t=i;i=e;try{if(e)for(;null!==r;){var s=n.unstable_now();if(!(r.expirationTime<=s))break;do{h()}while(null!==r&&r.expirationTime<=s)}else if(null!==r)do{h()}while(null!==r&&!_())}finally{l=!1,i=t,null!==r?u():c=!1,p()}}var f,m,g=Date,v="function"==typeof setTimeout?setTimeout:void 0,b="function"==typeof clearTimeout?clearTimeout:void 0,y="function"==typeof requestAnimationFrame?requestAnimationFrame:void 0,w="function"==typeof cancelAnimationFrame?cancelAnimationFrame:void 0;function x(e){f=y(function(t){b(m),e(t)}),m=v(function(){w(f),e(n.unstable_now())},100)}if("object"==typeof performance&&"function"==typeof performance.now){var E=performance;n.unstable_now=function(){return E.now()}}else n.unstable_now=function(){return g.now()};var k,C,_,S=null;if("undefined"!=typeof window?S=window:void 0!==e&&(S=e),S&&S._schedMock){var N=S._schedMock;k=N[0],C=N[1],_=N[2],n.unstable_now=N[3]}else if("undefined"==typeof window||"function"!=typeof MessageChannel){var T=null,A=function(e){if(null!==T)try{T(e)}finally{T=null}};k=function(e){null!==T?setTimeout(k,0,e):(T=e,setTimeout(A,0,!1))},C=function(){T=null},_=function(){return!1}}else{"undefined"!=typeof console&&("function"!=typeof y&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"),"function"!=typeof w&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"));var L=null,P=!1,I=-1,O=!1,M=!1,R=0,D=33,F=33;_=function(){return R<=n.unstable_now()};var V=new MessageChannel,j=V.port2;V.port1.onmessage=function(){P=!1;var e=L,t=I;L=null,I=-1;var r=n.unstable_now(),i=!1;if(0>=R-r){if(!(-1!==t&&t<=r))return O||(O=!0,x(B)),L=e,void(I=t);i=!0}if(null!==e){M=!0;try{e(i)}finally{M=!1}}};var B=function(e){if(null!==L){x(B);var t=e-R+F;t<F&&D<F?(8>t&&(t=8),F=t<D?D:t):D=t,R=e+F,P||(P=!0,j.postMessage(void 0))}else O=!1};k=function(e,t){L=e,I=t,M||0>t?j.postMessage(void 0):O||(O=!0,x(B))},C=function(){L=null,P=!1,I=-1}}n.unstable_ImmediatePriority=1,n.unstable_UserBlockingPriority=2,n.unstable_NormalPriority=3,n.unstable_IdlePriority=5,n.unstable_LowPriority=4,n.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var r=s,i=a;s=e,a=n.unstable_now();try{return t()}finally{s=r,a=i,p()}},n.unstable_next=function(e){switch(s){case 1:case 2:case 3:var t=3;break;default:t=s}var r=s,i=a;s=t,a=n.unstable_now();try{return e()}finally{s=r,a=i,p()}},n.unstable_scheduleCallback=function(e,t){var i=-1!==a?a:n.unstable_now();if("object"==typeof t&&null!==t&&"number"==typeof t.timeout)t=i+t.timeout;else switch(s){case 1:t=i+-1;break;case 2:t=i+250;break;case 5:t=i+1073741823;break;case 4:t=i+1e4;break;default:t=i+5e3}if(e={callback:e,priorityLevel:s,expirationTime:t,next:null,previous:null},null===r)r=e.next=e.previous=e,u();else{i=null;var o=r;do{if(o.expirationTime>t){i=o;break}o=o.next}while(o!==r);null===i?i=r:i===r&&(r=e,u()),(t=i.previous).next=i.previous=e,e.next=i,e.previous=t}return e},n.unstable_cancelCallback=function(e){var t=e.next;if(null!==t){if(t===e)r=null;else{e===r&&(r=t);var n=e.previous;n.next=t,t.previous=n}e.next=e.previous=null}},n.unstable_wrapCallback=function(e){var t=s;return function(){var r=s,i=a;s=t,a=n.unstable_now();try{return e.apply(this,arguments)}finally{s=r,a=i,p()}}},n.unstable_getCurrentPriorityLevel=function(){return s},n.unstable_shouldYield=function(){return!i&&(null!==r&&r.expirationTime<o||_())},n.unstable_continueExecution=function(){null!==r&&u()},n.unstable_pauseExecution=function(){},n.unstable_getFirstCallbackNode=function(){return r}});t(le);le.unstable_now,le.unstable_ImmediatePriority,le.unstable_UserBlockingPriority,le.unstable_NormalPriority,le.unstable_IdlePriority,le.unstable_LowPriority,le.unstable_runWithPriority,le.unstable_next,le.unstable_scheduleCallback,le.unstable_cancelCallback,le.unstable_wrapCallback,le.unstable_getCurrentPriorityLevel,le.unstable_shouldYield,le.unstable_continueExecution,le.unstable_pauseExecution,le.unstable_getFirstCallbackNode;var ce=n(function(e,t){});t(ce);ce.unstable_now,ce.unstable_ImmediatePriority,ce.unstable_UserBlockingPriority,ce.unstable_NormalPriority,ce.unstable_IdlePriority,ce.unstable_LowPriority,ce.unstable_runWithPriority,ce.unstable_next,ce.unstable_scheduleCallback,ce.unstable_cancelCallback,ce.unstable_wrapCallback,ce.unstable_getCurrentPriorityLevel,ce.unstable_shouldYield,ce.unstable_continueExecution,ce.unstable_pauseExecution,ce.unstable_getFirstCallbackNode;var ue=n(function(e){e.exports=le});function he(e){for(var t=arguments.length-1,n="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=0;r<t;r++)n+="&args[]="+encodeURIComponent(arguments[r+1]);!function(e,t,n,r,i,s,a,o){if(!e){if(e=void 0,void 0===t)e=Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=[n,r,i,s,a,o],c=0;(e=Error(t.replace(/%s/g,function(){return l[c++]}))).name="Invariant Violation"}throw e.framesToPop=1,e}}(!1,"Minified React error #"+e+"; visit %s for the full message or use the non-minified dev environment for full errors and additional helpful warnings. ",n)}Y||he("227");var pe=!1,de=null,fe=!1,me=null,ge={onError:function(e){pe=!0,de=e}};function ve(e,t,n,r,i,s,a,o,l){pe=!1,de=null,function(e,t,n,r,i,s,a,o,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}.apply(ge,arguments)}var be=null,ye={};function we(){if(be)for(var e in ye){var t=ye[e],n=be.indexOf(e);if(-1<n||he("96",e),!Ee[n])for(var r in t.extractEvents||he("97",e),Ee[n]=t,n=t.eventTypes){var i=void 0,s=n[r],a=t,o=r;ke.hasOwnProperty(o)&&he("99",o),ke[o]=s;var l=s.phasedRegistrationNames;if(l){for(i in l)l.hasOwnProperty(i)&&xe(l[i],a,o);i=!0}else s.registrationName?(xe(s.registrationName,a,o),i=!0):i=!1;i||he("98",r,e)}}}function xe(e,t,n){Ce[e]&&he("100",e),Ce[e]=t,_e[e]=t.eventTypes[n].dependencies}var Ee=[],ke={},Ce={},_e={},Se=null,Ne=null,Te=null;function Ae(e,t,n){var r=e.type||"unknown-event";e.currentTarget=Te(n),function(e,t,n,r,i,s,a,o,l){if(ve.apply(this,arguments),pe){if(pe){var c=de;pe=!1,de=null}else he("198"),c=void 0;fe||(fe=!0,me=c)}}(r,t,void 0,e),e.currentTarget=null}function Le(e,t){return null==t&&he("30"),null==e?t:Array.isArray(e)?Array.isArray(t)?(e.push.apply(e,t),e):(e.push(t),e):Array.isArray(t)?[e].concat(t):[e,t]}function Pe(e,t,n){Array.isArray(e)?e.forEach(t,n):e&&t.call(n,e)}var Ie=null;function Oe(e){if(e){var t=e._dispatchListeners,n=e._dispatchInstances;if(Array.isArray(t))for(var r=0;r<t.length&&!e.isPropagationStopped();r++)Ae(e,t[r],n[r]);else t&&Ae(e,t,n);e._dispatchListeners=null,e._dispatchInstances=null,e.isPersistent()||e.constructor.release(e)}}var Me={injectEventPluginOrder:function(e){be&&he("101"),be=Array.prototype.slice.call(e),we()},injectEventPluginsByName:function(e){var t,n=!1;for(t in e)if(e.hasOwnProperty(t)){var r=e[t];ye.hasOwnProperty(t)&&ye[t]===r||(ye[t]&&he("102",t),ye[t]=r,n=!0)}n&&we()}};function Re(e,t){var n=e.stateNode;if(!n)return null;var r=Se(n);if(!r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}return e?null:(n&&"function"!=typeof n&&he("231",t,typeof n),n)}function De(e){if(null!==e&&(Ie=Le(Ie,e)),e=Ie,Ie=null,e&&(Pe(e,Oe),Ie&&he("95"),fe))throw e=me,fe=!1,me=null,e}var Fe=Math.random().toString(36).slice(2),Ve="__reactInternalInstance$"+Fe,je="__reactEventHandlers$"+Fe;function Be(e){if(e[Ve])return e[Ve];for(;!e[Ve];){if(!e.parentNode)return null;e=e.parentNode}return 5===(e=e[Ve]).tag||6===e.tag?e:null}function Ue(e){return!(e=e[Ve])||5!==e.tag&&6!==e.tag?null:e}function He(e){if(5===e.tag||6===e.tag)return e.stateNode;he("33")}function $e(e){return e[je]||null}function ze(e){do{e=e.return}while(e&&5!==e.tag);return e||null}function We(e,t,n){(t=Re(e,n.dispatchConfig.phasedRegistrationNames[t]))&&(n._dispatchListeners=Le(n._dispatchListeners,t),n._dispatchInstances=Le(n._dispatchInstances,e))}function qe(e){if(e&&e.dispatchConfig.phasedRegistrationNames){for(var t=e._targetInst,n=[];t;)n.push(t),t=ze(t);for(t=n.length;0<t--;)We(n[t],"captured",e);for(t=0;t<n.length;t++)We(n[t],"bubbled",e)}}function Ge(e,t,n){e&&n&&n.dispatchConfig.registrationName&&(t=Re(e,n.dispatchConfig.registrationName))&&(n._dispatchListeners=Le(n._dispatchListeners,t),n._dispatchInstances=Le(n._dispatchInstances,e))}function Ke(e){e&&e.dispatchConfig.registrationName&&Ge(e._targetInst,null,e)}function Ye(e){Pe(e,qe)}var Ze=!("undefined"==typeof window||!window.document||!window.document.createElement);function Qe(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Xe={animationend:Qe("Animation","AnimationEnd"),animationiteration:Qe("Animation","AnimationIteration"),animationstart:Qe("Animation","AnimationStart"),transitionend:Qe("Transition","TransitionEnd")},Je={},et={};function tt(e){if(Je[e])return Je[e];if(!Xe[e])return e;var t,n=Xe[e];for(t in n)if(n.hasOwnProperty(t)&&t in et)return Je[e]=n[t];return e}Ze&&(et=document.createElement("div").style,"AnimationEvent"in window||(delete Xe.animationend.animation,delete Xe.animationiteration.animation,delete Xe.animationstart.animation),"TransitionEvent"in window||delete Xe.transitionend.transition);var nt=tt("animationend"),rt=tt("animationiteration"),it=tt("animationstart"),st=tt("transitionend"),at="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ot=null,lt=null,ct=null;function ut(){if(ct)return ct;var e,t,n=lt,r=n.length,i="value"in ot?ot.value:ot.textContent,s=i.length;for(e=0;e<r&&n[e]===i[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===i[s-t];t++);return ct=i.slice(e,1<t?1-t:void 0)}function ht(){return!0}function pt(){return!1}function dt(e,t,n,r){for(var i in this.dispatchConfig=e,this._targetInst=t,this.nativeEvent=n,e=this.constructor.Interface)e.hasOwnProperty(i)&&((t=e[i])?this[i]=t(n):"target"===i?this.target=r:this[i]=n[i]);return this.isDefaultPrevented=(null!=n.defaultPrevented?n.defaultPrevented:!1===n.returnValue)?ht:pt,this.isPropagationStopped=pt,this}function ft(e,t,n,r){if(this.eventPool.length){var i=this.eventPool.pop();return this.call(i,e,t,n,r),i}return new this(e,t,n,r)}function mt(e){e instanceof this||he("279"),e.destructor(),10>this.eventPool.length&&this.eventPool.push(e)}function gt(e){e.eventPool=[],e.getPooled=ft,e.release=mt}a(dt.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=ht)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=ht)},persist:function(){this.isPersistent=ht},isPersistent:pt,destructor:function(){var e,t=this.constructor.Interface;for(e in t)this[e]=null;this.nativeEvent=this._targetInst=this.dispatchConfig=null,this.isPropagationStopped=this.isDefaultPrevented=pt,this._dispatchInstances=this._dispatchListeners=null}}),dt.Interface={type:null,target:null,currentTarget:function(){return null},eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null},dt.extend=function(e){function t(){}function n(){return r.apply(this,arguments)}var r=this;t.prototype=r.prototype;var i=new t;return a(i,n.prototype),n.prototype=i,n.prototype.constructor=n,n.Interface=a({},r.Interface,e),n.extend=r.extend,gt(n),n},gt(dt);var vt=dt.extend({data:null}),bt=dt.extend({data:null}),yt=[9,13,27,32],wt=Ze&&"CompositionEvent"in window,xt=null;Ze&&"documentMode"in document&&(xt=document.documentMode);var Et=Ze&&"TextEvent"in window&&!xt,kt=Ze&&(!wt||xt&&8<xt&&11>=xt),Ct=String.fromCharCode(32),_t={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["compositionend","keypress","textInput","paste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"blur compositionend keydown keypress keyup mousedown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:"blur compositionstart keydown keypress keyup mousedown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:"blur compositionupdate keydown keypress keyup mousedown".split(" ")}},St=!1;function Nt(e,t){switch(e){case"keyup":return-1!==yt.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"blur":return!0;default:return!1}}function Tt(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var At=!1;var Lt={eventTypes:_t,extractEvents:function(e,t,n,r){var i=void 0,s=void 0;if(wt)e:{switch(e){case"compositionstart":i=_t.compositionStart;break e;case"compositionend":i=_t.compositionEnd;break e;case"compositionupdate":i=_t.compositionUpdate;break e}i=void 0}else At?Nt(e,n)&&(i=_t.compositionEnd):"keydown"===e&&229===n.keyCode&&(i=_t.compositionStart);return i?(kt&&"ko"!==n.locale&&(At||i!==_t.compositionStart?i===_t.compositionEnd&&At&&(s=ut()):(lt="value"in(ot=r)?ot.value:ot.textContent,At=!0)),i=vt.getPooled(i,t,n,r),s?i.data=s:null!==(s=Tt(n))&&(i.data=s),Ye(i),s=i):s=null,(e=Et?function(e,t){switch(e){case"compositionend":return Tt(t);case"keypress":return 32!==t.which?null:(St=!0,Ct);case"textInput":return(e=t.data)===Ct&&St?null:e;default:return null}}(e,n):function(e,t){if(At)return"compositionend"===e||!wt&&Nt(e,t)?(e=ut(),ct=lt=ot=null,At=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return kt&&"ko"!==t.locale?null:t.data;default:return null}}(e,n))?((t=bt.getPooled(_t.beforeInput,t,n,r)).data=e,Ye(t)):t=null,null===s?t:null===t?s:[s,t]}},Pt=null,It=null,Ot=null;function Mt(e){if(e=Ne(e)){"function"!=typeof Pt&&he("280");var t=Se(e.stateNode);Pt(e.stateNode,e.type,t)}}function Rt(e){It?Ot?Ot.push(e):Ot=[e]:It=e}function Dt(){if(It){var e=It,t=Ot;if(Ot=It=null,Mt(e),t)for(e=0;e<t.length;e++)Mt(t[e])}}function Ft(e,t){return e(t)}function Vt(e,t,n){return e(t,n)}function jt(){}var Bt=!1;function Ut(e,t){if(Bt)return e(t);Bt=!0;try{return Ft(e,t)}finally{Bt=!1,(null!==It||null!==Ot)&&(jt(),Dt())}}var Ht={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function $t(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Ht[e.type]:"textarea"===t}function zt(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}function Wt(e){if(!Ze)return!1;var t=(e="on"+e)in document;return t||((t=document.createElement("div")).setAttribute(e,"return;"),t="function"==typeof t[e]),t}function qt(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function Gt(e){e._valueTracker||(e._valueTracker=function(e){var t=qt(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==n&&"function"==typeof n.get&&"function"==typeof n.set){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function Kt(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=qt(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}var Yt=Y.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;Yt.hasOwnProperty("ReactCurrentDispatcher")||(Yt.ReactCurrentDispatcher={current:null});var Zt=/^(.*)[\\\/]/,Qt="function"==typeof Symbol&&Symbol.for,Xt=Qt?Symbol.for("react.element"):60103,Jt=Qt?Symbol.for("react.portal"):60106,en=Qt?Symbol.for("react.fragment"):60107,tn=Qt?Symbol.for("react.strict_mode"):60108,nn=Qt?Symbol.for("react.profiler"):60114,rn=Qt?Symbol.for("react.provider"):60109,sn=Qt?Symbol.for("react.context"):60110,an=Qt?Symbol.for("react.concurrent_mode"):60111,on=Qt?Symbol.for("react.forward_ref"):60112,ln=Qt?Symbol.for("react.suspense"):60113,cn=Qt?Symbol.for("react.memo"):60115,un=Qt?Symbol.for("react.lazy"):60116,hn="function"==typeof Symbol&&Symbol.iterator;function pn(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=hn&&e[hn]||e["@@iterator"])?e:null}function dn(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case an:return"ConcurrentMode";case en:return"Fragment";case Jt:return"Portal";case nn:return"Profiler";case tn:return"StrictMode";case ln:return"Suspense"}if("object"==typeof e)switch(e.$$typeof){case sn:return"Context.Consumer";case rn:return"Context.Provider";case on:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case cn:return dn(e.type);case un:if(e=1===e._status?e._result:null)return dn(e)}return null}function fn(e){var t="";do{e:switch(e.tag){case 3:case 4:case 6:case 7:case 10:case 9:var n="";break e;default:var r=e._debugOwner,i=e._debugSource,s=dn(e.type);n=null,r&&(n=dn(r.type)),r=s,s="",i?s=" (at "+i.fileName.replace(Zt,"")+":"+i.lineNumber+")":n&&(s=" (created by "+n+")"),n="\n    in "+(r||"Unknown")+s}t+=n,e=e.return}while(e);return t}var mn=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,gn=Object.prototype.hasOwnProperty,vn={},bn={};function yn(e,t,n,r,i){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t}var wn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){wn[e]=new yn(e,0,!1,e,null)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];wn[t]=new yn(t,1,!1,e[1],null)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){wn[e]=new yn(e,2,!1,e.toLowerCase(),null)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){wn[e]=new yn(e,2,!1,e,null)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){wn[e]=new yn(e,3,!1,e.toLowerCase(),null)}),["checked","multiple","muted","selected"].forEach(function(e){wn[e]=new yn(e,3,!0,e,null)}),["capture","download"].forEach(function(e){wn[e]=new yn(e,4,!1,e,null)}),["cols","rows","size","span"].forEach(function(e){wn[e]=new yn(e,6,!1,e,null)}),["rowSpan","start"].forEach(function(e){wn[e]=new yn(e,5,!1,e.toLowerCase(),null)});var xn=/[\-:]([a-z])/g;function En(e){return e[1].toUpperCase()}function kn(e,t,n,r){var i=wn.hasOwnProperty(t)?wn[t]:null;(null!==i?0===i.type:!r&&(2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1])))||(function(e,t,n,r){if(null==t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!gn.call(bn,e)||!gn.call(vn,e)&&(mn.test(e)?bn[e]=!0:(vn[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}function Cn(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function _n(e,t){var n=t.checked;return a({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Sn(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=Cn(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Nn(e,t){null!=(t=t.checked)&&kn(e,"checked",t,!1)}function Tn(e,t){Nn(e,t);var n=Cn(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?Ln(e,t.type,n):t.hasOwnProperty("defaultValue")&&Ln(e,t.type,Cn(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function An(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!e.defaultChecked,e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function Ln(e,t,n){"number"===t&&e.ownerDocument.activeElement===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(xn,En);wn[t]=new yn(t,1,!1,e,null)}),"xlink:actuate xlink:arcrole xlink:href xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(xn,En);wn[t]=new yn(t,1,!1,e,"http://www.w3.org/1999/xlink")}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(xn,En);wn[t]=new yn(t,1,!1,e,"http://www.w3.org/XML/1998/namespace")}),["tabIndex","crossOrigin"].forEach(function(e){wn[e]=new yn(e,1,!1,e.toLowerCase(),null)});var Pn={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"blur change click focus input keydown keyup selectionchange".split(" ")}};function In(e,t,n){return(e=dt.getPooled(Pn.change,e,t,n)).type="change",Rt(n),Ye(e),e}var On=null,Mn=null;function Rn(e){De(e)}function Dn(e){if(Kt(He(e)))return e}function Fn(e,t){if("change"===e)return t}var Vn=!1;function jn(){On&&(On.detachEvent("onpropertychange",Bn),Mn=On=null)}function Bn(e){"value"===e.propertyName&&Dn(Mn)&&Ut(Rn,e=In(Mn,e,zt(e)))}function Un(e,t,n){"focus"===e?(jn(),Mn=n,(On=t).attachEvent("onpropertychange",Bn)):"blur"===e&&jn()}function Hn(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Dn(Mn)}function $n(e,t){if("click"===e)return Dn(t)}function zn(e,t){if("input"===e||"change"===e)return Dn(t)}Ze&&(Vn=Wt("input")&&(!document.documentMode||9<document.documentMode));var Wn={eventTypes:Pn,_isInputEventSupported:Vn,extractEvents:function(e,t,n,r){var i=t?He(t):window,s=void 0,a=void 0,o=i.nodeName&&i.nodeName.toLowerCase();if("select"===o||"input"===o&&"file"===i.type?s=Fn:$t(i)?Vn?s=zn:(s=Hn,a=Un):(o=i.nodeName)&&"input"===o.toLowerCase()&&("checkbox"===i.type||"radio"===i.type)&&(s=$n),s&&(s=s(e,t)))return In(s,n,r);a&&a(e,i,t),"blur"===e&&(e=i._wrapperState)&&e.controlled&&"number"===i.type&&Ln(i,"number",i.value)}},qn=dt.extend({view:null,detail:null}),Gn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Kn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Gn[e])&&!!t[e]}function Yn(){return Kn}var Zn=0,Qn=0,Xn=!1,Jn=!1,er=qn.extend({screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:Yn,button:null,buttons:null,relatedTarget:function(e){return e.relatedTarget||(e.fromElement===e.srcElement?e.toElement:e.fromElement)},movementX:function(e){if("movementX"in e)return e.movementX;var t=Zn;return Zn=e.screenX,Xn?"mousemove"===e.type?e.screenX-t:0:(Xn=!0,0)},movementY:function(e){if("movementY"in e)return e.movementY;var t=Qn;return Qn=e.screenY,Jn?"mousemove"===e.type?e.screenY-t:0:(Jn=!0,0)}}),tr=er.extend({pointerId:null,width:null,height:null,pressure:null,tangentialPressure:null,tiltX:null,tiltY:null,twist:null,pointerType:null,isPrimary:null}),nr={mouseEnter:{registrationName:"onMouseEnter",dependencies:["mouseout","mouseover"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["mouseout","mouseover"]},pointerEnter:{registrationName:"onPointerEnter",dependencies:["pointerout","pointerover"]},pointerLeave:{registrationName:"onPointerLeave",dependencies:["pointerout","pointerover"]}},rr={eventTypes:nr,extractEvents:function(e,t,n,r){var i="mouseover"===e||"pointerover"===e,s="mouseout"===e||"pointerout"===e;if(i&&(n.relatedTarget||n.fromElement)||!s&&!i)return null;if(i=r.window===r?r:(i=r.ownerDocument)?i.defaultView||i.parentWindow:window,s?(s=t,t=(t=n.relatedTarget||n.toElement)?Be(t):null):s=null,s===t)return null;var a=void 0,o=void 0,l=void 0,c=void 0;"mouseout"===e||"mouseover"===e?(a=er,o=nr.mouseLeave,l=nr.mouseEnter,c="mouse"):"pointerout"!==e&&"pointerover"!==e||(a=tr,o=nr.pointerLeave,l=nr.pointerEnter,c="pointer");var u=null==s?i:He(s);if(i=null==t?i:He(t),(e=a.getPooled(o,s,n,r)).type=c+"leave",e.target=u,e.relatedTarget=i,(n=a.getPooled(l,t,n,r)).type=c+"enter",n.target=i,n.relatedTarget=u,r=t,s&&r)e:{for(i=r,c=0,a=t=s;a;a=ze(a))c++;for(a=0,l=i;l;l=ze(l))a++;for(;0<c-a;)t=ze(t),c--;for(;0<a-c;)i=ze(i),a--;for(;c--;){if(t===i||t===i.alternate)break e;t=ze(t),i=ze(i)}t=null}else t=null;for(i=t,t=[];s&&s!==i&&(null===(c=s.alternate)||c!==i);)t.push(s),s=ze(s);for(s=[];r&&r!==i&&(null===(c=r.alternate)||c!==i);)s.push(r),r=ze(r);for(r=0;r<t.length;r++)Ge(t[r],"bubbled",e);for(r=s.length;0<r--;)Ge(s[r],"captured",n);return[e,n]}};function ir(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t}var sr=Object.prototype.hasOwnProperty;function ar(e,t){if(ir(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!sr.call(t,n[r])||!ir(e[n[r]],t[n[r]]))return!1;return!0}function or(e){var t=e;if(e.alternate)for(;t.return;)t=t.return;else{if(0!=(2&t.effectTag))return 1;for(;t.return;)if(0!=(2&(t=t.return).effectTag))return 1}return 3===t.tag?2:3}function lr(e){2!==or(e)&&he("188")}function cr(e){if(!(e=function(e){var t=e.alternate;if(!t)return 3===(t=or(e))&&he("188"),1===t?null:e;for(var n=e,r=t;;){var i=n.return,s=i?i.alternate:null;if(!i||!s)break;if(i.child===s.child){for(var a=i.child;a;){if(a===n)return lr(i),e;if(a===r)return lr(i),t;a=a.sibling}he("188")}if(n.return!==r.return)n=i,r=s;else{a=!1;for(var o=i.child;o;){if(o===n){a=!0,n=i,r=s;break}if(o===r){a=!0,r=i,n=s;break}o=o.sibling}if(!a){for(o=s.child;o;){if(o===n){a=!0,n=s,r=i;break}if(o===r){a=!0,r=s,n=i;break}o=o.sibling}a||he("189")}}n.alternate!==r&&he("190")}return 3!==n.tag&&he("188"),n.stateNode.current===n?e:t}(e)))return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}var ur=dt.extend({animationName:null,elapsedTime:null,pseudoElement:null}),hr=dt.extend({clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),pr=qn.extend({relatedTarget:null});function dr(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}var fr={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},mr={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},gr=qn.extend({key:function(e){if(e.key){var t=fr[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=dr(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?mr[e.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:Yn,charCode:function(e){return"keypress"===e.type?dr(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?dr(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),vr=er.extend({dataTransfer:null}),br=qn.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:Yn}),yr=dt.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),wr=er.extend({deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:null,deltaMode:null}),xr=[["abort","abort"],[nt,"animationEnd"],[rt,"animationIteration"],[it,"animationStart"],["canplay","canPlay"],["canplaythrough","canPlayThrough"],["drag","drag"],["dragenter","dragEnter"],["dragexit","dragExit"],["dragleave","dragLeave"],["dragover","dragOver"],["durationchange","durationChange"],["emptied","emptied"],["encrypted","encrypted"],["ended","ended"],["error","error"],["gotpointercapture","gotPointerCapture"],["load","load"],["loadeddata","loadedData"],["loadedmetadata","loadedMetadata"],["loadstart","loadStart"],["lostpointercapture","lostPointerCapture"],["mousemove","mouseMove"],["mouseout","mouseOut"],["mouseover","mouseOver"],["playing","playing"],["pointermove","pointerMove"],["pointerout","pointerOut"],["pointerover","pointerOver"],["progress","progress"],["scroll","scroll"],["seeking","seeking"],["stalled","stalled"],["suspend","suspend"],["timeupdate","timeUpdate"],["toggle","toggle"],["touchmove","touchMove"],[st,"transitionEnd"],["waiting","waiting"],["wheel","wheel"]],Er={},kr={};function Cr(e,t){var n=e[0],r="on"+((e=e[1])[0].toUpperCase()+e.slice(1));t={phasedRegistrationNames:{bubbled:r,captured:r+"Capture"},dependencies:[n],isInteractive:t},Er[e]=t,kr[n]=t}[["blur","blur"],["cancel","cancel"],["click","click"],["close","close"],["contextmenu","contextMenu"],["copy","copy"],["cut","cut"],["auxclick","auxClick"],["dblclick","doubleClick"],["dragend","dragEnd"],["dragstart","dragStart"],["drop","drop"],["focus","focus"],["input","input"],["invalid","invalid"],["keydown","keyDown"],["keypress","keyPress"],["keyup","keyUp"],["mousedown","mouseDown"],["mouseup","mouseUp"],["paste","paste"],["pause","pause"],["play","play"],["pointercancel","pointerCancel"],["pointerdown","pointerDown"],["pointerup","pointerUp"],["ratechange","rateChange"],["reset","reset"],["seeked","seeked"],["submit","submit"],["touchcancel","touchCancel"],["touchend","touchEnd"],["touchstart","touchStart"],["volumechange","volumeChange"]].forEach(function(e){Cr(e,!0)}),xr.forEach(function(e){Cr(e,!1)});var _r={eventTypes:Er,isInteractiveTopLevelEventType:function(e){return void 0!==(e=kr[e])&&!0===e.isInteractive},extractEvents:function(e,t,n,r){var i=kr[e];if(!i)return null;switch(e){case"keypress":if(0===dr(n))return null;case"keydown":case"keyup":e=gr;break;case"blur":case"focus":e=pr;break;case"click":if(2===n.button)return null;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":e=er;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":e=vr;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":e=br;break;case nt:case rt:case it:e=ur;break;case st:e=yr;break;case"scroll":e=qn;break;case"wheel":e=wr;break;case"copy":case"cut":case"paste":e=hr;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":e=tr;break;default:e=dt}return Ye(t=e.getPooled(i,t,n,r)),t}},Sr=_r.isInteractiveTopLevelEventType,Nr=[];function Tr(e){var t=e.targetInst,n=t;do{if(!n){e.ancestors.push(n);break}var r;for(r=n;r.return;)r=r.return;if(!(r=3!==r.tag?null:r.stateNode.containerInfo))break;e.ancestors.push(n),n=Be(r)}while(n);for(n=0;n<e.ancestors.length;n++){t=e.ancestors[n];var i=zt(e.nativeEvent);r=e.topLevelType;for(var s=e.nativeEvent,a=null,o=0;o<Ee.length;o++){var l=Ee[o];l&&(l=l.extractEvents(r,t,s,i))&&(a=Le(a,l))}De(a)}}var Ar=!0;function Lr(e,t){if(!t)return null;var n=(Sr(e)?Ir:Or).bind(null,e);t.addEventListener(e,n,!1)}function Pr(e,t){if(!t)return null;var n=(Sr(e)?Ir:Or).bind(null,e);t.addEventListener(e,n,!0)}function Ir(e,t){Vt(Or,e,t)}function Or(e,t){if(Ar){var n=zt(t);if(null===(n=Be(n))||"number"!=typeof n.tag||2===or(n)||(n=null),Nr.length){var r=Nr.pop();r.topLevelType=e,r.nativeEvent=t,r.targetInst=n,e=r}else e={topLevelType:e,nativeEvent:t,targetInst:n,ancestors:[]};try{Ut(Tr,e)}finally{e.topLevelType=null,e.nativeEvent=null,e.targetInst=null,e.ancestors.length=0,10>Nr.length&&Nr.push(e)}}}var Mr={},Rr=0,Dr="_reactListenersID"+(""+Math.random()).slice(2);function Fr(e){return Object.prototype.hasOwnProperty.call(e,Dr)||(e[Dr]=Rr++,Mr[e[Dr]]={}),Mr[e[Dr]]}function Vr(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function jr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Br(e,t){var n,r=jr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=jr(r)}}function Ur(){for(var e=window,t=Vr();t instanceof e.HTMLIFrameElement;){try{var n="string"==typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Vr((e=t.contentWindow).document)}return t}function Hr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function $r(e){var t=Ur(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&function e(t,n){return!(!t||!n)&&(t===n||(!t||3!==t.nodeType)&&(n&&3===n.nodeType?e(t,n.parentNode):"contains"in t?t.contains(n):!!t.compareDocumentPosition&&!!(16&t.compareDocumentPosition(n))))}(n.ownerDocument.documentElement,n)){if(null!==r&&Hr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=void 0===r.end?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=Br(n,s);var a=Br(n,r);i&&a&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"==typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var zr=Ze&&"documentMode"in document&&11>=document.documentMode,Wr={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:"blur contextmenu dragend focus keydown keyup mousedown mouseup selectionchange".split(" ")}},qr=null,Gr=null,Kr=null,Yr=!1;function Zr(e,t){var n=t.window===t?t.document:9===t.nodeType?t:t.ownerDocument;return Yr||null==qr||qr!==Vr(n)?null:("selectionStart"in(n=qr)&&Hr(n)?n={start:n.selectionStart,end:n.selectionEnd}:n={anchorNode:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset},Kr&&ar(Kr,n)?null:(Kr=n,(e=dt.getPooled(Wr.select,Gr,e,t)).type="select",e.target=qr,Ye(e),e))}var Qr={eventTypes:Wr,extractEvents:function(e,t,n,r){var i,s=r.window===r?r.document:9===r.nodeType?r:r.ownerDocument;if(!(i=!s)){e:{s=Fr(s),i=_e.onSelect;for(var a=0;a<i.length;a++){var o=i[a];if(!s.hasOwnProperty(o)||!s[o]){s=!1;break e}}s=!0}i=!s}if(i)return null;switch(s=t?He(t):window,e){case"focus":($t(s)||"true"===s.contentEditable)&&(qr=s,Gr=t,Kr=null);break;case"blur":Kr=Gr=qr=null;break;case"mousedown":Yr=!0;break;case"contextmenu":case"mouseup":case"dragend":return Yr=!1,Zr(n,r);case"selectionchange":if(zr)break;case"keydown":case"keyup":return Zr(n,r)}return null}};function Xr(e,t){return e=a({children:void 0},t),(t=function(e){var t="";return Y.Children.forEach(e,function(e){null!=e&&(t+=e)}),t}(t.children))&&(e.children=t),e}function Jr(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Cn(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function ei(e,t){return null!=t.dangerouslySetInnerHTML&&he("91"),a({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ti(e,t){var n=t.value;null==n&&(n=t.defaultValue,null!=(t=t.children)&&(null!=n&&he("92"),Array.isArray(t)&&(1>=t.length||he("93"),t=t[0]),n=t),null==n&&(n="")),e._wrapperState={initialValue:Cn(n)}}function ni(e,t){var n=Cn(t.value),r=Cn(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function ri(e){var t=e.textContent;t===e._wrapperState.initialValue&&(e.value=t)}Me.injectEventPluginOrder("ResponderEventPlugin SimpleEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" ")),Se=$e,Ne=Ue,Te=He,Me.injectEventPluginsByName({SimpleEventPlugin:_r,EnterLeaveEventPlugin:rr,ChangeEventPlugin:Wn,SelectEventPlugin:Qr,BeforeInputEventPlugin:Lt});var ii={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function si(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ai(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?si(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var oi=void 0,li=function(e){return"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n)})}:e}(function(e,t){if(e.namespaceURI!==ii.svg||"innerHTML"in e)e.innerHTML=t;else{for((oi=oi||document.createElement("div")).innerHTML="<svg>"+t+"</svg>",t=oi.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function ci(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var ui={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},hi=["Webkit","ms","Moz","O"];function pi(e,t,n){return null==t||"boolean"==typeof t||""===t?"":n||"number"!=typeof t||0===t||ui.hasOwnProperty(e)&&ui[e]?(""+t).trim():t+"px"}function di(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=pi(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(ui).forEach(function(e){hi.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ui[t]=ui[e]})});var fi=a({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function mi(e,t){t&&(fi[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML)&&he("137",e,""),null!=t.dangerouslySetInnerHTML&&(null!=t.children&&he("60"),"object"==typeof t.dangerouslySetInnerHTML&&"__html"in t.dangerouslySetInnerHTML||he("61")),null!=t.style&&"object"!=typeof t.style&&he("62",""))}function gi(e,t){if(-1===e.indexOf("-"))return"string"==typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function vi(e,t){var n=Fr(e=9===e.nodeType||11===e.nodeType?e:e.ownerDocument);t=_e[t];for(var r=0;r<t.length;r++){var i=t[r];if(!n.hasOwnProperty(i)||!n[i]){switch(i){case"scroll":Pr("scroll",e);break;case"focus":case"blur":Pr("focus",e),Pr("blur",e),n.blur=!0,n.focus=!0;break;case"cancel":case"close":Wt(i)&&Pr(i,e);break;case"invalid":case"submit":case"reset":break;default:-1===at.indexOf(i)&&Lr(i,e)}n[i]=!0}}}function bi(){}var yi=null,wi=null;function xi(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function Ei(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ki="function"==typeof setTimeout?setTimeout:void 0,Ci="function"==typeof clearTimeout?clearTimeout:void 0,_i=ue.unstable_scheduleCallback,Si=ue.unstable_cancelCallback;function Ni(e){for(e=e.nextSibling;e&&1!==e.nodeType&&3!==e.nodeType;)e=e.nextSibling;return e}function Ti(e){for(e=e.firstChild;e&&1!==e.nodeType&&3!==e.nodeType;)e=e.nextSibling;return e}var Ai=[],Li=-1;function Pi(e){0>Li||(e.current=Ai[Li],Ai[Li]=null,Li--)}function Ii(e,t){Ai[++Li]=e.current,e.current=t}var Oi={},Mi={current:Oi},Ri={current:!1},Di=Oi;function Fi(e,t){var n=e.type.contextTypes;if(!n)return Oi;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,s={};for(i in n)s[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Vi(e){return null!=(e=e.childContextTypes)}function ji(e){Pi(Ri),Pi(Mi)}function Bi(e){Pi(Ri),Pi(Mi)}function Ui(e,t,n){Mi.current!==Oi&&he("168"),Ii(Mi,t),Ii(Ri,n)}function Hi(e,t,n){var r=e.stateNode;if(e=t.childContextTypes,"function"!=typeof r.getChildContext)return n;for(var i in r=r.getChildContext())i in e||he("108",dn(t)||"Unknown",i);return a({},n,r)}function $i(e){var t=e.stateNode;return t=t&&t.__reactInternalMemoizedMergedChildContext||Oi,Di=Mi.current,Ii(Mi,t),Ii(Ri,Ri.current),!0}function zi(e,t,n){var r=e.stateNode;r||he("169"),n?(t=Hi(e,t,Di),r.__reactInternalMemoizedMergedChildContext=t,Pi(Ri),Pi(Mi),Ii(Mi,t)):Pi(Ri),Ii(Ri,n)}var Wi=null,qi=null;function Gi(e){return function(t){try{return e(t)}catch(n){}}}function Ki(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.contextDependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.effectTag=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childExpirationTime=this.expirationTime=0,this.alternate=null}function Yi(e,t,n,r){return new Ki(e,t,n,r)}function Zi(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Qi(e,t){var n=e.alternate;return null===n?((n=Yi(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.effectTag=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childExpirationTime=e.childExpirationTime,n.expirationTime=e.expirationTime,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,n.contextDependencies=e.contextDependencies,n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Xi(e,t,n,r,i,s){var a=2;if(r=e,"function"==typeof e)Zi(e)&&(a=1);else if("string"==typeof e)a=5;else e:switch(e){case en:return Ji(n.children,i,s,t);case an:return es(n,3|i,s,t);case tn:return es(n,2|i,s,t);case nn:return(e=Yi(12,n,t,4|i)).elementType=nn,e.type=nn,e.expirationTime=s,e;case ln:return(e=Yi(13,n,t,i)).elementType=ln,e.type=ln,e.expirationTime=s,e;default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case rn:a=10;break e;case sn:a=9;break e;case on:a=11;break e;case cn:a=14;break e;case un:a=16,r=null;break e}he("130",null==e?e:typeof e,"")}return(t=Yi(a,n,t,i)).elementType=e,t.type=r,t.expirationTime=s,t}function Ji(e,t,n,r){return(e=Yi(7,e,r,t)).expirationTime=n,e}function es(e,t,n,r){return e=Yi(8,e,r,t),t=0==(1&t)?tn:an,e.elementType=t,e.type=t,e.expirationTime=n,e}function ts(e,t,n){return(e=Yi(6,e,null,t)).expirationTime=n,e}function ns(e,t,n){return(t=Yi(4,null!==e.children?e.children:[],e.key,t)).expirationTime=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function rs(e,t){e.didError=!1;var n=e.earliestPendingTime;0===n?e.earliestPendingTime=e.latestPendingTime=t:n<t?e.earliestPendingTime=t:e.latestPendingTime>t&&(e.latestPendingTime=t),as(t,e)}function is(e,t){e.didError=!1,e.latestPingedTime>=t&&(e.latestPingedTime=0);var n=e.earliestPendingTime,r=e.latestPendingTime;n===t?e.earliestPendingTime=r===t?e.latestPendingTime=0:r:r===t&&(e.latestPendingTime=n),n=e.earliestSuspendedTime,r=e.latestSuspendedTime,0===n?e.earliestSuspendedTime=e.latestSuspendedTime=t:n<t?e.earliestSuspendedTime=t:r>t&&(e.latestSuspendedTime=t),as(t,e)}function ss(e,t){var n=e.earliestPendingTime;return n>t&&(t=n),(e=e.earliestSuspendedTime)>t&&(t=e),t}function as(e,t){var n=t.earliestSuspendedTime,r=t.latestSuspendedTime,i=t.earliestPendingTime,s=t.latestPingedTime;0===(i=0!==i?i:s)&&(0===e||r<e)&&(i=r),0!==(e=i)&&n>e&&(e=n),t.nextExpirationTimeToWorkOn=i,t.expirationTime=e}function os(e,t){if(e&&e.defaultProps)for(var n in t=a({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}var ls=(new Y.Component).refs;function cs(e,t,n,r){n=null==(n=n(r,t=e.memoizedState))?t:a({},t,n),e.memoizedState=n,null!==(r=e.updateQueue)&&0===e.expirationTime&&(r.baseState=n)}var us={isMounted:function(e){return!!(e=e._reactInternalFiber)&&2===or(e)},enqueueSetState:function(e,t,n){e=e._reactInternalFiber;var r=Nl(),i=eo(r=el(r,e));i.payload=t,null!=n&&(i.callback=n),Ko(),no(e,i),rl(e,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternalFiber;var r=Nl(),i=eo(r=el(r,e));i.tag=Ka,i.payload=t,null!=n&&(i.callback=n),Ko(),no(e,i),rl(e,r)},enqueueForceUpdate:function(e,t){e=e._reactInternalFiber;var n=Nl(),r=eo(n=el(n,e));r.tag=Ya,null!=t&&(r.callback=t),Ko(),no(e,r),rl(e,n)}};function hs(e,t,n,r,i,s,a){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,s,a):!t.prototype||!t.prototype.isPureReactComponent||(!ar(n,r)||!ar(i,s))}function ps(e,t,n){var r=!1,i=Oi,s=t.contextType;return"object"==typeof s&&null!==s?s=qa(s):(i=Vi(t)?Di:Mi.current,s=(r=null!=(r=t.contextTypes))?Fi(e,i):Oi),t=new t(n,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=us,e.stateNode=t,t._reactInternalFiber=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function ds(e,t,n,r){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&us.enqueueReplaceState(t,t.state,null)}function fs(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=ls;var s=t.contextType;"object"==typeof s&&null!==s?i.context=qa(s):(s=Vi(t)?Di:Mi.current,i.context=Fi(e,s)),null!==(s=e.updateQueue)&&(ao(e,s,n,i,r),i.state=e.memoizedState),"function"==typeof(s=t.getDerivedStateFromProps)&&(cs(e,t,s,n),i.state=e.memoizedState),"function"==typeof t.getDerivedStateFromProps||"function"==typeof i.getSnapshotBeforeUpdate||"function"!=typeof i.UNSAFE_componentWillMount&&"function"!=typeof i.componentWillMount||(t=i.state,"function"==typeof i.componentWillMount&&i.componentWillMount(),"function"==typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&us.enqueueReplaceState(i,i.state,null),null!==(s=e.updateQueue)&&(ao(e,s,n,i,r),i.state=e.memoizedState)),"function"==typeof i.componentDidMount&&(e.effectTag|=4)}var ms=Array.isArray;function gs(e,t,n){if(null!==(e=n.ref)&&"function"!=typeof e&&"object"!=typeof e){if(n._owner){n=n._owner;var r=void 0;n&&(1!==n.tag&&he("309"),r=n.stateNode),r||he("147",e);var i=""+e;return null!==t&&null!==t.ref&&"function"==typeof t.ref&&t.ref._stringRef===i?t.ref:((t=function(e){var t=r.refs;t===ls&&(t=r.refs={}),null===e?delete t[i]:t[i]=e})._stringRef=i,t)}"string"!=typeof e&&he("284"),n._owner||he("290",e)}return e}function vs(e,t){"textarea"!==e.type&&he("31","[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t,"")}function bs(e){function t(t,n){if(e){var r=t.lastEffect;null!==r?(r.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.effectTag=8}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t,n){return(e=Qi(e,t)).index=0,e.sibling=null,e}function s(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.effectTag=2,n):r:(t.effectTag=2,n):n}function a(t){return e&&null===t.alternate&&(t.effectTag=2),t}function o(e,t,n,r){return null===t||6!==t.tag?((t=ts(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function l(e,t,n,r){return null!==t&&t.elementType===n.type?((r=i(t,n.props)).ref=gs(e,t,n),r.return=e,r):((r=Xi(n.type,n.key,n.props,null,e.mode,r)).ref=gs(e,t,n),r.return=e,r)}function c(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=ns(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function u(e,t,n,r,s){return null===t||7!==t.tag?((t=Ji(n,e.mode,r,s)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"==typeof t||"number"==typeof t)return(t=ts(""+t,e.mode,n)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case Xt:return(n=Xi(t.type,t.key,t.props,null,e.mode,n)).ref=gs(e,null,t),n.return=e,n;case Jt:return(t=ns(t,e.mode,n)).return=e,t}if(ms(t)||pn(t))return(t=Ji(t,e.mode,n,null)).return=e,t;vs(e,t)}return null}function p(e,t,n,r){var i=null!==t?t.key:null;if("string"==typeof n||"number"==typeof n)return null!==i?null:o(e,t,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case Xt:return n.key===i?n.type===en?u(e,t,n.props.children,r,i):l(e,t,n,r):null;case Jt:return n.key===i?c(e,t,n,r):null}if(ms(n)||pn(n))return null!==i?null:u(e,t,n,r,null);vs(e,n)}return null}function d(e,t,n,r,i){if("string"==typeof r||"number"==typeof r)return o(t,e=e.get(n)||null,""+r,i);if("object"==typeof r&&null!==r){switch(r.$$typeof){case Xt:return e=e.get(null===r.key?n:r.key)||null,r.type===en?u(t,e,r.props.children,i,r.key):l(t,e,r,i);case Jt:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i)}if(ms(r)||pn(r))return u(t,e=e.get(n)||null,r,i,null);vs(t,r)}return null}function f(i,a,o,l){for(var c=null,u=null,f=a,m=a=0,g=null;null!==f&&m<o.length;m++){f.index>m?(g=f,f=null):g=f.sibling;var v=p(i,f,o[m],l);if(null===v){null===f&&(f=g);break}e&&f&&null===v.alternate&&t(i,f),a=s(v,a,m),null===u?c=v:u.sibling=v,u=v,f=g}if(m===o.length)return n(i,f),c;if(null===f){for(;m<o.length;m++)(f=h(i,o[m],l))&&(a=s(f,a,m),null===u?c=f:u.sibling=f,u=f);return c}for(f=r(i,f);m<o.length;m++)(g=d(f,i,m,o[m],l))&&(e&&null!==g.alternate&&f.delete(null===g.key?m:g.key),a=s(g,a,m),null===u?c=g:u.sibling=g,u=g);return e&&f.forEach(function(e){return t(i,e)}),c}function m(i,a,o,l){var c=pn(o);"function"!=typeof c&&he("150"),null==(o=c.call(o))&&he("151");for(var u=c=null,f=a,m=a=0,g=null,v=o.next();null!==f&&!v.done;m++,v=o.next()){f.index>m?(g=f,f=null):g=f.sibling;var b=p(i,f,v.value,l);if(null===b){f||(f=g);break}e&&f&&null===b.alternate&&t(i,f),a=s(b,a,m),null===u?c=b:u.sibling=b,u=b,f=g}if(v.done)return n(i,f),c;if(null===f){for(;!v.done;m++,v=o.next())null!==(v=h(i,v.value,l))&&(a=s(v,a,m),null===u?c=v:u.sibling=v,u=v);return c}for(f=r(i,f);!v.done;m++,v=o.next())null!==(v=d(f,i,m,v.value,l))&&(e&&null!==v.alternate&&f.delete(null===v.key?m:v.key),a=s(v,a,m),null===u?c=v:u.sibling=v,u=v);return e&&f.forEach(function(e){return t(i,e)}),c}return function(e,r,s,o){var l="object"==typeof s&&null!==s&&s.type===en&&null===s.key;l&&(s=s.props.children);var c="object"==typeof s&&null!==s;if(c)switch(s.$$typeof){case Xt:e:{for(c=s.key,l=r;null!==l;){if(l.key===c){if(7===l.tag?s.type===en:l.elementType===s.type){n(e,l.sibling),(r=i(l,s.type===en?s.props.children:s.props)).ref=gs(e,l,s),r.return=e,e=r;break e}n(e,l);break}t(e,l),l=l.sibling}s.type===en?((r=Ji(s.props.children,e.mode,o,s.key)).return=e,e=r):((o=Xi(s.type,s.key,s.props,null,e.mode,o)).ref=gs(e,r,s),o.return=e,e=o)}return a(e);case Jt:e:{for(l=s.key;null!==r;){if(r.key===l){if(4===r.tag&&r.stateNode.containerInfo===s.containerInfo&&r.stateNode.implementation===s.implementation){n(e,r.sibling),(r=i(r,s.children||[])).return=e,e=r;break e}n(e,r);break}t(e,r),r=r.sibling}(r=ns(s,e.mode,o)).return=e,e=r}return a(e)}if("string"==typeof s||"number"==typeof s)return s=""+s,null!==r&&6===r.tag?(n(e,r.sibling),(r=i(r,s)).return=e,e=r):(n(e,r),(r=ts(s,e.mode,o)).return=e,e=r),a(e);if(ms(s))return f(e,r,s,o);if(pn(s))return m(e,r,s,o);if(c&&vs(e,s),void 0===s&&!l)switch(e.tag){case 1:case 0:he("152",(o=e.type).displayName||o.name||"Component")}return n(e,r)}}var ys=bs(!0),ws=bs(!1),xs={},Es={current:xs},ks={current:xs},Cs={current:xs};function _s(e){return e===xs&&he("174"),e}function Ss(e,t){Ii(Cs,t),Ii(ks,e),Ii(Es,xs);var n=t.nodeType;switch(n){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ai(null,"");break;default:t=ai(t=(n=8===n?t.parentNode:t).namespaceURI||null,n=n.tagName)}Pi(Es),Ii(Es,t)}function Ns(e){Pi(Es),Pi(ks),Pi(Cs)}function Ts(e){_s(Cs.current);var t=_s(Es.current),n=ai(t,e.type);t!==n&&(Ii(ks,e),Ii(Es,n))}function As(e){ks.current===e&&(Pi(Es),Pi(ks))}var Ls=0,Ps=2,Is=4,Os=8,Ms=16,Rs=32,Ds=64,Fs=128,Vs=Yt.ReactCurrentDispatcher,js=0,Bs=null,Us=null,Hs=null,$s=null,zs=null,Ws=null,qs=0,Gs=null,Ks=0,Ys=!1,Zs=null,Qs=0;function Xs(){he("321")}function Js(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ir(e[n],t[n]))return!1;return!0}function ea(e,t,n,r,i,s){if(js=s,Bs=t,Hs=null!==e?e.memoizedState:null,Vs.current=null===Hs?da:fa,t=n(r,i),Ys){do{Ys=!1,Qs+=1,Hs=null!==e?e.memoizedState:null,Ws=$s,Gs=zs=Us=null,Vs.current=fa,t=n(r,i)}while(Ys);Zs=null,Qs=0}return Vs.current=pa,(e=Bs).memoizedState=$s,e.expirationTime=qs,e.updateQueue=Gs,e.effectTag|=Ks,e=null!==Us&&null!==Us.next,js=0,Ws=zs=$s=Hs=Us=Bs=null,qs=0,Gs=null,Ks=0,e&&he("300"),t}function ta(){Vs.current=pa,js=0,Ws=zs=$s=Hs=Us=Bs=null,qs=0,Gs=null,Ks=0,Ys=!1,Zs=null,Qs=0}function na(){var e={memoizedState:null,baseState:null,queue:null,baseUpdate:null,next:null};return null===zs?$s=zs=e:zs=zs.next=e,zs}function ra(){if(null!==Ws)Ws=(zs=Ws).next,Hs=null!==(Us=Hs)?Us.next:null;else{null===Hs&&he("310");var e={memoizedState:(Us=Hs).memoizedState,baseState:Us.baseState,queue:Us.queue,baseUpdate:Us.baseUpdate,next:null};zs=null===zs?$s=e:zs.next=e,Hs=Us.next}return zs}function ia(e,t){return"function"==typeof t?t(e):t}function sa(e){var t=ra(),n=t.queue;if(null===n&&he("311"),n.lastRenderedReducer=e,0<Qs){var r=n.dispatch;if(null!==Zs){var i=Zs.get(n);if(void 0!==i){Zs.delete(n);var s=t.memoizedState;do{s=e(s,i.action),i=i.next}while(null!==i);return ir(s,t.memoizedState)||(Sa=!0),t.memoizedState=s,t.baseUpdate===n.last&&(t.baseState=s),n.lastRenderedState=s,[s,r]}}return[t.memoizedState,r]}r=n.last;var a=t.baseUpdate;if(s=t.baseState,null!==a?(null!==r&&(r.next=null),r=a.next):r=null!==r?r.next:null,null!==r){var o=i=null,l=r,c=!1;do{var u=l.expirationTime;u<js?(c||(c=!0,o=a,i=s),u>qs&&(qs=u)):s=l.eagerReducer===e?l.eagerState:e(s,l.action),a=l,l=l.next}while(null!==l&&l!==r);c||(o=a,i=s),ir(s,t.memoizedState)||(Sa=!0),t.memoizedState=s,t.baseUpdate=o,t.baseState=i,n.lastRenderedState=s}return[t.memoizedState,n.dispatch]}function aa(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===Gs?(Gs={lastEffect:null}).lastEffect=e.next=e:null===(t=Gs.lastEffect)?Gs.lastEffect=e.next=e:(n=t.next,t.next=e,e.next=n,Gs.lastEffect=e),e}function oa(e,t,n,r){var i=na();Ks|=e,i.memoizedState=aa(t,n,void 0,void 0===r?null:r)}function la(e,t,n,r){var i=ra();r=void 0===r?null:r;var s=void 0;if(null!==Us){var a=Us.memoizedState;if(s=a.destroy,null!==r&&Js(r,a.deps))return void aa(Ls,n,s,r)}Ks|=e,i.memoizedState=aa(t,n,s,r)}function ca(e,t){return"function"==typeof t?(e=e(),t(e),function(){t(null)}):null!=t?(e=e(),t.current=e,function(){t.current=null}):void 0}function ua(){}function ha(e,t,n){25>Qs||he("301");var r=e.alternate;if(e===Bs||null!==r&&r===Bs)if(Ys=!0,e={expirationTime:js,action:n,eagerReducer:null,eagerState:null,next:null},null===Zs&&(Zs=new Map),void 0===(n=Zs.get(t)))Zs.set(t,e);else{for(t=n;null!==t.next;)t=t.next;t.next=e}else{Ko();var i=Nl(),s={expirationTime:i=el(i,e),action:n,eagerReducer:null,eagerState:null,next:null},a=t.last;if(null===a)s.next=s;else{var o=a.next;null!==o&&(s.next=o),a.next=s}if(t.last=s,0===e.expirationTime&&(null===r||0===r.expirationTime)&&null!==(r=t.lastRenderedReducer))try{var l=t.lastRenderedState,c=r(l,n);if(s.eagerReducer=r,s.eagerState=c,ir(c,l))return}catch(u){}rl(e,i)}}var pa={readContext:qa,useCallback:Xs,useContext:Xs,useEffect:Xs,useImperativeHandle:Xs,useLayoutEffect:Xs,useMemo:Xs,useReducer:Xs,useRef:Xs,useState:Xs,useDebugValue:Xs},da={readContext:qa,useCallback:function(e,t){return na().memoizedState=[e,void 0===t?null:t],e},useContext:qa,useEffect:function(e,t){return oa(516,Fs|Ds,e,t)},useImperativeHandle:function(e,t,n){return n=null!=n?n.concat([e]):null,oa(4,Is|Rs,ca.bind(null,t,e),n)},useLayoutEffect:function(e,t){return oa(4,Is|Rs,e,t)},useMemo:function(e,t){var n=na();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=na();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e=(e=r.queue={last:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=ha.bind(null,Bs,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},na().memoizedState=e},useState:function(e){var t=na();return"function"==typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={last:null,dispatch:null,lastRenderedReducer:ia,lastRenderedState:e}).dispatch=ha.bind(null,Bs,e),[t.memoizedState,e]},useDebugValue:ua},fa={readContext:qa,useCallback:function(e,t){var n=ra();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Js(t,r[1])?r[0]:(n.memoizedState=[e,t],e)},useContext:qa,useEffect:function(e,t){return la(516,Fs|Ds,e,t)},useImperativeHandle:function(e,t,n){return n=null!=n?n.concat([e]):null,la(4,Is|Rs,ca.bind(null,t,e),n)},useLayoutEffect:function(e,t){return la(4,Is|Rs,e,t)},useMemo:function(e,t){var n=ra();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Js(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)},useReducer:sa,useRef:function(){return ra().memoizedState},useState:function(e){return sa(ia)},useDebugValue:ua},ma=null,va=null,ba=!1;function ya(e,t){var n=Yi(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.effectTag=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function wa(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);case 13:default:return!1}}function xa(e){if(ba){var t=va;if(t){var n=t;if(!wa(e,t)){if(!(t=Ni(n))||!wa(e,t))return e.effectTag|=2,ba=!1,void(ma=e);ya(ma,n)}ma=e,va=Ti(t)}else e.effectTag|=2,ba=!1,ma=e}}function Ea(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&18!==e.tag;)e=e.return;ma=e}function ka(e){if(e!==ma)return!1;if(!ba)return Ea(e),ba=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!Ei(t,e.memoizedProps))for(t=va;t;)ya(e,t),t=Ni(t);return Ea(e),va=ma?Ni(e.stateNode):null,!0}function Ca(){va=ma=null,ba=!1}var _a=Yt.ReactCurrentOwner,Sa=!1;function Na(e,t,n,r){t.child=null===e?ws(t,null,n,r):ys(t,e.child,n,r)}function Ta(e,t,n,r,i){n=n.render;var s=t.ref;return Wa(t,i),r=ea(e,t,n,r,s,i),null===e||Sa?(t.effectTag|=1,Na(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.effectTag&=-517,e.expirationTime<=i&&(e.expirationTime=0),Fa(e,t,i))}function Aa(e,t,n,r,i,s){if(null===e){var a=n.type;return"function"!=typeof a||Zi(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Xi(n.type,null,r,null,t.mode,s)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,La(e,t,a,r,i,s))}return a=e.child,i<s&&(i=a.memoizedProps,(n=null!==(n=n.compare)?n:ar)(i,r)&&e.ref===t.ref)?Fa(e,t,s):(t.effectTag|=1,(e=Qi(a,r)).ref=t.ref,e.return=t,t.child=e)}function La(e,t,n,r,i,s){return null!==e&&ar(e.memoizedProps,r)&&e.ref===t.ref&&(Sa=!1,i<s)?Fa(e,t,s):Ia(e,t,n,r,s)}function Pa(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.effectTag|=128)}function Ia(e,t,n,r,i){var s=Vi(n)?Di:Mi.current;return s=Fi(t,s),Wa(t,i),n=ea(e,t,n,r,s,i),null===e||Sa?(t.effectTag|=1,Na(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.effectTag&=-517,e.expirationTime<=i&&(e.expirationTime=0),Fa(e,t,i))}function Oa(e,t,n,r,i){if(Vi(n)){var s=!0;$i(t)}else s=!1;if(Wa(t,i),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),ps(t,n,r),fs(t,n,r,i),r=!0;else if(null===e){var a=t.stateNode,o=t.memoizedProps;a.props=o;var l=a.context,c=n.contextType;"object"==typeof c&&null!==c?c=qa(c):c=Fi(t,c=Vi(n)?Di:Mi.current);var u=n.getDerivedStateFromProps,h="function"==typeof u||"function"==typeof a.getSnapshotBeforeUpdate;h||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||(o!==r||l!==c)&&ds(t,a,r,c),Qa=!1;var p=t.memoizedState;l=a.state=p;var d=t.updateQueue;null!==d&&(ao(t,d,r,a,i),l=t.memoizedState),o!==r||p!==l||Ri.current||Qa?("function"==typeof u&&(cs(t,n,u,r),l=t.memoizedState),(o=Qa||hs(t,n,o,r,p,l,c))?(h||"function"!=typeof a.UNSAFE_componentWillMount&&"function"!=typeof a.componentWillMount||("function"==typeof a.componentWillMount&&a.componentWillMount(),"function"==typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"==typeof a.componentDidMount&&(t.effectTag|=4)):("function"==typeof a.componentDidMount&&(t.effectTag|=4),t.memoizedProps=r,t.memoizedState=l),a.props=r,a.state=l,a.context=c,r=o):("function"==typeof a.componentDidMount&&(t.effectTag|=4),r=!1)}else a=t.stateNode,o=t.memoizedProps,a.props=t.type===t.elementType?o:os(t.type,o),l=a.context,"object"==typeof(c=n.contextType)&&null!==c?c=qa(c):c=Fi(t,c=Vi(n)?Di:Mi.current),(h="function"==typeof(u=n.getDerivedStateFromProps)||"function"==typeof a.getSnapshotBeforeUpdate)||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||(o!==r||l!==c)&&ds(t,a,r,c),Qa=!1,l=t.memoizedState,p=a.state=l,null!==(d=t.updateQueue)&&(ao(t,d,r,a,i),p=t.memoizedState),o!==r||l!==p||Ri.current||Qa?("function"==typeof u&&(cs(t,n,u,r),p=t.memoizedState),(u=Qa||hs(t,n,o,r,l,p,c))?(h||"function"!=typeof a.UNSAFE_componentWillUpdate&&"function"!=typeof a.componentWillUpdate||("function"==typeof a.componentWillUpdate&&a.componentWillUpdate(r,p,c),"function"==typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,p,c)),"function"==typeof a.componentDidUpdate&&(t.effectTag|=4),"function"==typeof a.getSnapshotBeforeUpdate&&(t.effectTag|=256)):("function"!=typeof a.componentDidUpdate||o===e.memoizedProps&&l===e.memoizedState||(t.effectTag|=4),"function"!=typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&l===e.memoizedState||(t.effectTag|=256),t.memoizedProps=r,t.memoizedState=p),a.props=r,a.state=p,a.context=c,r=u):("function"!=typeof a.componentDidUpdate||o===e.memoizedProps&&l===e.memoizedState||(t.effectTag|=4),"function"!=typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&l===e.memoizedState||(t.effectTag|=256),r=!1);return Ma(e,t,n,r,s,i)}function Ma(e,t,n,r,i,s){Pa(e,t);var a=0!=(64&t.effectTag);if(!r&&!a)return i&&zi(t,n,!1),Fa(e,t,s);r=t.stateNode,_a.current=t;var o=a&&"function"!=typeof n.getDerivedStateFromError?null:r.render();return t.effectTag|=1,null!==e&&a?(t.child=ys(t,e.child,null,s),t.child=ys(t,null,o,s)):Na(e,t,o,s),t.memoizedState=r.state,i&&zi(t,n,!0),t.child}function Ra(e){var t=e.stateNode;t.pendingContext?Ui(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Ui(0,t.context,!1),Ss(e,t.containerInfo)}function Da(e,t,n){var r=t.mode,i=t.pendingProps,s=t.memoizedState;if(0==(64&t.effectTag)){s=null;var a=!1}else s={timedOutAt:null!==s?s.timedOutAt:0},a=!0,t.effectTag&=-65;if(null===e)if(a){var o=i.fallback;e=Ji(null,r,0,null),0==(1&t.mode)&&(e.child=null!==t.memoizedState?t.child.child:t.child),r=Ji(o,r,n,null),e.sibling=r,(n=e).return=r.return=t}else n=r=ws(t,null,i.children,n);else null!==e.memoizedState?(o=(r=e.child).sibling,a?(n=i.fallback,i=Qi(r,r.pendingProps),0==(1&t.mode)&&((a=null!==t.memoizedState?t.child.child:t.child)!==r.child&&(i.child=a)),r=i.sibling=Qi(o,n,o.expirationTime),n=i,i.childExpirationTime=0,n.return=r.return=t):n=r=ys(t,r.child,i.children,n)):(o=e.child,a?(a=i.fallback,(i=Ji(null,r,0,null)).child=o,0==(1&t.mode)&&(i.child=null!==t.memoizedState?t.child.child:t.child),(r=i.sibling=Ji(a,r,n,null)).effectTag|=2,n=i,i.childExpirationTime=0,n.return=r.return=t):r=n=ys(t,o,i.children,n)),t.stateNode=e.stateNode;return t.memoizedState=s,t.child=n,r}function Fa(e,t,n){if(null!==e&&(t.contextDependencies=e.contextDependencies),t.childExpirationTime<n)return null;if(null!==e&&t.child!==e.child&&he("153"),null!==t.child){for(n=Qi(e=t.child,e.pendingProps,e.expirationTime),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Qi(e,e.pendingProps,e.expirationTime)).return=t;n.sibling=null}return t.child}function Va(e,t,n){var r=t.expirationTime;if(null!==e){if(e.memoizedProps!==t.pendingProps||Ri.current)Sa=!0;else if(r<n){switch(Sa=!1,t.tag){case 3:Ra(t),Ca();break;case 5:Ts(t);break;case 1:Vi(t.type)&&$i(t);break;case 4:Ss(t,t.stateNode.containerInfo);break;case 10:$a(t,t.memoizedProps.value);break;case 13:if(null!==t.memoizedState)return 0!==(r=t.child.childExpirationTime)&&r>=n?Da(e,t,n):null!==(t=Fa(e,t,n))?t.sibling:null}return Fa(e,t,n)}}else Sa=!1;switch(t.expirationTime=0,t.tag){case 2:r=t.elementType,null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),e=t.pendingProps;var i=Fi(t,Mi.current);if(Wa(t,n),i=ea(null,t,r,e,i,n),t.effectTag|=1,"object"==typeof i&&null!==i&&"function"==typeof i.render&&void 0===i.$$typeof){if(t.tag=1,ta(),Vi(r)){var s=!0;$i(t)}else s=!1;t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null;var a=r.getDerivedStateFromProps;"function"==typeof a&&cs(t,r,a,e),i.updater=us,t.stateNode=i,i._reactInternalFiber=t,fs(t,r,e,n),t=Ma(null,t,r,!0,s,n)}else t.tag=0,Na(null,t,i,n),t=t.child;return t;case 16:switch(i=t.elementType,null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),s=t.pendingProps,e=function(e){var t=e._result;switch(e._status){case 1:return t;case 2:case 0:throw t;default:switch(e._status=0,(t=(t=e._ctor)()).then(function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)},function(t){0===e._status&&(e._status=2,e._result=t)}),e._status){case 1:return e._result;case 2:throw e._result}throw e._result=t,t}}(i),t.type=e,i=t.tag=function(e){if("function"==typeof e)return Zi(e)?1:0;if(null!=e){if((e=e.$$typeof)===on)return 11;if(e===cn)return 14}return 2}(e),s=os(e,s),a=void 0,i){case 0:a=Ia(null,t,e,s,n);break;case 1:a=Oa(null,t,e,s,n);break;case 11:a=Ta(null,t,e,s,n);break;case 14:a=Aa(null,t,e,os(e.type,s),r,n);break;default:he("306",e,"")}return a;case 0:return r=t.type,i=t.pendingProps,Ia(e,t,r,i=t.elementType===r?i:os(r,i),n);case 1:return r=t.type,i=t.pendingProps,Oa(e,t,r,i=t.elementType===r?i:os(r,i),n);case 3:return Ra(t),null===(r=t.updateQueue)&&he("282"),i=null!==(i=t.memoizedState)?i.element:null,ao(t,r,t.pendingProps,null,n),(r=t.memoizedState.element)===i?(Ca(),t=Fa(e,t,n)):(i=t.stateNode,(i=(null===e||null===e.child)&&i.hydrate)&&(va=Ti(t.stateNode.containerInfo),ma=t,i=ba=!0),i?(t.effectTag|=2,t.child=ws(t,null,r,n)):(Na(e,t,r,n),Ca()),t=t.child),t;case 5:return Ts(t),null===e&&xa(t),r=t.type,i=t.pendingProps,s=null!==e?e.memoizedProps:null,a=i.children,Ei(r,i)?a=null:null!==s&&Ei(r,s)&&(t.effectTag|=16),Pa(e,t),1!==n&&1&t.mode&&i.hidden?(t.expirationTime=t.childExpirationTime=1,t=null):(Na(e,t,a,n),t=t.child),t;case 6:return null===e&&xa(t),null;case 13:return Da(e,t,n);case 4:return Ss(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=ys(t,null,r,n):Na(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,Ta(e,t,r,i=t.elementType===r?i:os(r,i),n);case 7:return Na(e,t,t.pendingProps,n),t.child;case 8:case 12:return Na(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,a=t.memoizedProps,$a(t,s=i.value),null!==a){var o=a.value;if(0===(s=ir(o,s)?0:0|("function"==typeof r._calculateChangedBits?r._calculateChangedBits(o,s):1073741823))){if(a.children===i.children&&!Ri.current){t=Fa(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var l=o.contextDependencies;if(null!==l){a=o.child;for(var c=l.first;null!==c;){if(c.context===r&&0!=(c.observedBits&s)){1===o.tag&&((c=eo(n)).tag=Ya,no(o,c)),o.expirationTime<n&&(o.expirationTime=n),null!==(c=o.alternate)&&c.expirationTime<n&&(c.expirationTime=n),c=n;for(var u=o.return;null!==u;){var h=u.alternate;if(u.childExpirationTime<c)u.childExpirationTime=c,null!==h&&h.childExpirationTime<c&&(h.childExpirationTime=c);else{if(!(null!==h&&h.childExpirationTime<c))break;h.childExpirationTime=c}u=u.return}l.expirationTime<n&&(l.expirationTime=n);break}c=c.next}}else a=10===o.tag&&o.type===t.type?null:o.child;if(null!==a)a.return=o;else for(a=o;null!==a;){if(a===t){a=null;break}if(null!==(o=a.sibling)){o.return=a.return,a=o;break}a=a.return}o=a}}Na(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=(s=t.pendingProps).children,Wa(t,n),r=r(i=qa(i,s.unstable_observedBits)),t.effectTag|=1,Na(e,t,r,n),t.child;case 14:return s=os(i=t.type,t.pendingProps),Aa(e,t,i,s=os(i.type,s),r,n);case 15:return La(e,t,t.type,t.pendingProps,r,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:os(r,i),null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),t.tag=1,Vi(r)?(e=!0,$i(t)):e=!1,Wa(t,n),ps(t,r,i),fs(t,r,i,n),Ma(null,t,r,!0,e,n)}he("156")}var ja={current:null},Ba=null,Ua=null,Ha=null;function $a(e,t){var n=e.type._context;Ii(ja,n._currentValue),n._currentValue=t}function za(e){var t=ja.current;Pi(ja),e.type._context._currentValue=t}function Wa(e,t){Ba=e,Ha=Ua=null;var n=e.contextDependencies;null!==n&&n.expirationTime>=t&&(Sa=!0),e.contextDependencies=null}function qa(e,t){return Ha!==e&&!1!==t&&0!==t&&("number"==typeof t&&1073741823!==t||(Ha=e,t=1073741823),t={context:e,observedBits:t,next:null},null===Ua?(null===Ba&&he("308"),Ua=t,Ba.contextDependencies={first:t,expirationTime:0}):Ua=Ua.next=t),e._currentValue}var Ga=0,Ka=1,Ya=2,Za=3,Qa=!1;function Xa(e){return{baseState:e,firstUpdate:null,lastUpdate:null,firstCapturedUpdate:null,lastCapturedUpdate:null,firstEffect:null,lastEffect:null,firstCapturedEffect:null,lastCapturedEffect:null}}function Ja(e){return{baseState:e.baseState,firstUpdate:e.firstUpdate,lastUpdate:e.lastUpdate,firstCapturedUpdate:null,lastCapturedUpdate:null,firstEffect:null,lastEffect:null,firstCapturedEffect:null,lastCapturedEffect:null}}function eo(e){return{expirationTime:e,tag:Ga,payload:null,callback:null,next:null,nextEffect:null}}function to(e,t){null===e.lastUpdate?e.firstUpdate=e.lastUpdate=t:(e.lastUpdate.next=t,e.lastUpdate=t)}function no(e,t){var n=e.alternate;if(null===n){var r=e.updateQueue,i=null;null===r&&(r=e.updateQueue=Xa(e.memoizedState))}else r=e.updateQueue,i=n.updateQueue,null===r?null===i?(r=e.updateQueue=Xa(e.memoizedState),i=n.updateQueue=Xa(n.memoizedState)):r=e.updateQueue=Ja(i):null===i&&(i=n.updateQueue=Ja(r));null===i||r===i?to(r,t):null===r.lastUpdate||null===i.lastUpdate?(to(r,t),to(i,t)):(to(r,t),i.lastUpdate=t)}function ro(e,t){var n=e.updateQueue;null===(n=null===n?e.updateQueue=Xa(e.memoizedState):io(e,n)).lastCapturedUpdate?n.firstCapturedUpdate=n.lastCapturedUpdate=t:(n.lastCapturedUpdate.next=t,n.lastCapturedUpdate=t)}function io(e,t){var n=e.alternate;return null!==n&&t===n.updateQueue&&(t=e.updateQueue=Ja(t)),t}function so(e,t,n,r,i,s){switch(n.tag){case Ka:return"function"==typeof(e=n.payload)?e.call(s,r,i):e;case Za:e.effectTag=-2049&e.effectTag|64;case Ga:if(null==(i="function"==typeof(e=n.payload)?e.call(s,r,i):e))break;return a({},r,i);case Ya:Qa=!0}return r}function ao(e,t,n,r,i){Qa=!1;for(var s=(t=io(e,t)).baseState,a=null,o=0,l=t.firstUpdate,c=s;null!==l;){var u=l.expirationTime;u<i?(null===a&&(a=l,s=c),o<u&&(o=u)):(c=so(e,0,l,c,n,r),null!==l.callback&&(e.effectTag|=32,l.nextEffect=null,null===t.lastEffect?t.firstEffect=t.lastEffect=l:(t.lastEffect.nextEffect=l,t.lastEffect=l))),l=l.next}for(u=null,l=t.firstCapturedUpdate;null!==l;){var h=l.expirationTime;h<i?(null===u&&(u=l,null===a&&(s=c)),o<h&&(o=h)):(c=so(e,0,l,c,n,r),null!==l.callback&&(e.effectTag|=32,l.nextEffect=null,null===t.lastCapturedEffect?t.firstCapturedEffect=t.lastCapturedEffect=l:(t.lastCapturedEffect.nextEffect=l,t.lastCapturedEffect=l))),l=l.next}null===a&&(t.lastUpdate=null),null===u?t.lastCapturedUpdate=null:e.effectTag|=32,null===a&&null===u&&(s=c),t.baseState=s,t.firstUpdate=a,t.firstCapturedUpdate=u,e.expirationTime=o,e.memoizedState=c}function oo(e,t,n){null!==t.firstCapturedUpdate&&(null!==t.lastUpdate&&(t.lastUpdate.next=t.firstCapturedUpdate,t.lastUpdate=t.lastCapturedUpdate),t.firstCapturedUpdate=t.lastCapturedUpdate=null),lo(t.firstEffect,n),t.firstEffect=t.lastEffect=null,lo(t.firstCapturedEffect,n),t.firstCapturedEffect=t.lastCapturedEffect=null}function lo(e,t){for(;null!==e;){var n=e.callback;if(null!==n){e.callback=null;var r=t;"function"!=typeof n&&he("191",n),n.call(r)}e=e.nextEffect}}function co(e,t){return{value:e,source:t,stack:fn(t)}}function uo(e){e.effectTag|=4}var ho=void 0,po=void 0,fo=void 0,mo=void 0;ho=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},po=function(){},fo=function(e,t,n,r,i){var s=e.memoizedProps;if(s!==r){var o=t.stateNode;switch(_s(Es.current),e=null,n){case"input":s=_n(o,s),r=_n(o,r),e=[];break;case"option":s=Xr(o,s),r=Xr(o,r),e=[];break;case"select":s=a({},s,{value:void 0}),r=a({},r,{value:void 0}),e=[];break;case"textarea":s=ei(o,s),r=ei(o,r),e=[];break;default:"function"!=typeof s.onClick&&"function"==typeof r.onClick&&(o.onclick=bi)}mi(n,r),o=n=void 0;var l=null;for(n in s)if(!r.hasOwnProperty(n)&&s.hasOwnProperty(n)&&null!=s[n])if("style"===n){var c=s[n];for(o in c)c.hasOwnProperty(o)&&(l||(l={}),l[o]="")}else"dangerouslySetInnerHTML"!==n&&"children"!==n&&"suppressContentEditableWarning"!==n&&"suppressHydrationWarning"!==n&&"autoFocus"!==n&&(Ce.hasOwnProperty(n)?e||(e=[]):(e=e||[]).push(n,null));for(n in r){var u=r[n];if(c=null!=s?s[n]:void 0,r.hasOwnProperty(n)&&u!==c&&(null!=u||null!=c))if("style"===n)if(c){for(o in c)!c.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(l||(l={}),l[o]="");for(o in u)u.hasOwnProperty(o)&&c[o]!==u[o]&&(l||(l={}),l[o]=u[o])}else l||(e||(e=[]),e.push(n,l)),l=u;else"dangerouslySetInnerHTML"===n?(u=u?u.__html:void 0,c=c?c.__html:void 0,null!=u&&c!==u&&(e=e||[]).push(n,""+u)):"children"===n?c===u||"string"!=typeof u&&"number"!=typeof u||(e=e||[]).push(n,""+u):"suppressContentEditableWarning"!==n&&"suppressHydrationWarning"!==n&&(Ce.hasOwnProperty(n)?(null!=u&&vi(i,n),e||c===u||(e=[])):(e=e||[]).push(n,u))}l&&(e=e||[]).push("style",l),i=e,(t.updateQueue=i)&&uo(t)}},mo=function(e,t,n,r){n!==r&&uo(t)};var go="function"==typeof WeakSet?WeakSet:Set;function vo(e,t){var n=t.source,r=t.stack;null===r&&null!==n&&(r=fn(n)),null!==n&&dn(n.type),t=t.value,null!==e&&1===e.tag&&dn(e.type);try{console.error(t)}catch(i){setTimeout(function(){throw i})}}function bo(e){var t=e.ref;if(null!==t)if("function"==typeof t)try{t(null)}catch(n){Jo(e,n)}else t.current=null}function yo(e,t,n){if(null!==(n=null!==(n=n.updateQueue)?n.lastEffect:null)){var r=n=n.next;do{if((r.tag&e)!==Ls){var i=r.destroy;r.destroy=void 0,void 0!==i&&i()}(r.tag&t)!==Ls&&(i=r.create,r.destroy=i()),r=r.next}while(r!==n)}}function wo(e){switch("function"==typeof qi&&qi(e),e.tag){case 0:case 11:case 14:case 15:var t=e.updateQueue;if(null!==t&&null!==(t=t.lastEffect)){var n=t=t.next;do{var r=n.destroy;if(void 0!==r){var i=e;try{r()}catch(s){Jo(i,s)}}n=n.next}while(n!==t)}break;case 1:if(bo(e),"function"==typeof(t=e.stateNode).componentWillUnmount)try{t.props=e.memoizedProps,t.state=e.memoizedState,t.componentWillUnmount()}catch(s){Jo(e,s)}break;case 5:bo(e);break;case 4:ko(e)}}function xo(e){return 5===e.tag||3===e.tag||4===e.tag}function Eo(e){e:{for(var t=e.return;null!==t;){if(xo(t)){var n=t;break e}t=t.return}he("160"),n=void 0}var r=t=void 0;switch(n.tag){case 5:t=n.stateNode,r=!1;break;case 3:case 4:t=n.stateNode.containerInfo,r=!0;break;default:he("161")}16&n.effectTag&&(ci(t,""),n.effectTag&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||xo(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.effectTag)continue t;if(null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.effectTag)){n=n.stateNode;break e}}for(var i=e;;){if(5===i.tag||6===i.tag)if(n)if(r){var s=t,a=i.stateNode,o=n;8===s.nodeType?s.parentNode.insertBefore(a,o):s.insertBefore(a,o)}else t.insertBefore(i.stateNode,n);else r?(a=t,o=i.stateNode,8===a.nodeType?(s=a.parentNode).insertBefore(o,a):(s=a).appendChild(o),null!=(a=a._reactRootContainer)||null!==s.onclick||(s.onclick=bi)):t.appendChild(i.stateNode);else if(4!==i.tag&&null!==i.child){i.child.return=i,i=i.child;continue}if(i===e)break;for(;null===i.sibling;){if(null===i.return||i.return===e)return;i=i.return}i.sibling.return=i.return,i=i.sibling}}function ko(e){for(var t=e,n=!1,r=void 0,i=void 0;;){if(!n){n=t.return;e:for(;;){switch(null===n&&he("160"),n.tag){case 5:r=n.stateNode,i=!1;break e;case 3:case 4:r=n.stateNode.containerInfo,i=!0;break e}n=n.return}n=!0}if(5===t.tag||6===t.tag){e:for(var s=t,a=s;;)if(wo(a),null!==a.child&&4!==a.tag)a.child.return=a,a=a.child;else{if(a===s)break;for(;null===a.sibling;){if(null===a.return||a.return===s)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}i?(s=r,a=t.stateNode,8===s.nodeType?s.parentNode.removeChild(a):s.removeChild(a)):r.removeChild(t.stateNode)}else if(4===t.tag){if(null!==t.child){r=t.stateNode.containerInfo,i=!0,t.child.return=t,t=t.child;continue}}else if(wo(t),null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return;4===(t=t.return).tag&&(n=!1)}t.sibling.return=t.return,t=t.sibling}}function Co(e,t){switch(t.tag){case 0:case 11:case 14:case 15:yo(Is,Os,t);break;case 1:break;case 5:var n=t.stateNode;if(null!=n){var r=t.memoizedProps;e=null!==e?e.memoizedProps:r;var i=t.type,s=t.updateQueue;t.updateQueue=null,null!==s&&function(e,t,n,r,i){e[je]=i,"input"===n&&"radio"===i.type&&null!=i.name&&Nn(e,i),gi(n,r),r=gi(n,i);for(var s=0;s<t.length;s+=2){var a=t[s],o=t[s+1];"style"===a?di(e,o):"dangerouslySetInnerHTML"===a?li(e,o):"children"===a?ci(e,o):kn(e,a,o,r)}switch(n){case"input":Tn(e,i);break;case"textarea":ni(e,i);break;case"select":t=e._wrapperState.wasMultiple,e._wrapperState.wasMultiple=!!i.multiple,null!=(n=i.value)?Jr(e,!!i.multiple,n,!1):t!==!!i.multiple&&(null!=i.defaultValue?Jr(e,!!i.multiple,i.defaultValue,!0):Jr(e,!!i.multiple,i.multiple?[]:"",!1))}}(n,s,i,e,r)}break;case 6:null===t.stateNode&&he("162"),t.stateNode.nodeValue=t.memoizedProps;break;case 3:case 12:break;case 13:if(n=t.memoizedState,r=void 0,e=t,null===n?r=!1:(r=!0,e=t.child,0===n.timedOutAt&&(n.timedOutAt=Nl())),null!==e&&function(e,t){for(var n=e;;){if(5===n.tag){var r=n.stateNode;if(t)r.style.display="none";else{r=n.stateNode;var i=n.memoizedProps.style;i=null!=i&&i.hasOwnProperty("display")?i.display:null,r.style.display=pi("display",i)}}else if(6===n.tag)n.stateNode.nodeValue=t?"":n.memoizedProps;else{if(13===n.tag&&null!==n.memoizedState){(r=n.child.sibling).return=n,n=r;continue}if(null!==n.child){n.child.return=n,n=n.child;continue}}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}}(e,r),null!==(n=t.updateQueue)){t.updateQueue=null;var a=t.stateNode;null===a&&(a=t.stateNode=new go),n.forEach(function(e){var n=function(e,t){var n=e.stateNode;null!==n&&n.delete(t),t=el(t=Nl(),e),null!==(e=nl(e,t))&&(rs(e,t),0!==(t=e.expirationTime)&&Tl(e,t))}.bind(null,t,e);a.has(e)||(a.add(e),e.then(n,n))})}break;case 17:break;default:he("163")}}var _o="function"==typeof WeakMap?WeakMap:Map;function So(e,t,n){(n=eo(n)).tag=Za,n.payload={element:null};var r=t.value;return n.callback=function(){Fl(r),vo(e,t)},n}function No(e,t,n){(n=eo(n)).tag=Za;var r=e.type.getDerivedStateFromError;if("function"==typeof r){var i=t.value;n.payload=function(){return r(i)}}var s=e.stateNode;return null!==s&&"function"==typeof s.componentDidCatch&&(n.callback=function(){"function"!=typeof r&&(null===$o?$o=new Set([this]):$o.add(this));var n=t.value,i=t.stack;vo(e,t),this.componentDidCatch(n,{componentStack:null!==i?i:""})}),n}function To(e){switch(e.tag){case 1:Vi(e.type)&&ji();var t=e.effectTag;return 2048&t?(e.effectTag=-2049&t|64,e):null;case 3:return Ns(),Bi(),0!=(64&(t=e.effectTag))&&he("285"),e.effectTag=-2049&t|64,e;case 5:return As(e),null;case 13:return 2048&(t=e.effectTag)?(e.effectTag=-2049&t|64,e):null;case 18:return null;case 4:return Ns(),null;case 10:return za(e),null;default:return null}}var Ao=Yt.ReactCurrentDispatcher,Lo=Yt.ReactCurrentOwner,Po=1073741822,Io=!1,Oo=null,Mo=null,Ro=0,Do=-1,Fo=!1,Vo=null,jo=!1,Bo=null,Uo=null,Ho=null,$o=null;function zo(){if(null!==Oo)for(var e=Oo.return;null!==e;){var t=e;switch(t.tag){case 1:var n=t.type.childContextTypes;null!=n&&ji();break;case 3:Ns(),Bi();break;case 5:As(t);break;case 4:Ns();break;case 10:za(t)}e=e.return}Mo=null,Ro=0,Do=-1,Fo=!1,Oo=null}function Wo(){for(;null!==Vo;){var e=Vo.effectTag;if(16&e&&ci(Vo.stateNode,""),128&e){var t=Vo.alternate;null!==t&&(null!==(t=t.ref)&&("function"==typeof t?t(null):t.current=null))}switch(14&e){case 2:Eo(Vo),Vo.effectTag&=-3;break;case 6:Eo(Vo),Vo.effectTag&=-3,Co(Vo.alternate,Vo);break;case 4:Co(Vo.alternate,Vo);break;case 8:ko(e=Vo),e.return=null,e.child=null,e.memoizedState=null,e.updateQueue=null,null!==(e=e.alternate)&&(e.return=null,e.child=null,e.memoizedState=null,e.updateQueue=null)}Vo=Vo.nextEffect}}function qo(){for(;null!==Vo;){if(256&Vo.effectTag)e:{var e=Vo.alternate,t=Vo;switch(t.tag){case 0:case 11:case 15:yo(Ps,Ls,t);break e;case 1:if(256&t.effectTag&&null!==e){var n=e.memoizedProps,r=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?n:os(t.type,n),r),e.__reactInternalSnapshotBeforeUpdate=t}break e;case 3:case 5:case 6:case 4:case 17:break e;default:he("163")}}Vo=Vo.nextEffect}}function Go(e,t){for(;null!==Vo;){var n=Vo.effectTag;if(36&n){var r=Vo.alternate,i=Vo,s=t;switch(i.tag){case 0:case 11:case 15:yo(Ms,Rs,i);break;case 1:var a=i.stateNode;if(4&i.effectTag)if(null===r)a.componentDidMount();else{var o=i.elementType===i.type?r.memoizedProps:os(i.type,r.memoizedProps);a.componentDidUpdate(o,r.memoizedState,a.__reactInternalSnapshotBeforeUpdate)}null!==(r=i.updateQueue)&&oo(0,r,a);break;case 3:if(null!==(r=i.updateQueue)){if(a=null,null!==i.child)switch(i.child.tag){case 5:a=i.child.stateNode;break;case 1:a=i.child.stateNode}oo(0,r,a)}break;case 5:s=i.stateNode,null===r&&4&i.effectTag&&xi(i.type,i.memoizedProps)&&s.focus();break;case 6:case 4:case 12:case 13:case 17:break;default:he("163")}}128&n&&(null!==(i=Vo.ref)&&(s=Vo.stateNode,"function"==typeof i?i(s):i.current=s)),512&n&&(Bo=e),Vo=Vo.nextEffect}}function Ko(){null!==Uo&&Si(Uo),null!==Ho&&Ho()}function Yo(e,t){jo=Io=!0,e.current===t&&he("177");var n=e.pendingCommitExpirationTime;0===n&&he("261"),e.pendingCommitExpirationTime=0;var r=t.expirationTime,i=t.childExpirationTime;for(function(e,t){if(e.didError=!1,0===t)e.earliestPendingTime=0,e.latestPendingTime=0,e.earliestSuspendedTime=0,e.latestSuspendedTime=0,e.latestPingedTime=0;else{t<e.latestPingedTime&&(e.latestPingedTime=0);var n=e.latestPendingTime;0!==n&&(n>t?e.earliestPendingTime=e.latestPendingTime=0:e.earliestPendingTime>t&&(e.earliestPendingTime=e.latestPendingTime)),0===(n=e.earliestSuspendedTime)?rs(e,t):t<e.latestSuspendedTime?(e.earliestSuspendedTime=0,e.latestSuspendedTime=0,e.latestPingedTime=0,rs(e,t)):t>n&&rs(e,t)}as(0,e)}(e,i>r?i:r),Lo.current=null,r=void 0,1<t.effectTag?null!==t.lastEffect?(t.lastEffect.nextEffect=t,r=t.firstEffect):r=t:r=t.firstEffect,yi=Ar,wi=function(){var e=Ur();if(Hr(e)){if("selectionStart"in e)var t={start:e.selectionStart,end:e.selectionEnd};else e:{var n=(t=(t=e.ownerDocument)&&t.defaultView||window).getSelection&&t.getSelection();if(n&&0!==n.rangeCount){t=n.anchorNode;var r=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{t.nodeType,i.nodeType}catch(w){t=null;break e}var s=0,a=-1,o=-1,l=0,c=0,u=e,h=null;t:for(;;){for(var p;u!==t||0!==r&&3!==u.nodeType||(a=s+r),u!==i||0!==n&&3!==u.nodeType||(o=s+n),3===u.nodeType&&(s+=u.nodeValue.length),null!==(p=u.firstChild);)h=u,u=p;for(;;){if(u===e)break t;if(h===t&&++l===r&&(a=s),h===i&&++c===n&&(o=s),null!==(p=u.nextSibling))break;h=(u=h).parentNode}u=p}t=-1===a||-1===o?null:{start:a,end:o}}else t=null}t=t||{start:0,end:0}}else t=null;return{focusedElem:e,selectionRange:t}}(),Ar=!1,Vo=r;null!==Vo;){i=!1;var s=void 0;try{qo()}catch(o){i=!0,s=o}i&&(null===Vo&&he("178"),Jo(Vo,s),null!==Vo&&(Vo=Vo.nextEffect))}for(Vo=r;null!==Vo;){i=!1,s=void 0;try{Wo()}catch(o){i=!0,s=o}i&&(null===Vo&&he("178"),Jo(Vo,s),null!==Vo&&(Vo=Vo.nextEffect))}for($r(wi),wi=null,Ar=!!yi,yi=null,e.current=t,Vo=r;null!==Vo;){i=!1,s=void 0;try{Go(e,n)}catch(o){i=!0,s=o}i&&(null===Vo&&he("178"),Jo(Vo,s),null!==Vo&&(Vo=Vo.nextEffect))}if(null!==r&&null!==Bo){var a=function(e,t){Ho=Uo=Bo=null;var n=cl;cl=!0;do{if(512&t.effectTag){var r=!1,i=void 0;try{var s=t;yo(Fs,Ls,s),yo(Ls,Ds,s)}catch(a){r=!0,i=a}r&&Jo(t,i)}t=t.nextEffect}while(null!==t);cl=n,0!==(n=e.expirationTime)&&Tl(e,n),ml||cl||Ol(1073741823,!1)}.bind(null,e,r);Uo=ue.unstable_runWithPriority(ue.unstable_NormalPriority,function(){return _i(a)}),Ho=a}Io=jo=!1,"function"==typeof Wi&&Wi(t.stateNode),n=t.expirationTime,0===(t=(t=t.childExpirationTime)>n?t:n)&&($o=null),function(e,t){e.expirationTime=t,e.finishedWork=null}(e,t)}function Zo(e){for(;;){var t=e.alternate,n=e.return,r=e.sibling;if(0==(1024&e.effectTag)){Oo=e;e:{var i=t,s=Ro,o=(t=e).pendingProps;switch(t.tag){case 2:case 16:break;case 15:case 0:break;case 1:Vi(t.type)&&ji();break;case 3:Ns(),Bi(),(o=t.stateNode).pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),null!==i&&null!==i.child||(ka(t),t.effectTag&=-3),po(t);break;case 5:As(t);var l=_s(Cs.current);if(s=t.type,null!==i&&null!=t.stateNode)fo(i,t,s,o,l),i.ref!==t.ref&&(t.effectTag|=128);else if(o){var c=_s(Es.current);if(ka(t)){i=(o=t).stateNode;var u=o.type,h=o.memoizedProps,p=l;switch(i[Ve]=o,i[je]=h,s=void 0,l=u){case"iframe":case"object":Lr("load",i);break;case"video":case"audio":for(u=0;u<at.length;u++)Lr(at[u],i);break;case"source":Lr("error",i);break;case"img":case"image":case"link":Lr("error",i),Lr("load",i);break;case"form":Lr("reset",i),Lr("submit",i);break;case"details":Lr("toggle",i);break;case"input":Sn(i,h),Lr("invalid",i),vi(p,"onChange");break;case"select":i._wrapperState={wasMultiple:!!h.multiple},Lr("invalid",i),vi(p,"onChange");break;case"textarea":ti(i,h),Lr("invalid",i),vi(p,"onChange")}for(s in mi(l,h),u=null,h)h.hasOwnProperty(s)&&(c=h[s],"children"===s?"string"==typeof c?i.textContent!==c&&(u=["children",c]):"number"==typeof c&&i.textContent!==""+c&&(u=["children",""+c]):Ce.hasOwnProperty(s)&&null!=c&&vi(p,s));switch(l){case"input":Gt(i),An(i,h,!0);break;case"textarea":Gt(i),ri(i);break;case"select":case"option":break;default:"function"==typeof h.onClick&&(i.onclick=bi)}s=u,o.updateQueue=s,(o=null!==s)&&uo(t)}else{h=t,p=s,i=o,u=9===l.nodeType?l:l.ownerDocument,c===ii.html&&(c=si(p)),c===ii.html?"script"===p?((i=u.createElement("div")).innerHTML="<script><\/script>",u=i.removeChild(i.firstChild)):"string"==typeof i.is?u=u.createElement(p,{is:i.is}):(u=u.createElement(p),"select"===p&&(p=u,i.multiple?p.multiple=!0:i.size&&(p.size=i.size))):u=u.createElementNS(c,p),(i=u)[Ve]=h,i[je]=o,ho(i,t,!1,!1),p=i;var d=l,f=gi(u=s,h=o);switch(u){case"iframe":case"object":Lr("load",p),l=h;break;case"video":case"audio":for(l=0;l<at.length;l++)Lr(at[l],p);l=h;break;case"source":Lr("error",p),l=h;break;case"img":case"image":case"link":Lr("error",p),Lr("load",p),l=h;break;case"form":Lr("reset",p),Lr("submit",p),l=h;break;case"details":Lr("toggle",p),l=h;break;case"input":Sn(p,h),l=_n(p,h),Lr("invalid",p),vi(d,"onChange");break;case"option":l=Xr(p,h);break;case"select":p._wrapperState={wasMultiple:!!h.multiple},l=a({},h,{value:void 0}),Lr("invalid",p),vi(d,"onChange");break;case"textarea":ti(p,h),l=ei(p,h),Lr("invalid",p),vi(d,"onChange");break;default:l=h}mi(u,l),c=void 0;var m=u,g=p,v=l;for(c in v)if(v.hasOwnProperty(c)){var b=v[c];"style"===c?di(g,b):"dangerouslySetInnerHTML"===c?null!=(b=b?b.__html:void 0)&&li(g,b):"children"===c?"string"==typeof b?("textarea"!==m||""!==b)&&ci(g,b):"number"==typeof b&&ci(g,""+b):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(Ce.hasOwnProperty(c)?null!=b&&vi(d,c):null!=b&&kn(g,c,b,f))}switch(u){case"input":Gt(p),An(p,h,!1);break;case"textarea":Gt(p),ri(p);break;case"option":null!=h.value&&p.setAttribute("value",""+Cn(h.value));break;case"select":(l=p).multiple=!!h.multiple,null!=(p=h.value)?Jr(l,!!h.multiple,p,!1):null!=h.defaultValue&&Jr(l,!!h.multiple,h.defaultValue,!0);break;default:"function"==typeof l.onClick&&(p.onclick=bi)}(o=xi(s,o))&&uo(t),t.stateNode=i}null!==t.ref&&(t.effectTag|=128)}else null===t.stateNode&&he("166");break;case 6:i&&null!=t.stateNode?mo(i,t,i.memoizedProps,o):("string"!=typeof o&&(null===t.stateNode&&he("166")),i=_s(Cs.current),_s(Es.current),ka(t)?(s=(o=t).stateNode,i=o.memoizedProps,s[Ve]=o,(o=s.nodeValue!==i)&&uo(t)):(s=t,(o=(9===i.nodeType?i:i.ownerDocument).createTextNode(o))[Ve]=t,s.stateNode=o));break;case 11:break;case 13:if(o=t.memoizedState,0!=(64&t.effectTag)){t.expirationTime=s,Oo=t;break e}o=null!==o,s=null!==i&&null!==i.memoizedState,null!==i&&!o&&s&&(null!==(i=i.child.sibling)&&(null!==(l=t.firstEffect)?(t.firstEffect=i,i.nextEffect=l):(t.firstEffect=t.lastEffect=i,i.nextEffect=null),i.effectTag=8)),(o||s)&&(t.effectTag|=4);break;case 7:case 8:case 12:break;case 4:Ns(),po(t);break;case 10:za(t);break;case 9:case 14:break;case 17:Vi(t.type)&&ji();break;case 18:break;default:he("156")}Oo=null}if(t=e,1===Ro||1!==t.childExpirationTime){for(o=0,s=t.child;null!==s;)(i=s.expirationTime)>o&&(o=i),(l=s.childExpirationTime)>o&&(o=l),s=s.sibling;t.childExpirationTime=o}if(null!==Oo)return Oo;null!==n&&0==(1024&n.effectTag)&&(null===n.firstEffect&&(n.firstEffect=e.firstEffect),null!==e.lastEffect&&(null!==n.lastEffect&&(n.lastEffect.nextEffect=e.firstEffect),n.lastEffect=e.lastEffect),1<e.effectTag&&(null!==n.lastEffect?n.lastEffect.nextEffect=e:n.firstEffect=e,n.lastEffect=e))}else{if(null!==(e=To(e)))return e.effectTag&=1023,e;null!==n&&(n.firstEffect=n.lastEffect=null,n.effectTag|=1024)}if(null!==r)return r;if(null===n)break;e=n}return null}function Qo(e){var t=Va(e.alternate,e,Ro);return e.memoizedProps=e.pendingProps,null===t&&(t=Zo(e)),Lo.current=null,t}function Xo(e,t){Io&&he("243"),Ko(),Io=!0;var n=Ao.current;Ao.current=pa;var r=e.nextExpirationTimeToWorkOn;r===Ro&&e===Mo&&null!==Oo||(zo(),Ro=r,Oo=Qi((Mo=e).current,null),e.pendingCommitExpirationTime=0);for(var i=!1;;){try{if(t)for(;null!==Oo&&!Pl();)Oo=Qo(Oo);else for(;null!==Oo;)Oo=Qo(Oo)}catch(p){if(Ha=Ua=Ba=null,ta(),null===Oo)i=!0,Fl(p);else{null===Oo&&he("271");var s=Oo,a=s.return;if(null!==a){e:{var o=e,l=a,c=s,u=p;if(a=Ro,c.effectTag|=1024,c.firstEffect=c.lastEffect=null,null!==u&&"object"==typeof u&&"function"==typeof u.then){var h=u;u=l;var d=-1,f=-1;do{if(13===u.tag){var m=u.alternate;if(null!==m&&null!==(m=m.memoizedState)){f=10*(1073741822-m.timedOutAt);break}"number"==typeof(m=u.pendingProps.maxDuration)&&(0>=m?d=0:(-1===d||m<d)&&(d=m))}u=u.return}while(null!==u);u=l;do{if((m=13===u.tag)&&(m=void 0!==u.memoizedProps.fallback&&null===u.memoizedState),m){if(null===(l=u.updateQueue)?((l=new Set).add(h),u.updateQueue=l):l.add(h),0==(1&u.mode)){u.effectTag|=64,c.effectTag&=-1957,1===c.tag&&(null===c.alternate?c.tag=17:((a=eo(1073741823)).tag=Ya,no(c,a))),c.expirationTime=1073741823;break e}l=a;var g=(c=o).pingCache;null===g?(g=c.pingCache=new _o,m=new Set,g.set(h,m)):void 0===(m=g.get(h))&&(m=new Set,g.set(h,m)),m.has(l)||(m.add(l),c=tl.bind(null,c,h,l),h.then(c,c)),-1===d?o=1073741823:(-1===f&&(f=10*(1073741822-ss(o,a))-5e3),o=f+d),0<=o&&Do<o&&(Do=o),u.effectTag|=2048,u.expirationTime=a;break e}u=u.return}while(null!==u);u=Error((dn(c.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display."+fn(c))}Fo=!0,u=co(u,c),o=l;do{switch(o.tag){case 3:o.effectTag|=2048,o.expirationTime=a,ro(o,a=So(o,u,a));break e;case 1:if(d=u,f=o.type,c=o.stateNode,0==(64&o.effectTag)&&("function"==typeof f.getDerivedStateFromError||null!==c&&"function"==typeof c.componentDidCatch&&(null===$o||!$o.has(c)))){o.effectTag|=2048,o.expirationTime=a,ro(o,a=No(o,d,a));break e}}o=o.return}while(null!==o)}Oo=Zo(s);continue}i=!0,Fl(p)}}break}if(Io=!1,Ao.current=n,Ha=Ua=Ba=null,ta(),i)Mo=null,e.finishedWork=null;else if(null!==Oo)e.finishedWork=null;else{if(null===(n=e.current.alternate)&&he("281"),Mo=null,Fo){if(i=e.latestPendingTime,s=e.latestSuspendedTime,a=e.latestPingedTime,0!==i&&i<r||0!==s&&s<r||0!==a&&a<r)return is(e,r),void Sl(e,n,r,e.expirationTime,-1);if(!e.didError&&t)return e.didError=!0,r=e.nextExpirationTimeToWorkOn=r,t=e.expirationTime=1073741823,void Sl(e,n,r,t,-1)}t&&-1!==Do?(is(e,r),(t=10*(1073741822-ss(e,r)))<Do&&(Do=t),t=10*(1073741822-Nl()),t=Do-t,Sl(e,n,r,e.expirationTime,0>t?0:t)):(e.pendingCommitExpirationTime=r,e.finishedWork=n)}}function Jo(e,t){for(var n=e.return;null!==n;){switch(n.tag){case 1:var r=n.stateNode;if("function"==typeof n.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===$o||!$o.has(r)))return no(n,e=No(n,e=co(t,e),1073741823)),void rl(n,1073741823);break;case 3:return no(n,e=So(n,e=co(t,e),1073741823)),void rl(n,1073741823)}n=n.return}3===e.tag&&(no(e,n=So(e,n=co(t,e),1073741823)),rl(e,1073741823))}function el(e,t){var n=ue.unstable_getCurrentPriorityLevel(),r=void 0;if(0==(1&t.mode))r=1073741823;else if(Io&&!jo)r=Ro;else{switch(n){case ue.unstable_ImmediatePriority:r=1073741823;break;case ue.unstable_UserBlockingPriority:r=1073741822-10*(1+((1073741822-e+15)/10|0));break;case ue.unstable_NormalPriority:r=1073741822-25*(1+((1073741822-e+500)/25|0));break;case ue.unstable_LowPriority:case ue.unstable_IdlePriority:r=1;break;default:he("313")}null!==Mo&&r===Ro&&--r}return n===ue.unstable_UserBlockingPriority&&(0===pl||r<pl)&&(pl=r),r}function tl(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),null!==Mo&&Ro===n?Mo=null:(t=e.earliestSuspendedTime,r=e.latestSuspendedTime,0!==t&&n<=t&&n>=r&&(e.didError=!1,(0===(t=e.latestPingedTime)||t>n)&&(e.latestPingedTime=n),as(n,e),0!==(n=e.expirationTime)&&Tl(e,n)))}function nl(e,t){e.expirationTime<t&&(e.expirationTime=t);var n=e.alternate;null!==n&&n.expirationTime<t&&(n.expirationTime=t);var r=e.return,i=null;if(null===r&&3===e.tag)i=e.stateNode;else for(;null!==r;){if(n=r.alternate,r.childExpirationTime<t&&(r.childExpirationTime=t),null!==n&&n.childExpirationTime<t&&(n.childExpirationTime=t),null===r.return&&3===r.tag){i=r.stateNode;break}r=r.return}return i}function rl(e,t){null!==(e=nl(e,t))&&(!Io&&0!==Ro&&t>Ro&&zo(),rs(e,t),Io&&!jo&&Mo===e||Tl(e,e.expirationTime),El>xl&&(El=0,he("185")))}function il(e,t,n,r,i){return ue.unstable_runWithPriority(ue.unstable_ImmediatePriority,function(){return e(t,n,r,i)})}var sl=null,al=null,ol=0,ll=void 0,cl=!1,ul=null,hl=0,pl=0,dl=!1,fl=null,ml=!1,gl=!1,vl=null,bl=ue.unstable_now(),yl=1073741822-(bl/10|0),wl=yl,xl=50,El=0,kl=null;function Cl(){yl=1073741822-((ue.unstable_now()-bl)/10|0)}function _l(e,t){if(0!==ol){if(t<ol)return;null!==ll&&ue.unstable_cancelCallback(ll)}ol=t,e=ue.unstable_now()-bl,ll=ue.unstable_scheduleCallback(Il,{timeout:10*(1073741822-t)-e})}function Sl(e,t,n,r,i){e.expirationTime=r,0!==i||Pl()?0<i&&(e.timeoutHandle=ki(function(e,t,n){e.pendingCommitExpirationTime=n,e.finishedWork=t,Cl(),wl=yl,Ml(e,n)}.bind(null,e,t,n),i)):(e.pendingCommitExpirationTime=n,e.finishedWork=t)}function Nl(){return cl?wl:(Al(),0!==hl&&1!==hl||(Cl(),wl=yl),wl)}function Tl(e,t){null===e.nextScheduledRoot?(e.expirationTime=t,null===al?(sl=al=e,e.nextScheduledRoot=e):(al=al.nextScheduledRoot=e).nextScheduledRoot=sl):t>e.expirationTime&&(e.expirationTime=t),cl||(ml?gl&&(ul=e,hl=1073741823,Rl(e,1073741823,!1)):1073741823===t?Ol(1073741823,!1):_l(e,t))}function Al(){var e=0,t=null;if(null!==al)for(var n=al,r=sl;null!==r;){var i=r.expirationTime;if(0===i){if((null===n||null===al)&&he("244"),r===r.nextScheduledRoot){sl=al=r.nextScheduledRoot=null;break}if(r===sl)sl=i=r.nextScheduledRoot,al.nextScheduledRoot=i,r.nextScheduledRoot=null;else{if(r===al){(al=n).nextScheduledRoot=sl,r.nextScheduledRoot=null;break}n.nextScheduledRoot=r.nextScheduledRoot,r.nextScheduledRoot=null}r=n.nextScheduledRoot}else{if(i>e&&(e=i,t=r),r===al)break;if(1073741823===e)break;n=r,r=r.nextScheduledRoot}}ul=t,hl=e}var Ll=!1;function Pl(){return!!Ll||!!ue.unstable_shouldYield()&&(Ll=!0)}function Il(){try{if(!Pl()&&null!==sl){Cl();var e=sl;do{var t=e.expirationTime;0!==t&&yl<=t&&(e.nextExpirationTimeToWorkOn=yl),e=e.nextScheduledRoot}while(e!==sl)}Ol(0,!0)}finally{Ll=!1}}function Ol(e,t){if(Al(),t)for(Cl(),wl=yl;null!==ul&&0!==hl&&e<=hl&&!(Ll&&yl>hl);)Rl(ul,hl,yl>hl),Al(),Cl(),wl=yl;else for(;null!==ul&&0!==hl&&e<=hl;)Rl(ul,hl,!1),Al();if(t&&(ol=0,ll=null),0!==hl&&_l(ul,hl),El=0,kl=null,null!==vl)for(e=vl,vl=null,t=0;t<e.length;t++){var n=e[t];try{n._onComplete()}catch(r){dl||(dl=!0,fl=r)}}if(dl)throw e=fl,fl=null,dl=!1,e}function Ml(e,t){cl&&he("253"),ul=e,hl=t,Rl(e,t,!1),Ol(1073741823,!1)}function Rl(e,t,n){if(cl&&he("245"),cl=!0,n){var r=e.finishedWork;null!==r?Dl(e,r,t):(e.finishedWork=null,-1!==(r=e.timeoutHandle)&&(e.timeoutHandle=-1,Ci(r)),Xo(e,n),null!==(r=e.finishedWork)&&(Pl()?e.finishedWork=r:Dl(e,r,t)))}else null!==(r=e.finishedWork)?Dl(e,r,t):(e.finishedWork=null,-1!==(r=e.timeoutHandle)&&(e.timeoutHandle=-1,Ci(r)),Xo(e,n),null!==(r=e.finishedWork)&&Dl(e,r,t));cl=!1}function Dl(e,t,n){var r=e.firstBatch;if(null!==r&&r._expirationTime>=n&&(null===vl?vl=[r]:vl.push(r),r._defer))return e.finishedWork=t,void(e.expirationTime=0);e.finishedWork=null,e===kl?El++:(kl=e,El=0),ue.unstable_runWithPriority(ue.unstable_ImmediatePriority,function(){Yo(e,t)})}function Fl(e){null===ul&&he("246"),ul.expirationTime=0,dl||(dl=!0,fl=e)}function Vl(e,t){var n=ml;ml=!0;try{return e(t)}finally{(ml=n)||cl||Ol(1073741823,!1)}}function jl(e,t){if(ml&&!gl){gl=!0;try{return e(t)}finally{gl=!1}}return e(t)}function Bl(e,t,n){ml||cl||0===pl||(Ol(pl,!1),pl=0);var r=ml;ml=!0;try{return ue.unstable_runWithPriority(ue.unstable_UserBlockingPriority,function(){return e(t,n)})}finally{(ml=r)||cl||Ol(1073741823,!1)}}function Ul(e,t,n,r,i){var s=t.current;e:if(n){t:{2===or(n=n._reactInternalFiber)&&1===n.tag||he("170");var a=n;do{switch(a.tag){case 3:a=a.stateNode.context;break t;case 1:if(Vi(a.type)){a=a.stateNode.__reactInternalMemoizedMergedChildContext;break t}}a=a.return}while(null!==a);he("171"),a=void 0}if(1===n.tag){var o=n.type;if(Vi(o)){n=Hi(n,o,a);break e}}n=a}else n=Oi;return null===t.context?t.context=n:t.pendingContext=n,t=i,(i=eo(r)).payload={element:e},null!==(t=void 0===t?null:t)&&(i.callback=t),Ko(),no(s,i),rl(s,r),r}function Hl(e,t,n,r){var i=t.current;return Ul(e,t,n,i=el(Nl(),i),r)}function $l(e){if(!(e=e.current).child)return null;switch(e.child.tag){case 5:default:return e.child.stateNode}}function zl(e){var t=1073741822-25*(1+((1073741822-Nl()+500)/25|0));t>=Po&&(t=Po-1),this._expirationTime=Po=t,this._root=e,this._callbacks=this._next=null,this._hasChildren=this._didComplete=!1,this._children=null,this._defer=!0}function Wl(){this._callbacks=null,this._didCommit=!1,this._onCommit=this._onCommit.bind(this)}function ql(e,t,n){e={current:t=Yi(3,null,null,t?3:0),containerInfo:e,pendingChildren:null,pingCache:null,earliestPendingTime:0,latestPendingTime:0,earliestSuspendedTime:0,latestSuspendedTime:0,latestPingedTime:0,didError:!1,pendingCommitExpirationTime:0,finishedWork:null,timeoutHandle:-1,context:null,pendingContext:null,hydrate:n,nextExpirationTimeToWorkOn:0,expirationTime:0,firstBatch:null,nextScheduledRoot:null},this._internalRoot=t.stateNode=e}function Gl(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Kl(e,t,n,r,i){var s=n._reactRootContainer;if(s){if("function"==typeof i){var a=i;i=function(){var e=$l(s._internalRoot);a.call(e)}}null!=e?s.legacy_renderSubtreeIntoContainer(e,t,i):s.render(t,i)}else{if(s=n._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new ql(e,!1,t)}(n,r),"function"==typeof i){var o=i;i=function(){var e=$l(s._internalRoot);o.call(e)}}jl(function(){null!=e?s.legacy_renderSubtreeIntoContainer(e,t,i):s.render(t,i)})}return $l(s._internalRoot)}function Yl(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;return Gl(t)||he("200"),function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:Jt,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)}Pt=function(e,t,n){switch(t){case"input":if(Tn(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=$e(r);i||he("90"),Kt(r),Tn(r,i)}}}break;case"textarea":ni(e,n);break;case"select":null!=(t=n.value)&&Jr(e,!!n.multiple,t,!1)}},zl.prototype.render=function(e){this._defer||he("250"),this._hasChildren=!0,this._children=e;var t=this._root._internalRoot,n=this._expirationTime,r=new Wl;return Ul(e,t,null,n,r._onCommit),r},zl.prototype.then=function(e){if(this._didComplete)e();else{var t=this._callbacks;null===t&&(t=this._callbacks=[]),t.push(e)}},zl.prototype.commit=function(){var e=this._root._internalRoot,t=e.firstBatch;if(this._defer&&null!==t||he("251"),this._hasChildren){var n=this._expirationTime;if(t!==this){this._hasChildren&&(n=this._expirationTime=t._expirationTime,this.render(this._children));for(var r=null,i=t;i!==this;)r=i,i=i._next;null===r&&he("251"),r._next=i._next,this._next=t,e.firstBatch=this}this._defer=!1,Ml(e,n),t=this._next,this._next=null,null!==(t=e.firstBatch=t)&&t._hasChildren&&t.render(t._children)}else this._next=null,this._defer=!1},zl.prototype._onComplete=function(){if(!this._didComplete){this._didComplete=!0;var e=this._callbacks;if(null!==e)for(var t=0;t<e.length;t++)(0,e[t])()}},Wl.prototype.then=function(e){if(this._didCommit)e();else{var t=this._callbacks;null===t&&(t=this._callbacks=[]),t.push(e)}},Wl.prototype._onCommit=function(){if(!this._didCommit){this._didCommit=!0;var e=this._callbacks;if(null!==e)for(var t=0;t<e.length;t++){var n=e[t];"function"!=typeof n&&he("191",n),n()}}},ql.prototype.render=function(e,t){var n=this._internalRoot,r=new Wl;return null!==(t=void 0===t?null:t)&&r.then(t),Hl(e,n,null,r._onCommit),r},ql.prototype.unmount=function(e){var t=this._internalRoot,n=new Wl;return null!==(e=void 0===e?null:e)&&n.then(e),Hl(null,t,null,n._onCommit),n},ql.prototype.legacy_renderSubtreeIntoContainer=function(e,t,n){var r=this._internalRoot,i=new Wl;return null!==(n=void 0===n?null:n)&&i.then(n),Hl(t,r,e,i._onCommit),i},ql.prototype.createBatch=function(){var e=new zl(this),t=e._expirationTime,n=this._internalRoot,r=n.firstBatch;if(null===r)n.firstBatch=e,e._next=null;else{for(n=null;null!==r&&r._expirationTime>=t;)n=r,r=r._next;e._next=r,null!==n&&(n._next=e)}return e},Ft=Vl,Vt=Bl,jt=function(){cl||0===pl||(Ol(pl,!1),pl=0)};var Zl={createPortal:Yl,findDOMNode:function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternalFiber;return void 0===t&&("function"==typeof e.render?he("188"):he("268",Object.keys(e))),e=null===(e=cr(t))?null:e.stateNode},hydrate:function(e,t,n){return Gl(t)||he("200"),Kl(null,e,t,!0,n)},render:function(e,t,n){return Gl(t)||he("200"),Kl(null,e,t,!1,n)},unstable_renderSubtreeIntoContainer:function(e,t,n,r){return Gl(n)||he("200"),(null==e||void 0===e._reactInternalFiber)&&he("38"),Kl(e,t,n,!1,r)},unmountComponentAtNode:function(e){return Gl(e)||he("40"),!!e._reactRootContainer&&(jl(function(){Kl(null,null,e,!1,function(){e._reactRootContainer=null})}),!0)},unstable_createPortal:function(){return Yl.apply(void 0,arguments)},unstable_batchedUpdates:Vl,unstable_interactiveUpdates:Bl,flushSync:function(e,t){cl&&he("187");var n=ml;ml=!0;try{return il(e,t)}finally{ml=n,Ol(1073741823,!1)}},unstable_createRoot:function(e,t){return Gl(e)||he("299","unstable_createRoot"),new ql(e,!0,null!=t&&!0===t.hydrate)},unstable_flushControlled:function(e){var t=ml;ml=!0;try{il(e)}finally{(ml=t)||cl||Ol(1073741823,!1)}},__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{Events:[Ue,He,$e,Me.injectEventPluginsByName,ke,Ye,function(e){Pe(e,Ke)},Rt,Dt,Or,De]}};!function(e){var t=e.findFiberByHostInstance;(function(e){if("undefined"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)return!1;var t=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(t.isDisabled||!t.supportsFiber)return!0;try{var n=t.inject(e);Wi=Gi(function(e){return t.onCommitFiberRoot(n,e)}),qi=Gi(function(e){return t.onCommitFiberUnmount(n,e)})}catch(r){}})(a({},e,{overrideProps:null,currentDispatcherRef:Yt.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=cr(e))?null:e.stateNode},findFiberByHostInstance:function(e){return t?t(e):null}}))}({findFiberByHostInstance:Be,bundleType:0,version:"16.8.6",rendererPackageName:"react-dom"});var Ql={default:Zl},Xl=Ql&&Zl||Ql,Jl=Xl.default||Xl,ec=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=0;t.__interactionsRef=null,t.__subscriberRef=null,t.unstable_clear=function(e){return e()},t.unstable_getCurrent=function(){return null},t.unstable_getThreadID=function(){return++n},t.unstable_trace=function(e,t,n){return n()},t.unstable_wrap=function(e){return e},t.unstable_subscribe=function(){},t.unstable_unsubscribe=function(){}});t(ec);ec.__interactionsRef,ec.__subscriberRef,ec.unstable_clear,ec.unstable_getCurrent,ec.unstable_getThreadID,ec.unstable_trace,ec.unstable_wrap,ec.unstable_subscribe,ec.unstable_unsubscribe;var tc=n(function(e,t){});t(tc);tc.__interactionsRef,tc.__subscriberRef,tc.unstable_clear,tc.unstable_getCurrent,tc.unstable_getThreadID,tc.unstable_trace,tc.unstable_wrap,tc.unstable_subscribe,tc.unstable_unsubscribe,n(function(e){e.exports=ec}),n(function(e){});var nc=n(function(e){!function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=Jl}),rc=nc.createPortal,ic="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";function sc(){}var ac=n(function(e){e.exports=function(){function e(e,t,n,r,i,s){if(s!==ic){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t};return n.checkPropTypes=sc,n.PropTypes=n,n}()}),oc=n(function(e){!function(){var t=!("undefined"==typeof window||!window.document||!window.document.createElement),n={canUseDOM:t,canUseWorkers:"undefined"!=typeof Worker,canUseEventListeners:t&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:t&&!!window.screen};e.exports?e.exports=n:window.ExecutionEnvironment=n}()}),lc=function(e,t,n,r){var i=n?n.call(r,e,t):void 0;if(void 0!==i)return!!i;if(e===t)return!0;if("object"!=typeof e||!e||"object"!=typeof t||!t)return!1;var s=Object.keys(e),a=Object.keys(t);if(s.length!==a.length)return!1;for(var o=Object.prototype.hasOwnProperty.bind(t),l=0;l<s.length;l++){var c=s[l];if(!o(c))return!1;var u=e[c],h=t[c];if(!1===(i=n?n.call(r,u,h,c):void 0)||void 0===i&&u!==h)return!1}return!0};function cc(e){return e&&"object"==typeof e&&"default"in e?e.default:e}var uc=cc(Y),hc=cc(oc),pc=cc(lc);var dc=function(e,t,n){if("function"!=typeof e)throw new Error("Expected reducePropsToState to be a function.");if("function"!=typeof t)throw new Error("Expected handleStateChangeOnClient to be a function.");if(void 0!==n&&"function"!=typeof n)throw new Error("Expected mapStateOnServer to either be undefined or a function.");return function(r){if("function"!=typeof r)throw new Error("Expected WrappedComponent to be a React component.");var i=[],s=void 0;function a(){s=e(i.map(function(e){return e.props})),o.canUseDOM?t(s):n&&(s=n(s))}var o=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.peek=function(){return s},t.rewind=function(){if(t.canUseDOM)throw new Error("You may only call rewind() on the server. Call peek() to read the current state.");var e=s;return s=void 0,i=[],e},t.prototype.shouldComponentUpdate=function(e){return!pc(e,this.props)},t.prototype.componentWillMount=function(){i.push(this),a()},t.prototype.componentDidUpdate=function(){a()},t.prototype.componentWillUnmount=function(){var e=i.indexOf(this);i.splice(e,1),a()},t.prototype.render=function(){return uc.createElement(r,this.props)},t}(Y.Component);return o.displayName="SideEffect("+function(e){return e.displayName||e.name||"Component"}(r)+")",o.canUseDOM=hc.canUseDOM,o}},fc=n(function(e,t){function n(e){var t=[];for(var n in e)t.push(n);return t}(e.exports="function"==typeof Object.keys?Object.keys:n).shim=n}),mc=(fc.shim,n(function(e,t){var n="[object Arguments]"==function(){return Object.prototype.toString.call(arguments)}();function r(e){return"[object Arguments]"==Object.prototype.toString.call(e)}function i(e){return e&&"object"==typeof e&&"number"==typeof e.length&&Object.prototype.hasOwnProperty.call(e,"callee")&&!Object.prototype.propertyIsEnumerable.call(e,"callee")||!1}(t=e.exports=n?r:i).supported=r,t.unsupported=i})),gc=(mc.supported,mc.unsupported,n(function(e){var t=Array.prototype.slice,n=e.exports=function(e,s,a){return a||(a={}),e===s||(e instanceof Date&&s instanceof Date?e.getTime()===s.getTime():!e||!s||"object"!=typeof e&&"object"!=typeof s?a.strict?e===s:e==s:function(e,s,a){var o,l;if(r(e)||r(s))return!1;if(e.prototype!==s.prototype)return!1;if(mc(e))return!!mc(s)&&(e=t.call(e),s=t.call(s),n(e,s,a));if(i(e)){if(!i(s))return!1;if(e.length!==s.length)return!1;for(o=0;o<e.length;o++)if(e[o]!==s[o])return!1;return!0}try{var c=fc(e),u=fc(s)}catch(h){return!1}if(c.length!=u.length)return!1;for(c.sort(),u.sort(),o=c.length-1;o>=0;o--)if(c[o]!=u[o])return!1;for(o=c.length-1;o>=0;o--)if(l=c[o],!n(e[l],s[l],a))return!1;return typeof e==typeof s}(e,s,a))};function r(e){return null==e}function i(e){return!(!e||"object"!=typeof e||"number"!=typeof e.length)&&("function"==typeof e.copy&&"function"==typeof e.slice&&!(e.length>0&&"number"!=typeof e[0]))}})),vc=n(function(e,t){t.__esModule=!0;t.ATTRIBUTE_NAMES={BODY:"bodyAttributes",HTML:"htmlAttributes",TITLE:"titleAttributes"};var n=t.TAG_NAMES={BASE:"base",BODY:"body",HEAD:"head",HTML:"html",LINK:"link",META:"meta",NOSCRIPT:"noscript",SCRIPT:"script",STYLE:"style",TITLE:"title"},r=(t.VALID_TAG_NAMES=Object.keys(n).map(function(e){return n[e]}),t.TAG_PROPERTIES={CHARSET:"charset",CSS_TEXT:"cssText",HREF:"href",HTTPEQUIV:"http-equiv",INNER_HTML:"innerHTML",ITEM_PROP:"itemprop",NAME:"name",PROPERTY:"property",REL:"rel",SRC:"src"},t.REACT_TAG_MAP={accesskey:"accessKey",charset:"charSet",class:"className",contenteditable:"contentEditable",contextmenu:"contextMenu","http-equiv":"httpEquiv",itemprop:"itemProp",tabindex:"tabIndex"});t.HELMET_PROPS={DEFAULT_TITLE:"defaultTitle",DEFER:"defer",ENCODE_SPECIAL_CHARACTERS:"encodeSpecialCharacters",ON_CHANGE_CLIENT_STATE:"onChangeClientState",TITLE_TEMPLATE:"titleTemplate"},t.HTML_TAG_MAP=Object.keys(r).reduce(function(e,t){return e[r[t]]=t,e},{}),t.SELF_CLOSING_TAGS=[n.NOSCRIPT,n.SCRIPT,n.STYLE],t.HELMET_ATTRIBUTE="data-react-helmet"});t(vc);vc.ATTRIBUTE_NAMES,vc.TAG_NAMES,vc.VALID_TAG_NAMES,vc.TAG_PROPERTIES,vc.REACT_TAG_MAP,vc.HELMET_PROPS,vc.HTML_TAG_MAP,vc.SELF_CLOSING_TAGS,vc.HELMET_ATTRIBUTE;var bc=n(function(t,n){n.__esModule=!0,n.warn=n.requestAnimationFrame=n.reducePropsToState=n.mapStateOnServer=n.handleClientStateChange=n.convertReactPropstoHtmlAttributes=void 0;var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s=l(Y),o=l(a);function l(e){return e&&e.__esModule?e:{default:e}}var c=function(e){return!1===(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])?String(e):String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")},u=function(e){var t=m(e,vc.TAG_NAMES.TITLE),n=m(e,vc.HELMET_PROPS.TITLE_TEMPLATE);if(n&&t)return n.replace(/%s/g,function(){return t});var r=m(e,vc.HELMET_PROPS.DEFAULT_TITLE);return t||r||void 0},h=function(e){return m(e,vc.HELMET_PROPS.ON_CHANGE_CLIENT_STATE)||function(){}},p=function(e,t){return t.filter(function(t){return void 0!==t[e]}).map(function(t){return t[e]}).reduce(function(e,t){return i({},e,t)},{})},d=function(e,t){return t.filter(function(e){return void 0!==e[vc.TAG_NAMES.BASE]}).map(function(e){return e[vc.TAG_NAMES.BASE]}).reverse().reduce(function(t,n){if(!t.length)for(var r=Object.keys(n),i=0;i<r.length;i++){var s=r[i].toLowerCase();if(-1!==e.indexOf(s)&&n[s])return t.concat(n)}return t},[])},f=function(e,t,n){var i={};return n.filter(function(t){return!!Array.isArray(t[e])||(void 0!==t[e]&&w("Helmet: "+e+' should be of type "Array". Instead found type "'+r(t[e])+'"'),!1)}).map(function(t){return t[e]}).reverse().reduce(function(e,n){var r={};n.filter(function(e){for(var n=void 0,s=Object.keys(e),a=0;a<s.length;a++){var o=s[a],l=o.toLowerCase();-1===t.indexOf(l)||n===vc.TAG_PROPERTIES.REL&&"canonical"===e[n].toLowerCase()||l===vc.TAG_PROPERTIES.REL&&"stylesheet"===e[l].toLowerCase()||(n=l),-1===t.indexOf(o)||o!==vc.TAG_PROPERTIES.INNER_HTML&&o!==vc.TAG_PROPERTIES.CSS_TEXT&&o!==vc.TAG_PROPERTIES.ITEM_PROP||(n=o)}if(!n||!e[n])return!1;var c=e[n].toLowerCase();return i[n]||(i[n]={}),r[n]||(r[n]={}),!i[n][c]&&(r[n][c]=!0,!0)}).reverse().forEach(function(t){return e.push(t)});for(var s=Object.keys(r),a=0;a<s.length;a++){var l=s[a],c=(0,o.default)({},i[l],r[l]);i[l]=c}return e},[]).reverse()},m=function(e,t){for(var n=e.length-1;n>=0;n--){var r=e[n];if(r.hasOwnProperty(t))return r[t]}return null},g=function(){var e=Date.now();return function(t){var n=Date.now();n-e>16?(e=n,t(n)):setTimeout(function(){g(t)},0)}}(),v=function(e){return clearTimeout(e)},b="undefined"!=typeof window?window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||g:e.requestAnimationFrame||g,y="undefined"!=typeof window?window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||v:e.cancelAnimationFrame||v,w=function(e){return console&&"function"==typeof console.warn&&console.warn(e)},x=null,E=function(e,t){var n=e.baseTag,r=e.bodyAttributes,i=e.htmlAttributes,s=e.linkTags,a=e.metaTags,o=e.noscriptTags,l=e.onChangeClientState,c=e.scriptTags,u=e.styleTags,h=e.title,p=e.titleAttributes;_(vc.TAG_NAMES.BODY,r),_(vc.TAG_NAMES.HTML,i),C(h,p);var d={baseTag:S(vc.TAG_NAMES.BASE,n),linkTags:S(vc.TAG_NAMES.LINK,s),metaTags:S(vc.TAG_NAMES.META,a),noscriptTags:S(vc.TAG_NAMES.NOSCRIPT,o),scriptTags:S(vc.TAG_NAMES.SCRIPT,c),styleTags:S(vc.TAG_NAMES.STYLE,u)},f={},m={};Object.keys(d).forEach(function(e){var t=d[e],n=t.newTags,r=t.oldTags;n.length&&(f[e]=n),r.length&&(m[e]=d[e].oldTags)}),t&&t(),l(e,f,m)},k=function(e){return Array.isArray(e)?e.join(""):e},C=function(e,t){void 0!==e&&document.title!==e&&(document.title=k(e)),_(vc.TAG_NAMES.TITLE,t)},_=function(e,t){var n=document.getElementsByTagName(e)[0];if(n){for(var r=n.getAttribute(vc.HELMET_ATTRIBUTE),i=r?r.split(","):[],s=[].concat(i),a=Object.keys(t),o=0;o<a.length;o++){var l=a[o],c=t[l]||"";n.getAttribute(l)!==c&&n.setAttribute(l,c),-1===i.indexOf(l)&&i.push(l);var u=s.indexOf(l);-1!==u&&s.splice(u,1)}for(var h=s.length-1;h>=0;h--)n.removeAttribute(s[h]);i.length===s.length?n.removeAttribute(vc.HELMET_ATTRIBUTE):n.getAttribute(vc.HELMET_ATTRIBUTE)!==a.join(",")&&n.setAttribute(vc.HELMET_ATTRIBUTE,a.join(","))}},S=function(e,t){var n=document.head||document.querySelector(vc.TAG_NAMES.HEAD),r=n.querySelectorAll(e+"["+vc.HELMET_ATTRIBUTE+"]"),i=Array.prototype.slice.call(r),s=[],a=void 0;return t&&t.length&&t.forEach(function(t){var n=document.createElement(e);for(var r in t)if(t.hasOwnProperty(r))if(r===vc.TAG_PROPERTIES.INNER_HTML)n.innerHTML=t.innerHTML;else if(r===vc.TAG_PROPERTIES.CSS_TEXT)n.styleSheet?n.styleSheet.cssText=t.cssText:n.appendChild(document.createTextNode(t.cssText));else{var o=void 0===t[r]?"":t[r];n.setAttribute(r,o)}n.setAttribute(vc.HELMET_ATTRIBUTE,"true"),i.some(function(e,t){return a=t,n.isEqualNode(e)})?i.splice(a,1):s.push(n)}),i.forEach(function(e){return e.parentNode.removeChild(e)}),s.forEach(function(e){return n.appendChild(e)}),{oldTags:i,newTags:s}},N=function(e){return Object.keys(e).reduce(function(t,n){var r=void 0!==e[n]?n+'="'+e[n]+'"':""+n;return t?t+" "+r:r},"")},T=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.keys(e).reduce(function(t,n){return t[vc.REACT_TAG_MAP[n]||n]=e[n],t},t)},A=function(e,t,n){switch(e){case vc.TAG_NAMES.TITLE:return{toComponent:function(){return function(e,t,n){var r,i=((r={key:t})[vc.HELMET_ATTRIBUTE]=!0,r),a=T(n,i);return[s.default.createElement(vc.TAG_NAMES.TITLE,a,t)]}(0,t.title,t.titleAttributes)},toString:function(){return function(e,t,n,r){var i=N(n),s=k(t);return i?"<"+e+" "+vc.HELMET_ATTRIBUTE+'="true" '+i+">"+c(s,r)+"</"+e+">":"<"+e+" "+vc.HELMET_ATTRIBUTE+'="true">'+c(s,r)+"</"+e+">"}(e,t.title,t.titleAttributes,n)}};case vc.ATTRIBUTE_NAMES.BODY:case vc.ATTRIBUTE_NAMES.HTML:return{toComponent:function(){return T(t)},toString:function(){return N(t)}};default:return{toComponent:function(){return function(e,t){return t.map(function(t,n){var r,i=((r={key:n})[vc.HELMET_ATTRIBUTE]=!0,r);return Object.keys(t).forEach(function(e){var n=vc.REACT_TAG_MAP[e]||e;if(n===vc.TAG_PROPERTIES.INNER_HTML||n===vc.TAG_PROPERTIES.CSS_TEXT){var r=t.innerHTML||t.cssText;i.dangerouslySetInnerHTML={__html:r}}else i[n]=t[e]}),s.default.createElement(e,i)})}(e,t)},toString:function(){return function(e,t,n){return t.reduce(function(t,r){var i=Object.keys(r).filter(function(e){return!(e===vc.TAG_PROPERTIES.INNER_HTML||e===vc.TAG_PROPERTIES.CSS_TEXT)}).reduce(function(e,t){var i=void 0===r[t]?t:t+'="'+c(r[t],n)+'"';return e?e+" "+i:i},""),s=r.innerHTML||r.cssText||"",a=-1===vc.SELF_CLOSING_TAGS.indexOf(e);return t+"<"+e+" "+vc.HELMET_ATTRIBUTE+'="true" '+i+(a?"/>":">"+s+"</"+e+">")},"")}(e,t,n)}}}};n.convertReactPropstoHtmlAttributes=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.keys(e).reduce(function(t,n){return t[vc.HTML_TAG_MAP[n]||n]=e[n],t},t)},n.handleClientStateChange=function(e){x&&y(x),e.defer?x=b(function(){E(e,function(){x=null})}):(E(e),x=null)},n.mapStateOnServer=function(e){var t=e.baseTag,n=e.bodyAttributes,r=e.encode,i=e.htmlAttributes,s=e.linkTags,a=e.metaTags,o=e.noscriptTags,l=e.scriptTags,c=e.styleTags,u=e.title,h=void 0===u?"":u,p=e.titleAttributes;return{base:A(vc.TAG_NAMES.BASE,t,r),bodyAttributes:A(vc.ATTRIBUTE_NAMES.BODY,n,r),htmlAttributes:A(vc.ATTRIBUTE_NAMES.HTML,i,r),link:A(vc.TAG_NAMES.LINK,s,r),meta:A(vc.TAG_NAMES.META,a,r),noscript:A(vc.TAG_NAMES.NOSCRIPT,o,r),script:A(vc.TAG_NAMES.SCRIPT,l,r),style:A(vc.TAG_NAMES.STYLE,c,r),title:A(vc.TAG_NAMES.TITLE,{title:h,titleAttributes:p},r)}},n.reducePropsToState=function(e){return{baseTag:d([vc.TAG_PROPERTIES.HREF],e),bodyAttributes:p(vc.ATTRIBUTE_NAMES.BODY,e),defer:m(e,vc.HELMET_PROPS.DEFER),encode:m(e,vc.HELMET_PROPS.ENCODE_SPECIAL_CHARACTERS),htmlAttributes:p(vc.ATTRIBUTE_NAMES.HTML,e),linkTags:f(vc.TAG_NAMES.LINK,[vc.TAG_PROPERTIES.REL,vc.TAG_PROPERTIES.HREF],e),metaTags:f(vc.TAG_NAMES.META,[vc.TAG_PROPERTIES.NAME,vc.TAG_PROPERTIES.CHARSET,vc.TAG_PROPERTIES.HTTPEQUIV,vc.TAG_PROPERTIES.PROPERTY,vc.TAG_PROPERTIES.ITEM_PROP],e),noscriptTags:f(vc.TAG_NAMES.NOSCRIPT,[vc.TAG_PROPERTIES.INNER_HTML],e),onChangeClientState:h(e),scriptTags:f(vc.TAG_NAMES.SCRIPT,[vc.TAG_PROPERTIES.SRC,vc.TAG_PROPERTIES.INNER_HTML],e),styleTags:f(vc.TAG_NAMES.STYLE,[vc.TAG_PROPERTIES.CSS_TEXT],e),title:u(e),titleAttributes:p(vc.ATTRIBUTE_NAMES.TITLE,e)}},n.requestAnimationFrame=b,n.warn=w});t(bc);bc.warn,bc.requestAnimationFrame,bc.reducePropsToState,bc.mapStateOnServer,bc.handleClientStateChange,bc.convertReactPropstoHtmlAttributes;var yc=n(function(e,t){t.__esModule=!0,t.Helmet=void 0;var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=l(Y),s=l(ac),a=l(dc),o=l(gc);function l(e){return e&&e.__esModule?e:{default:e}}function c(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}var u=function(e){var t,a;return a=t=function(t){function s(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,t.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(s,t),s.prototype.shouldComponentUpdate=function(e){return!(0,o.default)(this.props,e)},s.prototype.mapNestedChildrenToProps=function(e,t){if(!t)return null;switch(e.type){case vc.TAG_NAMES.SCRIPT:case vc.TAG_NAMES.NOSCRIPT:return{innerHTML:t};case vc.TAG_NAMES.STYLE:return{cssText:t}}throw new Error("<"+e.type+" /> elements are self-closing and can not contain children. Refer to our API for more information.")},s.prototype.flattenArrayTypeChildren=function(e){var t,r=e.child,i=e.arrayTypeChildren,s=e.newChildProps,a=e.nestedChildren;return n({},i,((t={})[r.type]=[].concat(i[r.type]||[],[n({},s,this.mapNestedChildrenToProps(r,a))]),t))},s.prototype.mapObjectTypeChildren=function(e){var t,r,i=e.child,s=e.newProps,a=e.newChildProps,o=e.nestedChildren;switch(i.type){case vc.TAG_NAMES.TITLE:return n({},s,((t={})[i.type]=o,t.titleAttributes=n({},a),t));case vc.TAG_NAMES.BODY:return n({},s,{bodyAttributes:n({},a)});case vc.TAG_NAMES.HTML:return n({},s,{htmlAttributes:n({},a)})}return n({},s,((r={})[i.type]=n({},a),r))},s.prototype.mapArrayTypeChildrenToProps=function(e,t){var r=n({},t);return Object.keys(e).forEach(function(t){var i;r=n({},r,((i={})[t]=e[t],i))}),r},s.prototype.warnOnInvalidChildren=function(e,t){return!0},s.prototype.mapChildrenToProps=function(e,t){var n=this,r={};return i.default.Children.forEach(e,function(e){if(e&&e.props){var i=e.props,s=i.children,a=c(i,["children"]),o=(0,bc.convertReactPropstoHtmlAttributes)(a);switch(n.warnOnInvalidChildren(e,s),e.type){case vc.TAG_NAMES.LINK:case vc.TAG_NAMES.META:case vc.TAG_NAMES.NOSCRIPT:case vc.TAG_NAMES.SCRIPT:case vc.TAG_NAMES.STYLE:r=n.flattenArrayTypeChildren({child:e,arrayTypeChildren:r,newChildProps:o,nestedChildren:s});break;default:t=n.mapObjectTypeChildren({child:e,newProps:t,newChildProps:o,nestedChildren:s})}}}),t=this.mapArrayTypeChildrenToProps(r,t)},s.prototype.render=function(){var t=this.props,r=t.children,s=c(t,["children"]),a=n({},s);return r&&(a=this.mapChildrenToProps(r,a)),i.default.createElement(e,a)},r(s,null,[{key:"canUseDOM",set:function(t){e.canUseDOM=t}}]),s}(i.default.Component),t.propTypes={base:s.default.object,bodyAttributes:s.default.object,children:s.default.oneOfType([s.default.arrayOf(s.default.node),s.default.node]),defaultTitle:s.default.string,defer:s.default.bool,encodeSpecialCharacters:s.default.bool,htmlAttributes:s.default.object,link:s.default.arrayOf(s.default.object),meta:s.default.arrayOf(s.default.object),noscript:s.default.arrayOf(s.default.object),onChangeClientState:s.default.func,script:s.default.arrayOf(s.default.object),style:s.default.arrayOf(s.default.object),title:s.default.string,titleAttributes:s.default.object,titleTemplate:s.default.string},t.defaultProps={defer:!0,encodeSpecialCharacters:!0},t.peek=e.peek,t.rewind=function(){var t=e.rewind();return t||(t=(0,bc.mapStateOnServer)({baseTag:[],bodyAttributes:{},encodeSpecialCharacters:!0,htmlAttributes:{},linkTags:[],metaTags:[],noscriptTags:[],scriptTags:[],styleTags:[],title:"",titleAttributes:{}})),t},a}((0,a.default)(bc.reducePropsToState,bc.handleClientStateChange,bc.mapStateOnServer)(function(){return null}));u.renderStatic=u.rewind,t.Helmet=u,t.default=u});t(yc);var wc=yc.Helmet,xc=function(){},Ec="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";function kc(){}var Cc=n(function(e){e.exports=function(){function e(e,t,n,r,i,s){if(s!==Ec){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t};return n.checkPropTypes=kc,n.PropTypes=n,n}()}),_c=function(){},Sc=function(e,t,n,r,i,s,a,o){if(!e){var l;if(void 0===t)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[n,r,i,s,a,o],u=0;(l=new Error(t.replace(/%s/g,function(){return c[u++]}))).name="Invariant Violation"}throw l.framesToPop=1,l}};function Nc(e){return"/"===e.charAt(0)}function Tc(e,t){for(var n=t,r=n+1,i=e.length;r<i;n+=1,r+=1)e[n]=e[r];e.pop()}var Ac="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var Lc=function(e){return"/"===e.charAt(0)?e:"/"+e},Pc=function(e){return"/"===e.charAt(0)?e.substr(1):e},Ic=function(e,t){return new RegExp("^"+t+"(\\/|\\?|#|$)","i").test(e)},Oc=function(e,t){return Ic(e,t)?e.substr(t.length):e},Mc=function(e){return"/"===e.charAt(e.length-1)?e.slice(0,-1):e},Rc=function(e){var t=e.pathname,n=e.search,r=e.hash,i=t||"/";return n&&"?"!==n&&(i+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(i+="#"===r.charAt(0)?r:"#"+r),i},Dc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Fc=function(e,t,n,r){var i=void 0;"string"==typeof e?(i=function(e){var t=e||"/",n="",r="",i=t.indexOf("#");-1!==i&&(r=t.substr(i),t=t.substr(0,i));var s=t.indexOf("?");return-1!==s&&(n=t.substr(s),t=t.substr(0,s)),{pathname:t,search:"?"===n?"":n,hash:"#"===r?"":r}}(e)).state=t:(void 0===(i=Dc({},e)).pathname&&(i.pathname=""),i.search?"?"!==i.search.charAt(0)&&(i.search="?"+i.search):i.search="",i.hash?"#"!==i.hash.charAt(0)&&(i.hash="#"+i.hash):i.hash="",void 0!==t&&void 0===i.state&&(i.state=t));try{i.pathname=decodeURI(i.pathname)}catch(s){throw s instanceof URIError?new URIError('Pathname "'+i.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):s}return n&&(i.key=n),r?i.pathname?"/"!==i.pathname.charAt(0)&&(i.pathname=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=e&&e.split("/")||[],r=t&&t.split("/")||[],i=e&&Nc(e),s=t&&Nc(t),a=i||s;if(e&&Nc(e)?r=n:n.length&&(r.pop(),r=r.concat(n)),!r.length)return"/";var o=void 0;if(r.length){var l=r[r.length-1];o="."===l||".."===l||""===l}else o=!1;for(var c=0,u=r.length;u>=0;u--){var h=r[u];"."===h?Tc(r,u):".."===h?(Tc(r,u),c++):c&&(Tc(r,u),c--)}if(!a)for(;c--;c)r.unshift("..");!a||""===r[0]||r[0]&&Nc(r[0])||r.unshift("");var p=r.join("/");return o&&"/"!==p.substr(-1)&&(p+="/"),p}(i.pathname,r.pathname)):i.pathname=r.pathname:i.pathname||(i.pathname="/"),i},Vc=function(e,t){return e.pathname===t.pathname&&e.search===t.search&&e.hash===t.hash&&e.key===t.key&&function e(t,n){if(t===n)return!0;if(null==t||null==n)return!1;if(Array.isArray(t))return Array.isArray(n)&&t.length===n.length&&t.every(function(t,r){return e(t,n[r])});var r=void 0===t?"undefined":Ac(t);if(r!==(void 0===n?"undefined":Ac(n)))return!1;if("object"===r){var i=t.valueOf(),s=n.valueOf();if(i!==t||s!==n)return e(i,s);var a=Object.keys(t),o=Object.keys(n);return a.length===o.length&&a.every(function(r){return e(t[r],n[r])})}return!1}(e.state,t.state)},jc=function(){var e=null,t=[];return{setPrompt:function(t){return _c(null==e,"A history supports only one prompt at a time"),e=t,function(){e===t&&(e=null)}},confirmTransitionTo:function(t,n,r,i){if(null!=e){var s="function"==typeof e?e(t,n):e;"string"==typeof s?"function"==typeof r?r(s,i):(_c(!1,"A history needs a getUserConfirmation function in order to use a prompt message"),i(!0)):i(!1!==s)}else i(!0)},appendListener:function(e){var n=!0,r=function(){n&&e.apply(void 0,arguments)};return t.push(r),function(){n=!1,t=t.filter(function(e){return e!==r})}},notifyListeners:function(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];t.forEach(function(e){return e.apply(void 0,n)})}}},Bc=!("undefined"==typeof window||!window.document||!window.document.createElement),Uc=function(e,t,n){return e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent("on"+t,n)},Hc=function(e,t,n){return e.removeEventListener?e.removeEventListener(t,n,!1):e.detachEvent("on"+t,n)},$c=function(e,t){return t(window.confirm(e))},zc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},qc=function(){try{return window.history.state||{}}catch(e){return{}}},Gc=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Sc(Bc,"Browser history needs a DOM");var t=window.history,n=function(){var e=window.navigator.userAgent;return(-1===e.indexOf("Android 2.")&&-1===e.indexOf("Android 4.0")||-1===e.indexOf("Mobile Safari")||-1!==e.indexOf("Chrome")||-1!==e.indexOf("Windows Phone"))&&window.history&&"pushState"in window.history}(),r=!function(){return-1===window.navigator.userAgent.indexOf("Trident")}(),i=e.forceRefresh,s=void 0!==i&&i,a=e.getUserConfirmation,o=void 0===a?$c:a,l=e.keyLength,c=void 0===l?6:l,u=e.basename?Mc(Lc(e.basename)):"",h=function(e){var t=e||{},n=t.key,r=t.state,i=window.location,s=i.pathname+i.search+i.hash;return _c(!u||Ic(s,u),'You are attempting to use a basename on a page whose URL path does not begin with the basename. Expected path "'+s+'" to begin with "'+u+'".'),u&&(s=Oc(s,u)),Fc(s,r,n)},p=function(){return Math.random().toString(36).substr(2,c)},d=jc(),f=function(e){Wc(N,e),N.length=t.length,d.notifyListeners(N.location,N.action)},m=function(e){(function(e){return void 0===e.state&&-1===navigator.userAgent.indexOf("CriOS")})(e)||b(h(e.state))},g=function(){b(h(qc()))},v=!1,b=function(e){if(v)v=!1,f();else{d.confirmTransitionTo(e,"POP",o,function(t){t?f({action:"POP",location:e}):y(e)})}},y=function(e){var t=N.location,n=x.indexOf(t.key);-1===n&&(n=0);var r=x.indexOf(e.key);-1===r&&(r=0);var i=n-r;i&&(v=!0,k(i))},w=h(qc()),x=[w.key],E=function(e){return u+Rc(e)},k=function(e){t.go(e)},C=0,_=function(e){1===(C+=e)?(Uc(window,"popstate",m),r&&Uc(window,"hashchange",g)):0===C&&(Hc(window,"popstate",m),r&&Hc(window,"hashchange",g))},S=!1,N={length:t.length,action:"POP",location:w,createHref:E,push:function(e,r){_c(!("object"===(void 0===e?"undefined":zc(e))&&void 0!==e.state&&void 0!==r),"You should avoid providing a 2nd state argument to push when the 1st argument is a location-like object that already has state; it is ignored");var i=Fc(e,r,p(),N.location);d.confirmTransitionTo(i,"PUSH",o,function(e){if(e){var r=E(i),a=i.key,o=i.state;if(n)if(t.pushState({key:a,state:o},null,r),s)window.location.href=r;else{var l=x.indexOf(N.location.key),c=x.slice(0,-1===l?0:l+1);c.push(i.key),x=c,f({action:"PUSH",location:i})}else _c(void 0===o,"Browser history cannot push state in browsers that do not support HTML5 history"),window.location.href=r}})},replace:function(e,r){_c(!("object"===(void 0===e?"undefined":zc(e))&&void 0!==e.state&&void 0!==r),"You should avoid providing a 2nd state argument to replace when the 1st argument is a location-like object that already has state; it is ignored");var i=Fc(e,r,p(),N.location);d.confirmTransitionTo(i,"REPLACE",o,function(e){if(e){var r=E(i),a=i.key,o=i.state;if(n)if(t.replaceState({key:a,state:o},null,r),s)window.location.replace(r);else{var l=x.indexOf(N.location.key);-1!==l&&(x[l]=i.key),f({action:"REPLACE",location:i})}else _c(void 0===o,"Browser history cannot replace state in browsers that do not support HTML5 history"),window.location.replace(r)}})},go:k,goBack:function(){return k(-1)},goForward:function(){return k(1)},block:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=d.setPrompt(e);return S||(_(1),S=!0),function(){return S&&(S=!1,_(-1)),t()}},listen:function(e){var t=d.appendListener(e);return _(1),function(){_(-1),t()}}};return N},Kc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Yc={hashbang:{encodePath:function(e){return"!"===e.charAt(0)?e:"!/"+Pc(e)},decodePath:function(e){return"!"===e.charAt(0)?e.substr(1):e}},noslash:{encodePath:Pc,decodePath:Lc},slash:{encodePath:Lc,decodePath:Lc}},Zc=function(){var e=window.location.href,t=e.indexOf("#");return-1===t?"":e.substring(t+1)},Qc=function(e){var t=window.location.href.indexOf("#");window.location.replace(window.location.href.slice(0,t>=0?t:0)+"#"+e)},Xc=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Sc(Bc,"Hash history needs a DOM");var t=window.history,n=function(){return-1===window.navigator.userAgent.indexOf("Firefox")}(),r=e.getUserConfirmation,i=void 0===r?$c:r,s=e.hashType,a=void 0===s?"slash":s,o=e.basename?Mc(Lc(e.basename)):"",l=Yc[a],c=l.encodePath,u=l.decodePath,h=function(){var e=u(Zc());return _c(!o||Ic(e,o),'You are attempting to use a basename on a page whose URL path does not begin with the basename. Expected path "'+e+'" to begin with "'+o+'".'),o&&(e=Oc(e,o)),Fc(e)},p=jc(),d=function(e){Kc(N,e),N.length=t.length,p.notifyListeners(N.location,N.action)},f=!1,m=null,g=function(){var e=Zc(),t=c(e);if(e!==t)Qc(t);else{var n=h(),r=N.location;if(!f&&Vc(r,n))return;if(m===Rc(n))return;m=null,v(n)}},v=function(e){if(f)f=!1,d();else{p.confirmTransitionTo(e,"POP",i,function(t){t?d({action:"POP",location:e}):b(e)})}},b=function(e){var t=N.location,n=E.lastIndexOf(Rc(t));-1===n&&(n=0);var r=E.lastIndexOf(Rc(e));-1===r&&(r=0);var i=n-r;i&&(f=!0,k(i))},y=Zc(),w=c(y);y!==w&&Qc(w);var x=h(),E=[Rc(x)],k=function(e){_c(n,"Hash history go(n) causes a full page reload in this browser"),t.go(e)},C=0,_=function(e){1===(C+=e)?Uc(window,"hashchange",g):0===C&&Hc(window,"hashchange",g)},S=!1,N={length:t.length,action:"POP",location:x,createHref:function(e){return"#"+c(o+Rc(e))},push:function(e,t){_c(void 0===t,"Hash history cannot push state; it is ignored");var n=Fc(e,void 0,void 0,N.location);p.confirmTransitionTo(n,"PUSH",i,function(e){if(e){var t=Rc(n),r=c(o+t);if(Zc()!==r){m=t,function(e){window.location.hash=e}(r);var i=E.lastIndexOf(Rc(N.location)),s=E.slice(0,-1===i?0:i+1);s.push(t),E=s,d({action:"PUSH",location:n})}else _c(!1,"Hash history cannot PUSH the same path; a new entry will not be added to the history stack"),d()}})},replace:function(e,t){_c(void 0===t,"Hash history cannot replace state; it is ignored");var n=Fc(e,void 0,void 0,N.location);p.confirmTransitionTo(n,"REPLACE",i,function(e){if(e){var t=Rc(n),r=c(o+t);Zc()!==r&&(m=t,Qc(r));var i=E.indexOf(Rc(N.location));-1!==i&&(E[i]=t),d({action:"REPLACE",location:n})}})},go:k,goBack:function(){return k(-1)},goForward:function(){return k(1)},block:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=p.setPrompt(e);return S||(_(1),S=!0),function(){return S&&(S=!1,_(-1)),t()}},listen:function(e){var t=p.appendListener(e);return _(1),function(){_(-1),t()}}};return N},Jc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},eu=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},tu=function(e,t,n){return Math.min(Math.max(e,t),n)},nu=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.getUserConfirmation,n=e.initialEntries,r=void 0===n?["/"]:n,i=e.initialIndex,s=void 0===i?0:i,a=e.keyLength,o=void 0===a?6:a,l=jc(),c=function(e){eu(m,e),m.length=m.entries.length,l.notifyListeners(m.location,m.action)},u=function(){return Math.random().toString(36).substr(2,o)},h=tu(s,0,r.length-1),p=r.map(function(e){return Fc(e,void 0,"string"==typeof e?u():e.key||u())}),d=Rc,f=function(e){var n=tu(m.index+e,0,m.entries.length-1),r=m.entries[n];l.confirmTransitionTo(r,"POP",t,function(e){e?c({action:"POP",location:r,index:n}):c()})},m={length:p.length,action:"POP",location:p[h],index:h,entries:p,createHref:d,push:function(e,n){_c(!("object"===(void 0===e?"undefined":Jc(e))&&void 0!==e.state&&void 0!==n),"You should avoid providing a 2nd state argument to push when the 1st argument is a location-like object that already has state; it is ignored");var r=Fc(e,n,u(),m.location);l.confirmTransitionTo(r,"PUSH",t,function(e){if(e){var t=m.index+1,n=m.entries.slice(0);n.length>t?n.splice(t,n.length-t,r):n.push(r),c({action:"PUSH",location:r,index:t,entries:n})}})},replace:function(e,n){_c(!("object"===(void 0===e?"undefined":Jc(e))&&void 0!==e.state&&void 0!==n),"You should avoid providing a 2nd state argument to replace when the 1st argument is a location-like object that already has state; it is ignored");var r=Fc(e,n,u(),m.location);l.confirmTransitionTo(r,"REPLACE",t,function(e){e&&(m.entries[m.index]=r,c({action:"REPLACE",location:r}))})},go:f,goBack:function(){return f(-1)},goForward:function(){return f(1)},canGo:function(e){var t=m.index+e;return t>=0&&t<m.entries.length},block:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return l.setPrompt(e)},listen:function(e){return l.appendListener(e)}};return m},ru=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};function iu(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var su=function(e){function t(){var n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,s=Array(i),a=0;a<i;a++)s[a]=arguments[a];return n=r=iu(this,e.call.apply(e,[this].concat(s))),r.state={match:r.computeMatch(r.props.history.location.pathname)},iu(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.getChildContext=function(){return{router:ru({},this.context.router,{history:this.props.history,route:{location:this.props.history.location,match:this.state.match}})}},t.prototype.computeMatch=function(e){return{path:"/",url:"/",params:{},isExact:"/"===e}},t.prototype.componentWillMount=function(){var e=this,t=this.props,n=t.children,r=t.history;Sc(null==n||1===Y.Children.count(n),"A <Router> may have only one child element"),this.unlisten=r.listen(function(){e.setState({match:e.computeMatch(r.location.pathname)})})},t.prototype.componentWillReceiveProps=function(e){xc(this.props.history===e.history,"You cannot change <Router history>")},t.prototype.componentWillUnmount=function(){this.unlisten()},t.prototype.render=function(){var e=this.props.children;return e?Y.Children.only(e):null},t}(Y.Component);function au(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}su.propTypes={history:Cc.object.isRequired,children:Cc.node},su.contextTypes={router:Cc.object},su.childContextTypes={router:Cc.object.isRequired},(function(e){function t(){var n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,s=Array(i),a=0;a<i;a++)s[a]=arguments[a];return n=r=au(this,e.call.apply(e,[this].concat(s))),r.history=nu(r.props),au(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentWillMount=function(){xc(!this.props.history,"<MemoryRouter> ignores the history prop. To use a custom history, use `import { Router }` instead of `import { MemoryRouter as Router }`.")},t.prototype.render=function(){return Y.createElement(su,{history:this.history,children:this.props.children})},t}(Y.Component)).propTypes={initialEntries:Cc.array,initialIndex:Cc.number,getUserConfirmation:Cc.func,keyLength:Cc.number,children:Cc.node};var ou=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.enable=function(e){this.unblock&&this.unblock(),this.unblock=this.context.router.history.block(e)},t.prototype.disable=function(){this.unblock&&(this.unblock(),this.unblock=null)},t.prototype.componentWillMount=function(){Sc(this.context.router,"You should not use <Prompt> outside a <Router>"),this.props.when&&this.enable(this.props.message)},t.prototype.componentWillReceiveProps=function(e){e.when?this.props.when&&this.props.message===e.message||this.enable(e.message):this.disable()},t.prototype.componentWillUnmount=function(){this.disable()},t.prototype.render=function(){return null},t}(Y.Component);ou.propTypes={when:Cc.bool,message:Cc.oneOfType([Cc.func,Cc.string]).isRequired},ou.defaultProps={when:!0},ou.contextTypes={router:Cc.shape({history:Cc.shape({block:Cc.func.isRequired}).isRequired}).isRequired};var lu=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)},cu=Cu,uu=mu,hu=function(e,t){return bu(mu(e,t))},pu=bu,du=ku,fu=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function mu(e,t){for(var n,r=[],i=0,s=0,a="",o=t&&t.delimiter||"/";null!=(n=fu.exec(e));){var l=n[0],c=n[1],u=n.index;if(a+=e.slice(s,u),s=u+l.length,c)a+=c[1];else{var h=e[s],p=n[2],d=n[3],f=n[4],m=n[5],g=n[6],v=n[7];a&&(r.push(a),a="");var b=null!=p&&null!=h&&h!==p,y="+"===g||"*"===g,w="?"===g||"*"===g,x=n[2]||o,E=f||m;r.push({name:d||i++,prefix:p||"",delimiter:x,optional:w,repeat:y,partial:b,asterisk:!!v,pattern:E?wu(E):v?".*":"[^"+yu(x)+"]+?"})}}return s<e.length&&(a+=e.substr(s)),a&&r.push(a),r}function gu(e){return encodeURI(e).replace(/[\/?#]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}function vu(e){return encodeURI(e).replace(/[?#]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}function bu(e){for(var t=new Array(e.length),n=0;n<e.length;n++)"object"==typeof e[n]&&(t[n]=new RegExp("^(?:"+e[n].pattern+")$"));return function(n,r){for(var i="",s=n||{},a=(r||{}).pretty?gu:encodeURIComponent,o=0;o<e.length;o++){var l=e[o];if("string"!=typeof l){var c,u=s[l.name];if(null==u){if(l.optional){l.partial&&(i+=l.prefix);continue}throw new TypeError('Expected "'+l.name+'" to be defined')}if(lu(u)){if(!l.repeat)throw new TypeError('Expected "'+l.name+'" to not repeat, but received `'+JSON.stringify(u)+"`");if(0===u.length){if(l.optional)continue;throw new TypeError('Expected "'+l.name+'" to not be empty')}for(var h=0;h<u.length;h++){if(c=a(u[h]),!t[o].test(c))throw new TypeError('Expected all "'+l.name+'" to match "'+l.pattern+'", but received `'+JSON.stringify(c)+"`");i+=(0===h?l.prefix:l.delimiter)+c}}else{if(c=l.asterisk?vu(u):a(u),!t[o].test(c))throw new TypeError('Expected "'+l.name+'" to match "'+l.pattern+'", but received "'+c+'"');i+=l.prefix+c}}else i+=l}return i}}function yu(e){return e.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function wu(e){return e.replace(/([=!:$\/()])/g,"\\$1")}function xu(e,t){return e.keys=t,e}function Eu(e){return e.sensitive?"":"i"}function ku(e,t,n){lu(t)||(n=t||n,t=[]);for(var r=(n=n||{}).strict,i=!1!==n.end,s="",a=0;a<e.length;a++){var o=e[a];if("string"==typeof o)s+=yu(o);else{var l=yu(o.prefix),c="(?:"+o.pattern+")";t.push(o),o.repeat&&(c+="(?:"+l+c+")*"),s+=c=o.optional?o.partial?l+"("+c+")?":"(?:"+l+"("+c+"))?":l+"("+c+")"}}var u=yu(n.delimiter||"/"),h=s.slice(-u.length)===u;return r||(s=(h?s.slice(0,-u.length):s)+"(?:"+u+"(?=$))?"),s+=i?"$":r&&h?"":"(?="+u+"|$)",xu(new RegExp("^"+s,Eu(n)),t)}function Cu(e,t,n){return lu(t)||(n=t||n,t=[]),n=n||{},e instanceof RegExp?function(e,t){var n=e.source.match(/\((?!\?)/g);if(n)for(var r=0;r<n.length;r++)t.push({name:r,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return xu(e,t)}(e,t):lu(e)?function(e,t,n){for(var r=[],i=0;i<e.length;i++)r.push(Cu(e[i],t,n).source);return xu(new RegExp("(?:"+r.join("|")+")",Eu(n)),t)}(e,t,n):function(e,t,n){return ku(mu(e,n),t,n)}(e,t,n)}cu.parse=uu,cu.compile=hu,cu.tokensToFunction=pu,cu.tokensToRegExp=du;var _u={},Su=0,Nu=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"/"===e?e:function(e){var t=e,n=_u[t]||(_u[t]={});if(n[e])return n[e];var r=cu.compile(e);return Su<1e4&&(n[e]=r,Su++),r}(e)(t,{pretty:!0})},Tu=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};var Au=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.isStatic=function(){return this.context.router&&this.context.router.staticContext},t.prototype.componentWillMount=function(){Sc(this.context.router,"You should not use <Redirect> outside a <Router>"),this.isStatic()&&this.perform()},t.prototype.componentDidMount=function(){this.isStatic()||this.perform()},t.prototype.componentDidUpdate=function(e){var t=Fc(e.to),n=Fc(this.props.to);Vc(t,n)?xc(!1,"You tried to redirect to the same route you're currently on: \""+n.pathname+n.search+'"'):this.perform()},t.prototype.computeTo=function(e){var t=e.computedMatch,n=e.to;return t?"string"==typeof n?Nu(n,t.params):Tu({},n,{pathname:Nu(n.pathname,t.params)}):n},t.prototype.perform=function(){var e=this.context.router.history,t=this.props.push,n=this.computeTo(this.props);t?e.push(n):e.replace(n)},t.prototype.render=function(){return null},t}(Y.Component);Au.propTypes={computedMatch:Cc.object,push:Cc.bool,from:Cc.string,to:Cc.oneOfType([Cc.string,Cc.object]).isRequired},Au.defaultProps={push:!1},Au.contextTypes={router:Cc.shape({history:Cc.shape({push:Cc.func.isRequired,replace:Cc.func.isRequired}).isRequired,staticContext:Cc.object}).isRequired};var Lu={},Pu=0,Iu=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments[2];"string"==typeof t&&(t={path:t});var r=t,i=r.path,s=r.exact,a=void 0!==s&&s,o=r.strict,l=void 0!==o&&o,c=r.sensitive;if(null==i)return n;var u=function(e,t){var n=""+t.end+t.strict+t.sensitive,r=Lu[n]||(Lu[n]={});if(r[e])return r[e];var i=[],s={re:cu(e,i,t),keys:i};return Pu<1e4&&(r[e]=s,Pu++),s}(i,{end:a,strict:l,sensitive:void 0!==c&&c}),h=u.re,p=u.keys,d=h.exec(e);if(!d)return null;var f=d[0],m=d.slice(1),g=e===f;return a&&!g?null:{path:i,url:"/"===i&&""===f?"/":f,isExact:g,params:p.reduce(function(e,t,n){return e[t.name]=m[n],e},{})}},Ou=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};function Mu(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var Ru=function(e){return 0===Y.Children.count(e)},Du=function(e){function t(){var n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,s=Array(i),a=0;a<i;a++)s[a]=arguments[a];return n=r=Mu(this,e.call.apply(e,[this].concat(s))),r.state={match:r.computeMatch(r.props,r.context.router)},Mu(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.getChildContext=function(){return{router:Ou({},this.context.router,{route:{location:this.props.location||this.context.router.route.location,match:this.state.match}})}},t.prototype.computeMatch=function(e,t){var n=e.computedMatch,r=e.location,i=e.path,s=e.strict,a=e.exact,o=e.sensitive;if(n)return n;Sc(t,"You should not use <Route> or withRouter() outside a <Router>");var l=t.route,c=(r||l.location).pathname;return Iu(c,{path:i,strict:s,exact:a,sensitive:o},l.match)},t.prototype.componentWillMount=function(){xc(!(this.props.component&&this.props.render),"You should not use <Route component> and <Route render> in the same route; <Route render> will be ignored"),xc(!(this.props.component&&this.props.children&&!Ru(this.props.children)),"You should not use <Route component> and <Route children> in the same route; <Route children> will be ignored"),xc(!(this.props.render&&this.props.children&&!Ru(this.props.children)),"You should not use <Route render> and <Route children> in the same route; <Route children> will be ignored")},t.prototype.componentWillReceiveProps=function(e,t){xc(!(e.location&&!this.props.location),'<Route> elements should not change from uncontrolled to controlled (or vice versa). You initially used no "location" prop and then provided one on a subsequent render.'),xc(!(!e.location&&this.props.location),'<Route> elements should not change from controlled to uncontrolled (or vice versa). You provided a "location" prop initially but omitted it on a subsequent render.'),this.setState({match:this.computeMatch(e,t.router)})},t.prototype.render=function(){var e=this.state.match,t=this.props,n=t.children,r=t.component,i=t.render,s=this.context.router,a=s.history,o=s.route,l=s.staticContext,c={match:e,location:this.props.location||o.location,history:a,staticContext:l};return r?e?Y.createElement(r,c):null:i?e?i(c):null:"function"==typeof n?n(c):n&&!Ru(n)?Y.Children.only(n):null},t}(Y.Component);Du.propTypes={computedMatch:Cc.object,path:Cc.string,exact:Cc.bool,strict:Cc.bool,sensitive:Cc.bool,component:Cc.func,render:Cc.func,children:Cc.oneOfType([Cc.func,Cc.node]),location:Cc.object},Du.contextTypes={router:Cc.shape({history:Cc.object.isRequired,route:Cc.object.isRequired,staticContext:Cc.object})},Du.childContextTypes={router:Cc.object.isRequired};var Fu=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};function Vu(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var ju=function(e){return"/"===e.charAt(0)?e:"/"+e},Bu=function(e,t){return e?Fu({},t,{pathname:ju(e)+t.pathname}):t},Uu=function(e,t){if(!e)return t;var n=ju(e);return 0!==t.pathname.indexOf(n)?t:Fu({},t,{pathname:t.pathname.substr(n.length)})},Hu=function(e){return"string"==typeof e?e:Rc(e)},$u=function(e){return function(){Sc(!1,"You cannot %s with <StaticRouter>",e)}},zu=function(){},Wu=function(e){function t(){var n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,s=Array(i),a=0;a<i;a++)s[a]=arguments[a];return n=r=Vu(this,e.call.apply(e,[this].concat(s))),r.createHref=function(e){return ju(r.props.basename+Hu(e))},r.handlePush=function(e){var t=r.props,n=t.basename,i=t.context;i.action="PUSH",i.location=Bu(n,Fc(e)),i.url=Hu(i.location)},r.handleReplace=function(e){var t=r.props,n=t.basename,i=t.context;i.action="REPLACE",i.location=Bu(n,Fc(e)),i.url=Hu(i.location)},r.handleListen=function(){return zu},r.handleBlock=function(){return zu},Vu(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.getChildContext=function(){return{router:{staticContext:this.props.context}}},t.prototype.componentWillMount=function(){xc(!this.props.history,"<StaticRouter> ignores the history prop. To use a custom history, use `import { Router }` instead of `import { StaticRouter as Router }`.")},t.prototype.render=function(){var e=this.props,t=e.basename,n=(e.context,e.location),r=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["basename","context","location"]),i={createHref:this.createHref,action:"POP",location:Uu(t,Fc(n)),push:this.handlePush,replace:this.handleReplace,go:$u("go"),goBack:$u("goBack"),goForward:$u("goForward"),listen:this.handleListen,block:this.handleBlock};return Y.createElement(su,Fu({},r,{history:i}))},t}(Y.Component);Wu.propTypes={basename:Cc.string,context:Cc.object.isRequired,location:Cc.oneOfType([Cc.string,Cc.object])},Wu.defaultProps={basename:"",location:"/"},Wu.childContextTypes={router:Cc.object.isRequired};var qu=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentWillMount=function(){Sc(this.context.router,"You should not use <Switch> outside a <Router>")},t.prototype.componentWillReceiveProps=function(e){xc(!(e.location&&!this.props.location),'<Switch> elements should not change from uncontrolled to controlled (or vice versa). You initially used no "location" prop and then provided one on a subsequent render.'),xc(!(!e.location&&this.props.location),'<Switch> elements should not change from controlled to uncontrolled (or vice versa). You provided a "location" prop initially but omitted it on a subsequent render.')},t.prototype.render=function(){var e=this.context.router.route,t=this.props.children,n=this.props.location||e.location,r=void 0,i=void 0;return Y.Children.forEach(t,function(t){if(null==r&&Y.isValidElement(t)){var s=t.props,a=s.path,o=s.exact,l=s.strict,c=s.sensitive,u=s.from,h=a||u;i=t,r=Iu(n.pathname,{path:h,exact:o,strict:l,sensitive:c},e.match)}}),r?Y.cloneElement(i,{location:n,computedMatch:r}):null},t}(Y.Component);qu.contextTypes={router:Cc.shape({route:Cc.object.isRequired}).isRequired},qu.propTypes={children:Cc.node,location:Cc.object};var Gu={childContextTypes:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},Ku={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},Yu=Object.defineProperty,Zu=Object.getOwnPropertyNames,Qu=Object.getOwnPropertySymbols,Xu=Object.getOwnPropertyDescriptor,Ju=Object.getPrototypeOf,eh=Ju&&Ju(Object);var th=function e(t,n,r){if("string"!=typeof n){if(eh){var i=Ju(n);i&&i!==eh&&e(t,i,r)}var s=Zu(n);Qu&&(s=s.concat(Qu(n)));for(var a=0;a<s.length;++a){var o=s[a];if(!(Gu[o]||Ku[o]||r&&r[o])){var l=Xu(n,o);try{Yu(t,o,l)}catch(c){}}}return t}return t},nh=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};var rh=function(e){var t=function(t){var n=t.wrappedComponentRef,r=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(t,["wrappedComponentRef"]);return Y.createElement(Du,{children:function(t){return Y.createElement(e,nh({},r,t,{ref:n}))}})};return t.displayName="withRouter("+(e.displayName||e.name)+")",t.WrappedComponent=e,t.propTypes={wrappedComponentRef:Cc.func},th(t,e)},ih=function(){},sh="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";function ah(){}var oh=n(function(e){e.exports=function(){function e(e,t,n,r,i,s){if(s!==sh){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t};return n.checkPropTypes=ah,n.PropTypes=n,n}()});function lh(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var ch=function(e){function t(){var n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,s=Array(i),a=0;a<i;a++)s[a]=arguments[a];return n=r=lh(this,e.call.apply(e,[this].concat(s))),r.history=Gc(r.props),lh(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentWillMount=function(){ih(!this.props.history,"<BrowserRouter> ignores the history prop. To use a custom history, use `import { Router }` instead of `import { BrowserRouter as Router }`.")},t.prototype.render=function(){return Y.createElement(su,{history:this.history,children:this.props.children})},t}(Y.Component);function uh(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}ch.propTypes={basename:oh.string,forceRefresh:oh.bool,getUserConfirmation:oh.func,keyLength:oh.number,children:oh.node},(function(e){function t(){var n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,s=Array(i),a=0;a<i;a++)s[a]=arguments[a];return n=r=uh(this,e.call.apply(e,[this].concat(s))),r.history=Xc(r.props),uh(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentWillMount=function(){ih(!this.props.history,"<HashRouter> ignores the history prop. To use a custom history, use `import { Router }` instead of `import { HashRouter as Router }`.")},t.prototype.render=function(){return Y.createElement(su,{history:this.history,children:this.props.children})},t}(Y.Component)).propTypes={basename:oh.string,getUserConfirmation:oh.func,hashType:oh.oneOf(["hashbang","noslash","slash"]),children:oh.node};var hh=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};function ph(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var dh=function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)},fh=function(e){function t(){var n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,s=Array(i),a=0;a<i;a++)s[a]=arguments[a];return n=r=ph(this,e.call.apply(e,[this].concat(s))),r.handleClick=function(e){if(r.props.onClick&&r.props.onClick(e),!e.defaultPrevented&&0===e.button&&!r.props.target&&!dh(e)){e.preventDefault();var t=r.context.router.history,n=r.props,i=n.replace,s=n.to;i?t.replace(s):t.push(s)}},ph(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.render=function(){var e=this.props,t=(e.replace,e.to),n=e.innerRef,r=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["replace","to","innerRef"]);Sc(this.context.router,"You should not use <Link> outside a <Router>"),Sc(void 0!==t,'You must specify the "to" property');var i=this.context.router.history,s="string"==typeof t?Fc(t,null,null,i.location):t,a=i.createHref(s);return Y.createElement("a",hh({},r,{onClick:this.handleClick,href:a,ref:n}))},t}(Y.Component);fh.propTypes={onClick:oh.func,target:oh.string,replace:oh.bool,to:oh.oneOfType([oh.string,oh.object]).isRequired,innerRef:oh.oneOfType([oh.string,oh.func])},fh.defaultProps={replace:!1},fh.contextTypes={router:oh.shape({history:oh.shape({push:oh.func.isRequired,replace:oh.func.isRequired,createHref:oh.func.isRequired}).isRequired}).isRequired};var mh=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},gh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var vh=function(e){var t=e.to,n=e.exact,r=e.strict,i=e.location,s=e.activeClassName,a=e.className,o=e.activeStyle,l=e.style,c=e.isActive,u=e["aria-current"],h=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["to","exact","strict","location","activeClassName","className","activeStyle","style","isActive","aria-current"]),p="object"===(void 0===t?"undefined":gh(t))?t.pathname:t,d=p&&p.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1");return Y.createElement(Du,{path:d,exact:n,strict:r,location:i,children:function(e){var n=e.location,r=e.match,i=!!(c?c(r,n):r);return Y.createElement(fh,mh({to:t,className:i?[a,s].filter(function(e){return e}).join(" "):a,style:i?mh({},l,o):l,"aria-current":i&&u||null},h))}})};function bh(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function yh(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){bh(e,t,n[t])})}return e}function wh(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}vh.propTypes={to:fh.propTypes.to,exact:oh.bool,strict:oh.bool,location:oh.object,activeClassName:oh.string,className:oh.string,activeStyle:oh.object,style:oh.object,isActive:oh.func,"aria-current":oh.oneOf(["page","step","location","date","time","true"])},vh.defaultProps={activeClassName:"active","aria-current":"page"};class xh extends Error{}class Eh extends Error{}class kh extends Error{}class Ch extends Error{constructor(e){super(),e&&Object.assign(this,e)}}class _h extends Error{constructor(e){super(),e&&Object.assign(this,e)}}var Sh=e=>encodeURIComponent(e).replace(/[!'()*]/g,e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`),Nh=new RegExp("%[a-f0-9]{2}","gi"),Th=new RegExp("(%[a-f0-9]{2})+","gi");function Ah(e,t){try{return decodeURIComponent(e.join(""))}catch(i){}if(1===e.length)return e;t=t||1;var n=e.slice(0,t),r=e.slice(t);return Array.prototype.concat.call([],Ah(n),Ah(r))}function Lh(e){try{return decodeURIComponent(e)}catch(r){for(var t=e.match(Nh),n=1;n<t.length;n++)t=(e=Ah(t,n).join("")).match(Nh);return e}}var Ph=function(e){if("string"!=typeof e)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof e+"`");try{return e=e.replace(/\+/g," "),decodeURIComponent(e)}catch(t){return function(e){for(var n={"%FE%FF":"��","%FF%FE":"��"},r=Th.exec(e);r;){try{n[r[0]]=decodeURIComponent(r[0])}catch(t){var i=Lh(r[0]);i!==r[0]&&(n[r[0]]=i)}r=Th.exec(e)}n["%C2"]="�";for(var s=Object.keys(n),a=0;a<s.length;a++){var o=s[a];e=e.replace(new RegExp(o,"g"),n[o])}return e}(e)}};function Ih(e,t){return t.encode?t.strict?Sh(e):encodeURIComponent(e):e}function Oh(e,t){return t.decode?Ph(e):e}var Mh=function(e,t){const n=function(e){let t;switch(e.arrayFormat){case"index":return(e,n,r)=>{t=/\[(\d*)\]$/.exec(e),e=e.replace(/\[\d*\]$/,""),t?(void 0===r[e]&&(r[e]={}),r[e][t[1]]=n):r[e]=n};case"bracket":return(e,n,r)=>{t=/(\[\])$/.exec(e),e=e.replace(/\[\]$/,""),t?void 0!==r[e]?r[e]=[].concat(r[e],n):r[e]=[n]:r[e]=n};default:return(e,t,n)=>{void 0!==n[e]?n[e]=[].concat(n[e],t):n[e]=t}}}(t=Object.assign({decode:!0,arrayFormat:"none"},t)),r=Object.create(null);if("string"!=typeof e)return r;if(!(e=e.trim().replace(/^[?#&]/,"")))return r;for(const i of e.split("&")){let[e,s]=i.replace(/\+/g," ").split("=");s=void 0===s?null:Oh(s,t),n(Oh(e,t),s,r)}return Object.keys(r).sort().reduce((e,t)=>{const n=r[t];return Boolean(n)&&"object"==typeof n&&!Array.isArray(n)?e[t]=function e(t){return Array.isArray(t)?t.sort():"object"==typeof t?e(Object.keys(t)).sort((e,t)=>Number(e)-Number(t)).map(e=>t[e]):t}(n):e[t]=n,e},Object.create(null))},Rh=(e,t)=>{if(!e)return"";const n=function(e){switch(e.arrayFormat){case"index":return(t,n,r)=>null===n?[Ih(t,e),"[",r,"]"].join(""):[Ih(t,e),"[",Ih(r,e),"]=",Ih(n,e)].join("");case"bracket":return(t,n)=>null===n?[Ih(t,e),"[]"].join(""):[Ih(t,e),"[]=",Ih(n,e)].join("");default:return(t,n)=>null===n?Ih(t,e):[Ih(t,e),"=",Ih(n,e)].join("")}}(t=Object.assign({encode:!0,strict:!0,arrayFormat:"none"},t)),r=Object.keys(e);return!1!==t.sort&&r.sort(t.sort),r.map(r=>{const i=e[r];if(void 0===i)return"";if(null===i)return Ih(r,t);if(Array.isArray(i)){const e=[];for(const t of i.slice())void 0!==t&&e.push(n(r,t,e.length));return e.join("&")}return Ih(r,t)+"="+Ih(i,t)}).filter(e=>e.length>0).join("&")};function Dh(e,...t){if(!e)return"";let n=e;for(const[r,i]of Object.entries(e))i instanceof Date&&(n===e&&(n=Object.assign({},e)),n[r]=i.toISOString());return Rh(n,...t)}function Fh(e){let t=Dh(e);return t?`?${t}`:""}function Vh(){const e=document.cookie.match(/(?:^|;)\s*T\s*=\s*([0-9a-f]{32})(?:$|;)/);if(e)return e[1];const t=function(e){return Array.from(crypto.getRandomValues(new Uint8Array(e)),e=>e.toString(16).padStart(2,"0")).join("")}(16),n=new Date(Date.now()+1728e5);return document.cookie=`T=${t}; Domain=.observablehq.com; Path=/; Secure; Expires=${n.toUTCString()}`,t}function jh(e=window.fetch){return function t(n){function r(e,t={}){return i(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(yh({token:Vh()},t))})}async function i(t,r={}){const{method:i}=r,s=await e("https://api.observablehq.com"+t,yh({credentials:"include"},r,n));if(204===s.status)return!0;let a;if((s.status>=400||!s.ok)&&(400===s.status?a=new Ch(await s.json()):401===s.status?a=new kh:404===s.status?a=new _h(await s.json()):s.ok||(a=new xh)),a)throw"POST"===i||"undefined"==typeof window||window.hasOwnProperty("onunhandledrejection")||dispatchEvent(new CustomEvent("unhandledrejection",{detail:a})),a;return s.json()}return{init:e=>t(e),documentNew(e,t){e||(e={nodes:[{id:0,value:"md`# Untitled`"}]});const{version:n,title:i,nodes:s}=e;return r("/document/new",{version:n,title:i,nodes:s,team:t})},documentSuggest:(e,{to_id:t,from_title:n,version:i,description:s})=>r(`/document/${e}/suggest`,{to_id:t,from_title:n,version:i,description:s}),documentTrash:e=>r(`/document/${e}/trash`,{trashed:!0}),documentTransfer:(e,t)=>r(`/document/${e}/transfer`,{user:t}),documentPutBack:e=>r(`/document/${e}/trash`,{trashed:!1}),documentsLoadPublic:e=>i(`/documents/public${Fh({before:e})}`),documentsLoadPopular:()=>i("/documents/public/popular"),documentsLoadUser:({before:e,types:t}={})=>i(`/user/documents${Fh({before:e,types:t})}`),documentsLoadTeam:(e,{before:t,types:n}={})=>i(`/team/${e}/documents${Fh({before:t,types:n})}`),documentsLoadUserLikes:e=>i(`/user/likes${Fh({before:e})}`),documentsEmptyTrash:e=>r("/user/trash/empty",e?{team:e}:{}),documentPublish:(e,t,n,i=!1)=>r(`/document/${e}/publish`,{version:t,title:n,unlisted:i}),documentFork:(e,t,{events:n,team:i,comments:s})=>r(`/document/${e}/fork`,{version:t,team:i,comments:s,events:n}),documentMerge:(e,t,{events:n,target:i})=>r(`/document/${e}/merge`,{version:t,events:n,target:i}),documentRevert:(e,t)=>r(`/document/${e}/revert`,{version:t}),documentUnpublish:e=>r(`/document/${e}/unpublish`),documentLike:(e,t)=>r(`/document/${e}/like`,{like:t}),documentLoadLikes:e=>i(`/document/${e}/likes`),documentLoad:(e,t)=>i(`/document/${e}${void 0===t?"":`@${t}`}`),documentLoadSecrets:e=>i(`/document/${e}/secrets`),documentAllowSecrets:(e,t)=>r(`/document/${e}/secrets`,{allow:t}),documentThumbnail:(e,t)=>r(`/document/${e}/thumbnail`,{thumbnail:t}),documentAllowDataConnector:(e,t,n)=>r(`/document/${e}/data-connector/authorize`,{name:t,allow:n}),documentLoadHead:e=>i(`/document/${e}/head`),documentLoadMeta:e=>i(`/document/${e}/meta`),documentLoadHistory:e=>i(`/document/${e}/history`),documentLoadLiked:e=>i(`/document/${e}/like`),documentLoadDataConnector:(e,t)=>r(`/document/${e}/data-connector/token`,{name:t}),documentLoadForks:(e,t,n)=>i(`/document/${e}/forks${Fh({before:t,type:n})}`),documentLoadByUser:(e,t)=>i(`/documents/@${e}${Fh({before:t})}`),documentVersion:e=>i(`/document/${e}/version`),documentSearch:(e,t,n)=>i(`/documents/search${Fh({query:e.trim().toLowerCase(),offset:t,limit:n})}`),documentsLoadCommonAncestry:(e,t)=>i(`/documents/${e}/${t}/ancestry`),collectionsLoadUser:(e,{type:t}={})=>i(`/collections/@${e}${Fh({type:t})}`),collectionsLoadUserPinned:e=>i(`/collections/@${e}/pinned`),collectionLoad:(e,t,{before:n}={})=>i(`/collection/@${e}/${t}${Fh({before:n})}`),collectionsLoadUserPublic:e=>i(`/collections/@${e}/public`),collectionsLoadUserPinnedPublic:e=>i(`/collections/@${e}/pinned/public`),collectionLoadPublic:(e,t,{before:n}={})=>i(`/collection/@${e}/${t}/public${Fh({before:n})}`),userLoad:e=>i(`/user/@${e}`),userSecrets:()=>i("/user/secrets"),userSetSecret:({name:e,value:t})=>r("/user/secret",{name:e,value:t}),userDataConnectors:()=>i("/user/data-connectors"),userSetDataConnector:({name:e,type:t,credentials:n})=>r("/user/data-connector",{name:e,type:t,credentials:n}),userDeleteDataConnector:e=>r("/user/data-connector/delete",{name:e}),userLoadDataConnectorCheckToken:e=>r("/user/data-connector/check-token",{name:e}),userStats:e=>i(`/user/${void 0===e?"":`@${e}/`}stats`),userSuggestions:({before:e,type:t}={})=>i(`/user/suggestions${Fh({before:e,type:t})}`),usersExist:e=>i(`/users-exist?${e.map(e=>`login=${e}`).join("&")}`),suggestionClose:e=>r(`/suggestion/${e}/close`),teamAcceptInvitation:(e,t)=>r(`/team/${e}/accept`,{id:t}),teamRescindInvitation:(e,t)=>r(`/team/${e}/rescind`,{id:t}),teamMembers:e=>i(`/team/${e}/members`),teamInvitations:e=>i(`/team/${e}/invitations`),teamSecrets:e=>i(`/team/${e}/secrets`),teamSetSecret:(e,{name:t,value:n})=>r(`/team/${e}/secret`,{name:t,value:n}),teamDataConnectors:e=>i(`/team/${e}/data-connectors`),teamSetDataConnector:(e,{name:t,type:n,credentials:i})=>r(`/team/${e}/data-connector`,{name:t,type:n,credentials:i}),teamDeleteDataConnector:(e,t)=>r(`/team/${e}/data-connector/delete`,{name:t}),teamLoadDataConnectorCheckToken:(e,t)=>r(`/team/${e}/data-connector/check-token`,{name:t}),teamGenerateDataConnectorSecret:(e,t)=>r(`/team/${e}/data-connector/secret`,{name:t}),teamStats:e=>i(`/team/${e}/stats`),teamSuggestions:(e,{before:t,type:n}={})=>i(`/team/${e}/suggestions${Fh({before:t,type:n})}`),teamInvite:(e,t,n)=>r(`/team/${e}/invite`,{email:t,role:n}),teamMemberRemove:(e,t)=>r(`/team/${e}/remove`,{user:t}),teamMemberRole:(e,t,n)=>r(`/team/${e}/role`,{user:t,role:n}),teamBillingUpdate:(e,t)=>r(`/team/${e}/billing`,{stripe_token:t}),teamBillingCycleUpdate:(e,t)=>r(`/team/${e}/billing/cycle`,{cycle:t}),teamBilling:e=>i(`/team/${e}/billing`),couponLoad:e=>i(`/coupon/${e}`),teamInvoices:(e,t)=>i(`/team/${e}/billing/invoices${Fh({starting_after:t})}`),teamInvoiceUpcoming:e=>i(`/team/${e}/billing/invoices/upcoming`),teamBillingDelete:e=>r(`/team/${e}/billing/delete`),teamEdit:(e,t)=>r(`/team/${e}/edit`,t),teamEditEmail:(e,t)=>r(`/team/${e}/email`,{email:t}),teamEditAvatar:(e,t)=>r(`/team/${e}/avatar`,{avatar:t}),teamNew:({login:e,name:t,email:n,stripe_token:i,cycle:s,coupon:a})=>r("/team/new",{login:e,name:t,email:n,stripe_token:i,cycle:s,coupon:a}),userEdit:e=>r("/user",e),userEditEmail:e=>r("/user/email",{email:e}),userEditAvatar:e=>r("/user/avatar",{avatar:e}),userEmailConfirm:e=>r("/user/email/confirm",{id:e}),userSetLogin:e=>r("/user/login",{login:e}),collectionNew:({title:e,description:t,owner:n,type:i})=>r("/collection/new",{title:e,description:t,owner:n,type:i}),collectionEdit:({id:e,title:t,description:n,feature_rank:i,pinned:s,type:a})=>r(`/collection/${e}/edit`,{title:t,description:n,feature_rank:i,pinned:s,type:a}),collectionDelete:e=>r(`/collection/${e}/delete`),collectionAddDocument:({id:e,document_id:t})=>r(`/collection/${e}/add`,{id:t}),collectionRemoveDocument:({id:e,document_id:t})=>r(`/collection/${e}/remove`,{id:t}),collectionThumbnail:(e,t)=>r(`/collection/${e}/thumbnail`,{thumbnail:t})}}()}var Bh=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n="function"==typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,s=n?Symbol.for("react.fragment"):60107,a=n?Symbol.for("react.strict_mode"):60108,o=n?Symbol.for("react.profiler"):60114,l=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,u=n?Symbol.for("react.async_mode"):60111,h=n?Symbol.for("react.concurrent_mode"):60111,p=n?Symbol.for("react.forward_ref"):60112,d=n?Symbol.for("react.suspense"):60113,f=n?Symbol.for("react.memo"):60115,m=n?Symbol.for("react.lazy"):60116;function g(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case u:case h:case s:case o:case a:case d:return e;default:switch(e=e&&e.$$typeof){case c:case p:case l:return e;default:return t}}case m:case f:case i:return t}}}function v(e){return g(e)===h}t.typeOf=g,t.AsyncMode=u,t.ConcurrentMode=h,t.ContextConsumer=c,t.ContextProvider=l,t.Element=r,t.ForwardRef=p,t.Fragment=s,t.Lazy=m,t.Memo=f,t.Portal=i,t.Profiler=o,t.StrictMode=a,t.Suspense=d,t.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===s||e===h||e===o||e===a||e===d||"object"==typeof e&&null!==e&&(e.$$typeof===m||e.$$typeof===f||e.$$typeof===l||e.$$typeof===c||e.$$typeof===p)},t.isAsyncMode=function(e){return v(e)||g(e)===u},t.isConcurrentMode=v,t.isContextConsumer=function(e){return g(e)===c},t.isContextProvider=function(e){return g(e)===l},t.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return g(e)===p},t.isFragment=function(e){return g(e)===s},t.isLazy=function(e){return g(e)===m},t.isMemo=function(e){return g(e)===f},t.isPortal=function(e){return g(e)===i},t.isProfiler=function(e){return g(e)===o},t.isStrictMode=function(e){return g(e)===a},t.isSuspense=function(e){return g(e)===d}});t(Bh);Bh.typeOf,Bh.AsyncMode,Bh.ConcurrentMode,Bh.ContextConsumer,Bh.ContextProvider,Bh.Element,Bh.ForwardRef,Bh.Fragment,Bh.Lazy,Bh.Memo,Bh.Portal,Bh.Profiler,Bh.StrictMode,Bh.Suspense,Bh.isValidElementType,Bh.isAsyncMode,Bh.isConcurrentMode,Bh.isContextConsumer,Bh.isContextProvider,Bh.isElement,Bh.isForwardRef,Bh.isFragment,Bh.isLazy,Bh.isMemo,Bh.isPortal,Bh.isProfiler,Bh.isStrictMode,Bh.isSuspense;var Uh=n(function(e,t){});t(Uh);Uh.typeOf,Uh.AsyncMode,Uh.ConcurrentMode,Uh.ContextConsumer,Uh.ContextProvider,Uh.Element,Uh.ForwardRef,Uh.Fragment,Uh.Lazy,Uh.Memo,Uh.Portal,Uh.Profiler,Uh.StrictMode,Uh.Suspense,Uh.isValidElementType,Uh.isAsyncMode,Uh.isConcurrentMode,Uh.isContextConsumer,Uh.isContextProvider,Uh.isElement,Uh.isForwardRef,Uh.isFragment,Uh.isLazy,Uh.isMemo,Uh.isPortal,Uh.isProfiler,Uh.isStrictMode,Uh.isSuspense,n(function(e){e.exports=Bh}),Function.call.bind(Object.prototype.hasOwnProperty);function Hh(){}function $h(){}$h.resetWarningCache=Hh;var zh=n(function(e){e.exports=function(){function e(e,t,n,r,i,s){if(s!==K){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:$h,resetWarningCache:Hh};return n.PropTypes=n,n}()});zh.object,zh.func,zh.oneOfType,zh.node,zh.bool;function Wh(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var qh=function(e){e.initialState,e.getInitialState,e.refs,e.getRefs,e.didMount,e.didUpdate,e.willUnmount,e.getSnapshotBeforeUpdate,e.shouldUpdate,e.render;return function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["initialState","getInitialState","refs","getRefs","didMount","didUpdate","willUnmount","getSnapshotBeforeUpdate","shouldUpdate","render"])},Gh=function(e){function t(){var n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,s=Array(i),a=0;a<i;a++)s[a]=arguments[a];return n=r=Wh(this,e.call.apply(e,[this].concat(s))),Kh.call(r),Wh(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.getArgs=function(){var e=this.state,t=this.props,n=this._setState,r=this._forceUpdate,i=this._refs;return{state:e,props:qh(t),refs:i,setState:n,forceUpdate:r}},t.prototype.componentDidMount=function(){this.props.didMount&&this.props.didMount(this.getArgs())},t.prototype.shouldComponentUpdate=function(e,t){return!this.props.shouldUpdate||this.props.shouldUpdate({props:this.props,state:this.state,nextProps:qh(e),nextState:t})},t.prototype.componentWillUnmount=function(){this.props.willUnmount&&this.props.willUnmount({state:this.state,props:qh(this.props),refs:this._refs})},t.prototype.componentDidUpdate=function(e,t,n){this.props.didUpdate&&this.props.didUpdate(Object.assign(this.getArgs(),{prevProps:qh(e),prevState:t}),n)},t.prototype.getSnapshotBeforeUpdate=function(e,t){return this.props.getSnapshotBeforeUpdate?this.props.getSnapshotBeforeUpdate(Object.assign(this.getArgs(),{prevProps:qh(e),prevState:t})):null},t.prototype.render=function(){var e=this.props,t=e.children,n=e.render;return n?n(this.getArgs()):"function"==typeof t?t(this.getArgs()):t||null},t}(Y.Component);Gh.defaultProps={getInitialState:function(){},getRefs:function(){return{}}};var Kh=function(){var e=this;this.state=this.props.initialState||this.props.getInitialState(this.props),this._refs=this.props.refs||this.props.getRefs(this.getArgs()),this._setState=function(){return e.setState.apply(e,arguments)},this._forceUpdate=function(){return e.forceUpdate.apply(e,arguments)}},Yh=function(e){var t=e.children,n=e.type,r=void 0===n?"reach-portal":n;return Y.createElement(Gh,{getRefs:function(){return{mountNode:null,portalNode:null}},didMount:function(e){var t=e.refs,n=e.forceUpdate,i=t.mountNode.ownerDocument;t.portalNode=i.createElement(r),i.body.appendChild(t.portalNode),n()},willUnmount:function(e){var t=e.refs.portalNode;t.ownerDocument.body.removeChild(t)},render:function(e){var n=e.refs,r=n.portalNode;return r?rc(t,r):Y.createElement("div",{ref:function(e){return n.mountNode=e}})}})},Zh=function(e,t){return function(n){if(e&&e(n),!n.defaultPrevented)return t(n)}},Qh=function(e,t){if(null!=e)if("function"==typeof e)e(t);else try{e.current=t}catch(n){throw new Error('Cannot assign value "'+t+'" to ref "'+e+'"')}},Xh=n(function(e){function t(){return e.exports=t=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},t.apply(this,arguments)}e.exports=t});var Jh=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t};var ep=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e};var tp=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},np=function(e){for(var t=Array(e.length),n=0;n<e.length;++n)t[n]=e[n];return t},rp=function(e){return Array.isArray(e)?e:[e]},ip=function(e,t){var n=e.tabIndex-t.tabIndex,r=e.index-t.index;if(n){if(!e.tabIndex)return 1;if(!t.tabIndex)return-1}return n||r},sp=function(e,t,n){return np(e).map(function(e,t){return{node:e,index:t,tabIndex:n&&-1===e.tabIndex?(e.dataset||{}).focusGuard?0:-1:e.tabIndex}}).filter(function(e){return!t||e.tabIndex>=0}).sort(ip)},ap=["button:enabled:not([readonly])","select:enabled:not([readonly])","textarea:enabled:not([readonly])","input:enabled:not([readonly])","a[href]","area[href]","iframe","object","embed","[tabindex]","[contenteditable]","[autofocus]"],op=ap.join(","),lp=op+", [data-focus-guard]",cp=function(e,t){return e.reduce(function(e,n){return e.concat(np(n.querySelectorAll(t?lp:op)),n.parentNode?np(n.parentNode.querySelectorAll(ap.join(","))).filter(function(e){return e===n}):[])},[])},up=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return n.push(t),t.parentNode&&e(t.parentNode,n),n},hp=function(e,t){for(var n=up(e),r=up(t),i=0;i<n.length;i+=1){var s=n[i];if(r.indexOf(s)>=0)return s}return!1},pp=function(e){return np(e).filter(function(e){return function e(t){return!t||t===document||!function(e){return!(!e||!e.getPropertyValue||"none"!==e.getPropertyValue("display")&&"hidden"!==e.getPropertyValue("visibility"))}(window.getComputedStyle(t,null))&&e(t.parentNode)}(e)}).filter(function(e){return function(e){return!(("INPUT"===e.tagName||"BUTTON"===e.tagName)&&("hidden"===e.type||e.disabled))}(e)})},dp=function(e,t){return sp(pp(cp(e,t)),!0,t)},fp=function(e){return pp(function(e){var t=e.querySelectorAll("[data-autofocus-inside]");return np(t).map(function(e){return cp([e])}).reduce(function(e,t){return e.concat(t)},[])}(e))},mp=function(e){return"INPUT"===e.tagName&&"radio"===e.type},gp=function(e){return e[0]&&e.length>1&&mp(e[0])&&e[0].name?function(e,t){return t.filter(mp).filter(function(t){return t.name===e.name}).filter(function(e){return e.checked})[0]||e}(e[0],e):e[0]},vp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bp=function(e){return rp(e).filter(Boolean).reduce(function(e,t){var n=t.getAttribute("data-focus-lock");return e.push.apply(e,n?function e(t){for(var n=t.length,r=0;r<n;r+=1)for(var i=function(n){if(r!==n&&t[r].contains(t[n]))return{v:e(t.filter(function(e){return e!==t[n]}))}},s=0;s<n;s+=1){var a=i(s);if("object"===(void 0===a?"undefined":vp(a)))return a.v}return t}(np(function e(t){return t.parentNode?e(t.parentNode):t}(t).querySelectorAll('[data-focus-lock="'+n+'"]:not([data-focus-lock-disabled="disabled"])'))):[t]),e},[])},yp=function(e,t,n){var r=rp(e),i=rp(t),s=r[0],a=null;return i.filter(Boolean).forEach(function(e){a=hp(a||e,e)||a,n.filter(Boolean).forEach(function(e){var t=hp(s,e);t&&(a=!a||t.contains(a)?t:hp(t,a))})}),a},wp=function(e){return!(e.dataset&&e.dataset.focusGuard)},xp=function(e,t){var n=document&&document.activeElement,r=bp(e).filter(wp),i=yp(n||e,e,r),s=dp(r).filter(function(e){var t=e.node;return wp(t)});if(s[0]||(s=function(e){return sp(pp(cp(e)),!1)}(r).filter(function(e){var t=e.node;return wp(t)}))[0]){var a=dp([i]).map(function(e){return e.node}),o=function(e,t){return e.map(function(e){return t.find(function(t){var n=t.node;return e===n})}).filter(Boolean)}(a,s),l=o.map(function(e){return e.node}),c=function(e,t,n,r,i){var s=e.length,a=e[0],o=e[s-1];if(!(e.indexOf(n)>=0)){var l=t.indexOf(n),c=t.indexOf(r||l),u=e.indexOf(r),h=l-c,p=t.indexOf(a),d=t.indexOf(o);return-1===l||-1===u?e.indexOf(i.length?gp(i):gp(e)):!h&&u>=0?u:h&&Math.abs(h)>1?u:l<=p?s-1:l>d?0:h?Math.abs(h)>1?u:(s+u+h)%s:void 0}}(l,a,n,t,l.filter(function(e){return function(t){return!!t.autofocus||t.dataset&&!!t.dataset.autofocus||e.indexOf(t)>=0}}(function(e){return e.reduce(function(e,t){return e.concat(fp(t))},[])}(r))));return void 0===c?c:o[c]}},Ep=function(e){return e===document.activeElement},kp=function(e){var t=document&&document.activeElement;return!(!t||t.dataset&&t.dataset.focusGuard)&&bp(e).reduce(function(e,n){return e||n.contains(t)||function(e){return!!function(e,t){return e.filter(function(e){return e===t})[0]}(np(e.querySelectorAll("iframe")),Ep)}(n)},!1)},Cp=0,_p=!1,Sp=function(e,t){var n=xp(e,t);if(!_p&&n){if(Cp>2)return console.error("FocusLock: focus-fighting detected. Only one focus management system could be active. See https://github.com/theKashey/focus-lock/#focus-fighting"),_p=!0,void setTimeout(function(){_p=!1},1);Cp++,function(e){e.focus(),e.contentWindow&&e.contentWindow.focus()}(n.node),Cp--}};function Np(e){var t=window.setImmediate;void 0!==t?t(e):setTimeout(e,1)}var Tp=function(){return function(){return document&&document.activeElement===document.body}()||function(){return document&&np(document.querySelectorAll("[data-no-focus-lock]")).some(function(e){return e.contains(document.activeElement)})}()},Ap=null,Lp=null,Pp=null;function Ip(e,t,n,r){var i=null,s=e;do{var a=r[s];if(a.guard)a.node.dataset.focusAutoGuard&&(i=a);else{if(!a.lockItem)break;if(s!==e)return;i=null}}while((s+=n)!==t);i&&(i.node.tabIndex=0)}var Op=function(e){return e&&"current"in e?e.current:e},Mp=function(){var e=!1;if(Ap){var t=Ap,n=t.observed,r=t.persistentFocus,i=t.autoFocus,s=t.shards,a=n||Pp&&Pp.portaledElement,o=document&&document.activeElement;if(a){var l=[a].concat(s.map(Op).filter(Boolean));if(o&&!function(e){return(Ap.whiteList||function(){return!0})(e)}(o)||(r||!Tp()||!Lp&&i)&&(!a||kp(l)||function(e){return Pp&&Pp.portaledElement===e}(o)||(document&&!Lp&&o&&!i?(o.blur(),document.body.focus()):(e=Sp(l,Lp),Pp={})),Lp=document&&document.activeElement),document){var c=document&&document.activeElement,u=function(e){var t=bp(e).filter(wp),n=yp(e,e,t),r=dp([n],!0),i=dp(t).filter(function(e){var t=e.node;return wp(t)}).map(function(e){return e.node});return r.map(function(e){var t=e.node;return{node:t,index:e.index,lockItem:i.indexOf(t)>=0,guard:!wp(t)}})}(l),h=u.find(function(e){return e.node===c});if(h){u.filter(function(e){var t=e.guard,n=e.node;return t&&n.dataset.focusAutoGuard}).forEach(function(e){return e.node.removeAttribute("tabIndex")});var p=u.indexOf(h);Ip(p,u.length,1,u),Ip(p,-1,-1,u)}}}}return e},Rp=function(e){Mp()&&e&&(e.stopPropagation(),e.preventDefault())},Dp=function(){return Np(Mp)},Fp=function(e){var t=e.target,n=e.currentTarget;n.contains(t)||function(e,t){Pp={observerNode:e,portaledElement:t}}(n,t)},Vp=function(){document.addEventListener("focusin",Rp,!0),document.addEventListener("focusout",Dp)},jp=function(){document.removeEventListener("focusin",Rp,!0),document.removeEventListener("focusout",Dp)};var Bp=function(e,t){return function(n){var r,i=[];function s(){r=e(i.map(function(e){return e.props})),t(r)}var a=function(e){function t(){return e.apply(this,arguments)||this}Jh(t,e),t.peek=function(){return r};var a=t.prototype;return a.shouldComponentUpdate=function(e){return!lc(e,this.props)},a.componentDidMount=function(){i.push(this),s()},a.componentDidUpdate=function(){s()},a.componentWillUnmount=function(){var e=i.indexOf(this);i.splice(e,1),s()},a.render=function(){return Y.createElement(n,this.props)},t}(te);return tp(a,"displayName","SideEffect("+function(e){return e.displayName||e.name||"Component"}(n)+")"),a}}(function(e){return e.filter(function(e){return!e.disabled}).slice(-1)[0]},function(e){e&&!Ap&&Vp();var t=Ap,n=t&&e&&e.onActivation===t.onActivation;Ap=e,t&&!n&&t.onDeactivation(),e?(Lp=null,n&&t.observed===e.observed||e.onActivation(),Mp(!0),Np(Mp)):(jp(),Lp=null)})(function(){return null}),Up={width:"1px",height:"0px",padding:0,overflow:"hidden",position:"fixed",top:"1px",left:"1px"},Hp=function(e){var t=e.children;return Y.createElement("div",null,t)};Hp.propTypes={};var $p=Y.Fragment?Y.Fragment:Hp,zp=[],Wp=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t=e.call.apply(e,[this].concat(r))||this,tp(ep(ep(t)),"state",{observed:void 0}),tp(ep(ep(t)),"onActivation",function(){t.originalFocusedElement=t.originalFocusedElement||document&&document.activeElement,t.state.observed&&t.props.onActivation&&t.props.onActivation(t.state.observed),t.isActive=!0}),tp(ep(ep(t)),"onDeactivation",function(){t.isActive=!1,t.props.returnFocus&&t.originalFocusedElement&&t.originalFocusedElement.focus&&(t.originalFocusedElement.focus(),t.originalFocusedElement=null),t.props.onDeactivation&&t.props.onDeactivation(t.state.observed)}),tp(ep(ep(t)),"onFocus",function(e){t.isActive&&Fp(e)}),tp(ep(ep(t)),"onBlur",Dp),tp(ep(ep(t)),"setObserveNode",function(e){return t.setState({observed:e})}),tp(ep(ep(t)),"isActive",!1),tp(ep(ep(t)),"update",function(){return t.setState(function(e){return{escapeAttempts:e.escapeAttempts+1}})}),tp(ep(ep(t)),"originalFocusedElement",null),t}return Jh(t,e),t.prototype.render=function(){var e,t=this.props,n=t.children,r=t.disabled,i=t.noFocusGuards,s=t.persistentFocus,a=t.autoFocus,o=(t.allowTextSelection,t.group),l=t.className,c=t.whiteList,u=t.shards,h=void 0===u?zp:u,p=t.as,d=void 0===p?"div":p,f=t.lockProps,m=void 0===f?{}:f,g=this.state.observed,v=Xh(((e={})["data-focus-lock-disabled"]=r&&"disabled",e["data-focus-lock"]=o,e),m);return Y.createElement($p,null,!i&&[Y.createElement("div",{key:"guard-first","data-focus-guard":!0,tabIndex:r?-1:0,style:Up}),Y.createElement("div",{key:"guard-nearest","data-focus-guard":!0,tabIndex:r?-1:1,style:Up})],Y.createElement(d,Xh({ref:this.setObserveNode},v,{className:l,onBlur:this.onBlur,onFocus:this.onFocus}),Y.createElement(Bp,{observed:g,disabled:r,persistentFocus:s,autoFocus:a,whiteList:c,shards:h,onActivation:this.onActivation,onDeactivation:this.onDeactivation}),n),!i&&Y.createElement("div",{"data-focus-guard":!0,tabIndex:r?-1:0,style:Up}))},t}(te);Wp.propTypes={},Wp.defaultProps={disabled:!1,returnFocus:!1,noFocusGuards:!1,autoFocus:!0,persistentFocus:!1,allowTextSelection:void 0,group:void 0,className:void 0,whiteList:void 0,shards:void 0,as:"div",lockProps:{},onActivation:void 0,onDeactivation:void 0};var qp=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t=e.call.apply(e,[this].concat(r))||this,tp(ep(ep(t)),"setObserveNode",function(e){t.observed=e,t.moveFocus()}),t}Jh(t,e);var n=t.prototype;return n.componentDidMount=function(){this.moveFocus()},n.componentDidUpdate=function(e){e.disabled&&!this.props.disabled&&this.moveFocus()},n.moveFocus=function(){var e=this.observed;!this.props.disabled&&e&&(kp(e)||Sp(e,null))},n.render=function(){var e=this.props,t=e.children,n=e.disabled,r=e.className;return Y.createElement("div",Xh({},function(e,t){var n={};return n[e]=t,n}("data-autofocus-inside",!n),{ref:this.setObserveNode,className:r}),t)},t}(te);tp(qp,"defaultProps",{disabled:!1,className:void 0}),qp.propTypes={};var Gp=function(e,t){return(Gp=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function Kp(e,t){function n(){this.constructor=e}Gp(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var Yp=function(){return(Yp=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};var Zp=function(){var e=0,t=null;return{add:function(n){0==e&&(t=function(){if(!document)return null;var e=document.createElement("style");return e.type="text/css",e}())&&(function(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}(t,n),function(e){(document.head||document.getElementsByTagName("head")[0]).appendChild(e)}(t)),e++},remove:function(){!--e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},Qp={left:0,top:0,right:0,gap:0},Xp=function(e){if(void 0===e&&(e="margin"),"undefined"==typeof window)return Qp;var t=function(e){var t=window.getComputedStyle(document.body),n=t["padding"===e?"paddingLeft":"marginLeft"],r=t["padding"===e?"paddingTop":"marginTop"],i=t["padding"===e?"paddingRight":"marginRight"];return[parseInt(n||"",10)||0,parseInt(r||"",10)||0,parseInt(i||"",10)||0]}(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},Jp=function(){var e=Zp();return function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return Kp(n,t),n.prototype.componentDidMount=function(){e.add(this.props.styles)},n.prototype.componentWillUnmount=function(){e.remove()},n.prototype.render=function(){return null},n}(ie)}(),ed=function(e,t,n,r){var i=e.left,s=e.top,a=e.right,o=e.gap;return void 0===n&&(n="margin"),"\n  body {\n    overflow: hidden "+r+";\n    "+[t&&"position: relative "+r+";","margin"==n&&"\n    padding-left: "+i+"px;\n    padding-top: "+s+"px;\n    padding-right: "+a+"px;\n    margin-left:0;\n    margin-top:0;\n    margin-right: "+o+"px "+r+";\n    ","padding"==n&&"padding-right: "+o+"px "+r+";"].filter(Boolean).join("")+"\n  }\n  \n  .right-scroll-bar-position {\n    right: "+o+"px "+r+";\n  }\n  \n  .width-before-scroll-bar {\n    margin-right: "+o+"px "+r+";\n  }\n  \n  .right-scroll-bar-position .right-scroll-bar-position {\n    right: 0 "+r+";\n  }\n  \n  .width-before-scroll-bar .width-before-scroll-bar {\n    margin-right: 0 "+r+";\n  }\n"},td=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={gap:Xp(t.props.gapMode)},t.onResize=function(){t.forceUpdate(),t.state.gap&&t.props.dynamic&&window.innerHeight>document.body.offsetHeight&&t.setState({gap:Qp})},t}return Kp(t,e),t.prototype.componentDidMount=function(){var e=Xp(this.props.gapMode);e!==this.state.gap&&this.setState({gap:e}),"undefined"!=typeof window&&window.addEventListener("resize",this.onResize)},t.prototype.componentWillUnmount=function(){"undefined"!=typeof window&&window.removeEventListener("resize",this.onResize)},t.prototype.componentDidUpdate=function(){if(!this.state.gap){var e=Xp(this.props.gapMode);e!==this.state.gap&&this.setState({gap:e})}},t.prototype.render=function(){var e=this.props,t=e.noRelative,n=e.noImportant,r=e.gapMode,i=void 0===r?"margin":r,s=this.state.gap;return ne(Jp,{styles:ed(s,!t,i,n?"":"!important")})},t}(te),nd=function(e){var t=window.getComputedStyle(e);return"hidden"!==t.overflowY&&!(t.overflowY===t.overflowX&&"visible"===t.overflowY)},rd=function(e,t,n){var r=n,i=t.target,s=e.contains(i),a=!1,o=r>0,l=0,c=0;do{var u=i.scrollTop,h=i.scrollHeight-i.clientHeight-u;(u||h)&&nd(i)&&(l+=h,c+=u),i=i.parentNode}while(!s&&i!==document.body||s&&(e.contains(i)||e===i));return o&&r>l?a=!0:!o&&-r>c&&(a=!0),a},id=!1;if("undefined"!=typeof window)try{var sd=Object.defineProperty({},"passive",{get:function(){return id=!0,!0}});window.addEventListener("test",sd,sd),window.removeEventListener("test",sd,sd)}catch(ZL){id=!1}var ad=!!id&&{passive:!1},od=function(e){return e.changedTouches?e.changedTouches[0].clientY:0},ld={fullWidth:"width-before-scroll-bar",zeroRight:"right-scroll-bar-position"},cd=function(e){return e&&"current"in e?e.current:e},ud=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.shouldPreventQueue=[],n.touchStart=0,n.ref=re(),n.shouldPrevent=function(e){var r=t.stack.filter(function(e){return e.props.enabled});if(r.length&&r[r.length-1]===n){var i=e.deltaY||od(e),s=n.shouldPreventQueue.filter(function(t){return t.name===e.type&&t.delta===i&&t.target===e.target})[0];if(s&&s.should)e.preventDefault();else if(!s){var a=(n.props.shards||[]).map(cd).filter(Boolean).filter(function(t){return t.contains(e.target)});(a.length>0?n.shouldCancelEvent(e,a[0]):!n.props.noIsolation)&&e.preventDefault()}}},n.shouldCancel=function(e,t,r,i){var s={name:e,delta:t,target:r,should:i};n.shouldPreventQueue.push(s),setTimeout(function(){n.shouldPreventQueue=n.shouldPreventQueue.filter(function(e){return e!==s})},1)},n.scrollTouchStart=function(e){n.touchStart=od(e)},n.scrollWheel=function(e){n.shouldCancel(e.type,e.deltaY,e.target,n.shouldCancelEvent(e,n.ref.current))},n.scrollTouchMove=function(e){n.shouldCancel(e.type,od(e),e.target,n.shouldCancelEvent(e,n.ref.current))},n}return Kp(t,e),t.prototype.componentDidMount=function(){t.stack.push(this),this.componentDidUpdate({enabled:!1})},t.prototype.componentWillUnmount=function(){var e=this;t.stack=t.stack.filter(function(t){return t!==e}),this.disable()},t.prototype.componentDidUpdate=function(e){e.enabled!==this.props.enabled&&(this.props.enabled?this.enable():this.disable())},t.prototype.enable=function(){"undefined"!=typeof document&&(document.addEventListener("wheel",this.shouldPrevent,ad),document.addEventListener("touchmove",this.shouldPrevent,ad),document.addEventListener("touchstart",this.scrollTouchStart,ad))},t.prototype.disable=function(){"undefined"!=typeof window&&(document.removeEventListener("wheel",this.shouldPrevent,ad),document.removeEventListener("touchmove",this.shouldPrevent,ad),document.removeEventListener("touchstart",this.scrollTouchStart,ad))},t.prototype.shouldCancelEvent=function(e,t){switch(e.type){case"wheel":case"scroll":return rd(t,e,e.deltaY);case"touchmove":return rd(t,e,this.touchStart-od(e))}return!1},t.prototype.render=function(){var e=this.props,t=e.forwardProps,n=e.children,r=e.className,i=e.removeScrollBar,s=e.enabled,a={ref:this.ref,onScrollCapture:this.scrollWheel,onWheelCapture:this.scrollWheel,onTouchMoveCapture:this.scrollTouchMove};return ne(oe,null,i&&s&&ne(td,{gapMode:"margin"}),t?ae(se.only(n),a):ne("div",Yp({},a,{className:r}),n))},t.classNames=ld,t.defaultProps={enabled:!0,removeScrollBar:!0},t.stack=[],t}(te),hd=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};function pd(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}var dd=function(){},fd=function(){},md=function(e){e.disposeAriaHider=function(e){var t=[],n=[];return Array.prototype.forEach.call(document.querySelectorAll("body > *"),function(r){if(r!==e.parentNode){var i=r.getAttribute("aria-hidden");null!==i&&"false"!==i||(t.push(i),n.push(r),r.setAttribute("aria-hidden","true"))}}),function(){n.forEach(function(e,n){var r=t[n];null===r?e.removeAttribute("aria-hidden"):e.setAttribute("aria-hidden",r)})}}(e.overlayNode)},gd=function(e){e.refs.disposeAriaHider()},vd=(Y.createContext(),Y.forwardRef(function(e,t){var n=e.isOpen,r=void 0===n||n,i=e.onDismiss,s=void 0===i?dd:i,a=e.initialFocusRef,o=e.onClick,l=e.onKeyDown,c=pd(e,["isOpen","onDismiss","initialFocusRef","onClick","onKeyDown"]);return Y.createElement(Gh,{didMount:fd},r?Y.createElement(Yh,{"data-reach-dialog-wrapper":!0},Y.createElement(Gh,{refs:{overlayNode:null},didMount:function(e){var t=e.refs;md(t)},willUnmount:gd},function(e){var n=e.refs;return Y.createElement(Wp,{returnFocus:!0,onActivation:function(){a&&a.current.focus()}},Y.createElement(ud,null,Y.createElement("div",hd({"data-reach-dialog-overlay":!0,onClick:Zh(o,function(e){e.stopPropagation(),s()}),onKeyDown:Zh(l,function(e){"Escape"===e.key&&(e.stopPropagation(),s())}),ref:function(e){n.overlayNode=e,Qh(t,e)}},c))))})):null)}));vd.propTypes={initialFocusRef:function(){}};var bd=function(e){return e.stopPropagation()},yd=Y.forwardRef(function(e,t){var n=e.onClick,r=(e.onKeyDown,pd(e,["onClick","onKeyDown"]));return Y.createElement("div",hd({"aria-modal":"true","data-reach-dialog-content":!0,tabIndex:"-1",onClick:Zh(n,bd),ref:function(e){Qh(t,e)}},r))}),wd=function(e){var t=e.isOpen,n=e.onDismiss,r=void 0===n?dd:n,i=e.initialFocusRef,s=pd(e,["isOpen","onDismiss","initialFocusRef"]);return Y.createElement(vd,{isOpen:t,onDismiss:r,initialFocusRef:i},Y.createElement(yd,s))};const xd={viewBox:"0 0 16 16",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",width:16,height:16},Ed=e=>Y.createElement("svg",Object.assign({width:"8",height:"16",viewBox:"0 0 8 16",fill:"none"},e),Y.createElement("path",{d:"M4.74329 10.1741C4.34605 10.6155 3.65395 10.6155 3.25671 10.1741L1.00207 7.66897C0.4229 7.02544 0.879592 6 1.74536 6L6.25464 6C7.12041 6 7.5771 7.02544 6.99793 7.66897L4.74329 10.1741Z",fill:"currentColor"})),kd=e=>Y.createElement("svg",Object.assign({width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},e),Y.createElement("path",{d:"M3 3H7.5V1H3V3ZM6.5 2V7.5H8.5V2H6.5ZM7.5 6.5H2V8.5H7.5V6.5ZM3 7.5V3H1V7.5H3ZM6.5 7.5V12H8.5V7.5H6.5ZM6.5 12H3V14H6.5V12ZM3 12V7.5H1V12H3ZM7.5 8.5H12V6.5H7.5V8.5ZM14 6.5V3H12V6.5H14ZM12 1H7.5V3H12V1ZM14 3C14 1.89543 13.1046 1 12 1V3L12 3H14ZM12 8.5C13.1046 8.5 14 7.60457 14 6.5H12L12 6.5V8.5ZM6.5 12L6.5 12V14C7.60457 14 8.5 13.1046 8.5 12H6.5ZM3 12L3 12H1C1 13.1046 1.89543 14 3 14V12ZM3 1C1.89543 1 1 1.89543 1 3H3L3 3V1Z",fill:"currentColor"}),Y.createElement("line",{x1:"12",y1:"9",x2:"12",y2:"15",stroke:"currentColor",strokeWidth:"2"}),Y.createElement("path",{d:"M15 12H9",stroke:"currentColor",strokeWidth:"2"})),Cd=e=>Y.createElement("svg",Object.assign({width:"8",height:"16",viewBox:"0 0 8 16",fill:"none"},e),Y.createElement("path",{d:"M1 7L4 9.5L7 7",stroke:"currentColor",strokeWidth:"1.8"})),_d=e=>Y.createElement("svg",Object.assign({width:"8",height:"16",viewBox:"0 0 8 16",fill:"none"},e),Y.createElement("path",{d:"M1 9.5L4 7L7 9.5",stroke:"currentColor",strokeWidth:"1.8"})),Sd=e=>Y.createElement("svg",Object.assign({width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},e),Y.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.25 4C5.25 4.69036 4.69036 5.25 4 5.25C3.30964 5.25 2.75 4.69036 2.75 4C2.75 3.30964 3.30964 2.75 4 2.75C4.69036 2.75 5.25 3.30964 5.25 4ZM4.99921 6.56284C6.02397 6.16301 6.75 5.16629 6.75 4C6.75 2.48122 5.51878 1.25 4 1.25C2.48122 1.25 1.25 2.48122 1.25 4C1.25 5.16569 1.97529 6.16198 2.99921 6.56222L3.00108 11.4944C3.00171 13.1508 4.34467 14.4933 6.00108 14.4933H7C7.55228 14.4933 8 14.0456 8 13.4933C8 12.941 7.55228 12.4933 7 12.4933H6.00108C5.44894 12.4933 5.00129 12.0458 5.00108 11.4937L4.99921 6.56284ZM9.49821 4.01055C8.94593 4.01056 8.49902 3.56284 8.50001 3.01056C8.50099 2.45827 8.9495 2.01055 9.50179 2.01055L10.009 2.01054C11.6635 2.01053 13.0033 3.35005 13.0036 5.00459L13.0045 9.62837C14.0274 10.0291 14.7517 11.0249 14.7517 12.1898C14.7517 13.7086 13.5205 14.9398 12.0017 14.9398C10.4829 14.9398 9.25172 13.7086 9.25172 12.1898C9.25172 11.0227 9.97871 10.0255 11.0045 9.62617L11.0036 5.00857C11.0035 4.45705 10.5569 4.01055 10.0054 4.01055L9.49821 4.01055ZM10.7517 12.1898C10.7517 11.4994 11.3114 10.9398 12.0017 10.9398C12.6921 10.9398 13.2517 11.4994 13.2517 12.1898C13.2517 12.8802 12.6921 13.4398 12.0017 13.4398C11.3114 13.4398 10.7517 12.8802 10.7517 12.1898Z",fill:"currentColor"})),Nd=e=>Y.createElement("svg",Object.assign({width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},e),Y.createElement("path",{d:"M13 3L9 3L3 3C2.44772 3 2 3.44772 2 4L2 11C2 11.5523 2.44772 12 3 12L7.5 12L9.5 14L11.5 12L13 12C13.5523 12 14 11.5523 14 11L14 4C14 3.44772 13.5523 3 13 3Z",stroke:"currentColor",strokeWidth:"2"}),Y.createElement("line",{x1:"5",y1:"6",x2:"10",y2:"6",stroke:"currentColor",strokeWidth:"2"}),Y.createElement("line",{x1:"5",y1:"9",x2:"11",y2:"9",stroke:"currentColor",strokeWidth:"2"})),Td=e=>{let t=Object.assign({},e);return Y.createElement("svg",Object.assign({width:"14",height:"16",viewBox:"0 0 14 16",fill:"none"},t),Y.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M1.24998 3.99999C1.24998 3.03349 2.03349 2.24998 2.99999 2.24998L7.84782 2.24999L11.0869 2.24999C12.0534 2.24999 12.8369 3.03349 12.8369 3.99999L12.837 11C12.837 11.9665 12.0535 12.75 11.087 12.75H10.25L8.45 14.1L8 14.4375L7.55 14.1L5.75 12.75L3 12.75C2.0335 12.75 1.25 11.9665 1.25 11L1.24998 3.99999ZM2.99999 3.74998C2.86191 3.74998 2.74999 3.86191 2.74999 3.99999L2.75 11C2.75 11.1381 2.86192 11.25 3 11.25L6.00001 11.25H6.25001L6.45001 11.4L8 12.5625L9.55 11.4L9.75 11.25H10H11.087C11.225 11.25 11.337 11.1381 11.337 11L11.3369 3.99999C11.3369 3.86192 11.225 3.74999 11.0869 3.74999L7.84781 3.74999L2.99999 3.74998ZM9.08694 9.5H3.99998V8H9.08694V9.5ZM4 7H10V5.5H4V7Z",fill:"currentColor"}))},Ad=e=>Y.createElement("svg",Object.assign({width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},e),Y.createElement("path",{d:"M8 2H3C2.44772 2 2 2.44772 2 3V8M8 2V8M8 2H13C13.5523 2 14 2.44772 14 3V8M8 8H2M8 8V14M8 8H14M2 8V13C2 13.5523 2.44772 14 3 14H8M8 14H13C13.5523 14 14 13.5523 14 13V8",stroke:"currentColor",strokeWidth:"2"})),Ld=e=>Y.createElement("svg",Object.assign({width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},e),Y.createElement("path",{d:"M4 7.57143L6.90909 11L12 5",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})),Pd=e=>Y.createElement("svg",Object.assign({width:"12",height:"16",viewBox:"0 0 12 16",fill:"none"},e),Y.createElement("path",{d:"M2.59998 8.5L5.09998 10.6429L9.59998 6",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"square"})),Id=e=>Y.createElement("svg",Object.assign({},xd,{fill:"currentColor",stroke:"none"},e),Y.createElement("circle",{r:"2",cy:"8",cx:"2"}),Y.createElement("circle",{r:"2",cy:"8",cx:"8"}),Y.createElement("circle",{r:"2",cy:"8",cx:"14"})),Od=e=>Y.createElement("svg",Object.assign({width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},e),Y.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4 13H6V15H4C2.89543 15 2 14.1046 2 13V3C2 1.89543 2.89543 1 4 1H10H10.4142L10.7071 1.29289L13.7071 4.29289L14 4.58579V5V7.5H12V6L10 6H9V5L9 3L4 3L4 13ZM10 14.9684L7.35982 12.7682L8.64019 11.2318L10 12.365V9H12V12.365L13.3598 11.2318L14.6402 12.7682L12 14.9684V15H11.9621L11.6402 15.2682L11 15.8017L10.3598 15.2682L10.038 15H10V14.9684Z",fill:"currentColor"})),Md=e=>Y.createElement("svg",Object.assign({width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},e),Y.createElement("path",{d:"M9.23628 2L12.9259 5.69224L6.47735 12.9933L1.91889 14.1539L2.78769 9.3011L9.23628 2Z",stroke:"currentColor",strokeWidth:"2",strokeLinejoin:"round"})),Rd=e=>Y.createElement("svg",Object.assign({width:"8",height:"16",viewBox:"0 0 8 16",fill:"none"},e),Y.createElement("path",{d:"M2.8703 4L3.0578 9.68359H4.9328L5.1203 4H2.8703ZM3.9953 12.6602C4.75116 12.6602 5.19647 12.2676 5.19647 11.5938C5.19647 10.9141 4.75116 10.5215 3.9953 10.5215C3.23944 10.5215 2.79999 10.9141 2.79999 11.5938C2.79999 12.2676 3.23944 12.6602 3.9953 12.6602Z",fill:"currentColor"})),Dd=e=>Y.createElement("svg",Object.assign({width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},e),Y.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.5 1.75C3.80964 1.75 3.25 2.30964 3.25 3C3.25 3.69036 3.80964 4.25 4.5 4.25C5.19036 4.25 5.75 3.69036 5.75 3C5.75 2.30964 5.19036 1.75 4.5 1.75ZM1.75 3C1.75 1.48122 2.98122 0.25 4.5 0.25C6.01878 0.25 7.25 1.48122 7.25 3C7.25 4.16599 6.52434 5.1625 5.5 5.56253V7H8.5C9.4199 7 10.1947 6.37895 10.4281 5.53327C9.44188 5.11546 8.75 4.13853 8.75 3C8.75 1.48122 9.98122 0.25 11.5 0.25C13.0188 0.25 14.25 1.48122 14.25 3C14.25 4.18168 13.5047 5.18928 12.4585 5.57835C12.1782 7.51343 10.5127 9 8.5 9H5.5V10.4375C6.52434 10.8375 7.25 11.834 7.25 13C7.25 14.5188 6.01878 15.75 4.5 15.75C2.98122 15.75 1.75 14.5188 1.75 13C1.75 11.834 2.47566 10.8375 3.5 10.4375L3.5 9V7V5.56253C2.47566 5.1625 1.75 4.16599 1.75 3ZM4.5 11.75C3.80964 11.75 3.25 12.3096 3.25 13C3.25 13.6904 3.80964 14.25 4.5 14.25C5.19036 14.25 5.75 13.6904 5.75 13C5.75 12.3096 5.19036 11.75 4.5 11.75ZM10.25 3C10.25 2.30964 10.8096 1.75 11.5 1.75C12.1904 1.75 12.75 2.30964 12.75 3C12.75 3.69036 12.1904 4.25 11.5 4.25C10.8096 4.25 10.25 3.69036 10.25 3Z",fill:"currentColor"})),Fd=e=>Y.createElement("svg",Object.assign({width:"14",height:"16",viewBox:"0 0 14 16",fill:"none"},e),Y.createElement("circle",{cx:"3.5",cy:"4",r:"1.5",fill:"white",stroke:"currentColor",strokeWidth:"1.5"}),Y.createElement("circle",{cx:"3.5",cy:"12.5",r:"1.5",fill:"white",stroke:"currentColor",strokeWidth:"1.5"}),Y.createElement("circle",{cx:"10.5",cy:"4",r:"1.5",fill:"white",stroke:"currentColor",strokeWidth:"1.5"}),Y.createElement("path",{d:"M10 5V5C10 6.65685 8.65685 8 7 8H3",stroke:"currentColor",strokeWidth:"1.5"}),Y.createElement("path",{d:"M3.5 6V10.5",stroke:"currentColor",strokeWidth:"1.5"})," "),Vd=e=>Y.createElement("svg",Object.assign({width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},e),Y.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.00001 2L3 2H2L2 3L2.00001 8L4.00001 8L4.00001 5.47903L6.93541 8.41443L8.34963 7.00022L5.34941 4L8.00001 4L8.00001 2ZM8.00001 14H13H14V13V8H12V10.6122L9.50723 8.15797L8.10409 9.58317L10.5589 12H8.00001V14Z",fill:"currentColor"})),jd=e=>Y.createElement("svg",Object.assign({width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},e),Y.createElement("path",{d:"M7.23913 1H8.79862C9.21959 1 9.59549 1.26364 9.73885 1.65946L10.3259 3.28024C10.4028 3.49249 10.559 3.66559 10.7515 3.78351C10.9495 3.90482 11.1807 3.96443 11.4106 3.93133L12.9739 3.70625C13.377 3.64823 13.7749 3.84034 13.9801 4.19199L14.6107 5.27241C14.84 5.66536 14.7752 6.16359 14.4529 6.48476L13.3895 7.5446C13.2012 7.73224 13.0954 7.9871 13.0954 8.2529V8.30543C13.0954 8.52234 13.1659 8.73337 13.2964 8.9067L14.5165 10.5281C14.7988 10.9034 14.782 11.4246 14.4761 11.7809L13.4612 12.9629C13.1848 13.2847 12.7355 13.3972 12.3402 13.2435L10.864 12.6697C10.738 12.6207 10.599 12.6166 10.4704 12.6579C10.3046 12.7112 10.1708 12.8351 10.1051 12.9963L9.54175 14.3776C9.38826 14.754 9.02224 15 8.61579 15H7.65787C7.25142 15 6.8854 14.754 6.73191 14.3776L6.17505 13.0122C6.10519 12.8409 5.96312 12.7093 5.787 12.6527C5.668 12.6145 5.54028 12.6127 5.42031 12.6478L3.22003 13.2899C2.79336 13.4144 2.3357 13.2423 2.09672 12.8676L1.38429 11.7503C1.15444 11.3899 1.17915 10.9231 1.4458 10.589L2.83647 8.84608C2.9698 8.679 3.04241 8.47158 3.04241 8.25783C3.04241 7.99041 2.92889 7.73556 2.7301 7.55669L1.61262 6.55122C1.25683 6.23109 1.17775 5.70375 1.42399 5.29334L2.14943 4.08428C2.36093 3.73178 2.76659 3.54463 3.17203 3.6125L4.83485 3.89085C5.03567 3.92446 5.23969 3.87621 5.41382 3.77069C5.59248 3.66244 5.73338 3.49783 5.79467 3.29813L6.28314 1.7066C6.41202 1.28666 6.79986 1 7.23913 1Z",stroke:"currentColor",strokeWidth:"1.8"}),Y.createElement("circle",{cx:"8",cy:"8",r:"2.1",stroke:"currentColor",strokeWidth:"1.8"})),Bd=e=>Y.createElement("svg",Object.assign({width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},e),Y.createElement("circle",{cx:"8",cy:"8",r:"6.25",stroke:"currentColor",strokeWidth:"1.5"}),Y.createElement("path",{d:"M2 6H14",stroke:"currentColor",strokeWidth:"1.5"}),Y.createElement("line",{x1:"2",y1:"10.25",x2:"14",y2:"10.25",stroke:"currentColor",strokeWidth:"1.5"}),Y.createElement("path",{d:"M8 2C7.5 2.83333 5.5 4.6875 5.5 8C5.5 12 8 14 8 14",stroke:"currentColor",strokeWidth:"1.5"}),Y.createElement("path",{d:"M8 2C8.5 2.83333 10.5 4.6875 10.5 8C10.5 12 8 14 8 14",stroke:"currentColor",strokeWidth:"1.5"})),Ud=e=>Y.createElement("svg",Object.assign({width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},e),Y.createElement("path",{d:"M4.93323 5.9248H6.78577C6.82678 5.17285 7.34631 4.6875 8.13245 4.6875C8.91174 4.6875 9.43127 5.13867 9.43127 5.77441C9.43127 6.41016 9.16467 6.73828 8.28284 7.26465C7.33948 7.81836 6.9635 8.43359 7.05237 9.52734L7.06604 9.90332H8.87756V9.54102C8.87756 8.88477 9.13049 8.5498 10.0397 8.02344C11.0035 7.45605 11.5026 6.73828 11.5026 5.71289C11.5026 4.13379 10.2106 3.04688 8.25549 3.04688C6.15686 3.04688 4.96741 4.22266 4.93323 5.9248ZM8.04358 13.2051C8.8092 13.2051 9.28088 12.7607 9.28088 12.043C9.28088 11.3184 8.8092 10.874 8.04358 10.874C7.27795 10.874 6.79944 11.3184 6.79944 12.043C6.79944 12.7607 7.27795 13.2051 8.04358 13.2051Z",fill:"currentColor"})),Hd=e=>Y.createElement("svg",Object.assign({width:"14",height:"16",viewBox:"0 0 14 16",fill:"none"},e),Y.createElement("path",{d:"M11.6514 3.85743C11.3827 3.58556 11.0636 3.36991 10.7124 3.22279C10.3612 3.07566 9.98483 2.99996 9.60471 3C8.83662 3 8.10061 3.44309 7.558 3.99184L6.99981 4.55729L6.44162 3.99184C5.31148 2.84891 3.47834 2.7145 2.34821 3.85743C2.0793 4.12928 1.86598 4.45204 1.72045 4.80727C1.57491 5.16251 1.5 5.54327 1.5 5.92779C1.5 6.31231 1.57491 6.69307 1.72045 7.04831C1.86598 7.40354 2.0793 7.7263 2.34821 7.99815L2.9064 8.56174L6.99981 13L11.0932 8.56174L11.6514 7.99815C11.9204 7.72637 12.1338 7.40363 12.2794 7.04838C12.4251 6.69313 12.5 6.31235 12.5 5.92779C12.5 5.54323 12.4251 5.16245 12.2794 4.8072C12.1338 4.45195 11.9204 4.12922 11.6514 3.85743V3.85743Z",stroke:"currentColor",strokeWidth:"1.5"})),$d=e=>Y.createElement("svg",Object.assign({width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},e),Y.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13.5 8C13.5 11.0376 11.0376 13.5 8 13.5C4.96243 13.5 2.5 11.0376 2.5 8C2.5 4.96243 4.96243 2.5 8 2.5C11.0376 2.5 13.5 4.96243 13.5 8ZM15.5 8C15.5 12.1421 12.1421 15.5 8 15.5C3.85786 15.5 0.5 12.1421 0.5 8C0.5 3.85786 3.85786 0.5 8 0.5C12.1421 0.5 15.5 3.85786 15.5 8ZM9 5V4H7V5V8.5V9.5H8H11H12V7.5H11H9V5Z",fill:"currentColor"}));function zd(e){let t=Object.assign({},e);return Y.createElement("svg",Object.assign({width:"21",height:"10"},t),Y.createElement("path",{d:"M9 3C7.667 1.667 6.333 1 5 1 3 1 1 2.5 1 5s2 4 4 4 3-1 5.5-4S14 1 16 1s4 1.5 4 4-2 4-4 4c-1.333 0-2.667-.667-4-2",stroke:"currentColor",strokeWidth:"2",fill:"none",fillRule:"evenodd"}))}const Wd=e=>Y.createElement("svg",Object.assign({width:"8",height:"16",viewBox:"0 0 8 16",fill:"none"},e),Y.createElement("path",{d:"M2.98713 12.6H5.00005V6H2.98713V12.6ZM4 5.16211C4.60352 5.16211 5.10156 4.6875 5.10156 4.08398C5.10156 3.48047 4.60352 3 4 3C3.39648 3 2.89844 3.48047 2.89844 4.08398C2.89844 4.6875 3.39648 5.16211 4 5.16211Z",fill:"currentColor"})),qd=e=>{let t=Object.assign({},e);return Y.createElement("svg",Object.assign({width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},t),Y.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",fill:"currentColor",d:"M13.0989 3.10674C12.334 2.30989 11.0679 2.28402 10.2711 3.04894L7.38542 5.81898L6.00041 4.37616L8.88604 1.60612C10.4797 0.0762729 13.0119 0.128028 14.5417 1.72172C16.0716 3.31541 16.0198 5.84754 14.4261 7.37739L11.5405 10.1474L10.1555 8.70461L13.0411 5.93458C13.8379 5.16965 13.8638 3.90358 13.0989 3.10674ZM2.99896 12.802C3.76389 13.5988 5.02995 13.6247 5.8268 12.8598L8.71243 10.0897L10.0975 11.5325L7.21182 14.3026C5.61812 15.8324 3.08599 15.7807 1.55614 14.187C0.0262931 12.5933 0.0780473 10.0612 1.67174 8.5313L4.55738 5.76127L5.94239 7.20408L3.05676 9.97412C2.25991 10.739 2.23404 12.0051 2.99896 12.802ZM9.52061 5.1554L5.19216 9.31046L6.57717 10.7533L10.9056 6.59822L9.52061 5.1554Z"}))},Gd=e=>{let t=Object.assign({},e);return Y.createElement("svg",Object.assign({width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},t),Y.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",fill:"currentColor",d:"M14.1386 12.3101C14.9964 11.0907 15.5 9.60418 15.5 8C15.5 3.85786 12.1421 0.5 8 0.5C3.85786 0.5 0.5 3.85786 0.5 8C0.5 12.1421 3.85786 15.5 8 15.5C10.4547 15.5 12.634 14.3207 14.0022 12.4978L14.1642 12.3358L14.1386 12.3101ZM12.6949 10.8665C13.2056 10.0317 13.5 9.05025 13.5 8C13.5 6.82263 13.1301 5.73166 12.5001 4.837L11.2958 6.04126C11.6372 6.61449 11.8333 7.28435 11.8333 8C11.8333 8.58609 11.7018 9.14147 11.4666 9.63821L12.6949 10.8665ZM11.357 12.357L10.1643 11.1643C9.54841 11.5864 8.80304 11.8333 7.99999 11.8333C7.19695 11.8333 6.45158 11.5864 5.83567 11.1643L4.643 12.357C5.57179 13.0737 6.73611 13.5 8 13.5C9.26389 13.5 10.4282 13.0737 11.357 12.357ZM4.53335 9.63822C4.29819 9.14148 4.16666 8.5861 4.16666 8C4.16666 7.43752 4.28781 6.90333 4.50543 6.42211L3.27188 5.18856C2.78163 6.01126 2.5 6.97274 2.5 8C2.5 9.05025 2.79437 10.0317 3.30511 10.8665L4.53335 9.63822ZM7.99999 4.16667C7.17422 4.16667 6.40943 4.42778 5.78369 4.87193L4.59344 3.68169C5.53022 2.94169 6.71353 2.5 8 2.5C9.13759 2.5 10.1945 2.84537 11.0716 3.43698L9.86081 4.64782C9.30978 4.34128 8.67527 4.16667 7.99999 4.16667ZM9.83332 8C9.83332 9.01252 9.01251 9.83333 7.99999 9.83333C6.98747 9.83333 6.16666 9.01252 6.16666 8C6.16666 6.98748 6.98747 6.16667 7.99999 6.16667C9.01251 6.16667 9.83332 6.98748 9.83332 8Z"}))},Kd=e=>{let t=Object.assign({},e);return Y.createElement("svg",Object.assign({width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},t),Y.createElement("path",{d:"M13 6C13 7.63582 11.7144 9.58779 10.5 10.5L9.5 14H8H6.5L5.5 10.5C4.28555 9.58779 3 7.63582 3 6C3 3.23858 5.23858 1 8 1C10.7614 1 13 3.23858 13 6Z",stroke:"currentColor",strokeWidth:"2"}),Y.createElement("line",{x1:"10",y1:"13",x2:"6",y2:"13",stroke:"currentColor",strokeWidth:"2"}),Y.createElement("path",{d:"M9.43036 7.31526C11.416 5.7963 8.97597 2.61382 7.00002 4.13824",stroke:"currentColor",strokeWidth:"1.5"}))},Yd=e=>Y.createElement("svg",Object.assign({width:"14",height:"16",viewBox:"0 0 14 16",fill:"none"},e),Y.createElement("path",{d:"M11.5 6.61538C11.5 8.12537 10.343 9.92719 9.25 10.7692L8.35 14H7H5.65L4.75 10.7692C3.657 9.92719 2.5 8.12537 2.5 6.61538C2.5 4.06638 4.51472 2 7 2C9.48528 2 11.5 4.06638 11.5 6.61538Z",stroke:"currentColor",strokeWidth:"1.5"}),Y.createElement("line",{x1:"9",y1:"13",x2:"5",y2:"13",stroke:"currentColor",strokeWidth:"2"}),Y.createElement("path",{d:"M8.6212 7.63666C10.5114 6.19072 8.18866 3.16125 6.3077 4.61238",stroke:"currentColor",strokeWidth:"1.5"})),Zd=e=>{let t=Object.assign({},e);return Y.createElement("svg",Object.assign({width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},t),Y.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",fill:"currentColor",d:"M6.42383 5.48014L8.92383 8.48014L10.0762 7.51986L8.80837 5.9985L9.99667 5.99759C10.5499 5.99717 10.9984 6.44603 10.9974 6.99927L10.9933 9.44009C9.97251 9.84184 9.25 10.8365 9.25 12C9.25 13.5188 10.4812 14.75 12 14.75C13.5188 14.75 14.75 13.5188 14.75 12C14.75 10.8315 14.0212 9.83318 12.9933 9.43487L12.9974 7.00264C13.0002 5.34292 11.6549 3.99632 9.99514 3.99759L8.81087 3.9985L10.0762 2.48014L8.92383 1.51986L6.42383 4.51986L6.02372 5L6.42383 5.48014ZM7.99998 4.97156L8.00002 5.02849L7.97628 5L7.99998 4.97156ZM10.75 12C10.75 11.3096 11.3096 10.75 12 10.75C12.6904 10.75 13.25 11.3096 13.25 12C13.25 12.6904 12.6904 13.25 12 13.25C11.3096 13.25 10.75 12.6904 10.75 12ZM4 10.75C3.30964 10.75 2.75 11.3096 2.75 12C2.75 12.6904 3.30964 13.25 4 13.25C4.69036 13.25 5.25 12.6904 5.25 12C5.25 11.3096 4.69036 10.75 4 10.75ZM3 9.43747L3 3C3 2.44771 3.44772 2 4 2C4.55228 2 5 2.44771 5 3L5 9.43747C6.02434 9.8375 6.75 10.834 6.75 12C6.75 13.5188 5.51878 14.75 4 14.75C2.48122 14.75 1.25 13.5188 1.25 12C1.25 10.834 1.97566 9.8375 3 9.43747Z"}))},Qd=e=>{let t=Object.assign({},e);return Y.createElement("svg",Object.assign({width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},t),Y.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",fill:"currentColor",d:"M9.11458 11.5121L11.6146 8.51215L12.0414 8L11.6146 7.48785L9.11458 4.48785L7.88542 5.51215L9.29197 7.2L4 7.2V8.8L9.29197 8.8L7.88542 10.4879L9.11458 11.5121Z"}))},Xd=e=>{let t=Object.assign({},e);return Y.createElement("svg",Object.assign({width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},t),Y.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4 13H6V15H4C2.89543 15 2 14.1046 2 13V3C2 1.89543 2.89543 1 4 1H10H10.4142L10.7071 1.29289L13.7071 4.29289L14 4.58579V5V7.5H12V6L10 6H9V5L9 3L4 3L4 13ZM10 11V8.5H12V11H14.5V13H12V15.5H10V13H7.5V11H10Z",fill:"currentColor"}))},Jd=e=>{let t=Object.assign({},e);return Y.createElement("svg",Object.assign({width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},t),Y.createElement("path",{d:"M3 8L7.99999 8M13 8L7.99999 8M7.99999 13L7.99999 8M7.99999 8L7.99999 3",stroke:"currentColor",strokeWidth:"2"}))},ef=e=>{let t=Object.assign({},e);return Y.createElement("svg",Object.assign({width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},t),Y.createElement("path",{d:"M12.3943 1.5L14.9487 4.13732L10.4843 9.35239L7.32846 10.1813L7.92994 6.71507L12.3943 1.5Z",stroke:"currentColor",strokeWidth:"2",strokeLinejoin:"round"}),Y.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 1H3C1.89543 1 1 1.89543 1 3V13C1 14.1046 1.89543 15 3 15H12C13.1046 15 14 14.1046 14 13V11H12V13H3L3 3L8 3V1Z",fill:"currentColor"}))},tf=e=>{let t=Object.assign({},e);return Y.createElement("svg",Object.assign({width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},t),Y.createElement("path",{d:"M4.33291 5.99999H6H7V7.99999H6H2H1V6.99999V3V2H3V3V4.31502C4.45333 2.1643 7.11877 1.0023 9.80921 1.59029C13.3335 2.36051 15.5661 5.84188 14.7958 9.36614C14.0256 12.8904 10.5442 15.123 7.01998 14.3528L6.04304 14.1393L6.47006 12.1854L7.447 12.3989C9.89216 12.9333 12.3076 11.3843 12.842 8.93912C13.3763 6.49396 11.8274 4.07856 9.38219 3.54417C7.29175 3.08731 5.22305 4.1532 4.33291 5.99999Z",fill:"currentColor"}))},nf=e=>{let t=Object.assign({},e);return Y.createElement("svg",Object.assign({width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},t),Y.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",fill:"currentColor",d:"M10.2929 5.87868L9 7.17157V1H7V7.17157L5.70711 5.87868L4.29289 7.29289L7.29289 10.2929L8 11L8.70711 10.2929L11.7071 7.29289L10.2929 5.87868ZM3 15C1.89543 15 1 14.1046 1 13V8C1 6.89543 1.89543 6 3 6V8V13H13V8V6C14.1046 6 15 6.89543 15 8V13C15 14.1046 14.1046 15 13 15H3Z"}))},rf=e=>{let t=Object.assign({},e);return Y.createElement("svg",Object.assign({width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},t),Y.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",fill:"currentColor",d:"M6.81322 3.78267C5.13949 3.78267 3.78267 5.13949 3.78267 6.81322C3.78267 8.48694 5.13949 9.84376 6.81322 9.84376C8.48694 9.84376 9.84376 8.48694 9.84376 6.81322C9.84376 5.13949 8.48694 3.78267 6.81322 3.78267ZM2 6.81322C2 4.15495 4.15495 2 6.81322 2C9.47148 2 11.6264 4.15495 11.6264 6.81322C11.6264 7.83858 11.3058 8.78906 10.7593 9.56987L10.8547 9.47456L14.42 13.0399L13.1595 14.3004L9.59831 10.7393C8.81219 11.298 7.85106 11.6264 6.81322 11.6264C4.15495 11.6264 2 9.47148 2 6.81322Z"}))},sf=e=>{let t=Object.assign({},e);return Y.createElement("svg",Object.assign({width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},t),Y.createElement("path",{d:"M4 2L12 2C12.5523 2 13 2.44772 13 3L13 13C13 13.5523 12.5523 14 12 14L4 14",stroke:"currentColor",strokeWidth:"2"}),Y.createElement("path",{d:"M5 5L2.5 8L5 11",stroke:"currentColor",strokeWidth:"2"}),Y.createElement("line",{x1:"8",y1:"8",x2:"2",y2:"8",stroke:"currentColor",strokeWidth:"2"}))},af=e=>Y.createElement("svg",Object.assign({width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},e),Y.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M15 11.4C15 12.8359 13.8359 14 12.4 14L11 14H3.6C2.35959 14 1.32206 13.1314 1.0625 11.9692C1.02158 11.786 1 11.5955 1 11.4V11V10.7071V4.6C1 3.16406 2.16406 2 3.6 2H12.4C13.8359 2 15 3.16406 15 4.6V10.5V11.4ZM3 11.4C3 11.7314 3.26863 12 3.6 12H8.96914L5.90178 8.01243L3 10.9142L3 11.4ZM11.4924 12L7.20927 6.43192C6.62039 5.66638 5.49265 5.59314 4.8097 6.27609L3 8.08579L3 4.6C3 4.26863 3.26863 4 3.6 4L12.4 4C12.7314 4 13 4.26863 13 4.6V10.5V11.4C13 11.7314 12.7314 12 12.4 12H11.4924ZM12 6.5C12 7.32843 11.3284 8 10.5 8C9.67156 8 8.99999 7.32843 8.99999 6.5C8.99999 5.67157 9.67156 5 10.5 5C11.3284 5 12 5.67157 12 6.5Z",fill:"currentColor"})),of=e=>{let t=Object.assign({},e);return Y.createElement("svg",Object.assign({width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},t),Y.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.29289 4.70711L7.29289 1.70711L8 1L8.70711 1.70711L11.7071 4.70711L10.2929 6.12132L9 4.82843V10H7V4.82843L5.70711 6.12132L4.29289 4.70711ZM3 15C1.89543 15 1 14.1046 1 13V8C1 6.89543 1.89543 6 3 6V8V13H13V8V6C14.1046 6 15 6.89543 15 8V13C15 14.1046 14.1046 15 13 15H3Z",fill:"currentColor"}))},lf=e=>{let t=Object.assign({},e);return Y.createElement("svg",Object.assign({width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},t),Y.createElement("path",{d:"M5 3V5H11V3L5 3ZM3 3V5H1V7H3V13C3 14.1046 3.89543 15 5 15H11C12.1046 15 13 14.1046 13 13V7H15V5H13V3C13 1.89543 12.1046 1 11 1H5C3.89543 1 3 1.89543 3 3ZM5 13V7H7V13H5ZM9 13H11V7H9L9 13Z",fill:"currentColor",strokeWidth:"2",fillRule:"evenodd",clipRule:"evenodd"}))},cf=e=>{let t=Object.assign({},e);return Y.createElement("svg",Object.assign({width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},t),Y.createElement("path",{d:"M7 5.5C7 6.32843 6.32843 7 5.5 7C4.67157 7 4 6.32843 4 5.5C4 4.67157 4.67157 4 5.5 4C6.32843 4 7 4.67157 7 5.5ZM7.47118 8.39255C8.39415 7.76235 9 6.70193 9 5.5C9 3.567 7.433 2 5.5 2C3.567 2 2 3.567 2 5.5C2 6.70193 2.60585 7.76235 3.52882 8.39255C1.42531 9.26936 0 11.507 0 14H2C2 11.6891 3.6635 10 5.5 10C7.3365 10 9 11.6891 9 14H11C11 11.507 9.57469 9.26936 7.47118 8.39255ZM10.7943 4.37149C10.6095 4.15028 10.3566 4 10 4V2C11.0261 2 11.8163 2.4756 12.3289 3.0889C12.8197 3.67612 13.0863 4.42197 13.0863 5.08628C13.0863 5.88608 12.8633 6.71994 12.35 7.37771C12.2971 7.44563 12.2414 7.51111 12.183 7.57398C13.0379 8.03579 13.7664 8.72891 14.3323 9.47518C15.3396 10.8034 16 12.5103 16 14H14C14 13.0349 13.5411 11.7417 12.7387 10.6837C11.9307 9.61822 10.9416 9 10 9V8.5V7V6.5C10.377 6.5 10.6101 6.35651 10.7732 6.1474C10.9575 5.91125 11.0863 5.53825 11.0863 5.08628C11.0863 4.91608 11.001 4.6188 10.7943 4.37149Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}))},uf=e=>{let t=Object.assign({},e);return Y.createElement("svg",Object.assign({width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},t),Y.createElement("circle",{cx:"11",cy:"3",r:"2",stroke:"currentColor",strokeWidth:"2"}),Y.createElement("circle",{cx:"5",cy:"9",r:"2",stroke:"currentColor",strokeWidth:"2"}),Y.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.85575 7.93168C9.40222 7.35772 10.1737 7 11.0288 7C12.6856 7 14.0288 8.34315 14.0288 10H16.0288C16.0288 7.23858 13.7902 5 11.0288 5C9.80797 5 8.68935 5.43753 7.82117 6.16433C8.30621 6.6469 8.66815 7.2531 8.85575 7.93168Z",fill:"currentColor"}),Y.createElement("path",{d:"M9 16C9 13.7909 7.20914 12 5 12C2.79086 12 1 13.7909 1 16",stroke:"currentColor",strokeWidth:"2"}))};function hf(e){let t=Object.assign({},e);return Y.createElement("svg",Object.assign({width:"16",height:"16",fill:"currentColor"},t),Y.createElement("path",{d:"M15 3.429c-.517.24-1.07.402-1.651.477a3.028 3.028 0 0 0 1.264-1.675 5.761 5.761 0 0 1-1.827.728 2.8 2.8 0 0 0-2.1-.959C9.1 2 7.812 3.355 7.812 5.025c0 .24.027.47.074.691-2.39-.119-4.509-1.327-5.926-3.153-.25.444-.39.96-.39 1.522 0 1.052.509 1.977 1.279 2.52a2.758 2.758 0 0 1-1.302-.379c.66 1.819 1.428 2.821 2.306 3.007a2.783 2.783 0 0 1-1.293.052c.37 1.202 1.43 2.078 2.691 2.102A5.588 5.588 0 0 1 1 12.641 7.886 7.886 0 0 0 5.417 14c5.291 0 8.181-4.611 8.181-8.604 0-.128 0-.258-.008-.387.374-.283.844-.81 1.41-1.58z"}))}function pf(e){let t=Object.assign({},e);return Y.createElement("svg",Object.assign({width:"16",height:"16"},t),Y.createElement("g",{fill:"none"},Y.createElement("path",{d:"M2.629 10.659A5.893 5.893 0 0 1 2 8c0-.956.226-1.858.629-2.659l2.065 1.544a3.487 3.487 0 0 0 0 2.23L2.629 10.66z",fill:"#FBBC05"}),Y.createElement("path",{d:"M2.629 5.341C3.627 3.357 5.713 2 8.139 2c1.563 0 2.959.573 4.047 1.5L10.4 5.245a3.6 3.6 0 0 0-2.26-.79c-1.61 0-2.97 1.015-3.446 2.43L2.629 5.34z",fill:"#EA4335"}),Y.createElement("path",{d:"M2.628 10.657L4.692 9.11c.475 1.417 1.835 2.435 3.448 2.435 1.702 0 2.986-.845 3.293-2.318H8.14V6.91h5.72c.084.355.14.736.14 1.091 0 3.818-2.79 6-5.86 6-2.427 0-4.514-1.358-5.512-3.343z",fill:"#34A853"}),Y.createElement("path",{d:"M12.141 12.506l-1.96-1.483a2.704 2.704 0 0 0 1.252-1.796H8.14V6.91h5.72c.084.355.14.736.14 1.091 0 1.956-.732 3.482-1.859 4.506z",fill:"#4285F4"})))}const df=e=>{let t=Object.assign({},e);return Y.createElement("svg",Object.assign({width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},t),Y.createElement("path",{d:"M13.2333 3.24677C12.4622 2.44348 11.1651 2.485 10.447 3.33597L9.76423 4.14496L8.23578 2.85505L8.9185 2.04607C10.4025 0.287658 13.0827 0.201856 14.6761 1.86175C16.1327 3.37915 16.1131 5.78144 14.6318 7.27482L13.71 8.20422L12.29 6.79579L13.2119 5.86638C13.9287 5.14367 13.9382 3.9811 13.2333 3.24677ZM3.03261 12.837C3.78864 13.6246 5.03662 13.6602 5.83634 12.917L6.53533 12.2675L7.8968 13.7325L7.19781 14.3821C5.59821 15.8686 3.102 15.7973 1.58979 14.222C0.0425434 12.6102 0.115806 10.0434 1.75247 8.52243L2.38027 7.93902L3.74174 9.40408L3.11394 9.98749C2.29569 10.7479 2.25906 12.0312 3.03261 12.837ZM9.5206 5.1554L5.19215 9.31046L6.57717 10.7533L10.9056 6.59822L9.5206 5.1554ZM15 11H11V9H15V11ZM11 11H9V15H11V11ZM1 5H5V7H1V5ZM5 5H7V1H5V5Z",fill:"currentColor"}))},ff=e=>{let t=Object.assign({},e);return Y.createElement("svg",Object.assign({width:"10",height:"16",viewBox:"0 0 10 16",fill:"none"},t),Y.createElement("path",{d:"M0.999992 4L4.99999 8M8.99999 12L4.99999 8M4.99999 8L8.99999 4M4.99999 8L1.00001 12",stroke:"currentColor",strokeWidth:"2"}))},mf=e=>t=>Y.createElement("svg",Object.assign({},xd,t),"string"==typeof e?Y.createElement("path",{d:e}):e),gf=mf("M3.5 8H12.5"),vf=mf("M8 3v7M4.5 6.5h7M4.5 12.5h7"),bf=mf("M13 8H3M7 12L3 8l4-4"),yf=mf("M6 13l4-4-4-4"),wf=e=>Y.createElement("svg",Object.assign({},xd,e,{className:`${e.className} spin`,strokeLinecap:"butt",strokeWidth:"2"}),Y.createElement("path",{d:"M8 14a6 6 0 1 0-6-6"})),xf=(mf(Y.createElement("g",null,Y.createElement("path",{d:"M11.5 8H10l-1 2H7L6 8H4.5"}),Y.createElement("path",{d:"M4.07 3.694L2 8v3.75c0 .69.537 1.25 1.2 1.25h9.6c.663 0 1.2-.56 1.2-1.25V8l-2.07-4.306A1.196 1.196 0 0 0 10.856 3H5.144c-.455 0-.871.269-1.074.694z"}))),mf("M6.983 2.57l-5.021 8.25a1.19 1.19 0 0 0 1.017 1.785h10.013a1.19 1.19 0 0 0 1.017-1.784L9.017 2.57a1.19 1.19 0 0 0-2.034 0zM8 5.45V8M8 10v.1")),Ef=mf("M14.36 10.475a2.408 2.408 0 0 0-.229-2.357A2.646 2.646 0 0 0 11.951 7h-.658c-.438-1.647-1.915-2.85-3.684-3M4 4.5C2.32 5.389 1.5 7 2 9s2 3 4 3h5c.303 0 .554-.051.84-.15M3 3l11 10"),kf=mf(Y.createElement("g",null,Y.createElement("path",{d:"M12.5 11c1.457-.296 2.373-1.447 2.223-2.926-.15-1.479-1.433-3.021-2.92-3.02H11C10.472 3.01 8.61 2 6.5 2S2.675 3.428 2.148 5.472C1.62 7.516 2.153 9.978 4 11"}),",",Y.createElement("path",{d:"M9 7l-2 3.5h3L8 14"}))),Cf=mf(Y.createElement("path",{d:"M13.075 3.925A3.157 3.157 0 0 0 10.842 3c-.838 0-1.641.478-2.233 1.07L8 4.68l-.609-.61c-1.233-1.233-3.233-1.378-4.466-.145a3.158 3.158 0 0 0 0 4.467L3.534 9 8 13.788 12.466 9l.609-.608a3.157 3.157 0 0 0 0-4.467z"})),_f=mf(Y.createElement("g",null,Y.createElement("path",{d:"M8.688 1H3.875C3.115 1 2.5 1.627 2.5 2.4v11.2c0 .773.616 1.4 1.375 1.4h8.25c.76 0 1.375-.627 1.375-1.4V5.9L8.687 1z"}),Y.createElement("path",{d:"M8.5 1v5h5"}))),Sf=({strong:e})=>Y.createElement("svg",{width:"16",height:"16",className:e?"db bump":"db",stroke:"currentColor",strokeWidth:"1.5",strokeLinejoin:"round",fill:e?"currentColor":"none"},Y.createElement("path",{d:"M4 3L12 8L4 13Z"})),Nf=()=>Y.createElement("svg",{width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16"},Y.createElement("path",{d:"M4 3L12 8L4 13Z"})),Tf=e=>Y.createElement("svg",Object.assign({},xd,{viewBox:"0 0 12 8"},e),Y.createElement("path",{d:"M10 6L6 2 2 6"})),Af=e=>Y.createElement("svg",Object.assign({width:"4",height:"21"},e),Y.createElement("rect",{width:"4",height:"21",fill:"currentColor",stroke:"none"})),Lf=e=>Y.createElement("svg",Object.assign({width:"16",height:"16",viewBox:"0 0 16 16",fill:"currentColor"},e),Y.createElement("path",{d:"M8 1h3v1l-1 1v4l2 .875V9H9v5.125L8 15l-1-.875V9H4V7.875L6 7V3L5 2V1z"})),Pf=(mf(Y.createElement("g",null,Y.createElement("path",{d:"M8 12.667L12.667 8l2 2L10 14.667l-2-2z"}),Y.createElement("path",{d:"M12 8.667l-1-5-9.667-2.334L3.667 11l5 1L12 8.667zM1.333 1.333l5.058 5.058"}),Y.createElement("path",{d:"M7.333 8.667a1.333 1.333 0 1 0 0-2.667 1.333 1.333 0 0 0 0 2.667z"}))),mf(Y.createElement("g",null,Y.createElement("path",{d:"M12.667 2H3.333C2.597 2 2 2.597 2 3.333v9.334C2 13.403 2.597 14 3.333 14h9.334c.736 0 1.333-.597 1.333-1.333V3.333C14 2.597 13.403 2 12.667 2z"}),Y.createElement("path",{d:"M6 7.5a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3zM14 10l-3.5-3-7.167 7"}))),mf(Y.createElement("path",{d:"M6.5 13H6c-.828 0-1.5-.417-1.5-1.25V9.667s0-.834-.5-1.25C3.5 8 3.5 8 2.5 8M6.5 3H6c-.828 0-1.5.417-1.5 1.25v2.083s0 .834-.5 1.25C3.5 8 3.5 8 2.5 8M9.5 13h.5c.828 0 1.5-.417 1.5-1.25V9.667s0-.834.5-1.25C12.5 8 12.5 8 13.5 8M9.5 3h.5c.828 0 1.5.417 1.5 1.25v2.083s0 .834.5 1.25c.5.417.5.417 1.5.417"})),mf(Y.createElement("g",null,Y.createElement("path",{d:"M2.5 6.5h11M2.5 10h11M6.25 2v11M9.75 2.5v11"}),Y.createElement("rect",{x:"2.5",y:"1.5",width:"11",height:"12",rx:"2"}),Y.createElement("path",{d:"M2.5 3.5h11c0-1.333-.5-2-1.5-2H4c-1 0-1.5.667-1.5 2z",fill:"currentColor"}))),e=>Y.createElement("svg",Object.assign({viewBox:"0 0 16 16",width:16,height:16},e),Y.createElement("path",{fill:"currentColor",d:"M14.0609 4.65755C13.435 3.58505 12.5859 2.73595 11.5135 2.11005C10.4409 1.48413 9.26999 1.17125 7.99989 1.17125C6.72994 1.17125 5.55864 1.48423 4.4863 2.11005C3.4138 2.73591 2.56476 3.58505 1.9388 4.65755C1.31295 5.73002 1 6.90116 1 8.17095C1 9.69625 1.44501 11.0678 2.33526 12.2861C3.22542 13.5044 4.37536 14.3474 5.78501 14.8153C5.94909 14.8457 6.07056 14.8243 6.14954 14.7516C6.22855 14.6787 6.26801 14.5875 6.26801 14.4782C6.26801 14.46 6.26644 14.296 6.26341 13.9861C6.26028 13.6761 6.25881 13.4057 6.25881 13.175L6.04917 13.2113C5.91551 13.2358 5.74689 13.2461 5.54331 13.2432C5.33983 13.2404 5.1286 13.219 4.90989 13.1794C4.69109 13.1401 4.48757 13.0489 4.29919 12.9062C4.11091 12.7634 3.97725 12.5764 3.89823 12.3457L3.80709 12.136C3.74634 11.9963 3.6507 11.8412 3.52004 11.6712C3.38937 11.501 3.25724 11.3856 3.12358 11.3249L3.05977 11.2792C3.01724 11.2488 2.97779 11.2122 2.9413 11.1697C2.90484 11.1273 2.87755 11.0847 2.85932 11.0421C2.84106 10.9995 2.85619 10.9646 2.90487 10.9371C2.95356 10.9097 3.04154 10.8964 3.1692 10.8964L3.35142 10.9236C3.47295 10.948 3.62328 11.0208 3.80259 11.1424C3.98181 11.2639 4.12914 11.4218 4.2446 11.6162C4.38443 11.8654 4.55289 12.0552 4.75046 12.1859C4.94788 12.3166 5.14692 12.3818 5.3474 12.3818C5.54788 12.3818 5.72103 12.3666 5.86692 12.3364C6.01265 12.306 6.14938 12.2603 6.27704 12.1996C6.33173 11.7923 6.48062 11.4794 6.72359 11.2607C6.37728 11.2243 6.06593 11.1695 5.78938 11.0966C5.51299 11.0236 5.22737 10.9052 4.93271 10.741C4.6379 10.577 4.39334 10.3733 4.19895 10.1304C4.00454 9.88734 3.84499 9.56824 3.72052 9.17337C3.59598 8.77835 3.5337 8.32268 3.5337 7.80622C3.5337 7.07086 3.77377 6.4451 4.2538 5.92858C4.02893 5.37573 4.05016 4.75597 4.31755 4.06936C4.49377 4.01461 4.75509 4.05569 5.1014 4.19236C5.44777 4.32909 5.70137 4.44621 5.86245 4.54332C6.02354 4.6404 6.15261 4.72267 6.24984 4.78939C6.81505 4.63147 7.39832 4.55249 7.99982 4.55249C8.60133 4.55249 9.18473 4.63147 9.74996 4.78939L10.0963 4.57075C10.3331 4.42486 10.6128 4.29116 10.9347 4.16963C11.2567 4.04816 11.503 4.0147 11.6732 4.06945C11.9465 4.75609 11.9709 5.37582 11.7459 5.92867C12.2259 6.4452 12.4661 7.07112 12.4661 7.80632C12.4661 8.32277 12.4036 8.77989 12.2793 9.17794C12.1548 9.57606 11.9938 9.89485 11.7964 10.135C11.5988 10.3751 11.3526 10.5771 11.058 10.7411C10.7633 10.9052 10.4776 11.0236 10.2012 11.0966C9.92465 11.1695 9.6133 11.2244 9.26699 11.2608C9.58284 11.5342 9.7408 11.9656 9.7408 12.555V14.478C9.7408 14.5872 9.77879 14.6784 9.85483 14.7513C9.93078 14.8241 10.0507 14.8455 10.2148 14.815C11.6246 14.3472 12.7746 13.5041 13.6647 12.2858C14.5547 11.0676 14.9999 9.69599 14.9999 8.17069C14.9996 6.90106 14.6865 5.73002 14.0609 4.65755Z"}))),If=e=>Y.createElement("svg",Object.assign({role:"img",viewBox:"0 0 24 24","aria-label":"Observable",fill:"currentColor"},e),Y.createElement("path",{d:"M12 21c-1.108 0-2.068-.261-2.88-.783a5.137 5.137 0 0 1-1.867-2.126 11.821 11.821 0 0 1-.952-2.847A16.523 16.523 0 0 1 6 12c0-.862.052-1.686.157-2.474.104-.787.297-1.587.578-2.399.281-.812.643-1.516 1.084-2.113a4.987 4.987 0 0 1 1.735-1.455C10.27 3.186 11.084 3 12 3c1.108 0 2.068.261 2.88.783a5.137 5.137 0 0 1 1.867 2.126c.434.895.751 1.844.952 2.847.2 1.002.301 2.084.301 3.244 0 .862-.052 1.686-.157 2.474a11.76 11.76 0 0 1-.59 2.399c-.29.812-.65 1.516-1.084 2.113-.434.597-1.008 1.082-1.723 1.455-.715.373-1.53.559-2.446.559zm2.118-6.882A2.888 2.888 0 0 0 15 12c0-.824-.287-1.53-.86-2.118C13.566 9.294 12.853 9 12 9c-.853 0-1.566.294-2.14.882A2.925 2.925 0 0 0 9 12c0 .824.287 1.53.86 2.118.574.588 1.287.882 2.14.882.853 0 1.559-.294 2.118-.882zM12 24c6.627 0 12-5.373 12-12S18.627 0 12 0 0 5.373 0 12s5.373 12 12 12z"})),Of=e=>Y.createElement("svg",Object.assign({},xd,{fill:"currentColor",stroke:"none"},e,{viewBox:"0 0 8 14",width:"8",height:"14"}),Y.createElement("circle",{r:"1.5",cx:"4",cy:"2"}),Y.createElement("circle",{r:"1.5",cx:"4",cy:"7"}),Y.createElement("circle",{r:"1.5",cx:"4",cy:"12"})),Mf=Y.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},Y.createElement("path",{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"}),Y.createElement("circle",{cx:"9",cy:"7",r:"4"}),Y.createElement("path",{d:"M23 21v-2a4 4 0 0 0-3-3.87m-4-12a4 4 0 0 1 0 7.75"})),Rf=Y.createElement("svg",{width:"14",height:"14",style:{paddingTop:4}},Y.createElement("path",{d:"M2.5 0C.9 0 0 .9 0 2.5v9C0 13.102.9 14 2.5 14h9c1.602 0 2.5-.9 2.5-2.5v-9C14 .9 13.102 0 11.5 0h-9zm0 1.5h9c.5.034 1 .5 1 1v9c0 .5-.5 1-1 1h-9c-.5-.034-1-.5-1-1v-9c0-.5.5-1 1-1zm7.43 1.178a.386.386 0 0 0-.266.186l-3.49 5.412L4.5 6.5c-.25-.16-.25-.16-.5 0l-.672.66c-.142.224-.142.526 0 .674l2.49 2.602c.141.075.341.232.555.232.142 0 .37-.079.512-.302l4.268-6.55c.142-.223.13-.418-.153-.566l-.78-.549a.494.494 0 0 0-.29-.023z",fill:"currentColor",fillRule:"nonzero"})),Df=({className:e="magic-icon"})=>Y.createElement("svg",{width:"16",height:"16",className:e,fill:"none"},Y.createElement("path",{className:"magic-icon--fill",fill:"#000",d:"M1.5 12l5.303-5.303 2.122 2.121-5.304 5.303z"}),Y.createElement("path",{className:"magic-icon--stroke",stroke:"#000",d:"M9.5 4.707L7.379 6.828l1.414 1.415 2.121-2.122z"}),Y.createElement("path",{className:"magic-icon--stroke",stroke:"#BD00FF",d:"M11 4h4M13 2v4"}),Y.createElement("path",{className:"magic-icon--stroke",stroke:"red",d:"M4 4h4M6 2v4"}),Y.createElement("path",{className:"magic-icon--stroke",stroke:"#00C2FF",d:"M9 12h4M11 10v4"})),Ff={demo:"Please sign in to save your copy of the demo.",like:"Please sign in to like this notebook.",fork:"Please sign in to save your fork.",team:"Please create an account or sign in to create a team.",suggest:"Please sign in to suggest this notebook."};function Vf({loginReason:e,onDismiss:t,loginAction:n,location:{pathname:r}}){const i="flex w-100 justify-center pv2 pl2 pr3 mt3 f6 fw6 black-70 hover-black ba b--black-10 br2 pointer shadow-2-hover z-2 bg-near-white";return Y.createElement(wd,{onDismiss:t},Y.createElement("div",{className:"relative bg-white"},e in Ff&&Y.createElement("div",{className:"absolute w-100 tc",style:{bottom:"calc(100% + 1rem)"}},Y.createElement("div",{className:"dib ph2 pv1 f7 fw4 black-50 bg-near-white bb b--black-10 br2 br--top"},Ff[e])),t&&Y.createElement("div",{onClick:t,className:"absolute top-0 right-0 light-silver hover-black pointer"},Y.createElement(ff,{className:"w1 h1"})),Y.createElement("div",{className:"pa3 tc"},Y.createElement("div",{className:"center"},Y.createElement(If,{className:"dib v-mid black",style:{height:24,width:24}}),Y.createElement("span",{className:"dib v-mid ml2 f3 fw7 black"},"Observable")),Y.createElement("div",{className:"mt2 mb4 f6 fw4 black-50"},"The magic notebook for visualization"),"/team/new"===r?Y.createElement("div",{className:"pt4"},Y.createElement("div",{className:"mw5 center pa2 f6 lh-copy tl tc black-70 bg-washed-yellow ba b--black-10 br2"},"Sign up to create your team.")):null,Y.createElement("div",{className:"mh3 mt5"},Y.createElement("button",{onClick:()=>{n&&n(),window.location.assign(function(e){return`https://github.com/login/oauth/authorize?scope=user:email&client_id=1a8619df27715d9d2c97&state=${Vh()}&redirect_uri=${`https://api.observablehq.com/github/oauth?path=/loggedin${e}`}`}(r))},className:i},Y.createElement(Pf,{className:"w1 h1 ml1 mr2"}),"signup"===e?"Sign up":"Sign in"," with GitHub"),Y.createElement("button",{onClick:()=>{n&&n(),window.location.assign(function(e){return`https://api.observablehq.com/twitter/oauth?path=${e}`}(r))},className:i},Y.createElement(hf,{className:"w1 h1 ml1 mr2",style:{color:"#1DA1F2"}}),"signup"===e?"Sign up":"Sign in"," with Twitter"),Y.createElement("button",{onClick:()=>{n&&n(),window.location.assign(function(e){return`https://accounts.google.com/o/oauth2/auth?${Dh({client_id:"382981975638-bp9amiuaao54a4jt83almlmihnng4p49.apps.googleusercontent.com",redirect_uri:"https://api.observablehq.com/google/oauth",response_type:"code",state:`/loggedin${e}`,scope:"https://www.googleapis.com/auth/userinfo.profile https://www.googleapis.com/auth/userinfo.email"})}`}(r))},className:i},Y.createElement(pf,{className:"w1 h1 ml1 mr2"}),"signup"===e?"Sign up":"Sign in"," with Google"),Y.createElement("div",{className:"mt5 f7 fw4 lh-copy black-50"},"By continuing you agree to our"," ",Y.createElement("a",{className:"blue hover-dark-blue link",href:"/terms-of-service",rel:"noopener noreferrer",target:"_blank"},"Terms of Service"),".")))))}const jf=Y.createContext(),Bf=Y.createContext();async function Uf(){const e=await fetch("https://api.observablehq.com/user",{credentials:"include",cache:"no-store"});if(!e.ok)throw new xh;const t=await e.json();Hf.user=t,Hf.api=jh(),t&&(ga("set","userId",t.id),"https://github.com/"===document.referrer&&ga("set","referrer",null))}const Hf=new class{constructor(){this.user=null,this.api=null}};class $f extends Y.Component{constructor(...e){super(...e),bh(this,"state",{loginVisible:!1}),bh(this,"showLogin",({loginReason:e,loginAction:t})=>{this.setState({loginVisible:!0,loginReason:e,loginAction:t}),ga("send",{hitType:"event",eventCategory:"Conversions",eventAction:"Open signup modal",eventLabel:"Header sign in button"})}),bh(this,"hideLogin",()=>{this.setState({loginVisible:!1})}),bh(this,"refreshUser",async()=>{await Uf(),this.setState({})})}render(){const e=this.props,{permissions:t,userRedirect:n,noUserRedirect:r,component:i}=e,s=wh(e,["permissions","userRedirect","noUserRedirect","component"]),{loginVisible:a,loginReason:o,loginAction:l}=this.state;return Y.createElement(Du,Object.assign({},Hf,s,{render:e=>{if(n&&Hf.user)return Y.createElement(Au,{to:n});if(r&&!Hf.user)return Y.createElement(Au,{to:r});if("private"===t&&!Hf.user)throw new kh;if("anon-only"===t&&Hf.user)return Y.createElement(Au,{to:"/"});if(Hf.user&&!Hf.user.login)throw new Eh;const s="undefined"!=typeof window&&window.preloadData;return s&&delete window.preloadData,Y.createElement(Bf.Provider,{value:Hf.api},Y.createElement(jf.Provider,{value:Hf.user},Y.createElement(i,Object.assign({showLogin:this.showLogin,refreshUser:this.refreshUser,key:1,preloadData:s},Hf,e)),a&&Y.createElement(Vf,{loginReason:o,loginAction:l,location:this.props.location,onDismiss:this.hideLogin})))}}))}}const zf="w-100 mw8 ph3 center";var Wf=e=>{let{user:t,s:n}=e,r=wh(e,["user","s"]);const{style:i}=r,s=wh(r,["style"]);return Y.createElement("img",Object.assign({alt:t?`@${t.login}`:null,src:t&&t.avatar_url?`${t.avatar_url}${t.avatar_url.includes("?")?"&":"?"}s=${2*n}`:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAAAAAA6fptVAAAACklEQVR4nGOaCQAAnwCc1NtUdAAAAABJRU5ErkJggg==",style:yh({width:n,height:n,maxWidth:"none",flexShrink:0},i)},s))};const qf=Y.createElement("div",{className:"flex-auto black br2"},Y.createElement("div",{className:"bg-white br2",style:{height:"11rem",backgroundImage:"var(--checkerboard)"}}),Y.createElement("div",{className:"pt2"},Y.createElement("div",{className:"f4 fw7 truncate"},Y.createElement("span",{className:"light-gray bg-light-gray"},"~~~~~~~~~~")),Y.createElement("div",{className:"pv1 f6 black-60 hover-blue"},Y.createElement("span",{className:"light-gray bg-light-gray"},"~~~~~~~~~~")),Y.createElement("div",{className:"f6 fw4 lh-copy"},Y.createElement("span",{className:"light-gray bg-light-gray"},"~~~~~~~~~~~~~~~~~~~~~~~~~ ~~~~~~~~~~~~~~~~~~~~~~~"))));function Gf({collection:e}){if(!e)return qf;const t=`/collection/@${e.owner.login}/${e.slug}`,{title:n,description:r,document_count:i,thumbnail:s,type:a}=e;return Y.createElement(fh,{to:t,className:"flex-auto no-underline black hover-blue br2 hover-shadow-4-trigger"},Y.createElement("div",{className:`bg-white ${s?"bg-center cover":""} br2 hover-shadow-4`,style:{height:"11rem",backgroundImage:s?`url(https://static.observableusercontent.com/thumbnail/${s}.jpg)`:"var(--checkerboard)"}}),Y.createElement("div",{className:"pt2"},Y.createElement("div",{className:"f4 fw7 truncate"},n,"private"===a&&Y.createElement("span",{className:"dib v-mid ph1 ml2 f7 fw6 lh-f7 nowrap ttc mid-gray bg-light-gray br2"},"private")),Y.createElement("div",{className:"pv1 f6 black-60 hover-blue"},i," notebook",1===i?"":"s"),Y.createElement("div",{className:"f6 fw4 lh-copy"},r)))}function Kf(e){return-Math.log(1-Math.random())/e}function Yf(e,t){return{a:e.substring(0,t),b:e.substring(t)}}function Zf(e){e=e.concat(e[0]);const t=[];for(let n=0;n<e.length-1;n++){const r=e[n],i=e[n+1];t.push({a:r,b:"",time:1e3+Kf(5e-4)});let s=0;for(;r[s]===i[s];s++);for(let e=r.length;e>s;e--)t.push(yh({},Yf(r,e-1),{time:Kf(1/15)}));for(let e=s;e<i.length;e++)t.push(yh({},Yf(i,e),{time:Kf(.02)}))}return t}class Qf extends Y.Component{constructor(e){super(e),bh(this,"maybeUpdate",()=>{let{lastTime:e,animation:t,frame:n}=this.state;if(Date.now()-e>=t[n].time){let e=n+1;this.setState({lastTime:Date.now(),frame:e>t.length-1?0:e})}this.updateTick=requestAnimationFrame(this.maybeUpdate)}),this.state={animation:Zf(e.text),lastTime:Date.now(),frame:0}}componentDidMount(){this.updateTick=requestAnimationFrame(this.maybeUpdate)}componentWillUnmount(){cancelAnimationFrame(this.updateTick)}render(){const{animation:e,frame:t}=this.state;return Y.createElement("span",null,e[t].a,Y.createElement("span",{style:{opacity:0}},e[t].b))}}function Xf(e,t){const[n,r]=Z(t);return Q(()=>{const t=window.matchMedia(e),n=()=>{r(!!t.matches)};return t.addListener(n),r(t.matches),()=>{t.removeListener(n)}},[e]),n}const Jf="lh-copy black-70 fw4 f5",em={className:"mb2 fw6 mt3",style:{fontSize:32}},tm={className:"dg-ns flex flex-column mt5",style:{minHeight:"18rem",gridTemplateColumns:"repeat(2, 1fr)",gridGap:0}},nm={className:"flex justify-center justify-end-ns items-center mr5"},rm={className:"flex order-2-ns order-1 items-center justify-start-ns ml4"},im={className:"flex justify-center justify-start-ns items-center"},sm={className:"flex justify-center justify-end-ns order-2 order-1-ns items-center"},am={style:{maxWidth:360}},om={style:{maxWidth:240}};function lm({src:e,medium:t}){return Y.createElement("img",Object.assign({src:e,alt:""},t?om:am))}function cm({medium:e}){const t={className:"db fw5 no-underline blue hover-dark-blue pv2"};return Y.createElement("div",{className:`mw6 center ph4 pv3 mt6-ns mt4 mb5-ns mb2 bg-near-white br2 ${e?"":"dg"}`,style:{maxWidth:640,gridGap:40,gridTemplateColumns:"repeat(2, 1fr)"}},Y.createElement("div",null,Y.createElement(fh,Object.assign({to:"/@observablehq/suggestions-and-comments"},t),"Learn about collaboration"," ",Y.createElement(yf,{style:{width:14,height:14}})),Y.createElement(fh,Object.assign({to:"/collection/@observablehq/visualization"},t),"Explore visualizations"," ",Y.createElement(yf,{style:{width:14,height:14}})),Y.createElement(fh,Object.assign({to:"/@observablehq/user-manual"},t),"Read the user manual"," ",Y.createElement(yf,{style:{width:14,height:14}}))),e?null:Y.createElement("div",{className:"dn db-ns relative pa"},Y.createElement(fh,{to:"/demo",style:{width:300,maxWidth:300,top:-40,right:0,bottom:-40,backgroundImage:"url(https://static.observablehq.com/assets/demo-4.png)",backgroundSize:"cover"},className:"flex absolute items-center justify-center no-underline black-70 hover-black ba b--black-20 br2 hide-child"},Y.createElement("div",{className:"absolute absolute--fill bg-near-white br1 child z-1",style:{backgroundColor:"rgba(0, 0, 0, 0.1)"}}),Y.createElement("div",{className:"flex items-center ph3 pv1 fw5 ttu blue bg-white ba b--blue br-pill z-2 child"},"Demo ",Y.createElement(Nf,null)))))}function um({showSignUp:e}){const t=Xf("(max-width: 640px)"),n=Xf("(max-width: 700px)",!1);return Y.createElement("div",{className:"pv5 nt4 black bg-white bb b--black-10"},Y.createElement("div",{className:zf},Y.createElement("div",{className:"flex center items-center pt4-ns pb5",style:{maxWidth:640}},Y.createElement("div",{className:"flex-auto mr4-ns"},Y.createElement("h1",{className:"ma0 f2 fw7 lh-title black"},"The magic notebook ",Y.createElement("br",null),"for"," ",t?"visualization":Y.createElement(Qf,{text:"visualization, exploring data, live code, the web, interactive essays, clear computation, learning algorithms, coding together".split(",").map(e=>e.trim())})),e&&Y.createElement("div",{className:"flex-ns mt3"},Y.createElement("button",{onClick:()=>e("Homepage hero"),className:"inline-flex justify-center ph3 pv2 fw6 white bg-blue hover-bg-dark-blue br2 bn hover-rise z-1 pointer"},"Sign up for free"))),Y.createElement("div",{className:"dn db-ns mt1"},Y.createElement("img",{style:{width:200,maxWidth:200},alt:"",src:"https://static.observablehq.com/assets/magic-notebook-8.jpg"}))),Y.createElement("div",tm,Y.createElement("div",nm,Y.createElement(lm,{src:"https://static.observablehq.com/assets/data-behind-notebook-5.jpg",medium:n})),Y.createElement("div",im,Y.createElement("div",{style:{maxWidth:320}},Y.createElement("div",em,"Dive into your data"),Y.createElement("div",{className:Jf},"Raw data often feels impenetrable, at first. Interactive exploration and visualization is the best way to quickly answer questions and nurture understanding.")))),Y.createElement("div",tm,Y.createElement("div",sm,Y.createElement("div",{style:{maxWidth:320}},Y.createElement("div",em,"Creative freedom"),Y.createElement("div",{className:Jf},"No more unsightly presets and limited build-a-chart wizards. Realize your dream dashboard, report or visualization with notebooks that can do anything the web can do."))),Y.createElement("div",rm,Y.createElement(lm,{src:"https://static.observablehq.com/assets/creative-control-5.jpg",medium:n}))),Y.createElement("div",tm,Y.createElement("div",nm,Y.createElement(lm,{src:"https://static.observablehq.com/assets/group-pointing-5.jpg",medium:n})),Y.createElement("div",im,Y.createElement("div",{style:{maxWidth:320}},Y.createElement("div",em,"A team sport"),Y.createElement("div",{className:Jf},"Fork, edit, comment, suggest and merge — with live code and interactive diffs. Import cells from any notebook, and load nearly any JavaScript library.")))),Y.createElement("div",{className:"center ph4 ph0-ns pt4 mt5-ns mt4 bt b--black-10 dg-ns",style:{maxWidth:640,gridGap:40,gridTemplateColumns:"repeat(2, 1fr)"}},Y.createElement("div",null,Y.createElement("div",{className:"f3 fw5"},"Personal"),Y.createElement("button",{onClick:()=>e("Homepage features block"),className:"items-center ph3 pv2 mt3 mr3 fw5 white bg-blue hover-bg-dark-blue br2 bn pointer hover-rise"},"Sign up for free"),Y.createElement("div",{className:"pb3 mt3 f6 lh-copy black-70 dg",style:{gridTemplateColumns:"10px 1fr",gridGap:"4px 12px"}},Y.createElement("div",null,Rf),Y.createElement("div",null,"Unlimited notebooks"),Y.createElement("div",null,Rf),Y.createElement("div",null,"Friendly community"),Y.createElement("div",null,Rf),Y.createElement("div",null,"Publish & share"))),Y.createElement("div",{className:"mt4 mt0-ns"},Y.createElement("div",{className:"f3 fw5"},"Team"),Y.createElement(fh,{to:"/teams",className:"dib ph3 pv2 mt3 fw5 no-underline white bg-blue hover-bg-dark-blue br2 pointer hover-rise"},"Learn more"),Y.createElement("div",{className:"pb3 mt3 f6 lh-copy black-70 dg",style:{gridTemplateColumns:"10px 1fr",gridGap:"4px 12px"}},Y.createElement("div",null,Rf),Y.createElement("div",null,"Unlimited team notebooks"),Y.createElement("div",null,Rf),Y.createElement("div",null,"Unlimited free viewers"),Y.createElement("div",null,Rf),Y.createElement("div",null,"Multiplayer editing"),Y.createElement("div",null,Rf),Y.createElement("div",null,"Shared secrets")))),Y.createElement(cm,{medium:n})))}const hm=6e5,pm=new Set(["revert","create"]),dm=new Set(["pin","unpin"]);function fm(e){return(e=new Date(e)).setDate(e.getDate()-(e.getDay()+7-0)%7),e.setHours(0,0,0,0),e}function mm(e){return(e=fm(e)).setDate(e.getDate()-1),fm(e)}function gm(e,t){return+fm(e)==+fm(t)}function vm(e,t){let n=mm(t);return n.getMonth()===fm(t).getMonth()&&+fm(e)==+n}function bm(e,t){return e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()}function ym(e,t=""){if(!e.length)return;let n,r=[];for(let i=0;i<e.length;i++)e[i].relevant?(n&&r.push(n),r.push([i,i]),n=void 0):n?n[1]=i:n=[i,i],delete e[i].relevant;return n&&r.push(n),{folds:r,events:e,title:t}}function wm({users:e,events:t,merges:n,identifiers:r},{fork_of:i},s=new Date){const a=new Map;for(let b of e)a.set(b.id,b);for(let b of n)a.set(b.user.id,b.user);const o=a.size;t=t.slice().reverse().filter(e=>"noop"!==e.type).map((e,t,r)=>{let{user_id:s,publish_user_id:o,time:l,publish_time:c}=e,u=wh(e,["user_id","publish_user_id","time","publish_time"]);const h=n.find(t=>e.version==t.to_end_version);return yh({},u,{user:a.get(s),publish_user:a.get(o),time:l&&new Date(l),publish_time:c&&new Date(c),fork:i&&i.version===e.version?i:null,merge:h,relevant:!!(0===t||pm.has(e.type)||e.publish_time||t<r.length-1&&new Date(e.time)-new Date(r[t+1].time)>hm||h)&&!dm.has(e.type)})});let l=new Map,c=new Map,u=new Map;r&&(r=new Map(r));for(let b=t.length-1;b>=0;b--){const e=t[b];switch(e.type){case"modify_node":case"insert_node":{const t=l.get(e.node_id);t&&e.node_name&&t!==e.node_name&&(e.node_old_name=t),l.set(e.node_id,e.node_name),c.set(e.node_id,e.node_value_start);break}case"move_node":case"pin_node":case"unpin_node":case"remove_node":l.get(e.node_id)?e.node_name=l.get(e.node_id):c.get(e.node_id)?e.node_value_start=c.get(e.node_id):r&&r.has(e.node_id)&&Object.assign(e,r.get(e.node_id));break;case"revert":u.set(e.version,e.node_id)}}const h=t.findIndex(e=>"create"===e.type);t.splice(h+1,t.length);let p,d=0;for(let b of t){let{publish_time:e}=b;if(e&&e>d&&(d=e,p=b),"revert"===b.type){let e=b.node_id;for(;u.has(e);)e=u.get(e);b.node_id=e}}p&&(p.latest_publish=!0);let f=[],m=[],g=[],v=[];for(let b of t)gm(b.time,s)?f.push(b):vm(b.time,s)?m.push(b):bm(b.time,s)?g.push(b):v.push(b);return{ranges:[ym(f),ym(m,"Last week"),ym(g,"This month"),ym(v,"Earlier")].filter(Boolean),events:t,userCount:o}}const xm=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],Em=(new Date).getFullYear(),km=(new Date).getMonth(),Cm=(new Date).getDate(),_m="undefined"==typeof navigator?"en-US":/^en\-/.test(navigator.language)?navigator.language:"en-US",Sm=e=>`${xm[e.getMonth()]} ${e.getDate()}`;function Nm(e,t){return e.toLocaleString(_m,t)}const Tm=e=>{const t=Math.floor((Date.now()-e)/1e3/60);return(t<=1?"seconds":t<45?`${t} minutes`:t<90?"1 hour":t<1440?`${Math.round(t/60)} hours`:t<2880?"1 day":t<43200?`${Math.round(t/1440)} days`:t<86400?"1 month":t<525960?`${Math.round(t/43200)} months`:t<1051199?"1 year":`${Math.round(t/525960)} years`)+" ago"},Am=33,Lm=17,Pm=17,Im=new Set(["INPUT","SELECT","TEXTAREA"]),Om=new Set(["DOM.canvas","DOM.context2d","DOM.download","DOM.element","DOM.input","DOM.range","DOM.select","DOM.svg","DOM.text","DOM.uid","DOM","Files.buffer","Files.text","Files.url","Files","Generators.disposable","Generators.filter","Generators.input","Generators.map","Generators.observe","Generators.queue","Generators.range","Generators.valueAt","Generators.worker","Generators","html","md","Mutable","now","Promises.delay","Promises.tick","Promises.when","Promises","require","svg","tex","width","DatabaseClient","Secret","invalidation","tex.block","require.alias","require.resolve","visibility"]),Mm=5e3,Rm=2,Dm=Symbol("LOADING"),Fm=Symbol("ACTION_PUBLISH"),Vm=Symbol("ACTION_PUBLISH_DISABLED"),jm=Symbol("ACTION_PUBLISH_PROMOTED"),Bm=Symbol("ACTION_FORK"),Um=Symbol("ACTION_FORK_PROMOTED"),Hm=Symbol("ACTION_MERGE"),$m=Symbol("ACTION_MERGE_PROMOTED"),zm=Symbol("ACTION_SUGGEST"),Wm=Symbol("ACTION_SUGGEST_PROMOTED");function qm(e,t){return null!=e&&null!=t&&(e.login===t||e.teams.some(e=>e.login===t))}function Gm(e){return"owner"===e.role}function Km(e){return"member"===e.role}function Ym(e){return e&&e.teams&&e.teams.some(e=>Gm(e)||Km(e))}function Zm(e){return e&&e.teams&&e.teams.filter(e=>Gm(e)||Km(e))}function Qm(e){return"owner"===e?"owner":"member"===e?"editor":"viewer"===e?"viewer":void 0}function Xm(e,t){return e.id===t.id}const Jm=Symbol("owner"),eg=Symbol("viewer");function tg(e,t){if(null==e||null==t)return null;if("team"!==t.type)return e.id===t.id?Jm:null;const n=e.teams.find(e=>e.id===t.id);return void 0===n?null:function(e){return"viewer"===e.role}(n)?eg:Jm}function ng(e,t){if(null==t)return!1;const{owner:n}=t;return null!==tg(e,n)}function rg(e,t){if(null==t)return!1;const{owner:n}=t;return tg(e,n)===Jm}function ig(e,t){return e&&(ng(e,t)||kg(t))}function sg(e,t){return rg(e,t)&&function(e){const{slug:t,publish_time:n}=e;return null!=t&&Date.now()-n<864e5}(t)}function ag(e,t){return null!=t&&(!!dg(t)||tg(e,t.owner)!==eg)}function og(e,t){return rg(e,t)&&gg(t)&&bg(t)&&!kg(t)&&(function(e){const{save_version:t,fork_of:{version:n}}=e;return t>n}(t)||xg(t))}function lg(e,t){if(!t)return!1;const{close_time:n,to_owner:r,from_owner:i}=t;return null==n&&(tg(e,r)===Jm||tg(e,i)===Jm)}function cg(e,t){return rg(e,t)&&bg(t)}function ug(e){if(!e)return!1;const{slug:t}=e;return null!=t}function hg(e){if(!e)return!1;const{publish_time:t,slug:n}=e;return null!=t&&null==n}function pg(e){if(!e)return!1;const{publish_time:t}=e;return null==t}function dg(e){if(!e)return!1;const{publish_time:t}=e;return null!=t}function fg(e){if(!e)return!1;const{trashed:t}=e;return!!t}function mg(e){if(!e)return!1;const{owner:t}=e;return"team"===t.type}function gg(e){if(!e)return!1;const{fork_of:t}=e;return null!=t&&0!=t}function vg(e,t){const{fork_of:n}=e,{id:r}=t;return!!n&&n.id===r}function bg(e,t){const{save_version:n,latest_version:r,publish_version:i}=e;return(void 0===t?n:t)===(void 0===r?i:r)}function yg(e){const{model:t,save_version:n}=e;return t&&t.version>n}function wg(e){const{model:t,edit_unpublished:n,publish_version:r,save_version:i}=e;return!!n||t&&null!=r&&function(e,t,n){for(let r=n;r>t;--r){const t=e[r];if(!t)return!1;switch(t.type){case"revert":r=t.node_id+1;continue;case"noop":continue}return!0}return!1}(t.events,r,i)}function xg(e){const{comments:t=[],comment_count:n=0}=e;return t.length>0||n>0}function Eg(e){const{base_changes:t,target_changes:n,mapping:r}=e;if(0===t.length)return[];const i=new Set(n),s=new Map(r),a=[];for(const o of t)i.has(s.get(o))||a.push(o);return a}function kg(e){const{suggestion_from:t}=e;return t&&null==t.close_time}function Cg(e,t){if(!e)return"#";const{slug:n,owner:r,id:i}=e;return null!=t?`/d/${i}@${t}`:ug(e)?`/@${r.login}/${n}`:`/d/${i}`}function _g(e,t){return`${Cg(e,t)}/history`}function Sg(e){return e.title||"Untitled"}function Ng(e,t){return Tg(e,t)?["before","after"]:vg(t,e)?["parent","fork"]:vg(e,t)?["fork","parent"]:["base","target"]}function Tg(e,t){return e.id===t.id&&e.save_version<=t.save_version}function Ag(e,t){const{slug:n,owner:r,id:i,save_version:s}=e;return`https://api.observablehq.com/${ug(e)?`@${r.login}/${n}`:`d/${i}`}${bg(e)?"":`@${s}`}.${t}`}function Lg(e){return`/compare/${e.to_id}...${e.from_id}`}function Pg(e,t,n,r){return null==n||n.id===e.id&&(null==r||bg(n,r))?`/compare/${e.id}@${t}`:`/compare/${e.id}${null!=t?`@${t}`:""}...${n.id}${null!=r?`@${r}`:""}`}function Ig(e){return`/@${e.login}`}function Og(e){return e.name||e.login}const Mg="ma0 mb2 f4 fw6 near-black";function Rg({onDismiss:e}){return Y.createElement("button",{onClick:e,title:"Close",className:"inline-flex absolute top-0 right-0 pa2 nt2 nr2 moon-gray hover-mid-gray bg-transparent pointer bn"},Y.createElement(ff,{className:"w1 h1"}))}function Dg(e){let{highlight:t,secondary:n,children:r,className:i=""}=e,s=wh(e,["highlight","secondary","children","className"]);if(t&&n)throw new Error("Buttons cannot be both secondary and highlighted");return Y.createElement("button",Object.assign({className:`inline-flex justify-center ph3 pv2 f6 fw6 bg-animate ${t?"white bg-blue hover-bg-light-blue pointer":n?"dark-gray bg-silver hover-bg-light-silver pointer":"mid-gray bg-near-white disabled"} br2 bn ${i}`},s),r)}const Fg=Y.forwardRef((e,t)=>{let{hasError:n=!1,className:r="",size:i="large"}=e,s=wh(e,["hasError","className","size"]);return Y.createElement("input",Object.assign({type:"text",ref:t},s,{className:`form-default-clear form-custom-input fw5 br2 ${s.disabled?" bg-near-white disabled ":" dark-gray bg-white blue-ring-focus hover-near-black"}\n          ${"large"===i?" pa2 f6":"ph2 pv1 f7 lh-f7"} ${r}\n          ${n?" has-error":""}`}))});function Vg(e){let{hasError:t=!1,className:n="",children:r,size:i="large"}=e,s=wh(e,["hasError","className","children","size"]);return Y.createElement("select",Object.assign({},s,{className:`form-custom-select br2 form-default-clear animate-all fw6 \n      ${s.disabled?" disabled mid-gray":" dark-gray hover-near-black hover-raised blue-ring-focus pointer"}  ${"large"===i?" pa2 f6":"ph2 pv1 f7 lh-f7"} \n      ${t?" has-error":""} \n      ${n}`}),r)}function jg(e){let{className:t="",spacing:n="pv2"}=e,r=wh(e,["className","spacing"]);return Y.createElement("label",{className:`fw6 f6 flex items-center form-custom-checkbox\n      ${r.disabled?" disabled mid-gray":" not-disabled dark-gray hover-near-black pointer blue-ring-focus"} ${n} ${t}`},Y.createElement("span",{className:"h1 lh-solid"},Y.createElement("input",Object.assign({},r,{type:"checkbox",className:"o-0 form-default-clear",style:{width:0,height:0}})),Y.createElement("span",{className:`check-square animate-all ${r.checked?"checked bg-blue white b--dark-blue":"bg-white b--silver white"} ${r.autoFocus&&" focused"} \n             w1 h1 dib ba br2 mr2`},Y.createElement(Ld,null))),r.label)}function Bg({collection:e,notebook:t,add:n}){const r=!!t.collections.find(t=>t.id==e.id);return Y.createElement("div",{className:`flex items-center pb1 ${r?"black":"black-50"} pointer`},Y.createElement(jg,{id:`collection-${e.id}`,checked:r,spacing:"",onChange:()=>n(e,r)}),Y.createElement("label",{htmlFor:`collection-${e.id}`,title:`@${e.owner.login}/${e.slug}`,className:"flex-auto truncate"},e.title,"private"===e.type&&Y.createElement("span",{className:"dib ph1 ml2 f7 fw6 lh-f7 nowrap ttc mid-gray bg-light-gray br2"},"private")))}class Ug extends Y.Component{constructor(...e){super(...e),bh(this,"state",{collectionGroups:Dm,newCollectionTitle:"",newCollectionType:"private"}),bh(this,"add",async(e,t)=>{const{api:n,notebook:{id:r},currentCollection:i,reloadCollection:s}=this.props;t?(this.setState(({notebook:t})=>({notebook:yh({},t,{collections:t.collections.filter(t=>t.id!==e.id)})})),await n.collectionRemoveDocument({id:e.id,document_id:r}),i&&s&&i.id===e.id&&s()):(this.setState(({notebook:t})=>({notebook:yh({},t,{collections:t.collections.concat(e)})})),await n.collectionAddDocument({id:e.id,document_id:r}))}),bh(this,"onChangeNewCollectionTitle",e=>{this.setState({newCollectionTitle:e.target.value})}),bh(this,"onChangeNewCollectionType",e=>{this.setState({newCollectionType:e.target.value})}),bh(this,"createAndAdd",async e=>{const{api:t,notebook:{id:n,owner:r},onDismiss:i}=this.props;e.preventDefault();const{newCollectionTitle:s,newCollectionType:a}=this.state;if(!s)return;this.setState({newCollectionTitle:""});const{id:o}=await t.collectionNew({title:s,description:"",pinned:!1,type:a,owner:r.id});await t.collectionAddDocument({id:o,document_id:n}),i()})}componentWillMount(){this.reload()}componentWillReceiveProps(e){this.setState({collectionGroups:Dm}),this.reload(e)}reload(e=this.props){const{api:t,user:n,team:r,notebook:i}=e,{id:s}=i;if(!n)return;let a=[];i.owner.id===n.id&&a.push(n);const o=Zm(n),l=o.find(e=>"observablehq"===e.login);l&&a.push(l),r&&(o.find(e=>e.id===r.id)&&!l||r.id!==l.id)&&a.push(r);const c=t.init({cache:"no-cache"});Promise.all([c.documentLoad(s),Promise.all(a.map(e=>c.collectionsLoadUser(e.login).then(t=>({user:e,collections:t.map(t=>yh({owner:e},t))}))))]).then(([e,t])=>{const r=function(e){const t=new Set(e.collections.map(e=>e.id));return(e,n)=>t.has(n.id)-t.has(e.id)||e.title.localeCompare(n.title)}(e);for(const n of t){const{collections:e}=n;e.sort(r)}this.setState({notebook:e,collectionGroups:t.sort(({user:e},{user:t})=>e.id===n.id?-1:t.id===n.id?1:e.login>t.login)})})}render(){const{onDismiss:e,user:t}=this.props,{collectionGroups:n,notebook:r,newCollectionTitle:i,newCollectionType:s}=this.state,a=n!==Dm?n.filter(e=>e.collections.length>0):[];return Y.createElement(wd,{onDismiss:e},Y.createElement("div",{className:"relative pa2"},Y.createElement(Rg,{onDismiss:e}),Y.createElement("h3",{className:Mg},"Collections"),Y.createElement("div",{className:"pa2 bg-near-white br2 overflow-auto",style:{minHeight:80,maxHeight:250}},n===Dm?Y.createElement("div",{className:"flex items-center justify-center pv3 fw5 gray fade-in delay-short"},Y.createElement(wf,null),Y.createElement("span",{className:"ml2"},"Loading")):a.length>0?a.map(({collections:e,user:n},i)=>Y.createElement("div",{key:n.id,className:i>0?"bt b--black-10 pt2 mt2":""},(a.length>1||n.id!==t.id)&&Y.createElement("div",{className:"flex items-center pb2 black-50"},Y.createElement(Wf,{user:n,s:16,className:"mr1 br-100"}),Y.createElement("span",null,Og(n))),e.map(e=>Y.createElement(Bg,{collection:e,notebook:r,key:e.id,add:this.add})))):Y.createElement("div",{className:"lh-copy tc black-70"},"You don’t have any collections.")),Y.createElement("div",{className:"pt3"},Y.createElement(Dg,{highlight:!0,type:"button",onClick:e},"Done")),Y.createElement("form",{onSubmit:this.createAndAdd,className:"flex flex-column flex-auto items-stretch mt3 bt b--light-gray",autoComplete:"off"},Y.createElement("label",{className:"pt3 pb2 f6 fw5 mid-gray",htmlFor:"name"},"Add to new collection"),Y.createElement("div",{className:"flex items-stretch br2"},Y.createElement(Fg,{name:"title",className:"flex-auto br--left",placeholder:"Title",type:"text",value:i,onChange:this.onChangeNewCollectionTitle}),Y.createElement("button",{className:`ph3 pv2 f6 fw6 br--right br2 pointer bn\n              ${i?"white bg-blue hover-bg-dark-blue pointer":"white bg-light-gray"}`},"Add")),Y.createElement("label",{className:"pt3 pb2 f6 fw5 mid-gray",htmlFor:"type"},"Visibility"),Y.createElement(Vg,{name:"type",className:"mb0-ns mb4",onChange:this.onChangeNewCollectionType,style:{maxWidth:80},value:s},Y.createElement("option",{value:"private"},"Private"),Y.createElement("option",{value:"public"},"Public")))))}}function Hg(e){const t=J();return Q(()=>{function n(n){t.current.contains(n.target)||e(n)}function r(t){"Escape"===t.key&&e(t)}return document.addEventListener("click",n,!0),document.addEventListener("keydown",r,!0),()=>{document.removeEventListener("click",n,!0),document.removeEventListener("keydown",r,!0)}},[e]),t}function $g(e){let{children:t,onClickOutside:n}=e,r=wh(e,["children","onClickOutside"]);const i=Hg(n);return Y.createElement("div",Object.assign({},r,{ref:i}),t)}function zg({open:e,children:t,onClickOutside:n,extraStyle:r,top:i,left:s,leftPos:a,rightPos:o}){const l=Hg(n);return Y.createElement("nav",{ref:l,className:"db absolute lh-solid tl z-5",style:yh({},s?{left:null!=a?a:-8}:{right:null!=o?o:-8},{width:"10rem"},i?{bottom:"1.6rem"}:{top:"100%"},r),"aria-label":"submenu","aria-hidden":""+!e},Y.createElement("div",{className:"bg-white ba b--silver br2 shadow-4 overflow-hidden",style:{marginTop:"-4px"}},t),Y.createElement("div",{className:`absolute ${s?"left-1":"right-1"}`,style:yh({clip:"rect(0 18px 14px -4px)"},i?{right:6,bottom:-14,transform:"rotate(180deg)"}:{top:-4})}))}var Wg="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";function qg(){}var Gg=n(function(e){e.exports=function(){function e(e,t,n,r,i,s){if(s!==Wg){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t};return n.checkPropTypes=qg,n.PropTypes=n,n}()}),Kg=n(function(e,t){!function(t,n){e.exports=function(e,t,n){function r(e,t){return new Promise(function(n,r){var i,s=new Image;s.onload=function(){return n(s)},s.onerror=r,0==(null!==(i=e)&&!!i.match(/^\s*data:([a-z]+\/[a-z]+(;[a-z-]+=[a-z-]+)?)?(;base64)?,[a-z0-9!$&',()*+;=\-._~:@\/?%\s]*\s*$/i))&&t&&(s.crossOrigin=t),s.src=e})}e=e&&e.hasOwnProperty("default")?e.default:e,t=t&&t.hasOwnProperty("default")?t.default:t,n=n&&n.hasOwnProperty("default")?n.default:n;var i=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},l=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,s=void 0;try{for(var a,o=e[Symbol.iterator]();!(r=(a=o.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,s=e}finally{try{!r&&o.return&&o.return()}finally{if(i)throw s}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),c=function(e){var t=!1;return{promise:new Promise(function(n,r){e.then(function(e){return t?r({isCanceled:!0}):n(e)},function(e){return r(t?{isCanceled:!0}:e)})}),cancel:function(){t=!0}}},u=!("undefined"==typeof window||"undefined"==typeof navigator||!("ontouchstart"in window||navigator.msMaxTouchPoints>0)),h="undefined"!=typeof File,p={touch:{react:{down:"onTouchStart",mouseDown:"onMouseDown",drag:"onTouchMove",move:"onTouchMove",mouseMove:"onMouseMove",up:"onTouchEnd",mouseUp:"onMouseUp"},native:{down:"touchstart",mouseDown:"mousedown",drag:"touchmove",move:"touchmove",mouseMove:"mousemove",up:"touchend",mouseUp:"mouseup"}},desktop:{react:{down:"onMouseDown",drag:"onDragOver",move:"onMouseMove",up:"onMouseUp"},native:{down:"mousedown",drag:"dragStart",move:"mousemove",up:"mouseup"}}},d=u?p.touch:p.desktop,f="undefined"!=typeof window&&window.devicePixelRatio?window.devicePixelRatio:1,m={x:.5,y:.5},g=function(e){function p(){var e,t,n;i(this,p);for(var r=arguments.length,s=Array(r),l=0;l<r;l++)s[l]=arguments[l];return t=n=o(this,(e=p.__proto__||Object.getPrototypeOf(p)).call.apply(e,[this].concat(s))),n.state={drag:!1,my:null,mx:null,image:m},n.handleImageReady=function(e){var t=n.getInitialSize(e.width,e.height);t.resource=e,t.x=.5,t.y=.5,n.setState({drag:!1,image:t},n.props.onImageReady),n.props.onLoadSuccess(t)},n.clearImage=function(){var e=n.canvas;e.getContext("2d").clearRect(0,0,e.width,e.height),n.setState({image:m})},n.handleMouseDown=function(e){(e=e||window.event).preventDefault(),n.setState({drag:!0,mx:null,my:null})},n.handleMouseUp=function(){n.state.drag&&(n.setState({drag:!1}),n.props.onMouseUp())},n.handleMouseMove=function(e){if(e=e||window.event,!1!==n.state.drag){e.preventDefault();var t=e.targetTouches?e.targetTouches[0].pageX:e.clientX,r=e.targetTouches?e.targetTouches[0].pageY:e.clientY,i={mx:t,my:r},s=n.props.rotate;if(s=(s%=360)<0?s+360:s,n.state.mx&&n.state.my){var o=n.state.mx-t,l=n.state.my-r,c=n.state.image.width*n.props.scale,u=n.state.image.height*n.props.scale,h=n.getCroppingRect(),p=h.x,d=h.y;p*=c,d*=u;var f=function(e){return e*(Math.PI/180)},m=Math.cos(f(s)),g=Math.sin(f(s)),v=d+-o*g+l*m,b={x:(p+o*m+l*g)/c+1/n.props.scale*n.getXScale()/2,y:v/u+1/n.props.scale*n.getYScale()/2};n.props.onPositionChange(b),i.image=a({},n.state.image,b)}n.setState(i),n.props.onMouseMove(e)}},n.setCanvas=function(e){n.canvas=e},o(n,t)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(p,t.Component),s(p,[{key:"componentDidMount",value:function(){this.props.disableHiDPIScaling&&(f=1);var e=n.findDOMNode(this.canvas).getContext("2d");if(this.props.image&&this.loadImage(this.props.image),this.paint(e),document){var t=!!function(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("test",t,t),window.removeEventListener("test",t,t)}catch(t){e=!1}return e}()&&{passive:!1},r=d.native;document.addEventListener(r.move,this.handleMouseMove,t),document.addEventListener(r.up,this.handleMouseUp,t),u&&(document.addEventListener(r.mouseMove,this.handleMouseMove,t),document.addEventListener(r.mouseUp,this.handleMouseUp,t))}}},{key:"componentWillReceiveProps",value:function(e){e.image&&this.props.image!==e.image||this.props.width!==e.width||this.props.height!==e.height?this.loadImage(e.image):e.image||this.clearImage()}},{key:"componentDidUpdate",value:function(e,t){var r=n.findDOMNode(this.canvas),i=r.getContext("2d");i.clearRect(0,0,r.width,r.height),this.paint(i),this.paintImage(i,this.state.image,this.props.border),e.image===this.props.image&&e.width===this.props.width&&e.height===this.props.height&&e.position===this.props.position&&e.scale===this.props.scale&&e.rotate===this.props.rotate&&t.my===this.state.my&&t.mx===this.state.mx&&t.image.x===this.state.image.x&&t.image.y===this.state.image.y||this.props.onImageChange()}},{key:"componentWillUnmount",value:function(){if(document){var e=d.native;document.removeEventListener(e.move,this.handleMouseMove,!1),document.removeEventListener(e.up,this.handleMouseUp,!1),u&&(document.removeEventListener(e.mouseMove,this.handleMouseMove,!1),document.removeEventListener(e.mouseUp,this.handleMouseUp,!1))}}},{key:"isVertical",value:function(){return this.props.rotate%180!=0}},{key:"getBorders",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props.border;return Array.isArray(e)?e:[e,e]}},{key:"getDimensions",value:function(){var e=this.props,t=e.width,n=e.height,r=e.rotate,i=e.border,s={},a=this.getBorders(i),o=l(a,2),c=o[0],u=o[1],h=t,p=n;return this.isVertical()?(s.width=p,s.height=h):(s.width=h,s.height=p),s.width+=2*c,s.height+=2*u,{canvas:s,rotate:r,width:t,height:n,border:i}}},{key:"getImage",value:function(){var e=this.getCroppingRect(),t=this.state.image;e.x*=t.resource.width,e.y*=t.resource.height,e.width*=t.resource.width,e.height*=t.resource.height;var n=document.createElement("canvas");this.isVertical()?(n.width=e.height,n.height=e.width):(n.width=e.width,n.height=e.height);var r=n.getContext("2d");return r.translate(n.width/2,n.height/2),r.rotate(this.props.rotate*Math.PI/180),r.translate(-n.width/2,-n.height/2),this.isVertical()&&r.translate((n.width-n.height)/2,(n.height-n.width)/2),r.drawImage(t.resource,-e.x,-e.y),n}},{key:"getImageScaledToCanvas",value:function(){var e=this.getDimensions(),t=e.width,n=e.height,r=document.createElement("canvas");return this.isVertical()?(r.width=n,r.height=t):(r.width=t,r.height=n),this.paintImage(r.getContext("2d"),this.state.image,0,1),r}},{key:"getXScale",value:function(){var e=this.props.width/this.props.height,t=this.state.image.width/this.state.image.height;return Math.min(1,e/t)}},{key:"getYScale",value:function(){var e=this.props.height/this.props.width,t=this.state.image.height/this.state.image.width;return Math.min(1,e/t)}},{key:"getCroppingRect",value:function(){var e=this.props.position||{x:this.state.image.x,y:this.state.image.y},t=1/this.props.scale*this.getXScale(),n=1/this.props.scale*this.getYScale(),r={x:e.x-t/2,y:e.y-n/2,width:t,height:n},i=0,s=1-r.width,o=0,l=1-r.height;return(this.props.disableBoundaryChecks||t>1||n>1)&&(i=-r.width,s=1,o=-r.height,l=1),a({},r,{x:Math.max(i,Math.min(r.x,s)),y:Math.max(o,Math.min(r.y,l))})}},{key:"loadImage",value:function(e){var t;h&&e instanceof File?this.loadingImage=c((t=e,new Promise(function(e,n){var i=new FileReader;i.onload=function(t){try{var i=r(t.target.result);e(i)}catch(t){n(t)}},i.readAsDataURL(t)}))).promise.then(this.handleImageReady).catch(this.props.onLoadFailure):"string"==typeof e&&(this.loadingImage=c(r(e,this.props.crossOrigin)).promise.then(this.handleImageReady).catch(this.props.onLoadFailure))}},{key:"getInitialSize",value:function(e,t){var n=void 0,r=void 0,i=this.getDimensions();return i.height/i.width>t/e?r=e*((n=this.getDimensions().height)/t):n=t*((r=this.getDimensions().width)/e),{height:n,width:r}}},{key:"paintImage",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:f;if(t.resource){var i=this.calculatePosition(t,n);e.save(),e.translate(e.canvas.width/2,e.canvas.height/2),e.rotate(this.props.rotate*Math.PI/180),e.translate(-e.canvas.width/2,-e.canvas.height/2),this.isVertical()&&e.translate((e.canvas.width-e.canvas.height)/2,(e.canvas.height-e.canvas.width)/2),e.scale(r,r),e.globalCompositeOperation="destination-over",e.drawImage(t.resource,i.x,i.y,i.width,i.height),e.restore()}}},{key:"calculatePosition",value:function(e,t){e=e||this.state.image;var n=this.getBorders(t),r=l(n,2),i=r[0],s=r[1],a=this.getCroppingRect(),o=e.width*this.props.scale,c=e.height*this.props.scale,u=-a.x*o,h=-a.y*c;return this.isVertical()?(u+=s,h+=i):(u+=i,h+=s),{x:u,y:h,height:c,width:o}}},{key:"paint",value:function(e){e.save(),e.scale(f,f),e.translate(0,0),e.fillStyle="rgba("+this.props.color.slice(0,4).join(",")+")";var t=this.props.borderRadius,n=this.getDimensions(),r=this.getBorders(n.border),i=l(r,2),s=i[0],a=i[1],o=n.canvas.height,c=n.canvas.width;t=Math.max(t,0),t=Math.min(t,c/2-s,o/2-a),e.beginPath(),function(e,t,n,r,i,s){if(0===s)e.rect(t,n,r,i);else{var a=r-s,o=i-s;e.translate(t,n),e.arc(s,s,s,Math.PI,1.5*Math.PI),e.lineTo(a,0),e.arc(a,s,s,1.5*Math.PI,2*Math.PI),e.lineTo(r,o),e.arc(a,o,s,2*Math.PI,.5*Math.PI),e.lineTo(s,i),e.arc(s,o,s,.5*Math.PI,Math.PI),e.translate(-t,-n)}}(e,s,a,c-2*s,o-2*a,t),e.rect(c,0,-c,o),e.fill("evenodd"),e.restore()}},{key:"render",value:function(){var e=this.props,n=(e.scale,e.rotate,e.image,e.border,e.borderRadius,e.width,e.height,e.position,e.color,e.style),r=(e.crossOrigin,e.onLoadFailure,e.onLoadSuccess,e.onImageReady,e.onImageChange,e.onMouseUp,e.onMouseMove,e.onPositionChange,e.disableBoundaryChecks,e.disableHiDPIScaling,function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["scale","rotate","image","border","borderRadius","width","height","position","color","style","crossOrigin","onLoadFailure","onLoadSuccess","onImageReady","onImageChange","onMouseUp","onMouseMove","onPositionChange","disableBoundaryChecks","disableHiDPIScaling"])),i=this.getDimensions(),s={width:i.canvas.width,height:i.canvas.height,cursor:this.state.drag?"grabbing":"grab",touchAction:"none"},o={width:i.canvas.width*f,height:i.canvas.height*f,style:a({},s,n)};return o[d.react.down]=this.handleMouseDown,u&&(o[d.react.mouseDown]=this.handleMouseDown),t.createElement("canvas",a({ref:this.setCanvas},o,r))}}]),p}();return g.propTypes={scale:e.number,rotate:e.number,image:e.oneOfType([e.string].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(h?[e.instanceOf(File)]:[]))),border:e.oneOfType([e.number,e.arrayOf(e.number)]),borderRadius:e.number,width:e.number,height:e.number,position:e.shape({x:e.number,y:e.number}),color:e.arrayOf(e.number),crossOrigin:e.oneOf(["","anonymous","use-credentials"]),onLoadFailure:e.func,onLoadSuccess:e.func,onImageReady:e.func,onImageChange:e.func,onMouseUp:e.func,onMouseMove:e.func,onPositionChange:e.func,disableBoundaryChecks:e.bool,disableHiDPIScaling:e.bool},g.defaultProps={scale:1,rotate:0,border:25,borderRadius:0,width:200,height:200,color:[0,0,0,.5],onLoadFailure:function(){},onLoadSuccess:function(){},onImageReady:function(){},onImageChange:function(){},onMouseUp:function(){},onMouseMove:function(){},onPositionChange:function(){},disableBoundaryChecks:!1,disableHiDPIScaling:!1},g}(Gg,Y,nc)}()});function Yg(e){let{buttonType:t="color",bgColor:n="blue",className:r=" ",size:i="large",children:s,label:a}=e,o=wh(e,["buttonType","bgColor","className","size","children","label"]);return Y.createElement("button",Object.assign({},o,{className:`f6 fw6 br2 bn\n         ${"color"===t&&` color-button white bg-${n} hover-bg-light-${n}`}\n             ${"gray"===t&&" gray-button dark-gray hover-near-black bg-silver hover-bg-light-silver"} \n             ${"transparent"===t&&" transparent-button mid-gray hover-dark-gray hover-bg-near-white bg-transparent"} \n             ${"stroke"===t&&" stroke-button bg-transparent"} \n               ${o.disabled?" disabled":" pointer blue-ring-focus  animate-all"} ${"large"===i?"h2 pv2":"pa1 lh-f6 flex items-center"} ${r}`}),Y.createElement("span",{className:"dib ph1"},s||a))}function Zg(e){let{className:t=""}=e,n=wh(e,["className"]);return Y.createElement("input",Object.assign({},n,{type:"range",style:{height:6},className:`form-default-clear form-custom-slider br-pill ${n.disabled?" mid-gray bg-black-10 disabled ":" dark-gray bg-light-silver hover-near-black"} ${n.disabled?" disabled not-allowed":" animate-all pointer"} ${t}\n     `}))}const Qg=640,Xg=400,Jg="Sorry, only PNG & JPEG files are supported.";function ev(e){for(let t of e)if(t.type&&t.type.startsWith("image"))return t}function tv({save:e,reset:t,hide:n,customThumbnail:r,thumbnail:i,fileURL:s,type:a="notebook"}){const[o,l]=Z(!1),[c,u]=Z(1),[h,p]=Z(!1),[d,f]=Z(s),[m,g]=Z(null),v=J(),b=J(),y=J();function w(e){p(!1),e.preventDefault(),e.stopPropagation()}return Q(()=>{y.current&&y.current.focus()},[]),Y.createElement(wd,{onDismiss:n,style:{width:570},initialFocusRef:y},Y.createElement("div",{className:"relative",onDragOver:e=>{e.preventDefault(),e.stopPropagation(),ev(e.dataTransfer.items)&&p(!0)},onDragLeave:w,onDragExit:w,onDrag:function(e){e.preventDefault(),e.stopPropagation()},onDrop:function(e){e.preventDefault();const t=ev(e.dataTransfer.files);if(!t)return g(Jg);f(URL.createObjectURL(t))},onClick:()=>{y.current&&y.current.focus()}},Y.createElement(Rg,{onDismiss:n}),Y.createElement("div",{className:Mg},"Set preview image"),Y.createElement("div",{className:"pv1 f6"},Y.createElement("div",null,Y.createElement("div",{className:"mb2 lh-copy mid-gray"},"JPEG and PNG are supported. For best results, images should be at least 640x400."),Y.createElement("div",{className:"flex justify-between pv2"},Y.createElement("div",{style:{width:120}},Y.createElement("div",{className:"mb2 f7 fw7"},"Current"),Y.createElement("div",{className:"ba b--black-10 br2",style:{width:120,height:75,backgroundImage:r||i?`url(https://static.observableusercontent.com/thumbnail/${r||i}.jpg)`:"var(--checkerboard)",backgroundSize:r||i?"cover":"8%"}}),r?Y.createElement("div",null,Y.createElement("div",{className:"mt2 mb2 f7 lh-title mid-gray"},"This ",a," is using a custom preview image."),Y.createElement("div",{className:"mt1 f7 fw5 blue hover-dark-blue pointer",tabIndex:"0",onClick:async()=>{await t()}},"Reset to automatic")):Y.createElement("div",{className:"mt1 f7 lh-copy mid-gray"},"The current preview image is auto-generated.")),d?Y.createElement("div",null,Y.createElement("div",{className:"flex justify-between mb2 f7 fw7"},"Upload new preview image",Y.createElement("button",{className:"pa0 f7 fw7 blue hover-dark-blue bn pointer",onClick:()=>f(null)},"Reset")),Y.createElement("div",{className:"flex justify-center"},Y.createElement(Kg,{ref:v,image:d,width:320,height:200,padding:10,scale:c})),Y.createElement("div",{className:"flex justify-center items-center mt2"},Y.createElement("label",{className:"mr2 f6 black-70",htmlFor:"scale-range"},"Zoom"),Y.createElement(Zg,{name:"scale-range",className:"w4",onChange:e=>u(e.target.valueAsNumber),value:c,step:"any",min:1,max:2}))):Y.createElement("div",null,Y.createElement("div",{className:"mb2 f7 fw7"},"Upload new preview image"),Y.createElement("div",{className:"flex justify-center"},Y.createElement("button",{onClick:()=>{b.current.click()},style:{height:270,width:370},className:`flex items-center justify-center b--${m?"red":h?"black-50":"black-20"} b--dashed pointer br2 mid-gray flex-column f6 lh-copy`},m?Y.createElement("span",{className:"fw5 red"},m):Y.createElement(Y.Fragment,null,Y.createElement("span",{className:"fw5"},"Drag and drop an image or"),Y.createElement("div",null,Y.createElement("span",{className:"fw6 blue"},"select a file")))))))),Y.createElement("input",{type:"file",className:"dn",accept:"image/gif,image/jpeg,image/jpg,image/png",onChange:function(e){const t=ev(e.target.files);e.target.value="",f(URL.createObjectURL(t))},ref:b}),Y.createElement("input",{type:"text",style:{opacity:0,width:0,height:0},ref:y,onPaste:function(e){try{const t=ev(e.clipboardData.files);if(!t)return g(Jg);f(URL.createObjectURL(t))}catch(e){console.log(e)}}}),Y.createElement("div",{className:`flex items-center justify-end ${o?"pen o-50":""}`},o?Y.createElement("div",{className:"inline-flex mr3 mid-gray"},Y.createElement(wf,null)," "):null,Y.createElement("div",{className:"mr2"},Y.createElement(Yg,{buttonType:"gray",onClick:n},"Cancel")),Y.createElement(Yg,{disabled:!d,onClick:async function(){if(l(!0),v.current){const t=v.current.getImage(),r=document.createElement("canvas");r.width=Qg,r.height=Xg;const i=r.getContext("2d");i.fillStyle="#fff",i.fillRect(0,0,Qg,Xg),i.drawImage(t,0,0,t.width,t.height,0,0,Qg,Xg);const s=r.toDataURL("image/jpeg",.7);e(s),n()}}},"Set image")))))}function nv(e){return(e|=0)>=1e3?(e/1e3).toFixed(Math.max(0,4-Math.floor(Math.log10(e)))).replace(/\.?0*$/,"")+"K":e+""}function rv(e){return e<1e4?e.toLocaleString():(e/1e3).toFixed(1)+"k"}function iv(e,t,n=(e=>Y.createElement("span",{className:"black bg-light-yellow"},e))){let r,i=0,s=0,a=[];const o=new RegExp(t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gi");if(!e)return null;for(;null!==(r=o.exec(e));)r.index!==i&&a.push(e.substring(i,r.index)),a.push(Y.cloneElement(n(r[0]),{key:++s})),i=r.index+r[0].length;return i!==e.length&&a.push(e.substring(i)),a}const sv=Y.createElement("div",{className:"flex-auto relative"},Y.createElement("div",{className:"bg-white br2"},Y.createElement("div",{className:"br2 br--top",style:{paddingTop:"62.5%",backgroundImage:"var(--checkerboard)"}}),Y.createElement("div",{className:"truncate bt b--black-10"},Y.createElement("span",{className:"db flex pl2 pr4 f6 fw4black"},Y.createElement("div",{style:{paddingBottom:2},className:"pt2 mr2 lh-f6 truncate"},Y.createElement("span",{className:"near-white bg-near-white"},"~~~~~~~~~~"))),Y.createElement("div",{className:"flex ph2 pb2 f7 fw4 lh-f7"},Y.createElement("span",{className:"near-white bg-near-white"},"~~~~~~~~~~"))))),av="flex w-100 items-center pa2 f6 fw6 dark-gray bg-transparent hover-bg-near-white bn pointer no-underline bg-animate";let ov=({toggleMenu:e,open:t})=>Y.createElement("svg",{"aria-haspopup":!0,className:`pointer absolute right-0 bottom-0 flex fw6 bn f6 moon-gray hover-mid-gray bg-transparent ${t?"black-70":"black-30 hover-blue"}`,title:"Notebook actions…",onClick:e,width:"24",height:"48"},t&&Y.createElement("circle",{r:"10",cx:"12",cy:"24",className:"near-white",fill:"currentColor"}),Y.createElement("circle",{r:"1.5",cx:"12",cy:19,fill:"currentColor"}),Y.createElement("circle",{r:"1.5",cx:"12",cy:24,fill:"currentColor"}),Y.createElement("circle",{r:"1.5",cx:"12",cy:29,fill:"currentColor"}));function lv({notebook:e,closeMenu:t,onPutBack:n,onTrash:r,showNotebookCollectionsModal:i,onThumbnail:s,url:a}){const o=Xf("(max-width: 640px)");return Y.createElement(zg,{onClickOutside:t,extraStyle:{width:"12.5rem",right:-12,marginTop:-5}},Y.createElement("div",{className:"pv1"},Y.createElement("a",{onClick:t=>i(t,e),className:`${av} hover-near-black`},Y.createElement(kd,{className:"w1 h1 mr1"}),"Collections"),o?null:Y.createElement("button",{onClick:s,className:`${av} hover-near-black`},Y.createElement(af,{className:"mr1"}),"Set preview image"),Y.createElement(fh,{to:`${a}/safe`,className:`${av} hover-near-black`},Y.createElement(Gd,{className:"mr1"}),"Safe mode"),fg(e)?Y.createElement("button",{onClick:n,className:`${av} hover-near-black`},Y.createElement(bf,{className:"w1 h1 mr1"}),"Put back"):Y.createElement("button",{onClick:r,className:`${av} hover-red`},Y.createElement(lf,{className:"mr1"}),"Move to trash")))}const cv=({notebook:e})=>{const{owner:t,update_time:n}=e,r=new Date(n);return Y.createElement("div",{className:"flex ph2 pb2 f7 fw5"},Y.createElement("div",{className:"inline-flex items-center lh-f7"},Y.createElement(fh,{className:"inline-flex items-center no-underline dark-gray hover-blue",to:`/@${t.login}`},Y.createElement(Wf,{user:t,s:16,className:"mr1 br-100"}),Y.createElement("span",null,Og(t))),Y.createElement("span",{title:Nm(r),className:"ml1 nowrap mid-gray"},e.slug?`on ${Sm(r)}`:Tm(r))),e.comment_count?Y.createElement("div",{className:"inline-flex items-center ml2 lh-f7 mid-gray"},Y.createElement(Td,{className:"flex-shrink-0 mr1 moon-gray"}),Y.createElement("span",null,nv(e.comment_count))):null,e.likes?Y.createElement("div",{className:"inline-flex items-center ml2 lh-f7 mid-gray"},Y.createElement(Hd,{className:"flex-shrink-0 mr1 moon-gray"}),Y.createElement("span",null,nv(e.likes))):null)};function uv({notebook:e,collection:t,suggestion:n,reload:r,query:i}){const[s,a]=Z(!1),[o,l]=Z(!1),[c,u]=Z(!1),[h,p]=Z(null),[d,f]=Z(void 0),[m,g]=Z(!1),[v,b]=Z(void 0),[y,w]=Z(null),x=ee(Bf),E=ee(jf);if(c)return null;if(!e)return sv;let k=Cg(e);t&&(k+=`?collection=@${t.owner.login}/${t.slug}`);const C=void 0!==v?v:e.thumbnail;function _(e){l(!1),e.preventDefault(),e.stopPropagation()}let S=rg(E,e)?{onDragOver:e=>{e.preventDefault(),e.stopPropagation(),ev(e.dataTransfer.items)&&l(!0)},onDragLeave:_,onDragExit:_,onDrag:function(e){e.preventDefault(),e.stopPropagation()},onDrop:async function(t){t.preventDefault(),l(!1);let n=ev(t.dataTransfer.files);n&&(w(await x.documentLoadMeta(e.id)),p(URL.createObjectURL(n)),g(!0))}}:null;return Y.createElement("div",{className:"flex-auto relative"},Y.createElement("div",Object.assign({className:"bg-white br2 hover-shadow-4"},S),Y.createElement(fh,{"aria-label":e?e.title:"",to:k,tabIndex:"-1"},Y.createElement("div",{className:` relative br2 br--top${C?" cover bg-center":""} ${o?"o-70":""}`,style:{paddingTop:"62.5%",backgroundImage:C?`url(https://static.observableusercontent.com/thumbnail/${C}.jpg)`:"var(--checkerboard)"}},o?Y.createElement("span",{className:"flex absolute absolute--fill justify-center items-center fw5 white",style:{pointerEvents:"none",background:"rgba(0, 0, 0, 0.7)"}},"Replace preview image"):null)),Y.createElement("div",{className:"truncate bt b--black-10"},Y.createElement(fh,{to:k,style:{paddingBottom:2},className:"db flex items-center pt2 pl2 pr4 f6 fw5 lh-f6 no-underline near-black hover-blue"},Y.createElement("div",{title:e?e.title:"",className:"mr1 truncate"},(i?iv(e.title,i):e.title)||"Untitled"),!ug(e)&&Y.createElement("div",{className:"dib ph1 ml1 f7 fw6 lh-f7 nowrap ttc mid-gray bg-near-white br2"},dg(e)?"Shared":"Private"),gg(e)&&Y.createElement(Fd,{title:"This notebook is a fork",className:"dib flex-shrink-0 ml1 moon-gray"}),n?Y.createElement(Yd,{title:"This notebook is a suggestion",className:"dib flex-shrink-0 ml1 moon-gray"}):null),Y.createElement(cv,{notebook:e})),rg(E,e)?Y.createElement(ov,{open:s,toggleMenu:function(e){a(e=>!e),e.stopPropagation()}}):null),s&&Y.createElement(lv,{notebook:e,closeMenu:function(e){a(!1),e.stopPropagation()},onPutBack:async function(){u(!0),await x.documentPutBack(e.id),r()},showNotebookCollectionsModal:function(e,t){e.stopPropagation(),a(!1),f(t)},onThumbnail:async()=>{w(await x.documentLoadMeta(e.id)),a(!1),g(!0)},onTrash:async function(){u(!0),await x.documentTrash(e.id),r()},url:k}),m?Y.createElement(tv,{hide:()=>g(!1),customThumbnail:y.custom_thumbnail,thumbnail:y.thumbnail,fileURL:h,reset:async()=>{await x.documentThumbnail(e.id,null),w(e=>yh({},e,{custom_thumbnail:null})),b(null)},save:async t=>{const n=await x.documentThumbnail(e.id,t);b(n)}}):null,d&&Y.createElement(Ug,{notebook:e,currentCollection:t,reloadCollection:r,api:x,user:E,team:"team"===e.owner.type?e.owner:null,onDismiss:function(){f(void 0)}}))}function hv({showSignUp:e}){return Y.createElement("div",{className:"flex flex-column items-center justify-center mt5"},Y.createElement("div",{className:"mw5 mb3 f5 fw4 lh-copy tc black-70"},"Create your own notebooks:"),Y.createElement("button",{onClick:()=>e("Footer link"),className:"inline-flex justify-center ph3 pv2 fw6 white bg-blue hover-bg-dark-blue br2 bn hover-rise z-1 pointer"},"Sign up for free"))}function pv(e){return function(){return e}}var dv=function(){};dv.thatReturns=pv,dv.thatReturnsFalse=pv(!1),dv.thatReturnsTrue=pv(!0),dv.thatReturnsNull=pv(null),dv.thatReturnsThis=function(){return this},dv.thatReturnsArgument=function(e){return e};var fv=dv,mv=function(e){};var gv=function(e,t,n,r,i,s,a,o){if(mv(t),!e){var l;if(void 0===t)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[n,r,i,s,a,o],u=0;(l=new Error(t.replace(/%s/g,function(){return c[u++]}))).name="Invariant Violation"}throw l.framesToPop=1,l}},vv=Object.getOwnPropertySymbols,bv=Object.prototype.hasOwnProperty,yv=Object.prototype.propertyIsEnumerable;(function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(e){r[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(ZL){return!1}})()&&Object.assign;var wv="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",xv=function(e,t){return e(t={exports:{}},t.exports),t.exports}(function(e){e.exports=function(){function e(e,t,n,r,i,s){s!==wv&&gv(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types")}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t};return n.checkPropTypes=fv,n.PropTypes=n,n}()}),Ev=function(e,t,n,r,i,s,a,o){if(!e){var l;if(void 0===t)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[n,r,i,s,a,o],u=0;(l=new Error(t.replace(/%s/g,function(){return c[u++]}))).name="Invariant Violation"}throw l.framesToPop=1,l}},kv=function(e){return e.replace(/[A-Z]/g,function(e){return"-"+e.toLowerCase()}).toLowerCase()},Cv=function(e){var t="",n=Object.keys(e);return n.forEach(function(r,i){var s=e[r];(function(e){return/[height|width]$/.test(e)})(r=kv(r))&&"number"==typeof s&&(s+="px"),t+=!0===s?r:!1===s?"not "+r:"("+r+": "+s+")",i<n.length-1&&(t+=" and ")}),t},_v=function(e){var t="";return"string"==typeof e?e:e instanceof Array?(e.forEach(function(n,r){t+=Cv(n),r<e.length-1&&(t+=", ")}),t):Cv(e)},Sv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Nv=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},Tv=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},Av=function(e){function t(){var n,r;Nv(this,t);for(var i=arguments.length,s=Array(i),a=0;a<i;a++)s[a]=arguments[a];return n=r=Tv(this,e.call.apply(e,[this].concat(s))),r.state={matches:r.props.defaultMatches},r.updateMatches=function(){return r.setState({matches:r.mediaQueryList.matches})},Tv(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentWillMount=function(){if("object"===("undefined"==typeof window?"undefined":Sv(window))){var e=this.props.targetWindow||window;Ev("function"==typeof e.matchMedia,"<Media targetWindow> does not support `matchMedia`.");var t=this.props.query;"string"!=typeof t&&(t=_v(t)),this.mediaQueryList=e.matchMedia(t),this.mediaQueryList.addListener(this.updateMatches),this.updateMatches()}},t.prototype.componentWillUnmount=function(){this.mediaQueryList.removeListener(this.updateMatches)},t.prototype.render=function(){var e=this.props,t=e.children,n=e.render,r=this.state.matches;return n?r?n():null:t?"function"==typeof t?t(r):(!Array.isArray(t)||t.length)&&r?Y.Children.only(t):null:null},t}(Y.Component);function Lv({user:e,mobile:t}){const[n,r]=Z(!1),i=e=>{e.stopPropagation(),r(!1)};if(!e)return Y.createElement("span",null);let s=Y.createElement("div",{className:t?"":"pv2 nowrap"},e.login&&Y.createElement("div",null,Y.createElement("div",{className:"pv2 pl3 pr4 f7 fw5 nowrap mid-gray"},"Signed in to"),Y.createElement(fh,{to:`/@${e.login}`,onClick:i,className:"flex items-center pv2 pl3 pr4 f6 fw6 no-underline black-70 hover-black hover-bg-near-white pointer"},Y.createElement(Wf,{user:e,s:16,className:"mr1 br-100",style:{marginTop:-1,marginBottom:-1}}),Og(e)),e.teams.map(e=>Y.createElement(fh,{key:e.login,to:`/@${e.login}`,onClick:i,className:"flex items-center pv2 pl3 pr4 f6 fw6 no-underline black-70 hover-black hover-bg-near-white pointer"},Y.createElement(Wf,{user:e,s:16,className:"mr1 br-100",style:{marginTop:-1,marginBottom:-1}}),Og(e))),Y.createElement("div",{className:"mt2 mb2 bb b--light-silver"}),Y.createElement(fh,{to:"/settings",onClick:i,className:"flex items-center pv2 pl3 pr4 f6 fw6 no-underline black-70 hover-black hover-bg-near-white pointer"},Y.createElement(jd,{className:"mr1"})," Settings")),Y.createElement("form",{method:"POST",onSubmit:e=>{e.target.token.value=Vh()},action:"/logout"},Y.createElement("input",{type:"hidden",name:"token"}),Y.createElement("button",{className:"flex w-100 items-center pv2 pl3 pr4 f6 fw6 tl black-70 hover-black bg-transparent hover-bg-near-white input-reset bn pointer"},Y.createElement(sf,{className:"mr1"}),"Sign out")));return t?Y.createElement("div",{className:"nl2 nr2"},s):Y.createElement("section",{style:{lineHeight:0},className:"dib relative","aria-haspopup":!0},Y.createElement("button",{className:"inline-flex pa0 bg-transparent br-pill bn focus-outer-ring",onClick:e=>{e.stopPropagation(),r(e=>!e)}},Y.createElement(Wf,{user:e,title:"Account and settings…",className:"dib ba b--white br-100 pointer",s:32})),n&&Y.createElement(zg,{onClickOutside:i,extraStyle:{width:"auto"}},s))}Av.propTypes={defaultMatches:xv.bool,query:xv.oneOfType([xv.string,xv.object,xv.arrayOf(xv.object.isRequired)]).isRequired,render:xv.func,children:xv.oneOfType([xv.node,xv.func]),targetWindow:xv.object},Av.defaultProps={defaultMatches:!0};var Pv="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";function Iv(){}var Ov=n(function(e){e.exports=function(){function e(e,t,n,r,i,s){if(s!==Pv){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t};return n.checkPropTypes=Iv,n.PropTypes=n,n}()}),Mv=function(e,t){if(e===t)return!0;var n=e.length;if(t.length!==n)return!1;for(var r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0},Rv="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";function Dv(){}var Fv=n(function(e){e.exports=function(){function e(e,t,n,r,i,s){if(s!==Rv){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t};return n.checkPropTypes=Dv,n.PropTypes=n,n}()}),Vv=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,s=void 0;try{for(var a,o=e[Symbol.iterator]();!(r=(a=o.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(ZL){i=!0,s=ZL}finally{try{!r&&o.return&&o.return()}finally{if(i)throw s}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),jv=function(e){var t=e.data,n=e.multiSection;function r(e){var r=Vv(e,2),i=r[0],s=r[1];return n?null===s||s===t[i]-1?null===(i=function(e){for(null===e?e=0:e++;e<t.length&&0===t[e];)e++;return e===t.length?null:e}(i))?[null,null]:[i,0]:[i,s+1]:0===t||s===t-1?[null,null]:null===s?[null,0]:[null,s+1]}return{next:r,prev:function(e){var r=Vv(e,2),i=r[0],s=r[1];return n?null===s||0===s?null===(i=function(e){for(null===e?e=t.length-1:e--;e>=0&&0===t[e];)e--;return-1===e?null:e}(i))?[null,null]:[i,t[i]-1]:[i,s-1]:0===t||0===s?[null,null]:null===s?[null,t-1]:[null,s-1]},isLast:function(e){return null===r(e)[1]}}},Bv=Object.prototype.propertyIsEnumerable;function Uv(e){var t=Object.getOwnPropertyNames(e);return Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(e))),t.filter(function(t){return Bv.call(e,t)})}var Hv=Object.assign||function(e,t){for(var n,r,i=function(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),s=1;s<arguments.length;s++){n=arguments[s],r=Uv(Object(n));for(var a=0;a<r.length;a++)i[r[a]]=n[r[a]]}return i},$v=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,s=void 0;try{for(var a,o=e[Symbol.iterator]();!(r=(a=o.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(ZL){i=!0,s=ZL}finally{try{!r&&o.return&&o.return()}finally{if(i)throw s}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var i=function(e){return e&&e.__esModule?e:{default:e}}(Hv),s=function(e){return e};t.default=function(e){var t=Array.isArray(e)&&2===e.length?e:[e,null],a=n(t,2),o=a[0],l=a[1];return function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];var c=n.map(function(e){return o[e]}).filter(s);return"string"==typeof c[0]||"function"==typeof l?{key:e,className:l?l.apply(void 0,r(c)):c.join(" ")}:{key:e,style:i.default.apply(void 0,[{}].concat(r(c)))}}},e.exports=t.default});t($v);var zv=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.default=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(e===t)return!1;var i=Object.keys(e),s=Object.keys(t);if(i.length!==s.length)return!0;var a={},o=void 0,l=void 0;for(o=0,l=r.length;o<l;o++)a[r[o]]=!0;for(o=0,l=i.length;o<l;o++){var c=i[o],u=e[c],h=t[c];if(u!==h){if(!a[c]||null===u||null===h||"object"!==(void 0===u?"undefined":n(u))||"object"!==(void 0===h?"undefined":n(h)))return!0;var p=Object.keys(u),d=Object.keys(h);if(p.length!==d.length)return!0;for(var f=0,m=p.length;f<m;f++){var g=p[f];if(u[g]!==h[g])return!0}}}return!1}});t(zv);var Wv=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),r=a(Y),i=a(Fv),s=a(zv);function a(e){return e&&e.__esModule?e:{default:e}}var o=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,Y.Component),n(t,[{key:"shouldComponentUpdate",value:function(e){return(0,s.default)(e,this.props)}},{key:"render",value:function(){var e=this.props,t=e.section,n=e.renderSectionTitle,i=e.theme,s=e.sectionKeyPrefix,a=n(t);return a?r.default.createElement("div",i(s+"title","sectionTitle"),a):null}}]),t}();o.propTypes={section:i.default.any.isRequired,renderSectionTitle:i.default.func.isRequired,theme:i.default.func.isRequired,sectionKeyPrefix:i.default.string.isRequired},t.default=o});t(Wv);var qv=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=o(Y),s=o(Fv),a=o(zv);function o(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var c=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,s=Array(i),a=0;a<i;a++)s[a]=arguments[a];return n=r=l(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),r.storeItemReference=function(e){null!==e&&(r.item=e)},r.onMouseEnter=function(e){var t=r.props,n=t.sectionIndex,i=t.itemIndex;r.props.onMouseEnter(e,{sectionIndex:n,itemIndex:i})},r.onMouseLeave=function(e){var t=r.props,n=t.sectionIndex,i=t.itemIndex;r.props.onMouseLeave(e,{sectionIndex:n,itemIndex:i})},r.onMouseDown=function(e){var t=r.props,n=t.sectionIndex,i=t.itemIndex;r.props.onMouseDown(e,{sectionIndex:n,itemIndex:i})},r.onClick=function(e){var t=r.props,n=t.sectionIndex,i=t.itemIndex;r.props.onClick(e,{sectionIndex:n,itemIndex:i})},l(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,Y.Component),r(t,[{key:"shouldComponentUpdate",value:function(e){return(0,a.default)(e,this.props,["renderItemData"])}},{key:"render",value:function(){var e=this.props,t=e.isHighlighted,r=e.item,s=e.renderItem,a=e.renderItemData,o=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["isHighlighted","item","renderItem","renderItemData"]);return delete o.sectionIndex,delete o.itemIndex,"function"==typeof o.onMouseEnter&&(o.onMouseEnter=this.onMouseEnter),"function"==typeof o.onMouseLeave&&(o.onMouseLeave=this.onMouseLeave),"function"==typeof o.onMouseDown&&(o.onMouseDown=this.onMouseDown),"function"==typeof o.onClick&&(o.onClick=this.onClick),i.default.createElement("li",n({role:"option"},o,{ref:this.storeItemReference}),s(r,n({isHighlighted:t},a)))}}]),t}();c.propTypes={sectionIndex:s.default.number,isHighlighted:s.default.bool.isRequired,itemIndex:s.default.number.isRequired,item:s.default.any.isRequired,renderItem:s.default.func.isRequired,renderItemData:s.default.object.isRequired,onMouseEnter:s.default.func,onMouseLeave:s.default.func,onMouseDown:s.default.func,onClick:s.default.func},t.default=c});t(qv);var Gv=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=l(Y),s=l(Fv),a=l(qv),o=l(zv);function l(e){return e&&e.__esModule?e:{default:e}}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var u=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,s=Array(i),a=0;a<i;a++)s[a]=arguments[a];return n=r=c(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),r.storeHighlightedItemReference=function(e){r.props.onHighlightedItemChange(null===e?null:e.item)},c(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,Y.Component),r(t,[{key:"shouldComponentUpdate",value:function(e){return(0,o.default)(e,this.props,["itemProps"])}},{key:"render",value:function(){var e=this,t=this.props,r=t.items,s=t.itemProps,o=t.renderItem,l=t.renderItemData,c=t.sectionIndex,u=t.highlightedItemIndex,h=t.getItemId,p=t.theme,d=t.keyPrefix,f=null===c?d:d+"section-"+c+"-",m="function"==typeof s;return i.default.createElement("ul",n({role:"listbox"},p(f+"items-list","itemsList")),r.map(function(t,r){var d=0===r,g=r===u,v=f+"item-"+r,b=m?s({sectionIndex:c,itemIndex:r}):s,y=n({id:h(c,r),"aria-selected":g},p(v,"item",d&&"itemFirst",g&&"itemHighlighted"),b);return g&&(y.ref=e.storeHighlightedItemReference),i.default.createElement(a.default,n({},y,{sectionIndex:c,isHighlighted:g,itemIndex:r,item:t,renderItem:o,renderItemData:l}))}))}}]),t}();u.propTypes={items:s.default.array.isRequired,itemProps:s.default.oneOfType([s.default.object,s.default.func]),renderItem:s.default.func.isRequired,renderItemData:s.default.object.isRequired,sectionIndex:s.default.number,highlightedItemIndex:s.default.number,onHighlightedItemChange:s.default.func.isRequired,getItemId:s.default.func.isRequired,theme:s.default.func.isRequired,keyPrefix:s.default.string.isRequired},u.defaultProps={sectionIndex:null},t.default=u});t(Gv);var Kv=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,s=void 0;try{for(var a,o=e[Symbol.iterator]();!(r=(a=o.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(ZL){i=!0,s=ZL}finally{try{!r&&o.return&&o.return()}finally{if(i)throw s}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=h(Y),a=h(Fv),o=h(jv),l=h($v),c=h(Wv),u=h(Gv);function h(e){return e&&e.__esModule?e:{default:e}}var p={},d=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.storeInputReference=function(e){null!==e&&(n.input=e)},n.storeItemsContainerReference=function(e){null!==e&&(n.itemsContainer=e)},n.onHighlightedItemChange=function(e){n.highlightedItem=e},n.getItemId=function(e,t){return null===t?null:"react-autowhatever-"+n.props.id+"-"+(null===e?"":"section-"+e)+"-item-"+t},n.onFocus=function(e){var t=n.props.inputProps;n.setState({isInputFocused:!0}),t.onFocus&&t.onFocus(e)},n.onBlur=function(e){var t=n.props.inputProps;n.setState({isInputFocused:!1}),t.onBlur&&t.onBlur(e)},n.onKeyDown=function(e){var t=n.props,i=t.inputProps,s=t.highlightedSectionIndex,a=t.highlightedItemIndex;switch(e.key){case"ArrowDown":case"ArrowUp":var o="ArrowDown"===e.key?"next":"prev",l=n.sectionIterator[o]([s,a]),c=r(l,2),u=c[0],h=c[1];i.onKeyDown(e,{newHighlightedSectionIndex:u,newHighlightedItemIndex:h});break;default:i.onKeyDown(e,{highlightedSectionIndex:s,highlightedItemIndex:a})}},n.highlightedItem=null,n.state={isInputFocused:!1},n.setSectionsItems(e),n.setSectionIterator(e),n.setTheme(e),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,Y.Component),i(t,[{key:"componentDidMount",value:function(){this.ensureHighlightedItemIsVisible()}},{key:"componentWillReceiveProps",value:function(e){e.items!==this.props.items&&this.setSectionsItems(e),e.items===this.props.items&&e.multiSection===this.props.multiSection||this.setSectionIterator(e),e.theme!==this.props.theme&&this.setTheme(e)}},{key:"componentDidUpdate",value:function(){this.ensureHighlightedItemIsVisible()}},{key:"setSectionsItems",value:function(e){e.multiSection&&(this.sectionsItems=e.items.map(function(t){return e.getSectionItems(t)}),this.sectionsLengths=this.sectionsItems.map(function(e){return e.length}),this.allSectionsAreEmpty=this.sectionsLengths.every(function(e){return 0===e}))}},{key:"setSectionIterator",value:function(e){this.sectionIterator=(0,o.default)({multiSection:e.multiSection,data:e.multiSection?this.sectionsLengths:e.items.length})}},{key:"setTheme",value:function(e){this.theme=(0,l.default)(e.theme)}},{key:"renderSections",value:function(){var e=this;if(this.allSectionsAreEmpty)return null;var t=this.theme,n=this.props,r=n.id,i=n.items,a=n.renderItem,o=n.renderItemData,l=n.renderSectionTitle,h=n.highlightedSectionIndex,p=n.highlightedItemIndex,d=n.itemProps;return i.map(function(n,i){var f="react-autowhatever-"+r+"-",m=f+"section-"+i+"-",g=0===i;return s.default.createElement("div",t(m+"container","sectionContainer",g&&"sectionContainerFirst"),s.default.createElement(c.default,{section:n,renderSectionTitle:l,theme:t,sectionKeyPrefix:m}),s.default.createElement(u.default,{items:e.sectionsItems[i],itemProps:d,renderItem:a,renderItemData:o,sectionIndex:i,highlightedItemIndex:h===i?p:null,onHighlightedItemChange:e.onHighlightedItemChange,getItemId:e.getItemId,theme:t,keyPrefix:f,ref:e.storeItemsListReference}))})}},{key:"renderItems",value:function(){var e=this.props.items;if(0===e.length)return null;var t=this.theme,n=this.props,r=n.id,i=n.renderItem,a=n.renderItemData,o=n.highlightedSectionIndex,l=n.highlightedItemIndex,c=n.itemProps;return s.default.createElement(u.default,{items:e,itemProps:c,renderItem:i,renderItemData:a,highlightedItemIndex:null===o?l:null,onHighlightedItemChange:this.onHighlightedItemChange,getItemId:this.getItemId,theme:t,keyPrefix:"react-autowhatever-"+r+"-"})}},{key:"ensureHighlightedItemIsVisible",value:function(){var e=this.highlightedItem;if(e){var t=this.itemsContainer,n=e.offsetParent===t?e.offsetTop:e.offsetTop-t.offsetTop,r=t.scrollTop;n<r?r=n:n+e.offsetHeight>r+t.offsetHeight&&(r=n+e.offsetHeight-t.offsetHeight),r!==t.scrollTop&&(t.scrollTop=r)}}},{key:"render",value:function(){var e=this.theme,t=this.props,r=t.id,i=t.multiSection,a=t.renderInputComponent,o=t.renderItemsContainer,l=t.highlightedSectionIndex,c=t.highlightedItemIndex,u=this.state.isInputFocused,h=i?this.renderSections():this.renderItems(),p=null!==h,d=this.getItemId(l,c),f="react-autowhatever-"+r,m=n({role:"combobox","aria-haspopup":"listbox","aria-owns":f,"aria-expanded":p},e("react-autowhatever-"+r+"-container","container",p&&"containerOpen"),this.props.containerProps),g=a(n({type:"text",value:"",autoComplete:"off","aria-autocomplete":"list","aria-controls":f,"aria-activedescendant":d},e("react-autowhatever-"+r+"-input","input",p&&"inputOpen",u&&"inputFocused"),this.props.inputProps,{onFocus:this.onFocus,onBlur:this.onBlur,onKeyDown:this.props.inputProps.onKeyDown&&this.onKeyDown,ref:this.storeInputReference})),v=o({containerProps:n({id:f,role:"listbox"},e("react-autowhatever-"+r+"-items-container","itemsContainer",p&&"itemsContainerOpen"),{ref:this.storeItemsContainerReference}),children:h});return s.default.createElement("div",m,g,v)}}]),t}();d.propTypes={id:a.default.string,multiSection:a.default.bool,renderInputComponent:a.default.func,renderItemsContainer:a.default.func,items:a.default.array.isRequired,renderItem:a.default.func,renderItemData:a.default.object,renderSectionTitle:a.default.func,getSectionItems:a.default.func,containerProps:a.default.object,inputProps:a.default.object,itemProps:a.default.oneOfType([a.default.object,a.default.func]),highlightedSectionIndex:a.default.number,highlightedItemIndex:a.default.number,theme:a.default.oneOfType([a.default.object,a.default.array])},d.defaultProps={id:"1",multiSection:!1,renderInputComponent:function(e){return s.default.createElement("input",e)},renderItemsContainer:function(e){var t=e.containerProps,n=e.children;return s.default.createElement("div",t,n)},renderItem:function(){throw new Error("`renderItem` must be provided")},renderItemData:p,renderSectionTitle:function(){throw new Error("`renderSectionTitle` must be provided")},getSectionItems:function(){throw new Error("`getSectionItems` must be provided")},containerProps:p,inputProps:p,itemProps:p,highlightedSectionIndex:null,highlightedItemIndex:null,theme:{container:"react-autowhatever__container",containerOpen:"react-autowhatever__container--open",input:"react-autowhatever__input",inputOpen:"react-autowhatever__input--open",inputFocused:"react-autowhatever__input--focused",itemsContainer:"react-autowhatever__items-container",itemsContainerOpen:"react-autowhatever__items-container--open",itemsList:"react-autowhatever__items-list",item:"react-autowhatever__item",itemFirst:"react-autowhatever__item--first",itemHighlighted:"react-autowhatever__item--highlighted",sectionContainer:"react-autowhatever__section-container",sectionContainerFirst:"react-autowhatever__section-container--first",sectionTitle:"react-autowhatever__section-title"}},t.default=d});t(Kv);var Yv=Kv.default,Zv=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});t.defaultTheme={container:"react-autosuggest__container",containerOpen:"react-autosuggest__container--open",input:"react-autosuggest__input",inputOpen:"react-autosuggest__input--open",inputFocused:"react-autosuggest__input--focused",suggestionsContainer:"react-autosuggest__suggestions-container",suggestionsContainerOpen:"react-autosuggest__suggestions-container--open",suggestionsList:"react-autosuggest__suggestions-list",suggestion:"react-autosuggest__suggestion",suggestionFirst:"react-autosuggest__suggestion--first",suggestionHighlighted:"react-autosuggest__suggestion--highlighted",sectionContainer:"react-autosuggest__section-container",sectionContainerFirst:"react-autosuggest__section-container--first",sectionTitle:"react-autosuggest__section-title"},t.mapToAutowhateverTheme=function(e){var t={};for(var n in e)switch(n){case"suggestionsContainer":t.itemsContainer=e[n];break;case"suggestionsContainerOpen":t.itemsContainerOpen=e[n];break;case"suggestion":t.item=e[n];break;case"suggestionFirst":t.itemFirst=e[n];break;case"suggestionHighlighted":t.itemHighlighted=e[n];break;case"suggestionsList":t.itemsList=e[n];break;default:t[n]=e[n]}return t}});t(Zv);Zv.defaultTheme,Zv.mapToAutowhateverTheme;var Qv=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=l(Y),s=l(Ov),a=l(Mv),o=l(Yv);function l(e){return e&&e.__esModule?e:{default:e}}var c=function(){return!0},u=function(e){function t(e){var n=e.alwaysRenderSuggestions;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return h.call(r),r.state={isFocused:!1,isCollapsed:!n,highlightedSectionIndex:null,highlightedSuggestionIndex:null,highlightedSuggestion:null,valueBeforeUpDown:null},r.justPressedUpDown=!1,r.justMouseEntered=!1,r.pressedSuggestion=null,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,Y.Component),r(t,[{key:"componentDidMount",value:function(){document.addEventListener("mousedown",this.onDocumentMouseDown),document.addEventListener("mouseup",this.onDocumentMouseUp),this.input=this.autowhatever.input,this.suggestionsContainer=this.autowhatever.itemsContainer}},{key:"componentWillReceiveProps",value:function(e){(0,a.default)(e.suggestions,this.props.suggestions)?e.highlightFirstSuggestion&&e.suggestions.length>0&&!1===this.justPressedUpDown&&!1===this.justMouseEntered&&this.highlightFirstSuggestion():this.willRenderSuggestions(e)?this.state.isCollapsed&&!this.justSelectedSuggestion&&this.revealSuggestions():this.resetHighlightedSuggestion()}},{key:"componentDidUpdate",value:function(e,t){var n=this.props,r=n.suggestions,i=n.onSuggestionHighlighted,s=n.highlightFirstSuggestion;if(!(0,a.default)(r,e.suggestions)&&r.length>0&&s)this.highlightFirstSuggestion();else if(i){var o=this.getHighlightedSuggestion();o!=t.highlightedSuggestion&&i({suggestion:o})}}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mousedown",this.onDocumentMouseDown),document.removeEventListener("mouseup",this.onDocumentMouseUp)}},{key:"updateHighlightedSuggestion",value:function(e,t,n){var r=this;this.setState(function(i){var s=i.valueBeforeUpDown;return null===t?s=null:null===s&&void 0!==n&&(s=n),{highlightedSectionIndex:e,highlightedSuggestionIndex:t,highlightedSuggestion:null===t?null:r.getSuggestion(e,t),valueBeforeUpDown:s}})}},{key:"resetHighlightedSuggestion",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.setState(function(t){var n=t.valueBeforeUpDown;return{highlightedSectionIndex:null,highlightedSuggestionIndex:null,highlightedSuggestion:null,valueBeforeUpDown:e?null:n}})}},{key:"revealSuggestions",value:function(){this.setState({isCollapsed:!1})}},{key:"closeSuggestions",value:function(){this.setState({highlightedSectionIndex:null,highlightedSuggestionIndex:null,highlightedSuggestion:null,valueBeforeUpDown:null,isCollapsed:!0})}},{key:"getSuggestion",value:function(e,t){var n=this.props,r=n.suggestions,i=n.multiSection,s=n.getSectionSuggestions;return i?s(r[e])[t]:r[t]}},{key:"getHighlightedSuggestion",value:function(){var e=this.state,t=e.highlightedSectionIndex,n=e.highlightedSuggestionIndex;return null===n?null:this.getSuggestion(t,n)}},{key:"getSuggestionValueByIndex",value:function(e,t){return(0,this.props.getSuggestionValue)(this.getSuggestion(e,t))}},{key:"getSuggestionIndices",value:function(e){var t=e.getAttribute("data-section-index"),n=e.getAttribute("data-suggestion-index");return{sectionIndex:"string"==typeof t?parseInt(t,10):null,suggestionIndex:parseInt(n,10)}}},{key:"findSuggestionElement",value:function(e){var t=e;do{if(null!==t.getAttribute("data-suggestion-index"))return t;t=t.parentNode}while(null!==t);throw console.error("Clicked element:",e),new Error("Couldn't find suggestion element")}},{key:"maybeCallOnChange",value:function(e,t,n){var r=this.props.inputProps,i=r.value,s=r.onChange;t!==i&&s(e,{newValue:t,method:n})}},{key:"willRenderSuggestions",value:function(e){var t=e.suggestions,n=e.inputProps,r=e.shouldRenderSuggestions,i=n.value;return t.length>0&&r(i)}},{key:"getQuery",value:function(){var e=this.props.inputProps.value,t=this.state.valueBeforeUpDown;return(null===t?e:t).trim()}},{key:"render",value:function(){var e=this,t=this.props,r=t.suggestions,s=t.renderInputComponent,a=t.onSuggestionsFetchRequested,l=t.renderSuggestion,u=t.inputProps,h=t.multiSection,p=t.renderSectionTitle,d=t.id,f=t.getSectionSuggestions,m=t.theme,g=t.getSuggestionValue,v=t.alwaysRenderSuggestions,b=t.highlightFirstSuggestion,y=this.state,w=y.isFocused,x=y.isCollapsed,E=y.highlightedSectionIndex,k=y.highlightedSuggestionIndex,C=y.valueBeforeUpDown,_=v?c:this.props.shouldRenderSuggestions,S=u.value,N=u.onFocus,T=u.onKeyDown,A=this.willRenderSuggestions(this.props),L=v||w&&!x&&A,P=L?r:[],I=n({},u,{onFocus:function(t){if(!e.justSelectedSuggestion&&!e.justClickedOnSuggestionsContainer){var n=_(S);e.setState({isFocused:!0,isCollapsed:!n}),N&&N(t),n&&a({value:S,reason:"input-focused"})}},onBlur:function(t){e.justClickedOnSuggestionsContainer?e.input.focus():(e.blurEvent=t,e.justSelectedSuggestion||(e.onBlur(),e.onSuggestionsClearRequested()))},onChange:function(t){var r=t.target.value,i=_(r);e.maybeCallOnChange(t,r,"type"),e.setState(n({},b?{}:{highlightedSectionIndex:null,highlightedSuggestionIndex:null,highlightedSuggestion:null},{valueBeforeUpDown:null,isCollapsed:!i})),i?a({value:r,reason:"input-changed"}):e.onSuggestionsClearRequested()},onKeyDown:function(t,n){var i=t.keyCode;switch(i){case 40:case 38:if(x)_(S)&&(a({value:S,reason:"suggestions-revealed"}),e.revealSuggestions());else if(r.length>0){var s=n.newHighlightedSectionIndex,o=n.newHighlightedItemIndex,l=void 0;l=null===o?null===C?S:C:e.getSuggestionValueByIndex(s,o),e.updateHighlightedSuggestion(s,o,S),e.maybeCallOnChange(t,l,40===i?"down":"up")}t.preventDefault(),e.justPressedUpDown=!0,setTimeout(function(){e.justPressedUpDown=!1});break;case 13:if(229===t.keyCode)break;var c=e.getHighlightedSuggestion();if(L&&!v&&e.closeSuggestions(),null!=c){var u=g(c);e.maybeCallOnChange(t,u,"enter"),e.onSuggestionSelected(t,{suggestion:c,suggestionValue:u,suggestionIndex:k,sectionIndex:E,method:"enter"}),e.justSelectedSuggestion=!0,setTimeout(function(){e.justSelectedSuggestion=!1})}break;case 27:L&&t.preventDefault();var h=L&&!v;if(null===C){if(!h){e.maybeCallOnChange(t,"","escape"),_("")?a({value:"",reason:"escape-pressed"}):e.onSuggestionsClearRequested()}}else e.maybeCallOnChange(t,C,"escape");h?(e.onSuggestionsClearRequested(),e.closeSuggestions()):e.resetHighlightedSuggestion()}T&&T(t)}}),O={query:this.getQuery()};return i.default.createElement(o.default,{multiSection:h,items:P,renderInputComponent:s,renderItemsContainer:this.renderSuggestionsContainer,renderItem:l,renderItemData:O,renderSectionTitle:p,getSectionItems:f,highlightedSectionIndex:E,highlightedItemIndex:k,inputProps:I,itemProps:this.itemProps,theme:(0,Zv.mapToAutowhateverTheme)(m),id:d,ref:this.storeAutowhateverRef})}}]),t}();u.propTypes={suggestions:s.default.array.isRequired,onSuggestionsFetchRequested:function(e,t){var n=e[t];if("function"!=typeof n)throw new Error("'onSuggestionsFetchRequested' must be implemented. See: https://github.com/moroshko/react-autosuggest#onSuggestionsFetchRequestedProp")},onSuggestionsClearRequested:function(e,t){var n=e[t];if(!1===e.alwaysRenderSuggestions&&"function"!=typeof n)throw new Error("'onSuggestionsClearRequested' must be implemented. See: https://github.com/moroshko/react-autosuggest#onSuggestionsClearRequestedProp")},onSuggestionSelected:s.default.func,onSuggestionHighlighted:s.default.func,renderInputComponent:s.default.func,renderSuggestionsContainer:s.default.func,getSuggestionValue:s.default.func.isRequired,renderSuggestion:s.default.func.isRequired,inputProps:function(e,t){var n=e[t];if(!n.hasOwnProperty("value"))throw new Error("'inputProps' must have 'value'.");if(!n.hasOwnProperty("onChange"))throw new Error("'inputProps' must have 'onChange'.")},shouldRenderSuggestions:s.default.func,alwaysRenderSuggestions:s.default.bool,multiSection:s.default.bool,renderSectionTitle:function(e,t){var n=e[t];if(!0===e.multiSection&&"function"!=typeof n)throw new Error("'renderSectionTitle' must be implemented. See: https://github.com/moroshko/react-autosuggest#renderSectionTitleProp")},getSectionSuggestions:function(e,t){var n=e[t];if(!0===e.multiSection&&"function"!=typeof n)throw new Error("'getSectionSuggestions' must be implemented. See: https://github.com/moroshko/react-autosuggest#getSectionSuggestionsProp")},focusInputOnSuggestionClick:s.default.bool,highlightFirstSuggestion:s.default.bool,theme:s.default.object,id:s.default.string},u.defaultProps={renderSuggestionsContainer:function(e){var t=e.containerProps,n=e.children;return i.default.createElement("div",t,n)},shouldRenderSuggestions:function(e){return e.trim().length>0},alwaysRenderSuggestions:!1,multiSection:!1,focusInputOnSuggestionClick:!0,highlightFirstSuggestion:!1,theme:Zv.defaultTheme,id:"1"};var h=function(){var e=this;this.onDocumentMouseDown=function(t){e.justClickedOnSuggestionsContainer=!1;for(var n=t.detail&&t.detail.target||t.target;null!==n&&n!==document;){if(null!==n.getAttribute("data-suggestion-index"))return;if(n===e.suggestionsContainer)return void(e.justClickedOnSuggestionsContainer=!0);n=n.parentNode}},this.storeAutowhateverRef=function(t){null!==t&&(e.autowhatever=t)},this.onSuggestionMouseEnter=function(t,n){var r=n.sectionIndex,i=n.itemIndex;e.updateHighlightedSuggestion(r,i),t.target===e.pressedSuggestion&&(e.justSelectedSuggestion=!0),e.justMouseEntered=!0,setTimeout(function(){e.justMouseEntered=!1})},this.highlightFirstSuggestion=function(){e.updateHighlightedSuggestion(e.props.multiSection?0:null,0)},this.onDocumentMouseUp=function(){e.pressedSuggestion&&!e.justSelectedSuggestion&&e.input.focus(),e.pressedSuggestion=null},this.onSuggestionMouseDown=function(t){e.justSelectedSuggestion||(e.justSelectedSuggestion=!0,e.pressedSuggestion=t.target)},this.onSuggestionsClearRequested=function(){var t=e.props.onSuggestionsClearRequested;t&&t()},this.onSuggestionSelected=function(t,n){var r=e.props,i=r.alwaysRenderSuggestions,s=r.onSuggestionSelected,a=r.onSuggestionsFetchRequested;s&&s(t,n),i?a({value:n.suggestionValue,reason:"suggestion-selected"}):e.onSuggestionsClearRequested(),e.resetHighlightedSuggestion()},this.onSuggestionClick=function(t){var n=e.props,r=n.alwaysRenderSuggestions,i=n.focusInputOnSuggestionClick,s=e.getSuggestionIndices(e.findSuggestionElement(t.target)),a=s.sectionIndex,o=s.suggestionIndex,l=e.getSuggestion(a,o),c=e.props.getSuggestionValue(l);e.maybeCallOnChange(t,c,"click"),e.onSuggestionSelected(t,{suggestion:l,suggestionValue:c,suggestionIndex:o,sectionIndex:a,method:"click"}),r||e.closeSuggestions(),!0===i?e.input.focus():e.onBlur(),setTimeout(function(){e.justSelectedSuggestion=!1})},this.onBlur=function(){var t=e.props,n=t.inputProps,r=t.shouldRenderSuggestions,i=n.value,s=n.onBlur,a=e.getHighlightedSuggestion(),o=r(i);e.setState({isFocused:!1,highlightedSectionIndex:null,highlightedSuggestionIndex:null,highlightedSuggestion:null,valueBeforeUpDown:null,isCollapsed:!o}),s&&s(e.blurEvent,{highlightedSuggestion:a})},this.onSuggestionMouseLeave=function(t){e.resetHighlightedSuggestion(!1),e.justSelectedSuggestion&&t.target===e.pressedSuggestion&&(e.justSelectedSuggestion=!1)},this.onSuggestionTouchStart=function(){e.justSelectedSuggestion=!0},this.onSuggestionTouchMove=function(){e.justSelectedSuggestion=!1,e.pressedSuggestion=null,e.input.focus()},this.itemProps=function(t){return{"data-section-index":t.sectionIndex,"data-suggestion-index":t.itemIndex,onMouseEnter:e.onSuggestionMouseEnter,onMouseLeave:e.onSuggestionMouseLeave,onMouseDown:e.onSuggestionMouseDown,onTouchStart:e.onSuggestionTouchStart,onTouchMove:e.onSuggestionTouchMove,onClick:e.onSuggestionClick}},this.renderSuggestionsContainer=function(t){var n=t.containerProps,r=t.children;return(0,e.props.renderSuggestionsContainer)({containerProps:n,children:r,query:e.getQuery()})}};t.default=u});t(Qv);var Xv=Qv.default;function Jv(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}var eb="object"==typeof global&&global&&global.Object===Object&&global,tb="object"==typeof self&&self&&self.Object===Object&&self,nb=eb||tb||Function("return this")(),rb=function(){return nb.Date.now()},ib=nb.Symbol,sb=Object.prototype,ab=sb.hasOwnProperty,ob=sb.toString,lb=ib?ib.toStringTag:void 0;var cb=Object.prototype.toString;var ub="[object Null]",hb="[object Undefined]",pb=ib?ib.toStringTag:void 0;function db(e){return null==e?void 0===e?hb:ub:pb&&pb in Object(e)?function(e){var t=ab.call(e,lb),n=e[lb];try{e[lb]=void 0;var r=!0}catch(s){}var i=ob.call(e);return r&&(t?e[lb]=n:delete e[lb]),i}(e):function(e){return cb.call(e)}(e)}var fb="[object Symbol]";var mb=NaN,gb=/^\s+|\s+$/g,vb=/^[-+]0x[0-9a-f]+$/i,bb=/^0b[01]+$/i,yb=/^0o[0-7]+$/i,wb=parseInt;function xb(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return null!=e&&"object"==typeof e}(e)&&db(e)==fb}(e))return mb;if(Jv(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=Jv(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(gb,"");var n=bb.test(e);return n||yb.test(e)?wb(e.slice(2),n?2:8):vb.test(e)?mb:+e}var Eb="Expected a function",kb=Math.max,Cb=Math.min;function _b(e,t,n){var r,i,s,a,o,l,c=0,u=!1,h=!1,p=!0;if("function"!=typeof e)throw new TypeError(Eb);function d(t){var n=r,s=i;return r=i=void 0,c=t,a=e.apply(s,n)}function f(e){var n=e-l;return void 0===l||n>=t||n<0||h&&e-c>=s}function m(){var e=rb();if(f(e))return g(e);o=setTimeout(m,function(e){var n=t-(e-l);return h?Cb(n,s-(e-c)):n}(e))}function g(e){return o=void 0,p&&r?d(e):(r=i=void 0,a)}function v(){var e=rb(),n=f(e);if(r=arguments,i=this,l=e,n){if(void 0===o)return function(e){return c=e,o=setTimeout(m,t),u?d(e):a}(l);if(h)return o=setTimeout(m,t),d(l)}return void 0===o&&(o=setTimeout(m,t)),a}return t=xb(t)||0,Jv(n)&&(u=!!n.leading,s=(h="maxWait"in n)?kb(xb(n.maxWait)||0,t):s,p="trailing"in n?!!n.trailing:p),v.cancel=function(){void 0!==o&&clearTimeout(o),c=0,r=l=i=o=void 0},v.flush=function(){return void 0===o?a:g(rb())},v}function Sb({notebook:{owner:e,update_time:t}}){const n=new Date(t);return Y.createElement("div",{className:"inline-flex items-center"},Y.createElement("span",{className:"inline-flex items-center dark-gray"},Y.createElement(Wf,{user:e,s:16,className:"mr1 br-100"}),Y.createElement("span",null,Og(e))),Y.createElement("span",{title:Nm(n),className:"ml1 nowrap"},"on ",Sm(n)))}const Nb={},Tb=e=>{const{mobile:t}=e,n=wh(e,["mobile"]);return Y.createElement("div",{className:"flex relative items-center"},Y.createElement(rf,{className:"absolute pa2 moon-gray top pen"}),Y.createElement(Fg,Object.assign({},n,{className:`f6 ba b--light-gray input-reset bg-white outline-0 br2 fw6 ${t?"w-100 pa2 pl4":"search mr1 mr2-m mr3-l pl4 pr3 "}`,key:1})))},Ab=rh(class extends Y.PureComponent{constructor(e){if(super(e),bh(this,"controller",null),bh(this,"renderSuggestion",(e,{query:t,isHighlighted:n})=>{if(e===Nb)return Y.createElement(fh,{to:`/search?query=${encodeURIComponent(this.state.value)}`,className:`db pa2 f6 hover-bg-near-white pointer mid-gray fw4 hover-blue no-underline ${n?"bg-near-white blue":""}`},"Search for ‘",t,"’");const r=function(e){return ug(e)?"public":hg(e)?"shared":"private"}(e);return Y.createElement("div",null,Y.createElement("div",{className:"mh2 bb b--light-silver"}),Y.createElement(fh,{to:Cg(e),className:`db no-underline pv1 ph2 hover-bg-near-white pointer dark-gray hover-blue ${n?"bg-near-white blue":""}`},Y.createElement("div",{className:"flex items-center pv1 f6 fw5"},Y.createElement("div",{title:e.title,className:"mr1 truncate near-black"},iv(e.title||"Untitled",t)),("private"===r||"shared"===r)&&Y.createElement("div",{className:"dib ph1 f7 lh-f7 nowrap ttc mid-gray bg-near-white br2"},r),e.fork_of&&Y.createElement(Dd,{style:{marginBottom:"-0.05rem",width:".8rem",height:".8rem",strokeWidth:1},className:"ml1 black-30"})),Y.createElement("div",{className:"pb1 f7 fw5 mid-gray"},Y.createElement(Sb,{notebook:e}))))}),bh(this,"onSuggestionsClearRequested",()=>{this.abort(),this.setState({suggestions:[Nb]})}),bh(this,"onChange",(e,{newValue:t})=>{this.setState({value:t})}),bh(this,"getSuggestionValue",()=>this.state.value),bh(this,"onSuggestionSelected",(e,{suggestion:t,method:n})=>{"click"!==n&&(this.onSuggestionsClearRequested(),this.props.history.push(t===Nb?`/search?query=${encodeURIComponent(this.state.value)}`:Cg(t)))}),bh(this,"onSuggestionsFetchRequested",_b(({value:e})=>{const{api:t}=this.props;this.abort(),this.controller=new AbortController,t.init({signal:this.controller.signal}).documentSearch(e,0,10).then(e=>{this.controller=null,this.setState({suggestions:[Nb].concat(e)})},()=>{})},500)),this.state={suggestions:[Nb],value:""},"/search"===e.match.path){const{query:t}=Mh(e.location.search);this.state.value=t||""}}componentWillUnmount(){this.abort()}abort(){this.onSuggestionsFetchRequested.cancel(),this.controller&&(this.controller.abort(),this.controller=null)}render(){const{mobile:e}=this.props;let{suggestions:t,value:n}=this.state;const r={required:!0,"aria-label":"Search",placeholder:"Search",mobile:e,maxLength:256,autoFocus:e,value:n,onChange:this.onChange};return Y.createElement(Xv,{suggestions:t,onSuggestionsFetchRequested:this.onSuggestionsFetchRequested,onSuggestionsClearRequested:this.onSuggestionsClearRequested,onSuggestionSelected:this.onSuggestionSelected,getSuggestionValue:this.getSuggestionValue,renderSuggestion:this.renderSuggestion,renderSuggestionsContainer:({containerProps:t,children:n})=>Y.createElement("div",t,Y.createElement("div",{style:{marginTop:4,width:e?"calc(100vw - 2rem)":300},className:"db absolute left-0 bg-white ba b--silver br2 br1 shadow-4 overflow-hidden"},n)),renderInputComponent:Tb,inputProps:r,highlightFirstSuggestion:!0,theme:{container:e?"relative flex-auto":"dib relative",suggestionsContainer:"dn absolute z-max",suggestionsContainerOpen:"db",suggestionsList:"list ma0 pa0"}})}}),Lb=({user:e})=>Y.createElement(Y.Fragment,null,Y.createElement(Wf,{user:e,s:16,className:"mr1 br-100",style:{marginTop:-1,marginBottom:-1}}),Og(e));function Pb(e){return`${e?"ph2 hover-bg-light-silver":"pl3 pr4 hover-bg-near-white "} pv2 bg-transparent bn w-100 db flex items-center nowrap f6 no-underline dark-gray hover-near-black pointer fw6`}function Ib({highlight:e,inList:t}){return t?"flex w-100 items-center ph3 pv2 f6 lh-solid fw6 black-70 hover-black hover-bg-near-white pointer bg-transparent bn bg-animate":`no-underline pointer inline-flex fw6 mr2 ${e?"white bg-blue hover-bg-dark-blue":"dark-gray hover-near-black bg-silver hover-bg-light-silver"} br2 pa2 bn f6 bg-animate`}function Ob(e){const[t,n]=Z(e);return[t,n,e=>{e.stopPropagation(),n(e=>!e)},e=>{e.stopPropagation(),n(!1)}]}const Mb={extraStyle:{width:"auto",right:16,top:30}};function Rb(e){const[t,,n,r]=Ob(!1),i=ee(jf),{inList:s,notebook:a,fork:o}=e,l=Ib(e);if(pg(a)&&mg(a))return Y.createElement("button",{onClick:()=>o({team:a.owner.id}),className:l},Y.createElement(Dd,{className:`${s?"mr2":"mr1-ns"}`}),Y.createElement("span",{className:s?"db":"dn db-ns"},"Fork"));const c=i&&Y.createElement(Y.Fragment,null,Y.createElement("div",{className:"pl3 pr4 pt2 mt1 f7 mid-gray nowrap fw5"},"Fork notebook for"),Y.createElement("div",{className:"pv2"},Y.createElement("button",{onClick:o,className:Pb(s)},Y.createElement(Lb,{user:i})),Zm(i).map(function(e){return Y.createElement("button",{key:e.id,onClick:()=>o({team:e.id}),className:Pb(s)},Y.createElement(Lb,{user:e}))})));return Ym(i)?Y.createElement("div",{className:"relative"},s?Y.createElement("button",{onClick:n,className:l},Y.createElement("div",{className:"flex items-center mr2"},Y.createElement(Dd,{className:"mr2"}),"Fork"),t?Y.createElement(_d,{className:"dark-gray"}):Y.createElement(Cd,{className:"dark-gray"})):Y.createElement("div",{className:"inline-flex items-center"},Y.createElement("button",{className:`${l} mr2 br2 bn`,onClick:n},Y.createElement(Dd,{className:"w1 h1 mr1-ns"}),Y.createElement("span",{className:"dn db-ns"},"Fork"),Y.createElement(Ed,{className:"ml1"})),t&&!s&&Y.createElement(zg,Object.assign({onClickOutside:r},Mb),c)),t&&s&&Y.createElement("div",{className:"ph2 mv1 bg-near-white"},c)):Y.createElement("button",{onClick:o,className:l},Y.createElement(Dd,{className:`w1 h1 ${s?"mr2":"mr1-ns"}`}),Y.createElement("span",{className:s?"db":"dn db-ns"},"Fork"))}function Db(e){const t=ee(jf),[n,,r]=Ob(!1),i=Ib(e),{transfer:s,owner:a}=e;return Ym(t)?Y.createElement("div",{className:"relative"},Y.createElement("button",{onClick:r,className:i},Y.createElement("div",{className:"flex items-center mr2"}," ",Y.createElement(uf,{className:"mr2"}),"Transfer"),n?Y.createElement(_d,{className:"dark-gray"}):Y.createElement(Cd,{className:"dark-gray"})),n&&Y.createElement("div",{className:"ph2 mv1 bg-near-white"},Y.createElement("div",{className:"ph2 pt2 mt1 f7 fw5 mid-gray"},"Transfer notebook to"),Y.createElement("div",{className:"relative pv2"},t.id!==a.id&&Y.createElement("button",{onClick:()=>s(t.id),className:Pb(!0)},Y.createElement(Lb,{user:t})),Zm(t).filter(e=>e.id!==a.id).map(e=>Y.createElement("button",{key:e.id,title:`Transfer to ${Og(e)}`,onClick:()=>s(e.id),className:Pb(!0)},Y.createElement(Lb,{user:e})))))):null}function Fb(e){const[t,n,r,i]=Ob(!1),s=ee(jf),a=Ib(e),{notebook:o,inList:l,onClick:c}=e;const u=s&&Y.createElement(Y.Fragment,null,Y.createElement("div",{className:"ph2 pt2 mt1 f7 mid-gray fw5"},"Send suggestion from"),Y.createElement("div",{className:"pv2"},Y.createElement("button",{onClick:function(...e){n(!1),c(...e)},className:Pb(l)},Y.createElement(Lb,{user:s})),Zm(s).map(function(e){return Y.createElement("button",{key:e.id,onClick:()=>c({team:e.id}),className:Pb(l)},Y.createElement(Lb,{user:e}))})));return!rg(s,o)&&Ym(s)?Y.createElement("div",{className:"relative"},l?Y.createElement("button",{onClick:r,className:a},Y.createElement("div",{className:"flex items-center mr2"},Y.createElement(Kd,{className:"mr2"}),"Send suggestion"),t?Y.createElement(_d,{className:"dark-gray"}):Y.createElement(Cd,{className:"dark-gray"})):Y.createElement("div",{className:"inline-flex items-center"},Y.createElement("button",{className:`${a} mr2 br2 bn`,onClick:r},Y.createElement(Kd,{className:"w1 h1 mr1-ns"}),Y.createElement("span",{className:"dn db-ns"},"Suggest"),Y.createElement(Ed,{className:"ml1"})),t&&!l&&Y.createElement(zg,Object.assign({onClickOutside:i},Mb),u)),t&&l&&Y.createElement("div",{className:"ph2 mv1 bg-near-white"},u)):Y.createElement("button",{onClick:c,className:a},Y.createElement(Kd,{className:`w1 h1 ${l?"mr2":"mr1-ns"}`}),Y.createElement("span",{className:l?"db":"dn db-ns"},"Suggest"))}function Vb(e){const[t,,n,r]=Ob(!1),i=ee(jf);const s=Ib(e);return Ym(i)?Y.createElement("div",{className:"relative"},Y.createElement("div",{className:"inline-flex items-center mr2"},Y.createElement("button",{className:`${s} mr2 lh-f7 br2 bn`,onClick:n},Y.createElement(Xd,{className:"mr1-ns"}),Y.createElement("span",{className:"dn db-ns"},"New"),Y.createElement(Ed,{className:"ml1"})),t&&Y.createElement(zg,Object.assign({onClickOutside:r},Mb),i&&Y.createElement(Y.Fragment,null,Y.createElement("div",{className:"pv2"},Y.createElement("div",{className:"pl3 pr4 pv2 f7 mid-gray nowrap fw5"},"New notebook for"),Y.createElement(fh,{to:"/new",className:Pb(!1),onClick:r},Y.createElement(Lb,{user:i})),Zm(i).map(function(e){return Y.createElement(fh,{key:e.id,to:`/team/@${e.login}/new`,className:Pb(!1),onClick:r},Y.createElement(Lb,{user:e}))})))))):Y.createElement(fh,{to:"/new",className:s},Y.createElement(Xd,{className:"mr2-ns"}),Y.createElement("span",{className:"dn db-ns"},"New"))}const jb=rh(function(e){const{contextUI:t,gray:n,user:r,seamless:i,location:{path:s,pathname:a,state:o},history:l,forceMobile:c,showLogin:u,stickyHeader:h,hintVisible:p,headerMessage:d,onDismissHint:f}=e,[m,g]=Z(!1);Q(()=>{g(!1)},[a]);const v=Xf("(max-width: 640px)",!1),b=Xf("(max-width: 440px)",!1);function y(){g(e=>!e)}const w=wh(e,["contextUI","children","footerContent"]);if(m)return Y.createElement("div",{className:`z-3 bg-white bb ${i?"b--transparent":n?"b--silver":"b--light-silver"} ${h?"sticky":"relative"}`},Y.createElement("div",{className:`${zf} flex justify-between pv2 items-center`},Y.createElement(Ab,Object.assign({},w,{mobile:!0})),Y.createElement(Yg,{onClick:y,buttonType:"transparent",className:"ml2 moon-gray hover-dark-gray"},Y.createElement(ff,{className:""}))));const x=v||c;return Y.createElement("div",{className:`z-3 bg-white top-0 bb ${i?"b--transparent":n?"b--silver":"b--light-silver"} ${h?"sticky":"relative"}`},Y.createElement("nav",{style:{height:"3rem"},className:`${zf} flex justify-between pv2 items-center`},Y.createElement("div",{className:"inline-flex items-center"},Y.createElement(fh,{to:"/",style:{lineHeight:0},className:"flex items-center ph2-ns mr3 mr2-ns no-underline"},Y.createElement(If,{className:"near-black",style:{height:24,width:24}}),!b&&Y.createElement("span",{className:"ml2 f3-ns f4 fw7 near-black"},"Observable")),x?Y.createElement(Yg,{onClick:y,buttonType:"stroke",className:"flex w2 h2 justify-center moon-gray hover-dark-gray"},Y.createElement(rf,{style:{marginTop:1},className:""})):Y.createElement(Ab,w)),Y.createElement("div",{className:"flex items-center"},"/teams"!==a&&(!r||0===r.teams.length)&&Y.createElement(Av,{query:{maxWidth:720},defaultMatches:!1},e=>(!e||!t)&&Y.createElement(vh,{to:"/teams",activeClassName:"bg-white",activeStyle:{color:"near-black"},exact:!0,className:"pa2 mr2 f6 fw6 nowrap tc no-underline blue hover-light-blue"},Y.createElement(cf,{className:"dib w1 h1 v-top mr1-ns"}),Y.createElement("span",{className:"di"},"Teams"))),!r&&"/demo"!==a&&!x&&Y.createElement(vh,{to:"/demo",activeClassName:"bg-white",activeStyle:{color:"near-black"},exact:!0,className:"inline-flex items-center pa2 mr3 f6 fw6 tc no-underline blue hover-dark-blue"},Y.createElement(ef,{className:"w1 h1 mr1"}),Y.createElement("span",null,"Demo")),t&&Y.cloneElement(t,{showLogin:u}),r?Y.createElement(Y.Fragment,null,Y.createElement(Vb,null),Y.createElement(Lv,Object.assign({},w,{user:r}))):null===r?Y.createElement("button",{onClick:u,href:u?null:"/login",className:"ph3-ns ph2 pv2 f6 fw6 no-underline white bg-green hover-bg-dark-green br2 bn pointer"},"Sign in"):Y.createElement("div",{className:"w3"}))),(o&&o.signup||p&&!x)&&Y.createElement("div",{className:`mt2 ${n?"":"bt b--black-05"} ${i?"":"bg-washed-yellow"}`},Y.createElement("div",{className:`${zf} ${i?"bg-washed-yellow br2":""} pv2 items-center`},Y.createElement("div",{className:"flex justify-between ph2-ns pv1"},Y.createElement("span",null,p?Y.createElement(Y.Fragment,null,"👋 Welcome. This is"," ",Y.createElement(fh,{className:"no-underline blue hover-dark-blue",to:"/@observablehq/user-manual"},"live code"),"! Click the left margin to view or edit."):Y.createElement(Y.Fragment,null,"🙏 Thanks for signing up!"," ",Y.createElement(fh,{className:"no-underline blue hover-dark-blue",to:"/@observablehq/tutorial-1-lunch-calculator"},"Start writing with our tutorials."))),Y.createElement("button",{onClick:function(){f?f():l.replace(s,{})},className:"inline-flex pa0 black-50 hover-black bg-transparent bn pointer"},Y.createElement(ff,{className:"w1 h1"}))))),d&&Y.createElement("div",{className:"absolute w-100 tc pen",style:{marginTop:1}},d))});function Bb({keyboardShortcuts:e,showKeyboardShortcuts:t}){const[n,r]=Z(!1),i=e=>{e&&e.stopPropagation(),r(!1)};return Y.createElement("div",{className:"fixed right-1 mr1 z-2",style:{bottom:"1rem"}},Y.createElement("div",{title:"Help…",onClick:e=>{e.stopPropagation(),r(!n)},className:`inline-flex fw6 bw1 mid-gray hover-dark-gray items-center justify-center bg-white ba b--silver ${n?"":"pointer hover-b--light-silver"}`,style:{width:36,height:36,borderRadius:18}},Y.createElement(Ud,null)),n&&Y.createElement(zg,{extraStyle:{bottom:"3rem",width:"auto",right:5},top:!0,onClickOutside:i},Y.createElement(Ub,{mobile:!0,onClose:i,keyboardShortcuts:e,showKeyboardShortcuts:t})))}function Ub({onClose:e,mobile:t,showKeyboardShortcuts:n,keyboardShortcuts:r}){const i=t?"flex items-center pa2 no-underline black-70 hover-black hover-bg-near-white pointer":"mh2-ns mr1 blue hover-dark-blue link",s=ee(jf);return Y.createElement("div",{className:t?"pv2 f6 nowrap":""},Y.createElement(fh,{to:"/@observablehq/user-manual",className:i},"User manual"),r&&Y.createElement("div",{onClick:()=>{e(),n()},className:"db-ns dn items-center pa2 no-underline black-70 hover-black hover-bg-near-white pointer"},"Keyboard shortcuts"),Y.createElement("a",{href:"https://talk.observablehq.com/",className:i},"Forum"),s&&Y.createElement("a",{href:`mailto:support@observablehq.com?${Rh({subject:`Support request from ${s.name} (${s.login})`,body:`Browser info: ${navigator.userAgent}\n👆 Please keep this information in your email, so that we can quickly debug anything related to your browser configuration!\n\nWrite your message under this line\n\n---`})}`,rel:"noopener noreferrer",target:"_blank",className:i},"Contact support"))}function Hb({grayFooter:e,footerContent:t,isNotebook:n}){const[r,i]=Z(!1),s=Xf("(max-width: 600px)",!1);return Y.createElement("footer",{className:e?"bg-near-white bt b--black-10":""},Y.createElement("div",{className:`${zf} pt4 pb4`},t,Y.createElement("div",{className:"flex flex-row flex-wrap justify-between pt4 f6 fw4 lh-copy black-70"},Y.createElement("div",null,"© 2019"," ",Y.createElement("span",{className:"mr2-ns nowrap"},"Observable, Inc.")," ",Y.createElement("div",{className:"dib-ns nowrap"},Y.createElement("a",{href:"/terms-of-service",className:"mh2-ns mr1 blue hover-dark-blue link"},"Terms")," ",Y.createElement(fh,{to:"/open-source",className:"mh2-ns mr1 blue hover-dark-blue link"},"Open Source"))),!n&&Y.createElement("div",{className:"flex items-center pt3 pt0-ns"},Y.createElement("a",{href:"https://twitter.com/observablehq",className:"inline-flex pr2 mr2 black-50 hover-blue",title:"Follow us on Twitter"},Y.createElement(hf,null)),s?Y.createElement("div",{onClick:e=>{e.stopPropagation(),i(e=>!e)},className:"relative mh2-ns mr1 fw5 blue hover-dark-blue pointer"},"Help",r&&Y.createElement(zg,{top:!0,onClickOutside:e=>{e.stopPropagation(),i(!1)}},Y.createElement(Ub,{mobile:!0}))):Y.createElement(Ub,null)))))}function $b(e){const{children:t,gray:n,user:r,nofooter:i,footerContent:s,grayFooter:a,isNotebook:o}=e;return Y.createElement("div",{className:"flex flex-column min-vh-100"},Y.createElement(jb,e),Y.createElement(wc,null,Y.createElement("body",{className:`relative sans-serif ${n?"bg-near-white":""}`})),Y.createElement("main",{style:{flex:1,zIndex:0}},t),i||Y.createElement(Hb,{user:r,grayFooter:a,footerContent:s,isNotebook:o}))}let zb=({title:e,to:t,user:n,showMore:r,wrapperClass:i="mt5"})=>Y.createElement("div",{className:`flex justify-between mb3 ${i}`},Y.createElement(fh,{to:t,className:"inline-flex items-center f5 fw4 no-underline black-70 hover-blue hide-child"},n&&Y.createElement(Wf,{user:n,s:28,className:"mr2 br-100"}),e,Y.createElement(yf,{className:"w1 h1 ml1 child",style:{strokeWidth:1}})),r&&Y.createElement(fh,{to:t,className:"db ph2 pv1 no-underline blue hover-dark-blue hover-bg-white br2"},"Show more…"));class Wb extends Y.Component{constructor(e){super(e),bh(this,"state",{publishes:new Array(3).fill(void 0),notebooks:new Array(9).fill(void 0),collections:new Array(6).fill(void 0),teamNotebookGroups:[]}),bh(this,"reload",()=>{const{api:e}=this.props;this.load(yh({},this.props,{api:e.init({cache:"no-cache"})}))}),bh(this,"showSignUp",e=>{this.props.showLogin({loginReason:"signup"}),ga("send",{hitType:"event",eventCategory:"Conversions",eventAction:"Open signup modal",eventLabel:e})}),e.preloadData&&(this.state=yh({preloaded:!0},e.preloadData))}componentDidMount(){this.state.preloaded||this.load(this.props)}load({api:e,user:t}){t&&(e.documentsLoadUser().then(e=>this.setState({notebooks:e.map(e=>yh({owner:t},e))})),t.teams&&t.teams.forEach(t=>{e.documentsLoadTeam(t.id).then(e=>{e.length&&this.setState({teamNotebookGroups:this.state.teamNotebookGroups.concat({team:t,notebooks:e.map(e=>yh({owner:t},e))})})})})),e.documentsLoadPopular().then(e=>this.setState({publishes:e})),Promise.all([e.userLoad("observablehq"),e.collectionsLoadUserPinnedPublic("observablehq")]).then(([e,t])=>this.setState({collections:t.map(t=>yh({},t,{owner:e}))}))}render(){const{publishes:e,notebooks:t,collections:n,teamNotebookGroups:r}=this.state,{api:i,user:s}=this.props;return Y.createElement($b,Object.assign({},this.props,{gray:!0,seamless:!s}),Y.createElement(wc,null,Y.createElement("meta",{name:"description",content:"Discover insights faster and communicate more effectively with interactive notebooks for data analysis, visualization, and exploration."})),!s&&Y.createElement(um,{showSignUp:this.showSignUp}),Y.createElement("div",{className:`${zf} mt4`},Y.createElement(zb,{title:"Featured collections",to:"/@observablehq?tab=collections",wrapperClass:s?"mt4":"mt5"}),Y.createElement("div",{className:"dg grid-gap1 grid-template-columns-1 grid-template-columns-3-ns"},n.slice(0,6).map((e,t)=>Y.createElement(Gf,{key:e?e.id:t,api:i,collection:e}))),n.length>6&&Y.createElement("div",{className:"mt4 tc"},Y.createElement(fh,{to:"/collections/featured",className:"ph3 pv2 blue hover-dark-blue bg-white br2 link"},"Show more…")),Y.createElement(zb,{title:"Popular this week",to:"/recent",showMore:!0}),Y.createElement("div",{className:"listing-grid"},e.slice(0,9).map((e,t)=>Y.createElement(uv,{key:e?e.id:t,api:i,reload:this.reload,notebook:e}))),s&&Y.createElement(zb,{title:"Your notebooks",to:`/@${s.login}`,user:s,showMore:t.length>6}),s&&0===t.length&&Y.createElement("div",{className:"flex justify-center pv4"},Y.createElement("div",null,Y.createElement("div",{className:"mb2 f4 lh-copy tc black-50"},"You don’t have any notebooks."),Y.createElement(fh,{to:"/new",className:"flex dib items-center justify-center ph3 pa2 blue hover-dark-blue bg-white br2 link shadow-hover"},Y.createElement(Jd,{className:"dib w1 h1 mr2 v-bottom",style:{strokeWidth:1}}),Y.createElement("div",null,"Create your first notebook")))),s&&t.length>0&&Y.createElement("div",null,Y.createElement("div",{className:"listing-grid"},t.slice(0,6).map((e,t)=>Y.createElement(uv,{key:e?e.id:t,reload:this.reload,api:i,notebook:e})))),r.length>0&&r.map(({team:e,notebooks:t})=>Y.createElement("div",{key:e.id},Y.createElement(zb,{to:`/@${e.login}`,user:e,title:`${Og(e)} notebooks`,showMore:t.length>6}),Y.createElement("div",{className:"listing-grid"},t.slice(0,6).map((e,t)=>Y.createElement(uv,{key:e?e.id:t,reload:this.reload,notebook:e}))))),!s&&Y.createElement(hv,{showSignUp:this.showSignUp})))}}bh(Wb,"preload",({api:e})=>Promise.all([e.documentsLoadPopular(),e.userLoad("observablehq"),e.collectionsLoadUserPinnedPublic("observablehq")]).then(([e,t,n])=>({publishes:e,notebooks:[],collections:n.map(e=>yh({},e,{owner:t})),teamNotebookGroups:[]})));const qb={monthly:12,yearly:9};function Gb(){const e={className:"f4 fw6 lh-copy"},t={className:"lh-copy mt1 f5 black-70 fw4"},n=Xf("(max-width: 480px)",!1);return Y.createElement("div",{className:"pv5-ns pt4 pb5 nt4 black bg-white"},Y.createElement("div",{className:zf},Y.createElement("div",{className:"flex-ns mw7 center items-center pt4-ns pb5-ns pb2"},Y.createElement("div",{className:"flex-auto mh3 mr4-ns"},Y.createElement("h1",{className:"ma0 f2 fw7 lh-title black",style:{maxWidth:400}},"The magic notebook for teams to think, together"),Y.createElement("div",{className:"mt2 fw4 lh-copy black-70",style:{fontSize:18}},"Write team notebooks to analyze and visualize private data, to prototype interactive designs, and to brainstorm with live data and real numbers, all while building a toolkit of reusable techniques.")),Y.createElement("div",{className:"mt3 mt0-ns"},Y.createElement("div",{style:{width:"240px"},className:"pa2 fw4 bg-white"},Y.createElement("div",{className:"pb3 f6 fw5 lh-copy black-70 dg",style:{gridTemplateColumns:"10px 1fr",gridGap:"8px 12px"}},Y.createElement("div",null,Rf),Y.createElement("div",null,"Unlimited private notebooks"),Y.createElement("div",null,Rf),Y.createElement("div",null,"Unlimited free viewers"),Y.createElement("div",null,Rf),Y.createElement("div",null,"Multiplayer editing"),Y.createElement("div",null,Rf),Y.createElement("div",null,"Shared secrets")),Y.createElement(fh,{to:"/team/new",className:"flex w-100 items-center ph3 pv2 mt2 fw6 tl no-underline white bg-blue hover-bg-dark-blue br2 bn hover-rise"},Mf,Y.createElement("div",{className:"flex-auto ml3 lh-copy"},Y.createElement("div",{className:"fw6"},"Create your team"),Y.createElement("div",{className:"f6 fw5 o-70"},"$",qb.yearly," / editor / month")))))),Y.createElement("div",tm,Y.createElement("div",nm,Y.createElement(lm,{src:"https://static.observablehq.com/assets/private-notebooks-4.jpg"})),Y.createElement("div",im,Y.createElement("div",{style:{maxWidth:320}},Y.createElement("div",em,"Private notebooks"),Y.createElement("div",{className:Jf},"Safely create, discuss and improve internal reports and visualizations. Access your internal APIs and data securely using team secrets.")))),Y.createElement("div",tm,Y.createElement("div",sm,Y.createElement("div",{style:{maxWidth:360}},Y.createElement("div",em,"Thoughtful collaboration"),Y.createElement("div",{className:Jf},"In a rush? Chat about changes with live comment threads directly on your team notebooks — or use multiplayer editing. Taking it slow? Make a private fork, and send your proposed changes as a mergeable suggestion."))),Y.createElement("div",rm,Y.createElement(lm,{src:"https://static.observablehq.com/assets/collaborate-4.jpg"}))),Y.createElement("div",{className:"mw7 center pa2 mt5-ns mt4 f6 lh-copy dg",style:{gridTemplateColumns:`repeat(${n?"2":"3"}, 1fr)`,gridGap:n?20:30}},Y.createElement("div",{className:"dn db-ns"},Y.createElement("div",{className:"ph2"},Y.createElement("img",{src:"https://static.observablehq.com/assets/mug-5.jpg",alt:""})),Y.createElement("div",{className:"mh1 mh3-ns"},Y.createElement("div",e,"Easy management"),Y.createElement("div",t,"Centralized billing, email invitations, and multiple team owners make it simple to set up and maintain a team."))),Y.createElement("div",null,Y.createElement("div",{className:"ph2"},Y.createElement("img",{src:"https://static.observablehq.com/assets/paper-airplane-3.jpg",alt:""})),Y.createElement("div",{className:"mh1 mh3-ns"},Y.createElement("div",e,"Priority support"),Y.createElement("div",t,"We’re here for you, with email support, community forums, and tons of helpful examples."))),Y.createElement("div",null,Y.createElement("div",{className:"ph2"},Y.createElement("img",{src:"https://static.observablehq.com/assets/briefcase-2.jpg",alt:""})),Y.createElement("div",{className:"mh1 mh3-ns"},Y.createElement("div",e,"Simple pricing"),Y.createElement("div",t,"Just $",qb.yearly," per editor per month, when billed yearly. Create unlimited team notebooks and add unlimited viewers, with no limits or extra fees.")))),Y.createElement("div",{className:"flex justify-center ph4-ns"},Y.createElement("div",{className:"mw7 pt5 pb5 mh4 mt5 bt b--black-10"},Y.createElement("div",{className:"flex flex-column dg-ns",style:{gridGap:30,gridTemplateColumns:"repeat(2, 1fr)"}},Y.createElement("div",{className:"ml3-ns ml0"},Y.createElement("div",em,"Ready to go?"),Y.createElement("div",{className:Jf},"Teams are only $",qb.yearly," / editor / month")),Y.createElement("div",{className:"flex justify-start items-center content-stretch"},Y.createElement(fh,{className:"flex db items-center ph3 pv2 mt3 ml3 tl no-underline white bg-blue hover-bg-dark-blue br2 pointer bn hover-rise",to:"/team/new"},Mf,Y.createElement("div",{className:"flex-auto ml3"},Y.createElement("div",{className:"fw6"},"Create your team")))))))))}function Kb(e){return Y.createElement($b,Object.assign({},e,{seamless:!0}),Y.createElement(wc,null,Y.createElement("meta",{name:"description",content:"Discover insights faster and communicate more effectively with interactive notebooks for data analysis, visualization, and exploration."})),Y.createElement(Gb,null))}function Yb(e){return Y.createElement($b,Object.assign({},e,{gray:!0}),Y.createElement("div",{className:"mw6 center ph3 mt5"},Y.createElement(wc,null,Y.createElement("title",null,"Not found")),Y.createElement("a",{href:"/",className:"dib pa2 black-50 hover-blue hover-bg-white br4 link"},Y.createElement(bf,{className:"w1 h1 v-top mr1"}),"Home"),Y.createElement("p",{className:"f4 fw7 black-70"},"Sorry, we couldn’t find that page.")))}function Zb(e){const[t,n]=Z(!0);return Q(()=>{n(void 0===navigator.onLine||navigator.onLine)},[n]),Y.createElement($b,Object.assign({},e,{gray:!0}),Y.createElement(wc,null,Y.createElement("title",null,"Error")),Y.createElement("div",{className:"mw6 center mt5"},Y.createElement("a",{href:"/",className:"dib pa2 black-50 hover-blue hover-bg-white br4 link"},Y.createElement(bf,{className:"w1 h1 v-top mr1"}),"Home"),Y.createElement("p",{className:"f4 fw7 lh-copy black-70"},t?"Oops, an unexpected error occurred.":"It looks like you’re currently offline. Please connect to the internet to continue using Observable.")))}const Qb=rh(function({location:{pathname:e}}){return/^\/error(\?|$)/.test(e)&&(e="/"),Y.createElement("div",{className:"mt6 sans-serif tc"},Y.createElement(wc,null,Y.createElement("title",null,"Login"),Y.createElement("body",{className:"bg-light-silver"})),Y.createElement("div",{className:"flex fixed top-0 right-0 bottom-0 left-0 items-center justify-center"},Y.createElement("div",{className:"pa3 bg-white ba b--black-10 br2 z-1"},Y.createElement(Vf,{location:location}))))}),Xb=/^[a-z\d](?:[a-z\d]|-(?=[a-z\d])){0,38}$/,Jb={EMPTY:0,CONFLICT:1,INVALID:2,VALID:3};class ey extends Y.Component{constructor(...e){super(...e),bh(this,"state",{typedLogin:"",login:"",loginAvailable:Jb.EMPTY}),bh(this,"onLoginChange",e=>{const{target:{value:t}}=e,n=t.toLowerCase();this.setState({login:n,typedLogin:t}),this.props.onLoginChange(n),this.checkLoginAvailability()}),bh(this,"checkLoginAvailability",()=>{clearTimeout(this.loginRequestDebounce),this.loginRequestDebounce=setTimeout(this.fetchLoginAvailability,200)}),bh(this,"fetchLoginAvailability",()=>{const{login:e}=this.state,{api:t}=this.props;e?e.match(Xb)?t.usersExist([e]).then(t=>{const n=new Map(t);this.loginAvailability(e,n.get(e)?Jb.CONFLICT:Jb.VALID)}):this.setState({loginAvailable:Jb.INVALID}):this.setState({loginAvailable:Jb.EMPTY})}),bh(this,"loginAvailability",(e,t)=>{const{login:n}=this.state;n===e&&(this.setState({loginAvailable:t}),this.props.onLoginValid(t===Jb.VALID))})}componentWillUnmount(){clearTimeout(this.loginRequestDebounce)}render(){const{typedLogin:e,loginAvailable:t}=this.state,{title:n,name:r,serverError:i}=this.props;return Y.createElement("div",null,Y.createElement("div",{className:"flex flex-column items-stretch mt4"},Y.createElement("label",{className:"pb1 f5 fw5 black-70",htmlFor:"login"},n),Y.createElement("div",{className:`flex items-stretch br2 ba ${i||t===Jb.INVALID||t===Jb.CONFLICT?"b--dark-pink":"b--black-10 hover-b--black-30"}`},Y.createElement("div",{className:"pa2 pr0 pr1 black-70 bg-near-white br b--black-10 br--left br2",onClick:()=>{document.querySelector("#login").focus()}},"observablehq.com/@"),Y.createElement("input",{id:"login",name:"login",autoComplete:"off",maxLength:"255",autoFocus:!0,className:"flex-auto pa2 black br2 br--right bn",onChange:this.onLoginChange,value:e})),Y.createElement("div",{className:"h2"},"LOGIN_CONFLICT"===i||t===Jb.CONFLICT?Y.createElement("div",{className:"mt1 f7 fw5 dark-pink"},"That ",r," is already taken."):"LOGIN_INVALID"===i||t===Jb.INVALID?Y.createElement("div",{className:"mt1 f7 fw5 dark-pink"},"A ",r," can only include alphanumberic characters or single hyphens, can’t start or end with a hyphen, and should be less than 40 characters long."):null)))}}class ty extends Y.Component{constructor(...e){super(...e),bh(this,"state",{loginValid:!1}),bh(this,"onLoginValid",e=>{this.setState({loginValid:e})}),bh(this,"onLoginChange",e=>{this.setState({serverError:void 0,login:e})}),bh(this,"setLogin",async e=>{e.preventDefault();const{loginValid:t,login:n}=this.state,{api:r}=this.props;if(t)try{await r.userSetLogin(n),location.reload(!0)}catch(i){if(!i.errors)throw i;const e=i.errors[0].code;switch(e){case"LOGIN_CONFLICT":case"LOGIN_INVALID":this.setState({loginValid:!1,serverError:e})}}})}render(){let{loginValid:e,serverError:t}=this.state;return Y.createElement(Av,{query:{maxWidth:640}},n=>Y.createElement($b,Object.assign({},this.props,{gray:!n}),Y.createElement(wc,null,Y.createElement("title",null,"Choose your login")),Y.createElement("div",{className:"mw6-ns center-ns ph0-ns ph2 pt4 pb5 mt5-ns bg-white b--black-10 br2 ba-ns"},Y.createElement("form",{className:"ph4-ns",onSubmit:this.setLogin},Y.createElement("div",{className:"flex-ns justify-between items-center mt0 mb2"},Y.createElement("h3",{className:"ma0 f4 fw7 black"},"Choose a login")),Y.createElement(ey,Object.assign({},this.props,{title:"Your Observable URL",name:"login",serverError:t,onLoginValid:this.onLoginValid,onLoginChange:this.onLoginChange})),Y.createElement("button",{className:`ph3 pv2 mt3 mw4 f6 fw6 white bg-blue hover-bg-dark-blue br2 pointer bn ${e?"":"o-50 pen"}`,onClick:this.setLogin},"Set login")))))}}const ny=rh(class extends Y.Component{constructor(...e){super(...e),bh(this,"state",{error:this.props.error}),bh(this,"onUnhandledRejection",e=>{this.setState({error:e.reason||e.detail})})}componentDidMount(){addEventListener("unhandledrejection",this.onUnhandledRejection)}componentWillReceiveProps({location:{pathname:e}}){!document.activeElement||this.props.location.pathname.endsWith("/new")&&e.startsWith("/d/")||document.activeElement.blur(),this.setState({error:null})}componentDidUpdate(e){this.props.location.pathname===e.location.pathname&&this.props.location.search===e.location.search||/@\d+\/history$/.test(this.props.location.pathname)||(scrollTo(0,0),ga("set","page",this.props.location.pathname),ga("send","pageview"))}componentDidCatch(e){this.setState({error:e}),ga("send","exception",{exDescription:e.message,exFatal:!0,stack:e.stack})}componentWillUnmount(){removeEventListener("unhandledrejection",this.onUnhandledRejection)}render(){const{error:e}=this.state;if(e instanceof _h){const e=wh(this.props,["children"]);return Y.createElement($f,Object.assign({},e,{component:Yb}))}if(e instanceof kh)return Y.createElement(Qb,null);if(e instanceof Eh)return Y.createElement(ty,Hf);if(e){const e=wh(this.props,["children"]);return Y.createElement($f,Object.assign({},e,{component:Zb}))}return Y.Children.map(this.props.children,e=>Y.cloneElement(e,this.props))}});function ry(e){return e.update_time=new Date(e.update_time),e.publish_time=new Date(e.update_time),e.publish_version=e.version,e}class iy extends Y.Component{constructor(e){super(e),bh(this,"state",{notebooks:new Array(27).fill(void 0)}),bh(this,"load",({api:e,location:{search:t}}=this.props)=>{this.setState({notebooks:new Array(27).fill(void 0)});const{before:n}=Mh(t);e.documentsLoadPublic(n).then(e=>this.setState({notebooks:e.map(ry)}))}),e.preloadData&&(this.state=yh({preloaded:!0},e.preloadData))}componentDidMount(){this.state.preloaded||this.load(this.props)}componentWillReceiveProps(e){this.load(e)}render(){const{notebooks:e}=this.state;return Y.createElement($b,Object.assign({},this.props,{gray:!0}),Y.createElement(wc,null,Y.createElement("title",null,"Recently published"),Y.createElement("meta",{name:"description",content:"Recently published notebooks on Observable"})),Y.createElement("div",{className:zf},Y.createElement("div",{className:"mv4 f4 fw4 lh-copy black-70"},"Recently published"),Y.createElement("div",{className:"listing-grid"},e.slice(0,27).map((e,t)=>Y.createElement(uv,Object.assign({},this.props,{key:e?e.id:t,reload:this.load,notebook:e})))),e.length>27&&Y.createElement("div",{className:"mt4 tc"},Y.createElement(fh,{to:`?${Dh({before:e[26].update_time},{encode:!1})}`,className:"pv2 ph3 dib br2 link blue bg-white hover-dark-blue"},"Show more…"))))}}bh(iy,"preload",({api:e,location:{search:t}})=>{const{before:n}=Mh(t);return e.documentsLoadPublic(n).then(e=>({notebooks:e.map(ry)}))});class sy extends Y.Component{constructor(...e){super(...e),bh(this,"state",{error:null})}async componentWillMount(){const{match:{params:{teamId:e,id:t}},api:n,history:r}=this.props;try{const{team:s}=await n.teamAcceptInvitation(e,t);r.replace(`/@${s}`)}catch(i){this.setState({error:"Sorry, this invitation could not be accepted."})}}render(){const{error:e}=this.state;return Y.createElement(Av,{query:{maxWidth:640}},t=>Y.createElement($b,Object.assign({},this.props,{gray:!t}),Y.createElement(wc,null,"Accept Team Invitation"),Y.createElement("div",{className:"mw6 center mt5"},e&&Y.createElement("a",{href:"/",className:"dib pa2 black-50 hover-blue hover-bg-white br4 link"},Y.createElement(bf,{className:"w1 h1 v-top mr1"}),"Home"),Y.createElement("p",{className:"f4 fw7 lh-copy black-70"},e||"Accepting team invitation…"))))}}function ay({children:e}){return Y.createElement("div",{className:"flex justify-center pv5"},Y.createElement("div",{className:"mb2 f4 lh-copy black-50"},e))}const oy=/\B@([\w-]{1,39})/g;function ly({text:e}){const[t,n]=Z(null),r=ee(Bf);if(Q(()=>{const t=e.match(oy);if(t){const e=new AbortController;return r.init({signal:e.signal}).usersExist(t.map(e=>e.substr(1).toLowerCase())).then(e=>n(new Map(e)),()=>{}),()=>e.abort()}},[r,e]),!t)return e;const i=[];let s,a=0;for(;null!==(s=oy.exec(e));){const n=s[1],r=t.get(n.toLowerCase()),o=e.substring(a,s.index);o&&i.push(o),r&&"unavailable"!==r?i.push(Y.createElement("a",{className:"no-underline black-70 hover-blue",href:`/@${n.toLowerCase()}`,key:a},"@",n)):i.push(`@${n}`),a=s.index+s[0].length}return a!==e.length&&i.push(e.substring(a,e.length)),i}let cy=({user:e,size:t=60})=>Y.createElement(fh,{to:e?`/@${e.login}`:"#",className:"inline-flex"},Y.createElement(Wf,{user:e,className:"br-100 mw-none",s:t}));function uy({user:e}){return Y.createElement(fh,{className:"inline-flex items-center fw5 no-underline near-black hover-blue",to:e?`/@${e.login}`:"#"},e?Og(e):Y.createElement("span",{className:"light-gray bg-light-gray"},"~~~~ ~~~~~~"),e&&"team"===e.type&&Y.createElement(cf,{className:"w1 h1 ml1 moon-gray",alt:"Team"}))}function hy({socialLinks:e,user:t}){if(!t||!t.home_url||!e)return null;const{home_url:n}=t;return Y.createElement("a",{title:n,href:n,rel:"noopener noreferrer",target:"_blank",className:"inline-flex items-center ml1 no-underline mid-gray hover-blue"},Y.createElement(Bd,{className:"mr1 moon-gray"}),Y.createElement("span",{className:"mw4 truncate"},n.replace(/https?:\/\//,"").replace(/\/$/,"")))}let py=({user:e})=>e?e.bio?Y.createElement(ly,{text:e.bio}):null:Y.createElement("span",{className:"light-gray bg-light-gray"},"~~~~~~~~ ~~~~~~~~~~~ ~~~~~~~~ ~~~~~~~~ ~~~~~~~~~~~"),dy=({currentUser:e,team:t})=>{if(!t||!e||!e.teams.length)return null;if(!(t=e.teams.find(e=>e.id===t.id))||!t.delinquent)return null;const n="owner"===t.role,r=Y.createElement("div",{className:"dib ph2 pv1 mt1 lh-copy bg-washed-yellow br2"},Y.createElement(xf,{className:`w1 h1 v-mid mr1 dark-red ${n?"hover-blue":""}`,alt:"Warning"}),"Update billing information to avoid deactivation.");return n?Y.createElement(fh,{className:"no-underline near-black hover-blue",to:`/team/@${t.login}/settings/billing`},r):r};const fy=Y.memo(function({user:e,creator:t,socialLinks:n,status:r,time:i,updateTime:s}){const a=ee(jf);return Y.createElement("div",{className:"flex measure-wide-ns items-center-ns items-top pl2-ns mw-100"},Y.createElement(cy,{user:e}),Y.createElement("div",{className:"w-100 pl2 pl3-ns f6 lh-f6"},Y.createElement("div",{className:"flex items-center"},Y.createElement(uy,{user:e}),!!(n&&e&&e.github_login)&&Y.createElement("a",{href:`https://github.com/${e.github_login}`,title:"GitHub",className:"inline-flex items-center ml1 moon-gray hover-blue"},Y.createElement(Pf,{style:{width:16,height:16}})),Y.createElement(hy,{user:e,socialLinks:n}),i&&Y.createElement("span",{className:"mid-gray"},Y.createElement("span",{className:"ml1 nowrap",title:`${Nm(i)}${s?`\n${Nm(s)} (updated)`:""}`},Y.createElement("span",{className:"light-gray"},"•")," ",(e=>Em===e.getFullYear()?Sm(e):`${Sm(e)}, ${e.getFullYear()}`)(i)),"published"!==r?Y.createElement("span",{className:"dib ph1 ml2 f7 fw6 lh-f7 nowrap ttc mid-gray bg-near-white br2"},r):null)),"team"===e.type&&Y.createElement(dy,{currentUser:a,team:e}),Y.createElement("div",{className:"lh-f6 mid-gray"},Y.createElement(py,{user:e})),"team"===e.type&&t&&Y.createElement("div",{className:"flex items-center f6 lh-f6 mid-gray"},"By"," ",Y.createElement("div",{className:"inline-flex items-center mh1"},Y.createElement(cy,{user:t,size:14})," "),Y.createElement(uy,{user:t}))))});function my(e){let{hasError:t=!1,className:n=""}=e,r=wh(e,["hasError","className"]);return Y.createElement("textarea",Object.assign({},r,{className:`form-default-clear form-custom-input pa2 f6 fw5 br2 ${r.disabled?" mid-gray bg-near-white disabled":" dark-gray bg-white blue-ring-focus"} ${n}\n             ${t?" has-error":""}`}))}class gy extends Y.Component{constructor(...e){super(...e),bh(this,"state",{collection:{}}),bh(this,"create",async e=>{e.preventDefault();const{api:t,history:n,owner:{login:r,id:i}}=this.props,{collection:{title:s,description:a,pinned:o,type:l}}=this.state,{slug:c}=await t.collectionNew({title:s,description:a,pinned:o,type:l,owner:i});n.push(`/collection/@${r}/${c}`)}),bh(this,"edit",async e=>{e.preventDefault();const{api:t,onDismiss:n,collection:{id:r}}=this.props,{collection:{title:i,description:s,pinned:a,type:o}}=this.state;await t.collectionEdit({id:r,title:i,description:s,pinned:a,type:o}),n()}),bh(this,"discardChanges",()=>{const{onDismiss:e}=this.props;e()}),bh(this,"deleteCollection",async()=>{const{api:e,history:t,collection:{id:n},owner:{login:r}}=this.props;confirm("Are you sure you want to delete this collection?\nThis operation cannot be undone.")?(await e.collectionDelete(n),t.push(`/@${r}?tab=collections`)):document.activeElement.blur()}),bh(this,"onChange",e=>{const{target:{name:t,value:n,type:r,checked:i}}=e;this.setState(({collection:e})=>({collection:yh({},e,{[t]:"checkbox"===r?i:n})}))})}componentWillMount(){this.reload()}componentWillReceiveProps(e){this.reload(e)}reload(e=this.props){if(e.collection){const{collection:{title:t,description:n,pinned:r,type:i}}=e;this.setState({collection:{title:t,description:n,pinned:r,type:i},isNew:!1})}else this.setState({collection:{title:"",description:"",pinned:!1,type:"private"},isNew:!0})}render(){const{onDismiss:e}=this.props,{collection:t,isNew:n}=this.state;return Y.createElement(wd,{onDismiss:e},Y.createElement("div",{className:"relative"},Y.createElement(Rg,{onDismiss:e}),Y.createElement("div",{className:Mg},n?"Create collection":"Edit collection")),Y.createElement("form",{onSubmit:n?this.create:this.edit,className:"flex flex-column flex-auto items-stretch"},Y.createElement("label",{className:"pt3 pb2 f6 fw5 mid-gray",htmlFor:"name"},"Title"),Y.createElement(Fg,{type:"text",name:"title",value:t.title,placeHolder:"Collection Title",onChange:this.onChange,autoFocus:!0}),Y.createElement("label",{className:"pt3 pb2 f6 fw5 mid-gray",htmlFor:"name"},"Description"),Y.createElement(my,{className:"h3",name:"description",maxLength:"255",value:t.description,onChange:this.onChange}),Y.createElement("label",{className:"pt3 pb2 f6 fw5 mid-gray",htmlFor:"type"},"Visibility"),Y.createElement(Vg,{name:"type",className:"w-100",onChange:this.onChange,style:{maxWidth:120},value:t.type},Y.createElement("option",{value:"private"},"Private"),Y.createElement("option",{value:"public"},"Public")),Y.createElement("div",{className:"flex justify-end pt3"},n?null:Y.createElement("button",{type:"button",className:"flex items-center ph3 pa2 mr2 f6 fw6 no-underline dark-red hover-dark-red bg-transparent hover-bg-washed-red br2 pointer bn",onClick:this.deleteCollection},"Delete collection"),Y.createElement(Dg,{highlight:!0},n?"Create collection":"Save changes"))))}}class vy extends Y.Component{constructor(e){super(e),bh(this,"state",{collectionModal:!1,pinnedFlash:!1,notebooks:new Array(27).fill(void 0)}),bh(this,"changePin",async e=>{const t=!!e.target.checked,{api:n}=this.props,{collection:{id:r,title:i,description:s,type:a}}=this.state;await n.collectionEdit({id:r,title:i,description:s,pinned:t,type:a}),this.setState(({collection:e})=>({collection:yh({},e,{pinned:t}),pinnedFlash:setTimeout(()=>this.setState({pinnedFlash:void 0}),1e3)}))}),bh(this,"reload",()=>{const{api:e,match:{params:{userLogin:t,collectionSlug:n}},location:{search:r}}=this.props;let{before:i}=Mh(r);e.init({cache:"no-cache"}).collectionLoad(t,n,{before:i}).then(e=>this.setState({collection:e,notebooks:e.documents.map(e=>yh({published:!0},e))}))}),bh(this,"onRemoveFromCollection",async e=>{const{api:t}=this.props,{collection:n}=this.state;await t.collectionRemoveDocument({id:n.id,document_id:e.id}),this.reload()}),bh(this,"showCollectionModal",()=>{this.setState({collectionModal:!0})}),bh(this,"showThumbnailModal",()=>{this.setState({thumbnailModal:!0})}),bh(this,"hideCollectionModal",()=>{this.setState({collectionModal:!1}),this.reload()}),e.preloadData&&(this.state=yh({preloaded:!0},e.preloadData))}componentDidMount(){this.state.preloaded||this.load(this.props)}componentWillReceiveProps(e){this.load(e)}load({api:e,match:{params:{collectionSlug:t,userLogin:n}},location:{search:r},user:i}){let{before:s}=Mh(r);this.setState({collection:void 0,notebooks:new Array(27).fill(void 0)}),(qm(i,n)?e.collectionLoad:e.collectionLoadPublic)(n,t,{before:s}).then(e=>this.setState({collection:e,notebooks:e.documents.map(e=>yh({published:!0},e))}))}render(){const{user:e,match:{params:{userLogin:t,collectionSlug:n}},api:r}=this.props,{collection:i,notebooks:s,collectionModal:a,pinnedFlash:o,thumbnailModal:l}=this.state,c=i&&`${i.description} / An Observable collection by ${Og(i.owner)}`;return Y.createElement($b,Object.assign({},this.props,{gray:!0,seamless:!0}),Y.createElement(wc,null,i&&Y.createElement("title",null,`${i.title} / ${Og(i.owner)}`),Y.createElement("link",{rel:"alternate",type:"application/rss+xml",href:`https://api.observablehq.com/collection/@${t}/${n}.rss`}),i&&Y.createElement("meta",{name:"twitter:card",content:"summary_large_image"}),i&&Y.createElement("meta",{property:"og:title",content:i.title||"Untitled"}),i&&Y.createElement("meta",{property:"og:description",content:c}),i&&Y.createElement("meta",{name:"description",content:c}),i&&i.thumbnail&&Y.createElement("meta",{property:"og:image",content:`https://static.observableusercontent.com/thumbnail/${i.thumbnail}.jpg`})),Y.createElement("div",null,Y.createElement("div",{className:"mb4 bg-white bb b--black-10"},Y.createElement("div",{className:"flex-ns justify-between pv4 "+zf},i&&Y.createElement(fy,{user:i.owner}))),Y.createElement("div",{className:zf},Y.createElement("div",{className:"mb2 lh-copy"},Y.createElement("div",{className:"flex justify-between items-start"},Y.createElement("div",null,Y.createElement("div",{className:"f3 fw7 lh-title black-70"},i?Y.createElement(Y.Fragment,null,i.title,"private"===i.type&&Y.createElement("span",{className:"dib ph1 ml2 f7 fw6 lh-f7 v-mid nowrap ttc mid-gray bg-light-gray br2"},"private")):Y.createElement("span",{className:"light-gray bg-light-gray"},"~~~~~~~~~~")),Y.createElement("div",{className:"measure-wide mb3 black-70"},i?i.description:Y.createElement("span",{className:"light-gray bg-light-gray"},"~~~~~~~~~~~~~~~~~~~~~~~~~ ~~~~~~~~~~~~~~~~~~~~~~~"))),rg(e,i)&&Y.createElement("div",{className:"flex items-center"},Y.createElement("div",{className:"flex items-center"},Y.createElement("span",{className:`ml2 f7 ttu ${o?"o-100":"o-0"} black-30 mr2`},"Saved"),Y.createElement("input",{type:"checkbox",id:"pinned-checkbox",title:"Pinned collections appear on your profile page",checked:i.pinned,onChange:this.changePin}),Y.createElement("label",{className:"pl1 pr3",htmlFor:"pinned-checkbox"},"Pin")),Y.createElement(Av,{query:{maxWidth:640}},e=>e?null:Y.createElement(Dg,{secondary:!0,type:"button",onClick:this.showThumbnailModal,className:"mr2"},"Set preview image")),Y.createElement(Dg,{type:"button",onClick:this.showCollectionModal,highlight:!0},"Edit collection")))),s.length?Y.createElement(Y.Fragment,null,Y.createElement("div",{className:"listing-grid"},s.slice(0,27).map((t,n)=>Y.createElement(uv,Object.assign({},this.props,{key:t?t.id:n,notebook:t,reload:this.reload,collection:i,onRemoveFromCollection:rg(e,i)&&this.onRemoveFromCollection})))),s.length>27&&s[0]&&Y.createElement("div",{className:"mt4 tc"},Y.createElement(fh,{to:`?${Dh({before:s[26].update_time},{encode:!1})}`,className:"pv2 ph3 dib br2 link blue bg-white hover-dark-blue"},"Show more…"))):rg(e,i)?Y.createElement(ay,null,"📦 Add notebooks to this collection by clicking"," ",Y.createElement(Id,{className:"w1 h1 v-mid mh1"})," and"," ",Y.createElement("span",{className:"fw5"},"Collections…")," on a notebook page."):Y.createElement(ay,null,"📦 This collection is empty, so far!"))),a&&Y.createElement(gy,Object.assign({onDismiss:this.hideCollectionModal,collection:i,owner:i&&i.owner},this.props)),l&&Y.createElement(tv,{type:"collection",hide:()=>this.setState({thumbnailModal:!1}),customThumbnail:i.custom_thumbnail,thumbnail:i.thumbnail,reset:async()=>{r.collectionThumbnail(i.id,null),this.setState(({collection:e})=>({collection:yh({},e,{custom_thumbnail:null})}))},save:async e=>{const t=await r.collectionThumbnail(i.id,e);this.setState(({collection:e})=>({collection:yh({},e,{custom_thumbnail:t})}))}}))}}bh(vy,"preload",({api:e,match:{params:{collectionSlug:t,userLogin:n}},location:{search:r}})=>{const{before:i}=Mh(r);return e.collectionLoad(n,t,{before:i}).then(e=>({collection:e,collectionModal:!1,pinnedFlash:!1,notebooks:e.documents.map(e=>yh({published:!0},e))}))});class by extends Y.Component{constructor(...e){super(...e),bh(this,"state",{title:"…",suggestions_to:[],notebooks:new Array(27).fill(void 0)}),bh(this,"reload",()=>{this.load(this.props)})}componentDidMount(){this.load(this.props)}componentWillReceiveProps(e){this.setState({title:"…",notebooks:new Array(27).fill(void 0)}),this.load(e)}load({match:{params:{userLogin:e,documentSlug:t,id:n}},location:{search:r},api:i,user:s}){const{before:a}=Mh(r);(t?i.documentLoadHead(`@${e}/${t}`,a):i.documentLoad(n)).then(({title:e,id:t})=>{this.setState({title:e}),s&&i.documentLoadMeta(t).then(({suggestions_to:e})=>this.setState({suggestions_to:e}))});const o=s?"all":"public";i.documentLoadForks(t?`@${e}/${t}`:n,a,o).then(e=>this.setState({notebooks:e}))}render(){const{match:{params:{userLogin:e,documentSlug:t,id:n}}}=this.props,{notebooks:r,suggestions_to:i,title:s}=this.state,a=new Set(i.map(({from_id:e})=>e));return Y.createElement($b,Object.assign({},this.props,{gray:!0}),Y.createElement(wc,null,Y.createElement("title",null,`Forks of ‘${Sg({title:s})}’`)),Y.createElement("div",{className:zf},Y.createElement("div",{className:"mv4 f4 fw4 lh-copy black-50"},"Forks of ‘",Y.createElement(fh,{to:t?`/@${e}/${t}`:`/d/${n}`,className:"no-underline black-70 hover-blue"},Sg({title:s})),"’"),r.length>0?Y.createElement("div",null,Y.createElement("div",{className:"listing-grid"},r.slice(0,27).map((e,t)=>Y.createElement(uv,{key:e?e.id:t,notebook:e,suggestion:e&&a.has(e.id),reload:this.reload}))),r.length>27&&Y.createElement("div",{className:"mt4 tc"},Y.createElement(fh,{to:`?${Dh({before:r[26].update_time},{encode:!1})}`,className:"pv2 ph3 dib br2 link blue bg-white hover-dark-blue"},"Show more…"))):Y.createElement(ay,null,"This notebook has no forks.")))}}const yy={fullscreenEnabled:0,fullscreenElement:1,requestFullscreen:2,exitFullscreen:3,fullscreenchange:4,fullscreenerror:5},wy=["webkitFullscreenEnabled","webkitFullscreenElement","webkitRequestFullscreen","webkitExitFullscreen","webkitfullscreenchange","webkitfullscreenerror"],xy=["mozFullScreenEnabled","mozFullScreenElement","mozRequestFullScreen","mozCancelFullScreen","mozfullscreenchange","mozfullscreenerror"],Ey=["msFullscreenEnabled","msFullscreenElement","msRequestFullscreen","msExitFullscreen","MSFullscreenChange","MSFullscreenError"],ky="undefined"!=typeof window&&void 0!==window.document?window.document:{},Cy="fullscreenEnabled"in ky&&Object.keys(yy)||wy[0]in ky&&wy||xy[0]in ky&&xy||Ey[0]in ky&&Ey||[];var _y={requestFullscreen:e=>e[Cy[yy.requestFullscreen]](),requestFullscreenFunction:e=>e[Cy[yy.requestFullscreen]],get exitFullscreen(){return ky[Cy[yy.exitFullscreen]].bind(ky)},addEventListener:(e,t,n)=>ky.addEventListener(Cy[yy[e]],t,n),removeEventListener:(e,t,n)=>ky.removeEventListener(Cy[yy[e]],t,n),get fullscreenEnabled(){return Boolean(ky[Cy[yy.fullscreenEnabled]])},set fullscreenEnabled(e){},get fullscreenElement(){return ky[Cy[yy.fullscreenElement]]},set fullscreenElement(e){},get onfullscreenchange(){return ky[`on${Cy[yy.fullscreenchange]}`.toLowerCase()]},set onfullscreenchange(e){return ky[`on${Cy[yy.fullscreenchange]}`.toLowerCase()]=e},get onfullscreenerror(){return ky[`on${Cy[yy.fullscreenerror]}`.toLowerCase()]},set onfullscreenerror(e){return ky[`on${Cy[yy.fullscreenerror]}`.toLowerCase()]=e}};function Sy({id:e,value:t="",pinned:n=!1}={}){if((e=+e)!==(0|e)||e<0)throw new Error("invalid node id");return new Ny(e,t+"",!!n)}function Ny(e,t,n){Object.defineProperties(this,{id:{value:e,enumerable:!0},value:{value:t,enumerable:!0},pinned:{value:n,enumerable:!0}})}Object.defineProperties(Ny,{of:{value:Sy,writable:!0,configurable:!0}});const Ty="create",Ay="insert_node",Ly="modify_node",Py="modify_title",Iy="move_node",Oy="remove_node",My="pin_node",Ry="unpin_node",Dy="revert",Fy="noop";const Vy=e=>[e[1],e[0]];function jy(e){Object.defineProperties(this,{_node:{value:e,writable:!0}})}function By({version:e=0,title:t="",nodes:n=[]}={}){if((e=+e)!==(0|e)||e<0)throw new Error("invalid version");n=Array.from(n,Sy);const r=new Array(e+1);for(let i=0;i<n.length;++i){const{id:t}=n[i];if(t>e)throw new Error("invalid node_id");if(t in r)throw new Error("duplicate node_id");r[t]=i}return new $y(e,t+"",n,new Array(e+1))}function Uy({version:e,type:t,node_id:n,new_node_value:r,new_node_pinned:i,new_next_node_id:s}){switch(t){case Py:return{version:e,type:t,new_node_value:r};case Ay:return{version:e,type:t,node_id:n,new_node_value:r,new_next_node_id:s,new_node_pinned:i};case Oy:return{version:e,type:t,node_id:n};case Iy:return{version:e,type:t,node_id:n,new_next_node_id:s};case Ly:return{version:e,type:t,node_id:n,new_node_value:r};case My:case Ry:return{version:e,type:t,node_id:n};case Fy:return{version:e,type:t};case Ty:throw new Error("cannot redo create");case Dy:throw new Error("cannot redo revert");default:throw new Error("unknown type")}}function Hy({old_version:e,type:t,node_id:n,old_node_value:r,old_node_pinned:i,old_next_node_id:s}){switch(t){case Py:return{version:e,type:t,new_node_value:r};case Ay:return{version:e,type:Oy,node_id:n};case Oy:return{version:e,type:Ay,node_id:n,new_node_value:r,new_node_pinned:i,new_next_node_id:s};case Iy:return{version:e,type:t,node_id:n,new_next_node_id:s};case Ly:return{version:e,type:t,node_id:n,new_node_value:r};case My:return{version:e,type:Ry,node_id:n};case Ry:return{version:e,type:My,node_id:n};case Fy:return{version:e,type:t};case Ty:throw new Error("cannot undo create");case Dy:throw new Error("cannot undo revert");default:throw new Error("unknown type")}}function $y(e,t,n,r){Object.defineProperties(this,{version:{value:e,enumerable:!0},title:{value:t,enumerable:!0},nodes:{value:n,enumerable:!0},events:{value:r,enumerable:!0}})}function zy(e){return{version:e.version,type:e.type,node_id:e.node_id,new_next_node_id:e.new_next_node_id,new_node_value:e.new_node_value,new_node_pinned:e.new_node_pinned,target_document_id:e.target_document_id,target_node_id:e.target_node_id}}function Wy(e){try{const n=window[e];return n.getItem("test"),n}catch(t){return null}}Object.defineProperties(jy.prototype,{[Symbol.iterator]:{value:function(){return this},writable:!0,configurable:!0},next:{value:function(){if(null==this._node)return{done:!0};const e=this._node;return this._node=this._node.next,{done:!1,value:e}},writable:!0,configurable:!0}}),Object.defineProperties($y,{create:{value:function({version:e,title:t="",nodes:n=[]}={}){n=Array.from(n,Sy);const r=new Set,i=[];if(void 0!==e&&((e=+e)!=(0|e)||e<0))throw new Error("invalid version");let s=-1,a=-1;(t+="")&&(i[++s]={version:s,type:Py,old_node_value:"",new_node_value:t});for(const{id:o,value:l,pinned:c}of n){if(r.has(o))throw new Error("duplicate node_id");r.add(o),i[++s]={version:s,type:Ay,node_id:o,new_next_node_id:null,new_node_value:l,new_node_pinned:c},o>a&&(a=o)}if(void 0===e)e=Math.max(s,a)+1;else if(s>=e||e<a)throw new Error("invalid version");return i[e]={version:e,type:Ty},new $y(e,t,n,i)},writable:!0,configurable:!0},from:{value:function(e){let t="",n=-1,r=-1,i=!1;const s=new Map;let a=null,o=null;function l(e,t){const n=t?t.previous:a;t?(e.next=t,t.previous=e):a=e,n?(e.previous=n,n.next=e):o=e}function c(e){const t=e.next,n=e.previous;t?(t.previous=n,e.next=null):a=n,n?(n.next=t,e.previous=null):o=t}for(const u of e){let e=+u.version;if(e!==(0|e)||!(e>=n))throw new Error("invalid version");switch(n=e,u.type){case Ty:if(i)throw new Error("duplicate create");if(r>n)throw new Error("invalid node_id");i=!0;break;case Py:t=u.new_node_value;break;case Ay:{let e=n;if(void 0!==u.node_id){if((e=+u.node_id)!=(0|e)||e<0||i&&e>n)throw new Error("invalid node_id");if(s.has(e))throw new Error("duplicate node_id")}let t=null;if(null!=u.new_next_node_id&&void 0===(t=s.get(+u.new_next_node_id)))throw new Error("invalid new_next_node_id");r=Math.max(e,r);const a={id:e,value:u.new_node_value,pinned:u.new_node_pinned,next:null,previous:null};l(a,t),s.set(e,a);break}case Ly:{const e=s.get(+u.node_id);if(void 0===e)throw new Error("invalid node_id");e.value=u.new_node_value;break}case Iy:{const e=s.get(+u.node_id);if(void 0===e)throw new Error("invalid node_id");let t=null;if(null!=u.new_next_node_id&&void 0===(t=s.get(+u.new_next_node_id)))throw new Error("invalid new_next_node_id");e.next!==t&&e!==t&&(c(e),l(e,t));break}case Oy:{const e=+u.node_id,t=s.get(e);if(void 0===t)throw new Error("invalid node_id");c(t),s.delete(e);break}case My:case Ry:{const e=s.get(+u.node_id);if(void 0===e)throw new Error("invalid node_id");e.pinned=u.type===My;break}case Fy:break;default:throw new Error("unknown type")}}if(!i)throw new Error("expected create");return By({version:n,title:t,nodes:new jy(o)})},writable:!0,configurable:!0},of:{value:By,writable:!0,configurable:!0},Node:{value:Ny,writable:!0,configurable:!0}}),Object.defineProperties($y.prototype,{apply:{value:function(e,t=function(){}){let n=this.version,r=this.title,i=this.nodes,s=this.events;for(const a of e){const e=n;switch(n=s.length,s===this.events&&(s=s.slice()),a.type){case Py:{const i=void 0===a.new_node_value?"":a.new_node_value+"";if(r===i)break;t(s[s.length]={version:n,old_version:e,type:Py,old_node_value:r,new_node_value:i}),r=i;continue}case Ay:{let r=n;if(void 0!==a.node_id){if((r=+a.node_id)!=(0|r)||r<0||r>n)throw new Error("invalid node_id");if(i.findIndex(e=>e.id===r)>=0)throw new Error("duplicate node_id")}let o=i.length,l=null;if(null!=a.new_next_node_id&&(l=+a.new_next_node_id,(o=i.findIndex(e=>e.id===l))<0))throw new Error("invalid new_next_node_id");const c=void 0===a.new_node_value?"":a.new_node_value+"",u=!!a.new_node_pinned;i===this.nodes&&(i=i.slice()),i.splice(o,0,new Ny(r,c,u)),t(s[s.length]={version:n,old_version:e,type:Ay,node_id:r,new_next_node_id:l,new_node_value:c,new_node_pinned:u});continue}case Ly:{const r=+a.node_id,o=i.findIndex(e=>e.id===r);if(o<0)throw new Error("invalid node_id");const l=void 0===a.new_node_value?"":a.new_node_value+"",c=i[o].value;if(c===l)break;i===this.nodes&&(i=i.slice()),i[o]=new Ny(r,l,i[o].pinned),t(s[s.length]={version:n,old_version:e,type:Ly,node_id:r,old_node_value:c,new_node_value:l});continue}case Iy:{const r=+a.node_id,o=i.findIndex(e=>e.id===r);if(o<0)throw new Error("invalid node_id");const l=i[o];let c=i.length,u=null;if(null!=a.new_next_node_id&&(u=+a.new_next_node_id,(c=i.findIndex(e=>e.id===u))<0))throw new Error("invalid new_next_node_id");const h=o<i.length-1?i[o+1].id:null;if(o===c&&(u=h),h===u)break;i===this.nodes&&(i=i.slice()),i.splice(o,1),i.splice(c-(o<c),0,l),t(s[s.length]={version:n,old_version:e,type:Iy,node_id:r,old_next_node_id:h,new_next_node_id:u});continue}case Oy:{const r=+a.node_id,o=i.findIndex(e=>e.id===r);if(o<0)throw new Error("invalid node_id");const l=o<i.length-1?i[o+1].id:null,c=i[o];i===this.nodes&&(i=i.slice()),i.splice(o,1),t(s[s.length]={version:n,old_version:e,type:Oy,node_id:r,old_next_node_id:l,old_node_value:c.value,old_node_pinned:c.pinned});continue}case My:case Ry:{const r=+a.node_id,o=i.findIndex(e=>e.id===r);if(o<0)throw new Error("invalid node_id");const l=a.type===My;if(i[o].pinned===l)break;i===this.nodes&&(i=i.slice()),i[o]=new Ny(r,i[o].value,l),t(s[s.length]={version:n,old_version:e,type:a.type,node_id:r});continue}case Dy:{if((n=+a.node_id)>e)throw new Error("cannot undo revert");const o=new $y(e,r,i,s);({version:n,title:r,nodes:i}=o.reset(n,t)),s[s.length]={version:s.length,old_version:e,type:Dy,node_id:n};continue}case Fy:break;case Ty:throw new Error("cannot apply create");default:throw new Error("unknown type")}t(s[s.length]={version:n,old_version:e,type:Fy})}return s===this.events?this:new $y(n,r,i,s)},writable:!0,configurable:!0},diff:{value:function(e,t=[]){const n=new Map(this.nodes.map(e=>[e.id,e])),r=new Map(e.nodes.map(e=>[e.id,e])),i=new Map(t),s=new Map(t.map(Vy)),a=e.nodes.map(e=>{const t=s.get(e.id),r=n.get(t);return r?{type:r.value===e.value?Fy:Ly,base:r,target:e}:{type:null==t?Ay:Oy,target:e}});e:for(let o=0,l=this.nodes.length;o<l;++o){const e=this.nodes[o],t=i.get(e.id);if(r.has(t))continue;const n={type:null==t?Ay:Oy,base:e};for(let s=o+1;s<l;++s){const e=r.get(i.get(this.nodes[s].id));if(e){a.splice(a.findIndex(t=>t.target===e),0,n);continue e}}a.push(n)}return a},writable:!0,configurable:!0},merge:{value:function(e,t){let n,r;if(Array.isArray(e)||(e=Array.from(e)),t&&(t=function(e){return function(t){e(Uy(t))}}(t)),0===e.length)return this;const i=+e[0].version,s=e.length,a=this.version-i+1,o=Math.min(s,a),l=this.reset(i-1,t).apply(e,t);for(e=l.events.slice(i),n=0;n<o;++n){const t=e[n],r=this.events[t.version];if(t.type===Ay&&t.node_id===t.version||t.type!==r.type||t.node_id!==r.node_id||t.new_node_value!==r.new_node_value||t.new_node_pinned!==r.new_node_pinned||t.new_next_node_id!==r.new_next_node_id)break}if(n===s)return this;if(n===a)return l;const c=new Set,u=new Map;for(r=0;r<s-n;++r){const t=e[r];switch(t.type){case Ay:t.node_id<i&&c.add(t.node_id),u.delete(t.node_id);break;case Oy:c.delete(t.node_id),u.set(t.node_id,t.old_next_node_id)}}const h=new Map,p=[];for(r=i+n;r<=this.version;++r){const e=this.events[r];switch(e.type){case Py:p.push({type:Py,new_node_value:e.new_node_value});break;case Ay:{let t=e.node_id;h.has(t)?t=h.get(t):(t>=i||c.has(t))&&h.set(t,t=l.version+p.length+1);let n=e.new_next_node_id;if(h.has(n))n=h.get(n);else for(;u.has(n);)n=u.get(n);u.delete(t),p.push({type:Ay,node_id:t,new_node_value:e.new_node_value,new_node_pinned:e.new_node_pinned,new_next_node_id:n});break}case Ly:{let t=e.node_id;if(h.has(t))t=h.get(t);else if(u.has(t))break;p.push({type:Ly,node_id:t,new_node_value:e.new_node_value});break}case Iy:{let t=e.node_id;if(h.has(t))t=h.get(t);else if(u.has(t))break;let n=e.new_next_node_id;if(h.has(n))n=h.get(n);else for(;u.has(n);)n=u.get(n);p.push({type:Iy,node_id:t,new_next_node_id:n});break}case Oy:{let t=e.node_id;if(h.has(t))t=h.get(t);else if(u.has(t))break;c.delete(t),p.push({type:Oy,node_id:t});break}case My:case Ry:{let t=e.node_id;if(h.has(t))t=h.get(t);else if(u.has(t))break;p.push({type:e.type,node_id:t});break}case Fy:break;default:throw new Error("unknown type")}}return l.apply(p,t)},writable:!0,configurable:!0},patch:{value:function(e,t=[]){const n=new Map(this.nodes.map(e=>[e.id,e])),r=new Map(this.nodes.slice(0,-1).map((e,t)=>[e.id,this.nodes[t+1].id])),i=new Map(this.nodes.slice(1).map((e,t)=>[e.id,this.nodes[t].id])),s=new Map(t),a=new Map(t.map(Vy));let o=this.nodes.length?this.nodes[this.nodes.length-1].id:void 0;const l=new Set(e.nodes.map(e=>e.id)),c=[],u=[];let h=this.events.length-1;this.title!==e.title&&(++h,c.push({type:Py,new_node_value:e.title}));for(const{id:p}of this.nodes)if(!l.has(s.get(p))){++h,c.push({type:Oy,node_id:p});const e=i.get(p),t=r.get(p);void 0!==t?(r.set(p,r.get(t)),i.set(t,e)):o=e,void 0!==e&&(i.set(p,i.get(e)),r.set(e,t))}for(let p=e.nodes.length-1;p>=0;--p){const t=e.nodes[p],l=e.nodes[p+1]&&a.get(e.nodes[p+1].id),{id:d}=t;let f=a.get(d);const m=n.get(f);if(m){m.value!==t.value&&(++h,c.push({type:Ly,node_id:f,new_node_value:t.value})),m.pinned!==t.pinned&&(++h,c.push({type:t.pinned?My:Ry,node_id:f}));const e=r.get(f);if(e!==l){++h,c.push({type:Iy,node_id:f,new_next_node_id:void 0===l?null:l});const t=i.get(f),n=void 0!==l?i.get(l):o;void 0!==t&&r.set(t,e),void 0!==e&&i.set(e,t),r.set(f,l),i.set(f,n),void 0!==n&&r.set(n,f),void 0!==l?i.set(l,f):o=f}}else{const e=++h;null==f&&(f=e,a.set(d,f),s.set(f,d),u.push([f,d])),c.push({type:Ay,node_id:f,new_node_value:t.value,new_node_pinned:t.pinned,new_next_node_id:void 0===l?null:l});const n=null!=l?i.get(l):o;null!=n&&r.set(n,f),null!=l?i.set(l,f):o=f,r.set(f,l),i.set(f,n)}}return{events:c,mapping:u}},writable:!0,configurable:!0},reset:{value:function(e,t){if((e=+e)<0||e>=this.events.length||e!==(0|e))throw new Error("invalid version");if(e===this.events.length-1)return this;const n=Array.from(function*(e,t,n){for(;n<t;){const r=Hy(e[t--]);if(yield r,r.version===n)return}for(;t<n;){const r=Uy(e[++t]);if(yield r,r.version===n)return}}(this.events,this.version,e));if(!n.length)return this;t&&n.forEach(t);const{title:r,nodes:i}=this.apply(n);return new $y(e=n[n.length-1].version,r,i,this.events.slice(0,e+1))},writable:!0,configurable:!0}});const qy=Wy("localStorage"),Gy=Wy("sessionStorage"),Ky=Symbol("closed"),Yy=Symbol("opening"),Zy=Symbol("greeting"),Qy=Symbol("idle"),Xy=Symbol("flushing"),Jy=Symbol("saving"),ew=Symbol("reopening"),tw=3e4,nw=250,rw=50,iw=1e3;class sw extends Y.Component{constructor(...e){super(...e),bh(this,"flushDelay",rw),bh(this,"flushTimer",null),bh(this,"stashTimer",null),bh(this,"pingInterval",null),bh(this,"reopenDelay",nw),bh(this,"saveVersion",null),bh(this,"stashVersion",null),bh(this,"socket",null),bh(this,"token",null),bh(this,"clientState",Ky),bh(this,"close",()=>{this.clientState!==Ky&&(this.flushTimer&&(clearTimeout(this.flushTimer),this.flushTimer=null),this.stashTimer&&(clearTimeout(this.stashTimer),this.stashTimer=null),this.reopenTimer&&(clearTimeout(this.reopenTimer),this.reopenTimer=null),this.pingInterval&&(clearInterval(this.pingInterval),this.pingInterval=null),this.socket.removeEventListener("open",this.onOpen),this.socket.removeEventListener("close",this.onClose),this.socket.removeEventListener("message",this.onMessage),this.socket.close(),this.socket=null,this.clientState=Ky)}),bh(this,"abort",e=>{const{onError:t}=this.props;this.close(),t(e)}),bh(this,"reopen",()=>{if(this.clientState!==ew)throw new Error("unexpected state");const{editable:e,notebook:{id:t}}=this.props;this.reopenTimer&&(clearTimeout(this.reopenTimer),this.reopenTimer=null),document.hidden||(this.token=Vh(),this.socket=new WebSocket(`wss://ws.observablehq.com/document/${t}${e?"/edit":"/comments"}`),this.socket.addEventListener("open",this.onOpen),this.socket.addEventListener("close",this.onClose),this.socket.addEventListener("message",this.onMessage),this.clientState=Yy)}),bh(this,"onOpen",()=>{if(this.clientState!==Yy)throw new Error("unexpected state");this.clientState=Zy,this.send({type:"hello",token:this.token,version:this.saveVersion}),this.pingInterval=setInterval(this.ping,tw)}),bh(this,"onClose",()=>{isFinite(this.reopenDelay)&&(this.reopenDelay=Math.min(6e4,this.reopenDelay*(1+Math.random()))),this.flushTimer&&(clearTimeout(this.flushTimer),this.flushTimer=null),this.pingInterval&&(clearInterval(this.pingInterval),this.pingInterval=null),this.reopenTimer&&(clearTimeout(this.reopenTimer),this.reopenTimer=null),this.reopenTimer=setTimeout(this.reopen,this.reopenDelay),this.clientState=ew}),bh(this,"onMessage",e=>{const{notebook:{id:t},onSave:n,onSaveConfirm:r,onPresence:i,onComments:s,onCommentConfirm:a}=this.props;switch((e=JSON.parse(e.data)).type){case"hello":if(this.clientState!==Zy)return this.abort(new Error("unexpected hello"));this.reopenDelay=Math.max(nw,this.reopenDelay/10),this.clientState=Qy,this.maybeFlush();break;case"goodbye":this.reopenDelay=1/0;break;case"error":if(this.clientState!==Jy)return this.abort(new Error("unexpected error"));this.clientState=Qy,this.maybeFlush();break;case"saveconfirm":if(this.clientState!==Jy)return this.abort(new Error("unexpected saveconfirm"));this.clientState=Qy,this.saveVersion=this.stashVersion=e.version,qy&&qy.removeItem(`notebook-${t}`),this.maybeFlush(),r(e.version);break;case"save":const o=e.events,l=o[o.length-1].version;if(!(l>this.saveVersion))return this.abort(new Error("version skew"));this.saveVersion=this.stashVersion=l,this.maybeFlush(),n(o,l);break;case"presence":i(e.participants);break;case"comments":s(e.comments);break;case"commentconfirm":a(e.id,e.nonce)}}),bh(this,"onVisibilityChange",()=>{this.clientState!==ew||document.hidden||this.reopen()}),bh(this,"flush",()=>{const{editable:e,notebook:{model:{events:t}}}=this.props;if(this.clientState!==Xy)throw new Error("unexpected state");!e||this.saveVersion>=t.length-1?this.clientState=Qy:(this.flushTimer=null,this.clientState=Jy,this.send({type:"save",events:t.slice(this.saveVersion+1).map(zy)}))}),bh(this,"stash",()=>{const{notebook:{id:e,model:{events:t}}}=this.props;null!=this.stashVersion&&this.stashVersion<t.length-1&&(qy&&qy.setItem(`notebook-${e}`,JSON.stringify(t.slice(this.saveVersion+1).map(zy))),this.stashVersion=t.length-1),this.stashTimer=null}),bh(this,"ping",()=>{document.hidden||this.send({type:"ping"})})}componentDidMount(){if(this.clientState!==Ky)throw new Error("unexpected state");const{notebook:{save_version:e}}=this.props;this.saveVersion=this.stashVersion=e,this.clientState=ew,document.addEventListener("visibilitychange",this.onVisibilityChange),this.reopen()}componentDidUpdate(){this.maybeFlush()}componentWillUnmount(){this.saveVersion=null,this.stashVersion=null,this.close(),document.removeEventListener("visibilitychange",this.onVisibilityChange)}maybeFlush(){const{editable:e,notebook:{model:{events:t}}}=this.props;e&&(this.stashTimer||(this.stashTimer=setTimeout(this.stash,iw)),this.clientState===Qy&&(this.saveVersion<t.length-1?(this.flushDelay*=Math.random()+1,this.flushTimer=setTimeout(this.flush,this.flushDelay),this.clientState=Xy):this.flushDelay=Math.max(rw,this.flushDelay/2)))}send(e){this.socket.send(JSON.stringify(e))}render(){return null}}var aw=n(function(e,t){!function(t,n){e.exports=function(){var e=navigator.userAgent,t=navigator.platform,n=/gecko\/\d/i.test(e),r=/MSIE \d/.test(e),i=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(e),s=/Edge\/(\d+)/.exec(e),a=r||i||s,o=a&&(r?document.documentMode||6:+(s||i)[1]),l=!s&&/WebKit\//.test(e),c=l&&/Qt\/\d+\.\d+/.test(e),u=!s&&/Chrome\//.test(e),h=/Opera\//.test(e),p=/Apple Computer/.test(navigator.vendor),d=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(e),f=/PhantomJS/.test(e),m=!s&&/AppleWebKit/.test(e)&&/Mobile\/\w+/.test(e),g=/Android/.test(e),v=m||g||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(e),b=m||/Mac/.test(t),y=/\bCrOS\b/.test(e),w=/win/i.test(t),x=h&&e.match(/Version\/(\d*\.\d*)/);x&&(x=Number(x[1]));x&&x>=15&&(h=!1,l=!0);var E=b&&(c||h&&(null==x||x<12.11)),k=n||a&&o>=9;function C(e){return new RegExp("(^|\\s)"+e+"(?:$|\\s)\\s*")}var _,S=function(e,t){var n=e.className,r=C(t).exec(n);if(r){var i=n.slice(r.index+r[0].length);e.className=n.slice(0,r.index)+(i?r[1]+i:"")}};function N(e){for(var t=e.childNodes.length;t>0;--t)e.removeChild(e.firstChild);return e}function T(e,t){return N(e).appendChild(t)}function A(e,t,n,r){var i=document.createElement(e);if(n&&(i.className=n),r&&(i.style.cssText=r),"string"==typeof t)i.appendChild(document.createTextNode(t));else if(t)for(var s=0;s<t.length;++s)i.appendChild(t[s]);return i}function L(e,t,n,r){var i=A(e,t,n,r);return i.setAttribute("role","presentation"),i}_=document.createRange?function(e,t,n,r){var i=document.createRange();return i.setEnd(r||e,n),i.setStart(e,t),i}:function(e,t,n){var r=document.body.createTextRange();try{r.moveToElementText(e.parentNode)}catch(i){return r}return r.collapse(!0),r.moveEnd("character",n),r.moveStart("character",t),r};function P(e,t){if(3==t.nodeType&&(t=t.parentNode),e.contains)return e.contains(t);do{if(11==t.nodeType&&(t=t.host),t==e)return!0}while(t=t.parentNode)}function I(){var e;try{e=document.activeElement}catch(t){e=document.body||null}for(;e&&e.shadowRoot&&e.shadowRoot.activeElement;)e=e.shadowRoot.activeElement;return e}function O(e,t){var n=e.className;C(t).test(n)||(e.className+=(n?" ":"")+t)}function M(e,t){for(var n=e.split(" "),r=0;r<n.length;r++)n[r]&&!C(n[r]).test(t)&&(t+=" "+n[r]);return t}var R=function(e){e.select()};m?R=function(e){e.selectionStart=0,e.selectionEnd=e.value.length}:a&&(R=function(e){try{e.select()}catch(t){}});function D(e){var t=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,t)}}function F(e,t,n){for(var r in t||(t={}),e)!e.hasOwnProperty(r)||!1===n&&t.hasOwnProperty(r)||(t[r]=e[r]);return t}function V(e,t,n,r,i){null==t&&-1==(t=e.search(/[^\s\u00a0]/))&&(t=e.length);for(var s=r||0,a=i||0;;){var o=e.indexOf("\t",s);if(o<0||o>=t)return a+(t-s);a+=o-s,a+=n-a%n,s=o+1}}var j=function(){this.id=null};function B(e,t){for(var n=0;n<e.length;++n)if(e[n]==t)return n;return-1}j.prototype.set=function(e,t){clearTimeout(this.id),this.id=setTimeout(t,e)};var U=30,H={toString:function(){return"CodeMirror.Pass"}},$={scroll:!1},z={origin:"*mouse"},W={origin:"+move"};function q(e,t,n){for(var r=0,i=0;;){var s=e.indexOf("\t",r);-1==s&&(s=e.length);var a=s-r;if(s==e.length||i+a>=t)return r+Math.min(a,t-i);if(i+=s-r,r=s+1,(i+=n-i%n)>=t)return r}}var G=[""];function K(e){for(;G.length<=e;)G.push(Y(G)+" ");return G[e]}function Y(e){return e[e.length-1]}function Z(e,t){for(var n=[],r=0;r<e.length;r++)n[r]=t(e[r],r);return n}function Q(){}function X(e,t){var n;return Object.create?n=Object.create(e):(Q.prototype=e,n=new Q),t&&F(t,n),n}var J=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;function ee(e){return/\w/.test(e)||e>""&&(e.toUpperCase()!=e.toLowerCase()||J.test(e))}function te(e,t){return t?!!(t.source.indexOf("\\w")>-1&&ee(e))||t.test(e):ee(e)}function ne(e){for(var t in e)if(e.hasOwnProperty(t)&&e[t])return!1;return!0}var re=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function ie(e){return e.charCodeAt(0)>=768&&re.test(e)}function se(e,t,n){for(;(n<0?t>0:t<e.length)&&ie(e.charAt(t));)t+=n;return t}function ae(e,t,n){for(var r=t>n?-1:1;;){if(t==n)return t;var i=(t+n)/2,s=r<0?Math.ceil(i):Math.floor(i);if(s==t)return e(s)?t:n;e(s)?n=s:t=s+r}}function oe(e,t,r){var i=this;this.input=r,i.scrollbarFiller=A("div",null,"CodeMirror-scrollbar-filler"),i.scrollbarFiller.setAttribute("cm-not-content","true"),i.gutterFiller=A("div",null,"CodeMirror-gutter-filler"),i.gutterFiller.setAttribute("cm-not-content","true"),i.lineDiv=L("div",null,"CodeMirror-code"),i.selectionDiv=A("div",null,null,"position: relative; z-index: 1"),i.cursorDiv=A("div",null,"CodeMirror-cursors"),i.measure=A("div",null,"CodeMirror-measure"),i.lineMeasure=A("div",null,"CodeMirror-measure"),i.lineSpace=L("div",[i.measure,i.lineMeasure,i.selectionDiv,i.cursorDiv,i.lineDiv],null,"position: relative; outline: none");var s=L("div",[i.lineSpace],"CodeMirror-lines");i.mover=A("div",[s],null,"position: relative"),i.sizer=A("div",[i.mover],"CodeMirror-sizer"),i.sizerWidth=null,i.heightForcer=A("div",null,null,"position: absolute; height: "+U+"px; width: 1px;"),i.gutters=A("div",null,"CodeMirror-gutters"),i.lineGutter=null,i.scroller=A("div",[i.sizer,i.heightForcer,i.gutters],"CodeMirror-scroll"),i.scroller.setAttribute("tabIndex","-1"),i.wrapper=A("div",[i.scrollbarFiller,i.gutterFiller,i.scroller],"CodeMirror"),a&&o<8&&(i.gutters.style.zIndex=-1,i.scroller.style.paddingRight=0),l||n&&v||(i.scroller.draggable=!0),e&&(e.appendChild?e.appendChild(i.wrapper):e(i.wrapper)),i.viewFrom=i.viewTo=t.first,i.reportedViewFrom=i.reportedViewTo=t.first,i.view=[],i.renderedView=null,i.externalMeasured=null,i.viewOffset=0,i.lastWrapHeight=i.lastWrapWidth=0,i.updateLineNumbers=null,i.nativeBarWidth=i.barHeight=i.barWidth=0,i.scrollbarsClipped=!1,i.lineNumWidth=i.lineNumInnerWidth=i.lineNumChars=null,i.alignWidgets=!1,i.cachedCharWidth=i.cachedTextHeight=i.cachedPaddingH=null,i.maxLine=null,i.maxLineLength=0,i.maxLineChanged=!1,i.wheelDX=i.wheelDY=i.wheelStartX=i.wheelStartY=null,i.shift=!1,i.selForContextMenu=null,i.activeTouch=null,r.init(i)}function le(e,t){if((t-=e.first)<0||t>=e.size)throw new Error("There is no line "+(t+e.first)+" in the document.");for(var n=e;!n.lines;)for(var r=0;;++r){var i=n.children[r],s=i.chunkSize();if(t<s){n=i;break}t-=s}return n.lines[t]}function ce(e,t,n){var r=[],i=t.line;return e.iter(t.line,n.line+1,function(e){var s=e.text;i==n.line&&(s=s.slice(0,n.ch)),i==t.line&&(s=s.slice(t.ch)),r.push(s),++i}),r}function ue(e,t,n){var r=[];return e.iter(t,n,function(e){r.push(e.text)}),r}function he(e,t){var n=t-e.height;if(n)for(var r=e;r;r=r.parent)r.height+=n}function pe(e){if(null==e.parent)return null;for(var t=e.parent,n=B(t.lines,e),r=t.parent;r;t=r,r=r.parent)for(var i=0;r.children[i]!=t;++i)n+=r.children[i].chunkSize();return n+t.first}function de(e,t){var n=e.first;e:do{for(var r=0;r<e.children.length;++r){var i=e.children[r],s=i.height;if(t<s){e=i;continue e}t-=s,n+=i.chunkSize()}return n}while(!e.lines);for(var a=0;a<e.lines.length;++a){var o=e.lines[a],l=o.height;if(t<l)break;t-=l}return n+a}function fe(e,t){return t>=e.first&&t<e.first+e.size}function me(e,t){return String(e.lineNumberFormatter(t+e.firstLineNumber))}function ge(e,t,n){if(void 0===n&&(n=null),!(this instanceof ge))return new ge(e,t,n);this.line=e,this.ch=t,this.sticky=n}function ve(e,t){return e.line-t.line||e.ch-t.ch}function be(e,t){return e.sticky==t.sticky&&0==ve(e,t)}function ye(e){return ge(e.line,e.ch)}function we(e,t){return ve(e,t)<0?t:e}function xe(e,t){return ve(e,t)<0?e:t}function Ee(e,t){return Math.max(e.first,Math.min(t,e.first+e.size-1))}function ke(e,t){if(t.line<e.first)return ge(e.first,0);var n=e.first+e.size-1;return t.line>n?ge(n,le(e,n).text.length):function(e,t){var n=e.ch;return null==n||n>t?ge(e.line,t):n<0?ge(e.line,0):e}(t,le(e,t.line).text.length)}function Ce(e,t){for(var n=[],r=0;r<t.length;r++)n[r]=ke(e,t[r]);return n}var _e=!1,Se=!1;function Ne(e,t,n){this.marker=e,this.from=t,this.to=n}function Te(e,t){if(e)for(var n=0;n<e.length;++n){var r=e[n];if(r.marker==t)return r}}function Ae(e,t){for(var n,r=0;r<e.length;++r)e[r]!=t&&(n||(n=[])).push(e[r]);return n}function Le(e,t){if(t.full)return null;var n=fe(e,t.from.line)&&le(e,t.from.line).markedSpans,r=fe(e,t.to.line)&&le(e,t.to.line).markedSpans;if(!n&&!r)return null;var i=t.from.ch,s=t.to.ch,a=0==ve(t.from,t.to),o=function(e,t,n){var r;if(e)for(var i=0;i<e.length;++i){var s=e[i],a=s.marker,o=null==s.from||(a.inclusiveLeft?s.from<=t:s.from<t);if(o||s.from==t&&"bookmark"==a.type&&(!n||!s.marker.insertLeft)){var l=null==s.to||(a.inclusiveRight?s.to>=t:s.to>t);(r||(r=[])).push(new Ne(a,s.from,l?null:s.to))}}return r}(n,i,a),l=function(e,t,n){var r;if(e)for(var i=0;i<e.length;++i){var s=e[i],a=s.marker,o=null==s.to||(a.inclusiveRight?s.to>=t:s.to>t);if(o||s.from==t&&"bookmark"==a.type&&(!n||s.marker.insertLeft)){var l=null==s.from||(a.inclusiveLeft?s.from<=t:s.from<t);(r||(r=[])).push(new Ne(a,l?null:s.from-t,null==s.to?null:s.to-t))}}return r}(r,s,a),c=1==t.text.length,u=Y(t.text).length+(c?i:0);if(o)for(var h=0;h<o.length;++h){var p=o[h];if(null==p.to){var d=Te(l,p.marker);d?c&&(p.to=null==d.to?null:d.to+u):p.to=i}}if(l)for(var f=0;f<l.length;++f){var m=l[f];if(null!=m.to&&(m.to+=u),null==m.from){var g=Te(o,m.marker);g||(m.from=u,c&&(o||(o=[])).push(m))}else m.from+=u,c&&(o||(o=[])).push(m)}o&&(o=Pe(o)),l&&l!=o&&(l=Pe(l));var v=[o];if(!c){var b,y=t.text.length-2;if(y>0&&o)for(var w=0;w<o.length;++w)null==o[w].to&&(b||(b=[])).push(new Ne(o[w].marker,null,null));for(var x=0;x<y;++x)v.push(b);v.push(l)}return v}function Pe(e){for(var t=0;t<e.length;++t){var n=e[t];null!=n.from&&n.from==n.to&&!1!==n.marker.clearWhenEmpty&&e.splice(t--,1)}return e.length?e:null}function Ie(e){var t=e.markedSpans;if(t){for(var n=0;n<t.length;++n)t[n].marker.detachLine(e);e.markedSpans=null}}function Oe(e,t){if(t){for(var n=0;n<t.length;++n)t[n].marker.attachLine(e);e.markedSpans=t}}function Me(e){return e.inclusiveLeft?-1:0}function Re(e){return e.inclusiveRight?1:0}function De(e,t){var n=e.lines.length-t.lines.length;if(0!=n)return n;var r=e.find(),i=t.find(),s=ve(r.from,i.from)||Me(e)-Me(t);if(s)return-s;var a=ve(r.to,i.to)||Re(e)-Re(t);return a||t.id-e.id}function Fe(e,t){var n,r=Se&&e.markedSpans;if(r)for(var i=void 0,s=0;s<r.length;++s)(i=r[s]).marker.collapsed&&null==(t?i.from:i.to)&&(!n||De(n,i.marker)<0)&&(n=i.marker);return n}function Ve(e){return Fe(e,!0)}function je(e){return Fe(e,!1)}function Be(e,t){var n,r=Se&&e.markedSpans;if(r)for(var i=0;i<r.length;++i){var s=r[i];s.marker.collapsed&&(null==s.from||s.from<t)&&(null==s.to||s.to>t)&&(!n||De(n,s.marker)<0)&&(n=s.marker)}return n}function Ue(e,t,n,r,i){var s=le(e,t),a=Se&&s.markedSpans;if(a)for(var o=0;o<a.length;++o){var l=a[o];if(l.marker.collapsed){var c=l.marker.find(0),u=ve(c.from,n)||Me(l.marker)-Me(i),h=ve(c.to,r)||Re(l.marker)-Re(i);if(!(u>=0&&h<=0||u<=0&&h>=0)&&(u<=0&&(l.marker.inclusiveRight&&i.inclusiveLeft?ve(c.to,n)>=0:ve(c.to,n)>0)||u>=0&&(l.marker.inclusiveRight&&i.inclusiveLeft?ve(c.from,r)<=0:ve(c.from,r)<0)))return!0}}}function He(e){for(var t;t=Ve(e);)e=t.find(-1,!0).line;return e}function $e(e,t){var n=le(e,t),r=He(n);return n==r?t:pe(r)}function ze(e,t){if(t>e.lastLine())return t;var n,r=le(e,t);if(!We(e,r))return t;for(;n=je(r);)r=n.find(1,!0).line;return pe(r)+1}function We(e,t){var n=Se&&t.markedSpans;if(n)for(var r=void 0,i=0;i<n.length;++i)if((r=n[i]).marker.collapsed){if(null==r.from)return!0;if(!r.marker.widgetNode&&0==r.from&&r.marker.inclusiveLeft&&qe(e,t,r))return!0}}function qe(e,t,n){if(null==n.to){var r=n.marker.find(1,!0);return qe(e,r.line,Te(r.line.markedSpans,n.marker))}if(n.marker.inclusiveRight&&n.to==t.text.length)return!0;for(var i=void 0,s=0;s<t.markedSpans.length;++s)if((i=t.markedSpans[s]).marker.collapsed&&!i.marker.widgetNode&&i.from==n.to&&(null==i.to||i.to!=n.from)&&(i.marker.inclusiveLeft||n.marker.inclusiveRight)&&qe(e,t,i))return!0}function Ge(e){e=He(e);for(var t=0,n=e.parent,r=0;r<n.lines.length;++r){var i=n.lines[r];if(i==e)break;t+=i.height}for(var s=n.parent;s;s=(n=s).parent)for(var a=0;a<s.children.length;++a){var o=s.children[a];if(o==n)break;t+=o.height}return t}function Ke(e){if(0==e.height)return 0;for(var t,n=e.text.length,r=e;t=Ve(r);){var i=t.find(0,!0);r=i.from.line,n+=i.from.ch-i.to.ch}for(r=e;t=je(r);){var s=t.find(0,!0);n-=r.text.length-s.from.ch,r=s.to.line,n+=r.text.length-s.to.ch}return n}function Ye(e){var t=e.display,n=e.doc;t.maxLine=le(n,n.first),t.maxLineLength=Ke(t.maxLine),t.maxLineChanged=!0,n.iter(function(e){var n=Ke(e);n>t.maxLineLength&&(t.maxLineLength=n,t.maxLine=e)})}var Ze=null;function Qe(e,t,n){var r;Ze=null;for(var i=0;i<e.length;++i){var s=e[i];if(s.from<t&&s.to>t)return i;s.to==t&&(s.from!=s.to&&"before"==n?r=i:Ze=i),s.from==t&&(s.from!=s.to&&"before"!=n?r=i:Ze=i)}return null!=r?r:Ze}var Xe=function(){var e="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN",t="nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111";function n(n){return n<=247?e.charAt(n):1424<=n&&n<=1524?"R":1536<=n&&n<=1785?t.charAt(n-1536):1774<=n&&n<=2220?"r":8192<=n&&n<=8203?"w":8204==n?"b":"L"}var r=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,i=/[stwN]/,s=/[LRr]/,a=/[Lb1n]/,o=/[1n]/;function l(e,t,n){this.level=e,this.from=t,this.to=n}return function(e,t){var c="ltr"==t?"L":"R";if(0==e.length||"ltr"==t&&!r.test(e))return!1;for(var u=e.length,h=[],p=0;p<u;++p)h.push(n(e.charCodeAt(p)));for(var d=0,f=c;d<u;++d){var m=h[d];"m"==m?h[d]=f:f=m}for(var g=0,v=c;g<u;++g){var b=h[g];"1"==b&&"r"==v?h[g]="n":s.test(b)&&(v=b,"r"==b&&(h[g]="R"))}for(var y=1,w=h[0];y<u-1;++y){var x=h[y];"+"==x&&"1"==w&&"1"==h[y+1]?h[y]="1":","!=x||w!=h[y+1]||"1"!=w&&"n"!=w||(h[y]=w),w=x}for(var E=0;E<u;++E){var k=h[E];if(","==k)h[E]="N";else if("%"==k){var C=void 0;for(C=E+1;C<u&&"%"==h[C];++C);for(var _=E&&"!"==h[E-1]||C<u&&"1"==h[C]?"1":"N",S=E;S<C;++S)h[S]=_;E=C-1}}for(var N=0,T=c;N<u;++N){var A=h[N];"L"==T&&"1"==A?h[N]="L":s.test(A)&&(T=A)}for(var L=0;L<u;++L)if(i.test(h[L])){var P=void 0;for(P=L+1;P<u&&i.test(h[P]);++P);for(var I="L"==(L?h[L-1]:c),O="L"==(P<u?h[P]:c),M=I==O?I?"L":"R":c,R=L;R<P;++R)h[R]=M;L=P-1}for(var D,F=[],V=0;V<u;)if(a.test(h[V])){var j=V;for(++V;V<u&&a.test(h[V]);++V);F.push(new l(0,j,V))}else{var B=V,U=F.length;for(++V;V<u&&"L"!=h[V];++V);for(var H=B;H<V;)if(o.test(h[H])){B<H&&F.splice(U,0,new l(1,B,H));var $=H;for(++H;H<V&&o.test(h[H]);++H);F.splice(U,0,new l(2,$,H)),B=H}else++H;B<V&&F.splice(U,0,new l(1,B,V))}return"ltr"==t&&(1==F[0].level&&(D=e.match(/^\s+/))&&(F[0].from=D[0].length,F.unshift(new l(0,0,D[0].length))),1==Y(F).level&&(D=e.match(/\s+$/))&&(Y(F).to-=D[0].length,F.push(new l(0,u-D[0].length,u)))),"rtl"==t?F.reverse():F}}();function Je(e,t){var n=e.order;return null==n&&(n=e.order=Xe(e.text,t)),n}var et=[],tt=function(e,t,n){if(e.addEventListener)e.addEventListener(t,n,!1);else if(e.attachEvent)e.attachEvent("on"+t,n);else{var r=e._handlers||(e._handlers={});r[t]=(r[t]||et).concat(n)}};function nt(e,t){return e._handlers&&e._handlers[t]||et}function rt(e,t,n){if(e.removeEventListener)e.removeEventListener(t,n,!1);else if(e.detachEvent)e.detachEvent("on"+t,n);else{var r=e._handlers,i=r&&r[t];if(i){var s=B(i,n);s>-1&&(r[t]=i.slice(0,s).concat(i.slice(s+1)))}}}function it(e,t){var n=nt(e,t);if(n.length)for(var r=Array.prototype.slice.call(arguments,2),i=0;i<n.length;++i)n[i].apply(null,r)}function st(e,t,n){return"string"==typeof t&&(t={type:t,preventDefault:function(){this.defaultPrevented=!0}}),it(e,n||t.type,e,t),ht(t)||t.codemirrorIgnore}function at(e){var t=e._handlers&&e._handlers.cursorActivity;if(t)for(var n=e.curOp.cursorActivityHandlers||(e.curOp.cursorActivityHandlers=[]),r=0;r<t.length;++r)-1==B(n,t[r])&&n.push(t[r])}function ot(e,t){return nt(e,t).length>0}function lt(e){e.prototype.on=function(e,t){tt(this,e,t)},e.prototype.off=function(e,t){rt(this,e,t)}}function ct(e){e.preventDefault?e.preventDefault():e.returnValue=!1}function ut(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}function ht(e){return null!=e.defaultPrevented?e.defaultPrevented:0==e.returnValue}function pt(e){ct(e),ut(e)}function dt(e){return e.target||e.srcElement}function ft(e){var t=e.which;return null==t&&(1&e.button?t=1:2&e.button?t=3:4&e.button&&(t=2)),b&&e.ctrlKey&&1==t&&(t=3),t}var mt,gt,vt=function(){if(a&&o<9)return!1;var e=A("div");return"draggable"in e||"dragDrop"in e}();function bt(e){if(null==mt){var t=A("span","​");T(e,A("span",[t,document.createTextNode("x")])),0!=e.firstChild.offsetHeight&&(mt=t.offsetWidth<=1&&t.offsetHeight>2&&!(a&&o<8))}var n=mt?A("span","​"):A("span"," ",null,"display: inline-block; width: 1px; margin-right: -1px");return n.setAttribute("cm-text",""),n}function yt(e){if(null!=gt)return gt;var t=T(e,document.createTextNode("AخA")),n=_(t,0,1).getBoundingClientRect(),r=_(t,1,2).getBoundingClientRect();return N(e),!(!n||n.left==n.right)&&(gt=r.right-n.right<3)}var wt=3!="\n\nb".split(/\n/).length?function(e){for(var t=0,n=[],r=e.length;t<=r;){var i=e.indexOf("\n",t);-1==i&&(i=e.length);var s=e.slice(t,"\r"==e.charAt(i-1)?i-1:i),a=s.indexOf("\r");-1!=a?(n.push(s.slice(0,a)),t+=a+1):(n.push(s),t=i+1)}return n}:function(e){return e.split(/\r\n?|\n/)},xt=window.getSelection?function(e){try{return e.selectionStart!=e.selectionEnd}catch(t){return!1}}:function(e){var t;try{t=e.ownerDocument.selection.createRange()}catch(n){}return!(!t||t.parentElement()!=e)&&0!=t.compareEndPoints("StartToEnd",t)},Et=function(){var e=A("div");return"oncopy"in e||(e.setAttribute("oncopy","return;"),"function"==typeof e.oncopy)}(),kt=null;var Ct={},_t={};function St(e){if("string"==typeof e&&_t.hasOwnProperty(e))e=_t[e];else if(e&&"string"==typeof e.name&&_t.hasOwnProperty(e.name)){var t=_t[e.name];"string"==typeof t&&(t={name:t}),(e=X(t,e)).name=t.name}else{if("string"==typeof e&&/^[\w\-]+\/[\w\-]+\+xml$/.test(e))return St("application/xml");if("string"==typeof e&&/^[\w\-]+\/[\w\-]+\+json$/.test(e))return St("application/json")}return"string"==typeof e?{name:e}:e||{name:"null"}}function Nt(e,t){t=St(t);var n=Ct[t.name];if(!n)return Nt(e,"text/plain");var r=n(e,t);if(Tt.hasOwnProperty(t.name)){var i=Tt[t.name];for(var s in i)i.hasOwnProperty(s)&&(r.hasOwnProperty(s)&&(r["_"+s]=r[s]),r[s]=i[s])}if(r.name=t.name,t.helperType&&(r.helperType=t.helperType),t.modeProps)for(var a in t.modeProps)r[a]=t.modeProps[a];return r}var Tt={};function At(e,t){var n=Tt.hasOwnProperty(e)?Tt[e]:Tt[e]={};F(t,n)}function Lt(e,t){if(!0===t)return t;if(e.copyState)return e.copyState(t);var n={};for(var r in t){var i=t[r];i instanceof Array&&(i=i.concat([])),n[r]=i}return n}function Pt(e,t){for(var n;e.innerMode&&(n=e.innerMode(t))&&n.mode!=e;)t=n.state,e=n.mode;return n||{mode:e,state:t}}function It(e,t,n){return!e.startState||e.startState(t,n)}var Ot=function(e,t,n){this.pos=this.start=0,this.string=e,this.tabSize=t||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0,this.lineOracle=n};Ot.prototype.eol=function(){return this.pos>=this.string.length},Ot.prototype.sol=function(){return this.pos==this.lineStart},Ot.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},Ot.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},Ot.prototype.eat=function(e){var t=this.string.charAt(this.pos);if("string"==typeof e?t==e:t&&(e.test?e.test(t):e(t)))return++this.pos,t},Ot.prototype.eatWhile=function(e){for(var t=this.pos;this.eat(e););return this.pos>t},Ot.prototype.eatSpace=function(){for(var e=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e},Ot.prototype.skipToEnd=function(){this.pos=this.string.length},Ot.prototype.skipTo=function(e){var t=this.string.indexOf(e,this.pos);if(t>-1)return this.pos=t,!0},Ot.prototype.backUp=function(e){this.pos-=e},Ot.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=V(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?V(this.string,this.lineStart,this.tabSize):0)},Ot.prototype.indentation=function(){return V(this.string,null,this.tabSize)-(this.lineStart?V(this.string,this.lineStart,this.tabSize):0)},Ot.prototype.match=function(e,t,n){if("string"!=typeof e){var r=this.string.slice(this.pos).match(e);return r&&r.index>0?null:(r&&!1!==t&&(this.pos+=r[0].length),r)}var i=function(e){return n?e.toLowerCase():e},s=this.string.substr(this.pos,e.length);if(i(s)==i(e))return!1!==t&&(this.pos+=e.length),!0},Ot.prototype.current=function(){return this.string.slice(this.start,this.pos)},Ot.prototype.hideFirstChars=function(e,t){this.lineStart+=e;try{return t()}finally{this.lineStart-=e}},Ot.prototype.lookAhead=function(e){var t=this.lineOracle;return t&&t.lookAhead(e)},Ot.prototype.baseToken=function(){var e=this.lineOracle;return e&&e.baseToken(this.pos)};var Mt=function(e,t){this.state=e,this.lookAhead=t},Rt=function(e,t,n,r){this.state=t,this.doc=e,this.line=n,this.maxLookAhead=r||0,this.baseTokens=null,this.baseTokenPos=1};function Dt(e,t,n,r){var i=[e.state.modeGen],s={};Wt(e,t.text,e.doc.mode,n,function(e,t){return i.push(e,t)},s,r);for(var a=n.state,o=function(r){n.baseTokens=i;var o=e.state.overlays[r],l=1,c=0;n.state=!0,Wt(e,t.text,o.mode,n,function(e,t){for(var n=l;c<e;){var r=i[l];r>e&&i.splice(l,1,e,i[l+1],r),l+=2,c=Math.min(e,r)}if(t)if(o.opaque)i.splice(n,l-n,e,"overlay "+t),l=n+2;else for(;n<l;n+=2){var s=i[n+1];i[n+1]=(s?s+" ":"")+"overlay "+t}},s),n.state=a,n.baseTokens=null,n.baseTokenPos=1},l=0;l<e.state.overlays.length;++l)o(l);return{styles:i,classes:s.bgClass||s.textClass?s:null}}function Ft(e,t,n){if(!t.styles||t.styles[0]!=e.state.modeGen){var r=Vt(e,pe(t)),i=t.text.length>e.options.maxHighlightLength&&Lt(e.doc.mode,r.state),s=Dt(e,t,r);i&&(r.state=i),t.stateAfter=r.save(!i),t.styles=s.styles,s.classes?t.styleClasses=s.classes:t.styleClasses&&(t.styleClasses=null),n===e.doc.highlightFrontier&&(e.doc.modeFrontier=Math.max(e.doc.modeFrontier,++e.doc.highlightFrontier))}return t.styles}function Vt(e,t,n){var r=e.doc,i=e.display;if(!r.mode.startState)return new Rt(r,!0,t);var s=function(e,t,n){for(var r,i,s=e.doc,a=n?-1:t-(e.doc.mode.innerMode?1e3:100),o=t;o>a;--o){if(o<=s.first)return s.first;var l=le(s,o-1),c=l.stateAfter;if(c&&(!n||o+(c instanceof Mt?c.lookAhead:0)<=s.modeFrontier))return o;var u=V(l.text,null,e.options.tabSize);(null==i||r>u)&&(i=o-1,r=u)}return i}(e,t,n),a=s>r.first&&le(r,s-1).stateAfter,o=a?Rt.fromSaved(r,a,s):new Rt(r,It(r.mode),s);return r.iter(s,t,function(n){jt(e,n.text,o);var r=o.line;n.stateAfter=r==t-1||r%5==0||r>=i.viewFrom&&r<i.viewTo?o.save():null,o.nextLine()}),n&&(r.modeFrontier=o.line),o}function jt(e,t,n,r){var i=e.doc.mode,s=new Ot(t,e.options.tabSize,n);for(s.start=s.pos=r||0,""==t&&Bt(i,n.state);!s.eol();)Ut(i,s,n.state),s.start=s.pos}function Bt(e,t){if(e.blankLine)return e.blankLine(t);if(e.innerMode){var n=Pt(e,t);return n.mode.blankLine?n.mode.blankLine(n.state):void 0}}function Ut(e,t,n,r){for(var i=0;i<10;i++){r&&(r[0]=Pt(e,n).mode);var s=e.token(t,n);if(t.pos>t.start)return s}throw new Error("Mode "+e.name+" failed to advance stream.")}Rt.prototype.lookAhead=function(e){var t=this.doc.getLine(this.line+e);return null!=t&&e>this.maxLookAhead&&(this.maxLookAhead=e),t},Rt.prototype.baseToken=function(e){if(!this.baseTokens)return null;for(;this.baseTokens[this.baseTokenPos]<=e;)this.baseTokenPos+=2;var t=this.baseTokens[this.baseTokenPos+1];return{type:t&&t.replace(/( |^)overlay .*/,""),size:this.baseTokens[this.baseTokenPos]-e}},Rt.prototype.nextLine=function(){this.line++,this.maxLookAhead>0&&this.maxLookAhead--},Rt.fromSaved=function(e,t,n){return t instanceof Mt?new Rt(e,Lt(e.mode,t.state),n,t.lookAhead):new Rt(e,Lt(e.mode,t),n)},Rt.prototype.save=function(e){var t=!1!==e?Lt(this.doc.mode,this.state):this.state;return this.maxLookAhead>0?new Mt(t,this.maxLookAhead):t};var Ht=function(e,t,n){this.start=e.start,this.end=e.pos,this.string=e.current(),this.type=t||null,this.state=n};function $t(e,t,n,r){var i,s=e.doc,a=s.mode;t=ke(s,t);var o,l=le(s,t.line),c=Vt(e,t.line,n),u=new Ot(l.text,e.options.tabSize,c);for(r&&(o=[]);(r||u.pos<t.ch)&&!u.eol();)u.start=u.pos,i=Ut(a,u,c.state),r&&o.push(new Ht(u,i,Lt(s.mode,c.state)));return r?o:new Ht(u,i,c.state)}function zt(e,t){if(e)for(;;){var n=e.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!n)break;e=e.slice(0,n.index)+e.slice(n.index+n[0].length);var r=n[1]?"bgClass":"textClass";null==t[r]?t[r]=n[2]:new RegExp("(?:^|s)"+n[2]+"(?:$|s)").test(t[r])||(t[r]+=" "+n[2])}return e}function Wt(e,t,n,r,i,s,a){var o=n.flattenSpans;null==o&&(o=e.options.flattenSpans);var l,c=0,u=null,h=new Ot(t,e.options.tabSize,r),p=e.options.addModeClass&&[null];for(""==t&&zt(Bt(n,r.state),s);!h.eol();){if(h.pos>e.options.maxHighlightLength?(o=!1,a&&jt(e,t,r,h.pos),h.pos=t.length,l=null):l=zt(Ut(n,h,r.state,p),s),p){var d=p[0].name;d&&(l="m-"+(l?d+" "+l:d))}if(!o||u!=l){for(;c<h.start;)c=Math.min(h.start,c+5e3),i(c,u);u=l}h.start=h.pos}for(;c<h.pos;){var f=Math.min(h.pos,c+5e3);i(f,u),c=f}}var qt=function(e,t,n){this.text=e,Oe(this,t),this.height=n?n(this):1};function Gt(e){e.parent=null,Ie(e)}qt.prototype.lineNo=function(){return pe(this)},lt(qt);var Kt={},Yt={};function Zt(e,t){if(!e||/^\s*$/.test(e))return null;var n=t.addModeClass?Yt:Kt;return n[e]||(n[e]=e.replace(/\S+/g,"cm-$&"))}function Qt(e,t){var n=L("span",null,null,l?"padding-right: .1px":null),r={pre:L("pre",[n],"CodeMirror-line"),content:n,col:0,pos:0,cm:e,trailingSpace:!1,splitSpaces:e.getOption("lineWrapping")};t.measure={};for(var i=0;i<=(t.rest?t.rest.length:0);i++){var s=i?t.rest[i-1]:t.line,a=void 0;r.pos=0,r.addToken=Jt,yt(e.display.measure)&&(a=Je(s,e.doc.direction))&&(r.addToken=en(r.addToken,a)),r.map=[];var o=t!=e.display.externalMeasured&&pe(s);nn(s,r,Ft(e,s,o)),s.styleClasses&&(s.styleClasses.bgClass&&(r.bgClass=M(s.styleClasses.bgClass,r.bgClass||"")),s.styleClasses.textClass&&(r.textClass=M(s.styleClasses.textClass,r.textClass||""))),0==r.map.length&&r.map.push(0,0,r.content.appendChild(bt(e.display.measure))),0==i?(t.measure.map=r.map,t.measure.cache={}):((t.measure.maps||(t.measure.maps=[])).push(r.map),(t.measure.caches||(t.measure.caches=[])).push({}))}if(l){var c=r.content.lastChild;(/\bcm-tab\b/.test(c.className)||c.querySelector&&c.querySelector(".cm-tab"))&&(r.content.className="cm-tab-wrap-hack")}return it(e,"renderLine",e,t.line,r.pre),r.pre.className&&(r.textClass=M(r.pre.className,r.textClass||"")),r}function Xt(e){var t=A("span","•","cm-invalidchar");return t.title="\\u"+e.charCodeAt(0).toString(16),t.setAttribute("aria-label",t.title),t}function Jt(e,t,n,r,i,s,l){if(t){var c,u=e.splitSpaces?function(e,t){if(e.length>1&&!/  /.test(e))return e;for(var n=t,r="",i=0;i<e.length;i++){var s=e.charAt(i);" "!=s||!n||i!=e.length-1&&32!=e.charCodeAt(i+1)||(s=" "),r+=s,n=" "==s}return r}(t,e.trailingSpace):t,h=e.cm.state.specialChars,p=!1;if(h.test(t)){c=document.createDocumentFragment();for(var d=0;;){h.lastIndex=d;var f=h.exec(t),m=f?f.index-d:t.length-d;if(m){var g=document.createTextNode(u.slice(d,d+m));a&&o<9?c.appendChild(A("span",[g])):c.appendChild(g),e.map.push(e.pos,e.pos+m,g),e.col+=m,e.pos+=m}if(!f)break;d+=m+1;var v=void 0;if("\t"==f[0]){var b=e.cm.options.tabSize,y=b-e.col%b;(v=c.appendChild(A("span",K(y),"cm-tab"))).setAttribute("role","presentation"),v.setAttribute("cm-text","\t"),e.col+=y}else"\r"==f[0]||"\n"==f[0]?((v=c.appendChild(A("span","\r"==f[0]?"␍":"␤","cm-invalidchar"))).setAttribute("cm-text",f[0]),e.col+=1):((v=e.cm.options.specialCharPlaceholder(f[0])).setAttribute("cm-text",f[0]),a&&o<9?c.appendChild(A("span",[v])):c.appendChild(v),e.col+=1);e.map.push(e.pos,e.pos+1,v),e.pos++}}else e.col+=t.length,c=document.createTextNode(u),e.map.push(e.pos,e.pos+t.length,c),a&&o<9&&(p=!0),e.pos+=t.length;if(e.trailingSpace=32==u.charCodeAt(t.length-1),n||r||i||p||l){var w=n||"";r&&(w+=r),i&&(w+=i);var x=A("span",[c],w,l);return s&&(x.title=s),e.content.appendChild(x)}e.content.appendChild(c)}}function en(e,t){return function(n,r,i,s,a,o,l){i=i?i+" cm-force-border":"cm-force-border";for(var c=n.pos,u=c+r.length;;){for(var h=void 0,p=0;p<t.length&&!((h=t[p]).to>c&&h.from<=c);p++);if(h.to>=u)return e(n,r,i,s,a,o,l);e(n,r.slice(0,h.to-c),i,s,null,o,l),s=null,r=r.slice(h.to-c),c=h.to}}}function tn(e,t,n,r){var i=!r&&n.widgetNode;i&&e.map.push(e.pos,e.pos+t,i),!r&&e.cm.display.input.needsContentAttribute&&(i||(i=e.content.appendChild(document.createElement("span"))),i.setAttribute("cm-marker",n.id)),i&&(e.cm.display.input.setUneditable(i),e.content.appendChild(i)),e.pos+=t,e.trailingSpace=!1}function nn(e,t,n){var r=e.markedSpans,i=e.text,s=0;if(r)for(var a,o,l,c,u,h,p,d=i.length,f=0,m=1,g="",v=0;;){if(v==f){l=c=u=h=o="",p=null,v=1/0;for(var b=[],y=void 0,w=0;w<r.length;++w){var x=r[w],E=x.marker;"bookmark"==E.type&&x.from==f&&E.widgetNode?b.push(E):x.from<=f&&(null==x.to||x.to>f||E.collapsed&&x.to==f&&x.from==f)?(null!=x.to&&x.to!=f&&v>x.to&&(v=x.to,c=""),E.className&&(l+=" "+E.className),E.css&&(o=(o?o+";":"")+E.css),E.startStyle&&x.from==f&&(u+=" "+E.startStyle),E.endStyle&&x.to==v&&(y||(y=[])).push(E.endStyle,x.to),E.title&&!h&&(h=E.title),E.collapsed&&(!p||De(p.marker,E)<0)&&(p=x)):x.from>f&&v>x.from&&(v=x.from)}if(y)for(var k=0;k<y.length;k+=2)y[k+1]==v&&(c+=" "+y[k]);if(!p||p.from==f)for(var C=0;C<b.length;++C)tn(t,0,b[C]);if(p&&(p.from||0)==f){if(tn(t,(null==p.to?d+1:p.to)-f,p.marker,null==p.from),null==p.to)return;p.to==f&&(p=!1)}}if(f>=d)break;for(var _=Math.min(d,v);;){if(g){var S=f+g.length;if(!p){var N=S>_?g.slice(0,_-f):g;t.addToken(t,N,a?a+l:l,u,f+N.length==v?c:"",h,o)}if(S>=_){g=g.slice(_-f),f=_;break}f=S,u=""}g=i.slice(s,s=n[m++]),a=Zt(n[m++],t.cm.options)}}else for(var T=1;T<n.length;T+=2)t.addToken(t,i.slice(s,s=n[T]),Zt(n[T+1],t.cm.options))}function rn(e,t,n){this.line=t,this.rest=function(e){var t,n;for(;t=je(e);)e=t.find(1,!0).line,(n||(n=[])).push(e);return n}(t),this.size=this.rest?pe(Y(this.rest))-n+1:1,this.node=this.text=null,this.hidden=We(e,t)}function sn(e,t,n){for(var r,i=[],s=t;s<n;s=r){var a=new rn(e.doc,le(e.doc,s),s);r=s+a.size,i.push(a)}return i}var an=null;var on=null;function ln(e,t){var n=nt(e,t);if(n.length){var r,i=Array.prototype.slice.call(arguments,2);an?r=an.delayedCallbacks:on?r=on:(r=on=[],setTimeout(cn,0));for(var s=function(e){r.push(function(){return n[e].apply(null,i)})},a=0;a<n.length;++a)s(a)}}function cn(){var e=on;on=null;for(var t=0;t<e.length;++t)e[t]()}function un(e,t,n,r){for(var i=0;i<t.changes.length;i++){var s=t.changes[i];"text"==s?dn(e,t):"gutter"==s?mn(e,t,n,r):"class"==s?fn(e,t):"widget"==s&&gn(e,t,r)}t.changes=null}function hn(e){return e.node==e.text&&(e.node=A("div",null,null,"position: relative"),e.text.parentNode&&e.text.parentNode.replaceChild(e.node,e.text),e.node.appendChild(e.text),a&&o<8&&(e.node.style.zIndex=2)),e.node}function pn(e,t){var n=e.display.externalMeasured;return n&&n.line==t.line?(e.display.externalMeasured=null,t.measure=n.measure,n.built):Qt(e,t)}function dn(e,t){var n=t.text.className,r=pn(e,t);t.text==t.node&&(t.node=r.pre),t.text.parentNode.replaceChild(r.pre,t.text),t.text=r.pre,r.bgClass!=t.bgClass||r.textClass!=t.textClass?(t.bgClass=r.bgClass,t.textClass=r.textClass,fn(e,t)):n&&(t.text.className=n)}function fn(e,t){!function(e,t){var n=t.bgClass?t.bgClass+" "+(t.line.bgClass||""):t.line.bgClass;n&&(n+=" CodeMirror-linebackground");if(t.background)n?t.background.className=n:(t.background.parentNode.removeChild(t.background),t.background=null);else if(n){var r=hn(t);t.background=r.insertBefore(A("div",null,n),r.firstChild),e.display.input.setUneditable(t.background)}}(e,t),t.line.wrapClass?hn(t).className=t.line.wrapClass:t.node!=t.text&&(t.node.className="");var n=t.textClass?t.textClass+" "+(t.line.textClass||""):t.line.textClass;t.text.className=n||""}function mn(e,t,n,r){if(t.gutter&&(t.node.removeChild(t.gutter),t.gutter=null),t.gutterBackground&&(t.node.removeChild(t.gutterBackground),t.gutterBackground=null),t.line.gutterClass){var i=hn(t);t.gutterBackground=A("div",null,"CodeMirror-gutter-background "+t.line.gutterClass,"left: "+(e.options.fixedGutter?r.fixedPos:-r.gutterTotalWidth)+"px; width: "+r.gutterTotalWidth+"px"),e.display.input.setUneditable(t.gutterBackground),i.insertBefore(t.gutterBackground,t.text)}var s=t.line.gutterMarkers;if(e.options.lineNumbers||s){var a=hn(t),o=t.gutter=A("div",null,"CodeMirror-gutter-wrapper","left: "+(e.options.fixedGutter?r.fixedPos:-r.gutterTotalWidth)+"px");if(e.display.input.setUneditable(o),a.insertBefore(o,t.text),t.line.gutterClass&&(o.className+=" "+t.line.gutterClass),!e.options.lineNumbers||s&&s["CodeMirror-linenumbers"]||(t.lineNumber=o.appendChild(A("div",me(e.options,n),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+r.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+e.display.lineNumInnerWidth+"px"))),s)for(var l=0;l<e.options.gutters.length;++l){var c=e.options.gutters[l],u=s.hasOwnProperty(c)&&s[c];u&&o.appendChild(A("div",[u],"CodeMirror-gutter-elt","left: "+r.gutterLeft[c]+"px; width: "+r.gutterWidth[c]+"px"))}}}function gn(e,t,n){t.alignable&&(t.alignable=null);for(var r=t.node.firstChild,i=void 0;r;r=i)i=r.nextSibling,"CodeMirror-linewidget"==r.className&&t.node.removeChild(r);bn(e,t,n)}function vn(e,t,n,r){var i=pn(e,t);return t.text=t.node=i.pre,i.bgClass&&(t.bgClass=i.bgClass),i.textClass&&(t.textClass=i.textClass),fn(e,t),mn(e,t,n,r),bn(e,t,r),t.node}function bn(e,t,n){if(yn(e,t.line,t,n,!0),t.rest)for(var r=0;r<t.rest.length;r++)yn(e,t.rest[r],t,n,!1)}function yn(e,t,n,r,i){if(t.widgets)for(var s=hn(n),a=0,o=t.widgets;a<o.length;++a){var l=o[a],c=A("div",[l.node],"CodeMirror-linewidget");l.handleMouseEvents||c.setAttribute("cm-ignore-events","true"),wn(l,c,n,r),e.display.input.setUneditable(c),i&&l.above?s.insertBefore(c,n.gutter||n.text):s.appendChild(c),ln(l,"redraw")}}function wn(e,t,n,r){if(e.noHScroll){(n.alignable||(n.alignable=[])).push(t);var i=r.wrapperWidth;t.style.left=r.fixedPos+"px",e.coverGutter||(i-=r.gutterTotalWidth,t.style.paddingLeft=r.gutterTotalWidth+"px"),t.style.width=i+"px"}e.coverGutter&&(t.style.zIndex=5,t.style.position="relative",e.noHScroll||(t.style.marginLeft=-r.gutterTotalWidth+"px"))}function xn(e){if(null!=e.height)return e.height;var t=e.doc.cm;if(!t)return 0;if(!P(document.body,e.node)){var n="position: relative;";e.coverGutter&&(n+="margin-left: -"+t.display.gutters.offsetWidth+"px;"),e.noHScroll&&(n+="width: "+t.display.wrapper.clientWidth+"px;"),T(t.display.measure,A("div",[e.node],null,n))}return e.height=e.node.parentNode.offsetHeight}function En(e,t){for(var n=dt(t);n!=e.wrapper;n=n.parentNode)if(!n||1==n.nodeType&&"true"==n.getAttribute("cm-ignore-events")||n.parentNode==e.sizer&&n!=e.mover)return!0}function kn(e){return e.lineSpace.offsetTop}function Cn(e){return e.mover.offsetHeight-e.lineSpace.offsetHeight}function _n(e){if(e.cachedPaddingH)return e.cachedPaddingH;var t=T(e.measure,A("pre","x")),n=window.getComputedStyle?window.getComputedStyle(t):t.currentStyle,r={left:parseInt(n.paddingLeft),right:parseInt(n.paddingRight)};return isNaN(r.left)||isNaN(r.right)||(e.cachedPaddingH=r),r}function Sn(e){return U-e.display.nativeBarWidth}function Nn(e){return e.display.scroller.clientWidth-Sn(e)-e.display.barWidth}function Tn(e){return e.display.scroller.clientHeight-Sn(e)-e.display.barHeight}function An(e,t,n){if(e.line==t)return{map:e.measure.map,cache:e.measure.cache};for(var r=0;r<e.rest.length;r++)if(e.rest[r]==t)return{map:e.measure.maps[r],cache:e.measure.caches[r]};for(var i=0;i<e.rest.length;i++)if(pe(e.rest[i])>n)return{map:e.measure.maps[i],cache:e.measure.caches[i],before:!0}}function Ln(e,t,n,r){return On(e,In(e,t),n,r)}function Pn(e,t){if(t>=e.display.viewFrom&&t<e.display.viewTo)return e.display.view[lr(e,t)];var n=e.display.externalMeasured;return n&&t>=n.lineN&&t<n.lineN+n.size?n:void 0}function In(e,t){var n=pe(t),r=Pn(e,n);r&&!r.text?r=null:r&&r.changes&&(un(e,r,n,rr(e)),e.curOp.forceUpdate=!0),r||(r=function(e,t){var n=pe(t=He(t)),r=e.display.externalMeasured=new rn(e.doc,t,n);r.lineN=n;var i=r.built=Qt(e,r);return r.text=i.pre,T(e.display.lineMeasure,i.pre),r}(e,t));var i=An(r,t,n);return{line:t,view:r,rect:null,map:i.map,cache:i.cache,before:i.before,hasHeights:!1}}function On(e,t,n,r,i){t.before&&(n=-1);var s,l=n+(r||"");return t.cache.hasOwnProperty(l)?s=t.cache[l]:(t.rect||(t.rect=t.view.text.getBoundingClientRect()),t.hasHeights||(!function(e,t,n){var r=e.options.lineWrapping,i=r&&Nn(e);if(!t.measure.heights||r&&t.measure.width!=i){var s=t.measure.heights=[];if(r){t.measure.width=i;for(var a=t.text.firstChild.getClientRects(),o=0;o<a.length-1;o++){var l=a[o],c=a[o+1];Math.abs(l.bottom-c.bottom)>2&&s.push((l.bottom+c.top)/2-n.top)}}s.push(n.bottom-n.top)}}(e,t.view,t.rect),t.hasHeights=!0),(s=function(e,t,n,r){var i,s=Dn(t.map,n,r),l=s.node,c=s.start,u=s.end,h=s.collapse;if(3==l.nodeType){for(var p=0;p<4;p++){for(;c&&ie(t.line.text.charAt(s.coverStart+c));)--c;for(;s.coverStart+u<s.coverEnd&&ie(t.line.text.charAt(s.coverStart+u));)++u;if((i=a&&o<9&&0==c&&u==s.coverEnd-s.coverStart?l.parentNode.getBoundingClientRect():Fn(_(l,c,u).getClientRects(),r)).left||i.right||0==c)break;u=c,c-=1,h="right"}a&&o<11&&(i=function(e,t){if(!window.screen||null==screen.logicalXDPI||screen.logicalXDPI==screen.deviceXDPI||!function(e){if(null!=kt)return kt;var t=T(e,A("span","x")),n=t.getBoundingClientRect(),r=_(t,0,1).getBoundingClientRect();return kt=Math.abs(n.left-r.left)>1}(e))return t;var n=screen.logicalXDPI/screen.deviceXDPI,r=screen.logicalYDPI/screen.deviceYDPI;return{left:t.left*n,right:t.right*n,top:t.top*r,bottom:t.bottom*r}}(e.display.measure,i))}else{var d;c>0&&(h=r="right"),i=e.options.lineWrapping&&(d=l.getClientRects()).length>1?d["right"==r?d.length-1:0]:l.getBoundingClientRect()}if(a&&o<9&&!c&&(!i||!i.left&&!i.right)){var f=l.parentNode.getClientRects()[0];i=f?{left:f.left,right:f.left+nr(e.display),top:f.top,bottom:f.bottom}:Rn}for(var m=i.top-t.rect.top,g=i.bottom-t.rect.top,v=(m+g)/2,b=t.view.measure.heights,y=0;y<b.length-1&&!(v<b[y]);y++);var w=y?b[y-1]:0,x=b[y],E={left:("right"==h?i.right:i.left)-t.rect.left,right:("left"==h?i.left:i.right)-t.rect.left,top:w,bottom:x};i.left||i.right||(E.bogus=!0);e.options.singleCursorHeightPerLine||(E.rtop=m,E.rbottom=g);return E}(e,t,n,r)).bogus||(t.cache[l]=s)),{left:s.left,right:s.right,top:i?s.rtop:s.top,bottom:i?s.rbottom:s.bottom}}var Mn,Rn={left:0,right:0,top:0,bottom:0};function Dn(e,t,n){for(var r,i,s,a,o,l,c=0;c<e.length;c+=3)if(o=e[c],l=e[c+1],t<o?(i=0,s=1,a="left"):t<l?s=(i=t-o)+1:(c==e.length-3||t==l&&e[c+3]>t)&&(i=(s=l-o)-1,t>=l&&(a="right")),null!=i){if(r=e[c+2],o==l&&n==(r.insertLeft?"left":"right")&&(a=n),"left"==n&&0==i)for(;c&&e[c-2]==e[c-3]&&e[c-1].insertLeft;)r=e[2+(c-=3)],a="left";if("right"==n&&i==l-o)for(;c<e.length-3&&e[c+3]==e[c+4]&&!e[c+5].insertLeft;)r=e[(c+=3)+2],a="right";break}return{node:r,start:i,end:s,collapse:a,coverStart:o,coverEnd:l}}function Fn(e,t){var n=Rn;if("left"==t)for(var r=0;r<e.length&&(n=e[r]).left==n.right;r++);else for(var i=e.length-1;i>=0&&(n=e[i]).left==n.right;i--);return n}function Vn(e){if(e.measure&&(e.measure.cache={},e.measure.heights=null,e.rest))for(var t=0;t<e.rest.length;t++)e.measure.caches[t]={}}function jn(e){e.display.externalMeasure=null,N(e.display.lineMeasure);for(var t=0;t<e.display.view.length;t++)Vn(e.display.view[t])}function Bn(e){jn(e),e.display.cachedCharWidth=e.display.cachedTextHeight=e.display.cachedPaddingH=null,e.options.lineWrapping||(e.display.maxLineChanged=!0),e.display.lineNumChars=null}function Un(){return u&&g?-(document.body.getBoundingClientRect().left-parseInt(getComputedStyle(document.body).marginLeft)):window.pageXOffset||(document.documentElement||document.body).scrollLeft}function Hn(){return u&&g?-(document.body.getBoundingClientRect().top-parseInt(getComputedStyle(document.body).marginTop)):window.pageYOffset||(document.documentElement||document.body).scrollTop}function $n(e){var t=0;if(e.widgets)for(var n=0;n<e.widgets.length;++n)e.widgets[n].above&&(t+=xn(e.widgets[n]));return t}function zn(e,t,n,r,i){if(!i){var s=$n(t);n.top+=s,n.bottom+=s}if("line"==r)return n;r||(r="local");var a=Ge(t);if("local"==r?a+=kn(e.display):a-=e.display.viewOffset,"page"==r||"window"==r){var o=e.display.lineSpace.getBoundingClientRect();a+=o.top+("window"==r?0:Hn());var l=o.left+("window"==r?0:Un());n.left+=l,n.right+=l}return n.top+=a,n.bottom+=a,n}function Wn(e,t,n){if("div"==n)return t;var r=t.left,i=t.top;if("page"==n)r-=Un(),i-=Hn();else if("local"==n||!n){var s=e.display.sizer.getBoundingClientRect();r+=s.left,i+=s.top}var a=e.display.lineSpace.getBoundingClientRect();return{left:r-a.left,top:i-a.top}}function qn(e,t,n,r,i){return r||(r=le(e.doc,t.line)),zn(e,r,Ln(e,r,t.ch,i),n)}function Gn(e,t,n,r,i,s){function a(t,a){var o=On(e,i,t,a?"right":"left",s);return a?o.left=o.right:o.right=o.left,zn(e,r,o,n)}r=r||le(e.doc,t.line),i||(i=In(e,r));var o=Je(r,e.doc.direction),l=t.ch,c=t.sticky;if(l>=r.text.length?(l=r.text.length,c="before"):l<=0&&(l=0,c="after"),!o)return a("before"==c?l-1:l,"before"==c);function u(e,t,n){var r=o[t],i=1==r.level;return a(n?e-1:e,i!=n)}var h=Qe(o,l,c),p=Ze,d=u(l,h,"before"==c);return null!=p&&(d.other=u(l,p,"before"!=c)),d}function Kn(e,t){var n=0;t=ke(e.doc,t),e.options.lineWrapping||(n=nr(e.display)*t.ch);var r=le(e.doc,t.line),i=Ge(r)+kn(e.display);return{left:n,right:n,top:i,bottom:i+r.height}}function Yn(e,t,n,r,i){var s=ge(e,t,n);return s.xRel=i,r&&(s.outside=!0),s}function Zn(e,t,n){var r=e.doc;if((n+=e.display.viewOffset)<0)return Yn(r.first,0,null,!0,-1);var i=de(r,n),s=r.first+r.size-1;if(i>s)return Yn(r.first+r.size-1,le(r,s).text.length,null,!0,1);t<0&&(t=0);for(var a=le(r,i);;){var o=er(e,a,i,t,n),l=Be(a,o.ch+(o.xRel>0?1:0));if(!l)return o;var c=l.find(1);if(c.line==i)return c;a=le(r,i=c.line)}}function Qn(e,t,n,r){r-=$n(t);var i=t.text.length,s=ae(function(t){return On(e,n,t-1).bottom<=r},i,0);return i=ae(function(t){return On(e,n,t).top>r},s,i),{begin:s,end:i}}function Xn(e,t,n,r){n||(n=In(e,t));var i=zn(e,t,On(e,n,r),"line").top;return Qn(e,t,n,i)}function Jn(e,t,n,r){return!(e.bottom<=n)&&(e.top>n||(r?e.left:e.right)>t)}function er(e,t,n,r,i){i-=Ge(t);var s=In(e,t),a=$n(t),o=0,l=t.text.length,c=!0,u=Je(t,e.doc.direction);if(u){var h=(e.options.lineWrapping?function(e,t,n,r,i,s,a){var o=Qn(e,t,r,a),l=o.begin,c=o.end;/\s/.test(t.text.charAt(c-1))&&c--;for(var u=null,h=null,p=0;p<i.length;p++){var d=i[p];if(!(d.from>=c||d.to<=l)){var f=1!=d.level,m=On(e,r,f?Math.min(c,d.to)-1:Math.max(l,d.from)).right,g=m<s?s-m+1e9:m-s;(!u||h>g)&&(u=d,h=g)}}u||(u=i[i.length-1]);u.from<l&&(u={from:l,to:u.to,level:u.level});u.to>c&&(u={from:u.from,to:c,level:u.level});return u}:function(e,t,n,r,i,s,a){var o=ae(function(o){var l=i[o],c=1!=l.level;return Jn(Gn(e,ge(n,c?l.to:l.from,c?"before":"after"),"line",t,r),s,a,!0)},0,i.length-1),l=i[o];if(o>0){var c=1!=l.level,u=Gn(e,ge(n,c?l.from:l.to,c?"after":"before"),"line",t,r);Jn(u,s,a,!0)&&u.top>a&&(l=i[o-1])}return l})(e,t,n,s,u,r,i);c=1!=h.level,o=c?h.from:h.to-1,l=c?h.to:h.from-1}var p,d,f=null,m=null,g=ae(function(t){var n=On(e,s,t);return n.top+=a,n.bottom+=a,!!Jn(n,r,i,!1)&&(n.top<=i&&n.left<=r&&(f=t,m=n),!0)},o,l),v=!1;if(m){var b=r-m.left<m.right-r,y=b==c;g=f+(y?0:1),d=y?"after":"before",p=b?m.left:m.right}else{c||g!=l&&g!=o||g++,d=0==g?"after":g==t.text.length?"before":On(e,s,g-(c?1:0)).bottom+a<=i==c?"after":"before";var w=Gn(e,ge(n,g,d),"line",t,s);p=w.left,v=i<w.top||i>=w.bottom}return g=se(t.text,g,1),Yn(n,g,d,v,r-p)}function tr(e){if(null!=e.cachedTextHeight)return e.cachedTextHeight;if(null==Mn){Mn=A("pre");for(var t=0;t<49;++t)Mn.appendChild(document.createTextNode("x")),Mn.appendChild(A("br"));Mn.appendChild(document.createTextNode("x"))}T(e.measure,Mn);var n=Mn.offsetHeight/50;return n>3&&(e.cachedTextHeight=n),N(e.measure),n||1}function nr(e){if(null!=e.cachedCharWidth)return e.cachedCharWidth;var t=A("span","xxxxxxxxxx"),n=A("pre",[t]);T(e.measure,n);var r=t.getBoundingClientRect(),i=(r.right-r.left)/10;return i>2&&(e.cachedCharWidth=i),i||10}function rr(e){for(var t=e.display,n={},r={},i=t.gutters.clientLeft,s=t.gutters.firstChild,a=0;s;s=s.nextSibling,++a)n[e.options.gutters[a]]=s.offsetLeft+s.clientLeft+i,r[e.options.gutters[a]]=s.clientWidth;return{fixedPos:ir(t),gutterTotalWidth:t.gutters.offsetWidth,gutterLeft:n,gutterWidth:r,wrapperWidth:t.wrapper.clientWidth}}function ir(e){return e.scroller.getBoundingClientRect().left-e.sizer.getBoundingClientRect().left}function sr(e){var t=tr(e.display),n=e.options.lineWrapping,r=n&&Math.max(5,e.display.scroller.clientWidth/nr(e.display)-3);return function(i){if(We(e.doc,i))return 0;var s=0;if(i.widgets)for(var a=0;a<i.widgets.length;a++)i.widgets[a].height&&(s+=i.widgets[a].height);return n?s+(Math.ceil(i.text.length/r)||1)*t:s+t}}function ar(e){var t=e.doc,n=sr(e);t.iter(function(e){var t=n(e);t!=e.height&&he(e,t)})}function or(e,t,n,r){var i=e.display;if(!n&&"true"==dt(t).getAttribute("cm-not-content"))return null;var s,a,o=i.lineSpace.getBoundingClientRect();try{s=t.clientX-o.left,a=t.clientY-o.top}catch(t){return null}var l,c=Zn(e,s,a);if(r&&1==c.xRel&&(l=le(e.doc,c.line).text).length==c.ch){var u=V(l,l.length,e.options.tabSize)-l.length;c=ge(c.line,Math.max(0,Math.round((s-_n(e.display).left)/nr(e.display))-u))}return c}function lr(e,t){if(t>=e.display.viewTo)return null;if((t-=e.display.viewFrom)<0)return null;for(var n=e.display.view,r=0;r<n.length;r++)if((t-=n[r].size)<0)return r}function cr(e){e.display.input.showSelection(e.display.input.prepareSelection())}function ur(e,t){void 0===t&&(t=!0);for(var n=e.doc,r={},i=r.cursors=document.createDocumentFragment(),s=r.selection=document.createDocumentFragment(),a=0;a<n.sel.ranges.length;a++)if(t||a!=n.sel.primIndex){var o=n.sel.ranges[a];if(!(o.from().line>=e.display.viewTo||o.to().line<e.display.viewFrom)){var l=o.empty();(l||e.options.showCursorWhenSelecting)&&hr(e,o.head,i),l||dr(e,o,s)}}return r}function hr(e,t,n){var r=Gn(e,t,"div",null,null,!e.options.singleCursorHeightPerLine),i=n.appendChild(A("div"," ","CodeMirror-cursor"));if(i.style.left=r.left+"px",i.style.top=r.top+"px",i.style.height=Math.max(0,r.bottom-r.top)*e.options.cursorHeight+"px",r.other){var s=n.appendChild(A("div"," ","CodeMirror-cursor CodeMirror-secondarycursor"));s.style.display="",s.style.left=r.other.left+"px",s.style.top=r.other.top+"px",s.style.height=.85*(r.other.bottom-r.other.top)+"px"}}function pr(e,t){return e.top-t.top||e.left-t.left}function dr(e,t,n){var r=e.display,i=e.doc,s=document.createDocumentFragment(),a=_n(e.display),o=a.left,l=Math.max(r.sizerWidth,Nn(e)-r.sizer.offsetLeft)-a.right,c="ltr"==i.direction;function u(e,t,n,r){t<0&&(t=0),t=Math.round(t),r=Math.round(r),s.appendChild(A("div",null,"CodeMirror-selected","position: absolute; left: "+e+"px;\n                             top: "+t+"px; width: "+(null==n?l-e:n)+"px;\n                             height: "+(r-t)+"px"))}function h(t,n,r){var s,a,h=le(i,t),p=h.text.length;function d(n,r){return qn(e,ge(t,n),"div",h,r)}function f(t,n,r){var i=Xn(e,h,null,t),s="ltr"==n==("after"==r)?"left":"right",a="after"==r?i.begin:i.end-(/\s/.test(h.text.charAt(i.end-1))?2:1);return d(a,s)[s]}var m=Je(h,i.direction);return function(e,t,n,r){if(!e)return r(t,n,"ltr",0);for(var i=!1,s=0;s<e.length;++s){var a=e[s];(a.from<n&&a.to>t||t==n&&a.to==t)&&(r(Math.max(a.from,t),Math.min(a.to,n),1==a.level?"rtl":"ltr",s),i=!0)}i||r(t,n,"ltr")}(m,n||0,null==r?p:r,function(e,t,i,h){var g="ltr"==i,v=d(e,g?"left":"right"),b=d(t-1,g?"right":"left"),y=null==n&&0==e,w=null==r&&t==p,x=0==h,E=!m||h==m.length-1;if(b.top-v.top<=3){var k=(c?y:w)&&x,C=(c?w:y)&&E,_=k?o:(g?v:b).left,S=C?l:(g?b:v).right;u(_,v.top,S-_,v.bottom)}else{var N,T,A,L;g?(N=c&&y&&x?o:v.left,T=c?l:f(e,i,"before"),A=c?o:f(t,i,"after"),L=c&&w&&E?l:b.right):(N=c?f(e,i,"before"):o,T=!c&&y&&x?l:v.right,A=!c&&w&&E?o:b.left,L=c?f(t,i,"after"):l),u(N,v.top,T-N,v.bottom),v.bottom<b.top&&u(o,v.bottom,null,b.top),u(A,b.top,L-A,b.bottom)}(!s||pr(v,s)<0)&&(s=v),pr(b,s)<0&&(s=b),(!a||pr(v,a)<0)&&(a=v),pr(b,a)<0&&(a=b)}),{start:s,end:a}}var p=t.from(),d=t.to();if(p.line==d.line)h(p.line,p.ch,d.ch);else{var f=le(i,p.line),m=le(i,d.line),g=He(f)==He(m),v=h(p.line,p.ch,g?f.text.length+1:null).end,b=h(d.line,g?0:null,d.ch).start;g&&(v.top<b.top-2?(u(v.right,v.top,null,v.bottom),u(o,b.top,b.left,b.bottom)):u(v.right,v.top,b.left-v.right,v.bottom)),v.bottom<b.top&&u(o,v.bottom,null,b.top)}n.appendChild(s)}function fr(e){if(e.state.focused){var t=e.display;clearInterval(t.blinker);var n=!0;t.cursorDiv.style.visibility="",e.options.cursorBlinkRate>0?t.blinker=setInterval(function(){return t.cursorDiv.style.visibility=(n=!n)?"":"hidden"},e.options.cursorBlinkRate):e.options.cursorBlinkRate<0&&(t.cursorDiv.style.visibility="hidden")}}function mr(e){e.state.focused||(e.display.input.focus(),vr(e))}function gr(e){e.state.delayingBlurEvent=!0,setTimeout(function(){e.state.delayingBlurEvent&&(e.state.delayingBlurEvent=!1,br(e))},100)}function vr(e,t){e.state.delayingBlurEvent&&(e.state.delayingBlurEvent=!1),"nocursor"!=e.options.readOnly&&(e.state.focused||(it(e,"focus",e,t),e.state.focused=!0,O(e.display.wrapper,"CodeMirror-focused"),e.curOp||e.display.selForContextMenu==e.doc.sel||(e.display.input.reset(),l&&setTimeout(function(){return e.display.input.reset(!0)},20)),e.display.input.receivedFocus()),fr(e))}function br(e,t){e.state.delayingBlurEvent||(e.state.focused&&(it(e,"blur",e,t),e.state.focused=!1,S(e.display.wrapper,"CodeMirror-focused")),clearInterval(e.display.blinker),setTimeout(function(){e.state.focused||(e.display.shift=!1)},150))}function yr(e){for(var t=e.display,n=t.lineDiv.offsetTop,r=0;r<t.view.length;r++){var i=t.view[r],s=void 0;if(!i.hidden){if(a&&o<8){var l=i.node.offsetTop+i.node.offsetHeight;s=l-n,n=l}else{var c=i.node.getBoundingClientRect();s=c.bottom-c.top}var u=i.line.height-s;if(s<2&&(s=tr(t)),(u>.005||u<-.005)&&(he(i.line,s),wr(i.line),i.rest))for(var h=0;h<i.rest.length;h++)wr(i.rest[h])}}}function wr(e){if(e.widgets)for(var t=0;t<e.widgets.length;++t){var n=e.widgets[t],r=n.node.parentNode;r&&(n.height=r.offsetHeight)}}function xr(e,t,n){var r=n&&null!=n.top?Math.max(0,n.top):e.scroller.scrollTop;r=Math.floor(r-kn(e));var i=n&&null!=n.bottom?n.bottom:r+e.wrapper.clientHeight,s=de(t,r),a=de(t,i);if(n&&n.ensure){var o=n.ensure.from.line,l=n.ensure.to.line;o<s?(s=o,a=de(t,Ge(le(t,o))+e.wrapper.clientHeight)):Math.min(l,t.lastLine())>=a&&(s=de(t,Ge(le(t,l))-e.wrapper.clientHeight),a=l)}return{from:s,to:Math.max(a,s+1)}}function Er(e){var t=e.display,n=t.view;if(t.alignWidgets||t.gutters.firstChild&&e.options.fixedGutter){for(var r=ir(t)-t.scroller.scrollLeft+e.doc.scrollLeft,i=t.gutters.offsetWidth,s=r+"px",a=0;a<n.length;a++)if(!n[a].hidden){e.options.fixedGutter&&(n[a].gutter&&(n[a].gutter.style.left=s),n[a].gutterBackground&&(n[a].gutterBackground.style.left=s));var o=n[a].alignable;if(o)for(var l=0;l<o.length;l++)o[l].style.left=s}e.options.fixedGutter&&(t.gutters.style.left=r+i+"px")}}function kr(e){if(!e.options.lineNumbers)return!1;var t=e.doc,n=me(e.options,t.first+t.size-1),r=e.display;if(n.length!=r.lineNumChars){var i=r.measure.appendChild(A("div",[A("div",n)],"CodeMirror-linenumber CodeMirror-gutter-elt")),s=i.firstChild.offsetWidth,a=i.offsetWidth-s;return r.lineGutter.style.width="",r.lineNumInnerWidth=Math.max(s,r.lineGutter.offsetWidth-a)+1,r.lineNumWidth=r.lineNumInnerWidth+a,r.lineNumChars=r.lineNumInnerWidth?n.length:-1,r.lineGutter.style.width=r.lineNumWidth+"px",ci(e),!0}return!1}function Cr(e,t){var n=e.display,r=tr(e.display);t.top<0&&(t.top=0);var i=e.curOp&&null!=e.curOp.scrollTop?e.curOp.scrollTop:n.scroller.scrollTop,s=Tn(e),a={};t.bottom-t.top>s&&(t.bottom=t.top+s);var o=e.doc.height+Cn(n),l=t.top<r,c=t.bottom>o-r;if(t.top<i)a.scrollTop=l?0:t.top;else if(t.bottom>i+s){var u=Math.min(t.top,(c?o:t.bottom)-s);u!=i&&(a.scrollTop=u)}var h=e.curOp&&null!=e.curOp.scrollLeft?e.curOp.scrollLeft:n.scroller.scrollLeft,p=Nn(e)-(e.options.fixedGutter?n.gutters.offsetWidth:0),d=t.right-t.left>p;return d&&(t.right=t.left+p),t.left<10?a.scrollLeft=0:t.left<h?a.scrollLeft=Math.max(0,t.left-(d?0:10)):t.right>p+h-3&&(a.scrollLeft=t.right+(d?0:10)-p),a}function _r(e,t){null!=t&&(Tr(e),e.curOp.scrollTop=(null==e.curOp.scrollTop?e.doc.scrollTop:e.curOp.scrollTop)+t)}function Sr(e){Tr(e);var t=e.getCursor();e.curOp.scrollToPos={from:t,to:t,margin:e.options.cursorScrollMargin}}function Nr(e,t,n){null==t&&null==n||Tr(e),null!=t&&(e.curOp.scrollLeft=t),null!=n&&(e.curOp.scrollTop=n)}function Tr(e){var t=e.curOp.scrollToPos;if(t){e.curOp.scrollToPos=null;var n=Kn(e,t.from),r=Kn(e,t.to);Ar(e,n,r,t.margin)}}function Ar(e,t,n,r){var i=Cr(e,{left:Math.min(t.left,n.left),top:Math.min(t.top,n.top)-r,right:Math.max(t.right,n.right),bottom:Math.max(t.bottom,n.bottom)+r});Nr(e,i.scrollLeft,i.scrollTop)}function Lr(e,t){Math.abs(e.doc.scrollTop-t)<2||(n||li(e,{top:t}),Pr(e,t,!0),n&&li(e),ri(e,100))}function Pr(e,t,n){t=Math.min(e.display.scroller.scrollHeight-e.display.scroller.clientHeight,t),(e.display.scroller.scrollTop!=t||n)&&(e.doc.scrollTop=t,e.display.scrollbars.setScrollTop(t),e.display.scroller.scrollTop!=t&&(e.display.scroller.scrollTop=t))}function Ir(e,t,n,r){t=Math.min(t,e.display.scroller.scrollWidth-e.display.scroller.clientWidth),(n?t==e.doc.scrollLeft:Math.abs(e.doc.scrollLeft-t)<2)&&!r||(e.doc.scrollLeft=t,Er(e),e.display.scroller.scrollLeft!=t&&(e.display.scroller.scrollLeft=t),e.display.scrollbars.setScrollLeft(t))}function Or(e){var t=e.display,n=t.gutters.offsetWidth,r=Math.round(e.doc.height+Cn(e.display));return{clientHeight:t.scroller.clientHeight,viewHeight:t.wrapper.clientHeight,scrollWidth:t.scroller.scrollWidth,clientWidth:t.scroller.clientWidth,viewWidth:t.wrapper.clientWidth,barLeft:e.options.fixedGutter?n:0,docHeight:r,scrollHeight:r+Sn(e)+t.barHeight,nativeBarWidth:t.nativeBarWidth,gutterWidth:n}}var Mr=function(e,t,n){this.cm=n;var r=this.vert=A("div",[A("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),i=this.horiz=A("div",[A("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");r.tabIndex=i.tabIndex=-1,e(r),e(i),tt(r,"scroll",function(){r.clientHeight&&t(r.scrollTop,"vertical")}),tt(i,"scroll",function(){i.clientWidth&&t(i.scrollLeft,"horizontal")}),this.checkedZeroWidth=!1,a&&o<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")};Mr.prototype.update=function(e){var t=e.scrollWidth>e.clientWidth+1,n=e.scrollHeight>e.clientHeight+1,r=e.nativeBarWidth;if(n){this.vert.style.display="block",this.vert.style.bottom=t?r+"px":"0";var i=e.viewHeight-(t?r:0);this.vert.firstChild.style.height=Math.max(0,e.scrollHeight-e.clientHeight+i)+"px"}else this.vert.style.display="",this.vert.firstChild.style.height="0";if(t){this.horiz.style.display="block",this.horiz.style.right=n?r+"px":"0",this.horiz.style.left=e.barLeft+"px";var s=e.viewWidth-e.barLeft-(n?r:0);this.horiz.firstChild.style.width=Math.max(0,e.scrollWidth-e.clientWidth+s)+"px"}else this.horiz.style.display="",this.horiz.firstChild.style.width="0";return!this.checkedZeroWidth&&e.clientHeight>0&&(0==r&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:n?r:0,bottom:t?r:0}},Mr.prototype.setScrollLeft=function(e){this.horiz.scrollLeft!=e&&(this.horiz.scrollLeft=e),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")},Mr.prototype.setScrollTop=function(e){this.vert.scrollTop!=e&&(this.vert.scrollTop=e),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")},Mr.prototype.zeroWidthHack=function(){var e=b&&!d?"12px":"18px";this.horiz.style.height=this.vert.style.width=e,this.horiz.style.pointerEvents=this.vert.style.pointerEvents="none",this.disableHoriz=new j,this.disableVert=new j},Mr.prototype.enableZeroWidthBar=function(e,t,n){e.style.pointerEvents="auto",t.set(1e3,function r(){var i=e.getBoundingClientRect();var s="vert"==n?document.elementFromPoint(i.right-1,(i.top+i.bottom)/2):document.elementFromPoint((i.right+i.left)/2,i.bottom-1);s!=e?e.style.pointerEvents="none":t.set(1e3,r)})},Mr.prototype.clear=function(){var e=this.horiz.parentNode;e.removeChild(this.horiz),e.removeChild(this.vert)};var Rr=function(){};function Dr(e,t){t||(t=Or(e));var n=e.display.barWidth,r=e.display.barHeight;Fr(e,t);for(var i=0;i<4&&n!=e.display.barWidth||r!=e.display.barHeight;i++)n!=e.display.barWidth&&e.options.lineWrapping&&yr(e),Fr(e,Or(e)),n=e.display.barWidth,r=e.display.barHeight}function Fr(e,t){var n=e.display,r=n.scrollbars.update(t);n.sizer.style.paddingRight=(n.barWidth=r.right)+"px",n.sizer.style.paddingBottom=(n.barHeight=r.bottom)+"px",n.heightForcer.style.borderBottom=r.bottom+"px solid transparent",r.right&&r.bottom?(n.scrollbarFiller.style.display="block",n.scrollbarFiller.style.height=r.bottom+"px",n.scrollbarFiller.style.width=r.right+"px"):n.scrollbarFiller.style.display="",r.bottom&&e.options.coverGutterNextToScrollbar&&e.options.fixedGutter?(n.gutterFiller.style.display="block",n.gutterFiller.style.height=r.bottom+"px",n.gutterFiller.style.width=t.gutterWidth+"px"):n.gutterFiller.style.display=""}Rr.prototype.update=function(){return{bottom:0,right:0}},Rr.prototype.setScrollLeft=function(){},Rr.prototype.setScrollTop=function(){},Rr.prototype.clear=function(){};var Vr={native:Mr,null:Rr};function jr(e){e.display.scrollbars&&(e.display.scrollbars.clear(),e.display.scrollbars.addClass&&S(e.display.wrapper,e.display.scrollbars.addClass)),e.display.scrollbars=new Vr[e.options.scrollbarStyle](function(t){e.display.wrapper.insertBefore(t,e.display.scrollbarFiller),tt(t,"mousedown",function(){e.state.focused&&setTimeout(function(){return e.display.input.focus()},0)}),t.setAttribute("cm-not-content","true")},function(t,n){"horizontal"==n?Ir(e,t):Lr(e,t)},e),e.display.scrollbars.addClass&&O(e.display.wrapper,e.display.scrollbars.addClass)}var Br=0;function Ur(e){e.curOp={cm:e,viewChanged:!1,startHeight:e.doc.height,forceUpdate:!1,updateInput:null,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++Br},function(e){an?an.ops.push(e):e.ownsGroup=an={ops:[e],delayedCallbacks:[]}}(e.curOp)}function Hr(e){var t=e.curOp;t&&function(e,t){var n=e.ownsGroup;if(!n)return;try{!function(e){var t=e.delayedCallbacks,n=0;do{for(;n<t.length;n++)t[n].call(null);for(var r=0;r<e.ops.length;r++){var i=e.ops[r];if(i.cursorActivityHandlers)for(;i.cursorActivityCalled<i.cursorActivityHandlers.length;)i.cursorActivityHandlers[i.cursorActivityCalled++].call(null,i.cm)}}while(n<t.length)}(n)}finally{an=null,t(n)}}(t,function(e){for(var t=0;t<e.ops.length;t++)e.ops[t].cm.curOp=null;!function(e){for(var t=e.ops,n=0;n<t.length;n++)$r(t[n]);for(var r=0;r<t.length;r++)zr(t[r]);for(var i=0;i<t.length;i++)Wr(t[i]);for(var s=0;s<t.length;s++)qr(t[s]);for(var a=0;a<t.length;a++)Gr(t[a])}(e)})}function $r(e){var t=e.cm,n=t.display;!function(e){var t=e.display;!t.scrollbarsClipped&&t.scroller.offsetWidth&&(t.nativeBarWidth=t.scroller.offsetWidth-t.scroller.clientWidth,t.heightForcer.style.height=Sn(e)+"px",t.sizer.style.marginBottom=-t.nativeBarWidth+"px",t.sizer.style.borderRightWidth=Sn(e)+"px",t.scrollbarsClipped=!0)}(t),e.updateMaxLine&&Ye(t),e.mustUpdate=e.viewChanged||e.forceUpdate||null!=e.scrollTop||e.scrollToPos&&(e.scrollToPos.from.line<n.viewFrom||e.scrollToPos.to.line>=n.viewTo)||n.maxLineChanged&&t.options.lineWrapping,e.update=e.mustUpdate&&new si(t,e.mustUpdate&&{top:e.scrollTop,ensure:e.scrollToPos},e.forceUpdate)}function zr(e){e.updatedDisplay=e.mustUpdate&&ai(e.cm,e.update)}function Wr(e){var t=e.cm,n=t.display;e.updatedDisplay&&yr(t),e.barMeasure=Or(t),n.maxLineChanged&&!t.options.lineWrapping&&(e.adjustWidthTo=Ln(t,n.maxLine,n.maxLine.text.length).left+3,t.display.sizerWidth=e.adjustWidthTo,e.barMeasure.scrollWidth=Math.max(n.scroller.clientWidth,n.sizer.offsetLeft+e.adjustWidthTo+Sn(t)+t.display.barWidth),e.maxScrollLeft=Math.max(0,n.sizer.offsetLeft+e.adjustWidthTo-Nn(t))),(e.updatedDisplay||e.selectionChanged)&&(e.preparedSelection=n.input.prepareSelection())}function qr(e){var t=e.cm;null!=e.adjustWidthTo&&(t.display.sizer.style.minWidth=e.adjustWidthTo+"px",e.maxScrollLeft<t.doc.scrollLeft&&Ir(t,Math.min(t.display.scroller.scrollLeft,e.maxScrollLeft),!0),t.display.maxLineChanged=!1);var n=e.focus&&e.focus==I();e.preparedSelection&&t.display.input.showSelection(e.preparedSelection,n),(e.updatedDisplay||e.startHeight!=t.doc.height)&&Dr(t,e.barMeasure),e.updatedDisplay&&ui(t,e.barMeasure),e.selectionChanged&&fr(t),t.state.focused&&e.updateInput&&t.display.input.reset(e.typing),n&&mr(e.cm)}function Gr(e){var t=e.cm,n=t.display,r=t.doc;if(e.updatedDisplay&&oi(t,e.update),null==n.wheelStartX||null==e.scrollTop&&null==e.scrollLeft&&!e.scrollToPos||(n.wheelStartX=n.wheelStartY=null),null!=e.scrollTop&&Pr(t,e.scrollTop,e.forceScroll),null!=e.scrollLeft&&Ir(t,e.scrollLeft,!0,!0),e.scrollToPos){var i=function(e,t,n,r){null==r&&(r=0);var i;e.options.lineWrapping||t!=n||(t=t.ch?ge(t.line,"before"==t.sticky?t.ch-1:t.ch,"after"):t,n="before"==t.sticky?ge(t.line,t.ch+1,"before"):t);for(var s=0;s<5;s++){var a=!1,o=Gn(e,t),l=n&&n!=t?Gn(e,n):o;i={left:Math.min(o.left,l.left),top:Math.min(o.top,l.top)-r,right:Math.max(o.left,l.left),bottom:Math.max(o.bottom,l.bottom)+r};var c=Cr(e,i),u=e.doc.scrollTop,h=e.doc.scrollLeft;if(null!=c.scrollTop&&(Lr(e,c.scrollTop),Math.abs(e.doc.scrollTop-u)>1&&(a=!0)),null!=c.scrollLeft&&(Ir(e,c.scrollLeft),Math.abs(e.doc.scrollLeft-h)>1&&(a=!0)),!a)break}return i}(t,ke(r,e.scrollToPos.from),ke(r,e.scrollToPos.to),e.scrollToPos.margin);!function(e,t){if(st(e,"scrollCursorIntoView"))return;var n=e.display,r=n.sizer.getBoundingClientRect(),i=null;t.top+r.top<0?i=!0:t.bottom+r.top>(window.innerHeight||document.documentElement.clientHeight)&&(i=!1);if(null!=i&&!f){var s=A("div","​",null,"position: absolute;\n                         top: "+(t.top-n.viewOffset-kn(e.display))+"px;\n                         height: "+(t.bottom-t.top+Sn(e)+n.barHeight)+"px;\n                         left: "+t.left+"px; width: "+Math.max(2,t.right-t.left)+"px;");e.display.lineSpace.appendChild(s),s.scrollIntoView(i),e.display.lineSpace.removeChild(s)}}(t,i)}var s=e.maybeHiddenMarkers,a=e.maybeUnhiddenMarkers;if(s)for(var o=0;o<s.length;++o)s[o].lines.length||it(s[o],"hide");if(a)for(var l=0;l<a.length;++l)a[l].lines.length&&it(a[l],"unhide");n.wrapper.offsetHeight&&(r.scrollTop=t.display.scroller.scrollTop),e.changeObjs&&it(t,"changes",t,e.changeObjs),e.update&&e.update.finish()}function Kr(e,t){if(e.curOp)return t();Ur(e);try{return t()}finally{Hr(e)}}function Yr(e,t){return function(){if(e.curOp)return t.apply(e,arguments);Ur(e);try{return t.apply(e,arguments)}finally{Hr(e)}}}function Zr(e){return function(){if(this.curOp)return e.apply(this,arguments);Ur(this);try{return e.apply(this,arguments)}finally{Hr(this)}}}function Qr(e){return function(){var t=this.cm;if(!t||t.curOp)return e.apply(this,arguments);Ur(t);try{return e.apply(this,arguments)}finally{Hr(t)}}}function Xr(e,t,n,r){null==t&&(t=e.doc.first),null==n&&(n=e.doc.first+e.doc.size),r||(r=0);var i=e.display;if(r&&n<i.viewTo&&(null==i.updateLineNumbers||i.updateLineNumbers>t)&&(i.updateLineNumbers=t),e.curOp.viewChanged=!0,t>=i.viewTo)Se&&$e(e.doc,t)<i.viewTo&&ei(e);else if(n<=i.viewFrom)Se&&ze(e.doc,n+r)>i.viewFrom?ei(e):(i.viewFrom+=r,i.viewTo+=r);else if(t<=i.viewFrom&&n>=i.viewTo)ei(e);else if(t<=i.viewFrom){var s=ti(e,n,n+r,1);s?(i.view=i.view.slice(s.index),i.viewFrom=s.lineN,i.viewTo+=r):ei(e)}else if(n>=i.viewTo){var a=ti(e,t,t,-1);a?(i.view=i.view.slice(0,a.index),i.viewTo=a.lineN):ei(e)}else{var o=ti(e,t,t,-1),l=ti(e,n,n+r,1);o&&l?(i.view=i.view.slice(0,o.index).concat(sn(e,o.lineN,l.lineN)).concat(i.view.slice(l.index)),i.viewTo+=r):ei(e)}var c=i.externalMeasured;c&&(n<c.lineN?c.lineN+=r:t<c.lineN+c.size&&(i.externalMeasured=null))}function Jr(e,t,n){e.curOp.viewChanged=!0;var r=e.display,i=e.display.externalMeasured;if(i&&t>=i.lineN&&t<i.lineN+i.size&&(r.externalMeasured=null),!(t<r.viewFrom||t>=r.viewTo)){var s=r.view[lr(e,t)];if(null!=s.node){var a=s.changes||(s.changes=[]);-1==B(a,n)&&a.push(n)}}}function ei(e){e.display.viewFrom=e.display.viewTo=e.doc.first,e.display.view=[],e.display.viewOffset=0}function ti(e,t,n,r){var i,s=lr(e,t),a=e.display.view;if(!Se||n==e.doc.first+e.doc.size)return{index:s,lineN:n};for(var o=e.display.viewFrom,l=0;l<s;l++)o+=a[l].size;if(o!=t){if(r>0){if(s==a.length-1)return null;i=o+a[s].size-t,s++}else i=o-t;t+=i,n+=i}for(;$e(e.doc,n)!=n;){if(s==(r<0?0:a.length-1))return null;n+=r*a[s-(r<0?1:0)].size,s+=r}return{index:s,lineN:n}}function ni(e){for(var t=e.display.view,n=0,r=0;r<t.length;r++){var i=t[r];i.hidden||i.node&&!i.changes||++n}return n}function ri(e,t){e.doc.highlightFrontier<e.display.viewTo&&e.state.highlight.set(t,D(ii,e))}function ii(e){var t=e.doc;if(!(t.highlightFrontier>=e.display.viewTo)){var n=+new Date+e.options.workTime,r=Vt(e,t.highlightFrontier),i=[];t.iter(r.line,Math.min(t.first+t.size,e.display.viewTo+500),function(s){if(r.line>=e.display.viewFrom){var a=s.styles,o=s.text.length>e.options.maxHighlightLength?Lt(t.mode,r.state):null,l=Dt(e,s,r,!0);o&&(r.state=o),s.styles=l.styles;var c=s.styleClasses,u=l.classes;u?s.styleClasses=u:c&&(s.styleClasses=null);for(var h=!a||a.length!=s.styles.length||c!=u&&(!c||!u||c.bgClass!=u.bgClass||c.textClass!=u.textClass),p=0;!h&&p<a.length;++p)h=a[p]!=s.styles[p];h&&i.push(r.line),s.stateAfter=r.save(),r.nextLine()}else s.text.length<=e.options.maxHighlightLength&&jt(e,s.text,r),s.stateAfter=r.line%5==0?r.save():null,r.nextLine();if(+new Date>n)return ri(e,e.options.workDelay),!0}),t.highlightFrontier=r.line,t.modeFrontier=Math.max(t.modeFrontier,r.line),i.length&&Kr(e,function(){for(var t=0;t<i.length;t++)Jr(e,i[t],"text")})}}var si=function(e,t,n){var r=e.display;this.viewport=t,this.visible=xr(r,e.doc,t),this.editorIsHidden=!r.wrapper.offsetWidth,this.wrapperHeight=r.wrapper.clientHeight,this.wrapperWidth=r.wrapper.clientWidth,this.oldDisplayWidth=Nn(e),this.force=n,this.dims=rr(e),this.events=[]};function ai(e,t){var n=e.display,r=e.doc;if(t.editorIsHidden)return ei(e),!1;if(!t.force&&t.visible.from>=n.viewFrom&&t.visible.to<=n.viewTo&&(null==n.updateLineNumbers||n.updateLineNumbers>=n.viewTo)&&n.renderedView==n.view&&0==ni(e))return!1;kr(e)&&(ei(e),t.dims=rr(e));var i=r.first+r.size,s=Math.max(t.visible.from-e.options.viewportMargin,r.first),a=Math.min(i,t.visible.to+e.options.viewportMargin);n.viewFrom<s&&s-n.viewFrom<20&&(s=Math.max(r.first,n.viewFrom)),n.viewTo>a&&n.viewTo-a<20&&(a=Math.min(i,n.viewTo)),Se&&(s=$e(e.doc,s),a=ze(e.doc,a));var o=s!=n.viewFrom||a!=n.viewTo||n.lastWrapHeight!=t.wrapperHeight||n.lastWrapWidth!=t.wrapperWidth;!function(e,t,n){var r=e.display;0==r.view.length||t>=r.viewTo||n<=r.viewFrom?(r.view=sn(e,t,n),r.viewFrom=t):(r.viewFrom>t?r.view=sn(e,t,r.viewFrom).concat(r.view):r.viewFrom<t&&(r.view=r.view.slice(lr(e,t))),r.viewFrom=t,r.viewTo<n?r.view=r.view.concat(sn(e,r.viewTo,n)):r.viewTo>n&&(r.view=r.view.slice(0,lr(e,n))));r.viewTo=n}(e,s,a),n.viewOffset=Ge(le(e.doc,n.viewFrom)),e.display.mover.style.top=n.viewOffset+"px";var c=ni(e);if(!o&&0==c&&!t.force&&n.renderedView==n.view&&(null==n.updateLineNumbers||n.updateLineNumbers>=n.viewTo))return!1;var u=function(e){if(e.hasFocus())return null;var t=I();if(!t||!P(e.display.lineDiv,t))return null;var n={activeElt:t};if(window.getSelection){var r=window.getSelection();r.anchorNode&&r.extend&&P(e.display.lineDiv,r.anchorNode)&&(n.anchorNode=r.anchorNode,n.anchorOffset=r.anchorOffset,n.focusNode=r.focusNode,n.focusOffset=r.focusOffset)}return n}(e);return c>4&&(n.lineDiv.style.display="none"),function(e,t,n){var r=e.display,i=e.options.lineNumbers,s=r.lineDiv,a=s.firstChild;function o(t){var n=t.nextSibling;return l&&b&&e.display.currentWheelTarget==t?t.style.display="none":t.parentNode.removeChild(t),n}for(var c=r.view,u=r.viewFrom,h=0;h<c.length;h++){var p=c[h];if(p.hidden);else if(p.node&&p.node.parentNode==s){for(;a!=p.node;)a=o(a);var d=i&&null!=t&&t<=u&&p.lineNumber;p.changes&&(B(p.changes,"gutter")>-1&&(d=!1),un(e,p,u,n)),d&&(N(p.lineNumber),p.lineNumber.appendChild(document.createTextNode(me(e.options,u)))),a=p.node.nextSibling}else{var f=vn(e,p,u,n);s.insertBefore(f,a)}u+=p.size}for(;a;)a=o(a)}(e,n.updateLineNumbers,t.dims),c>4&&(n.lineDiv.style.display=""),n.renderedView=n.view,function(e){if(!e||!e.activeElt||e.activeElt==I())return;if(e.activeElt.focus(),e.anchorNode&&P(document.body,e.anchorNode)&&P(document.body,e.focusNode)){var t=window.getSelection(),n=document.createRange();n.setEnd(e.anchorNode,e.anchorOffset),n.collapse(!1),t.removeAllRanges(),t.addRange(n),t.extend(e.focusNode,e.focusOffset)}}(u),N(n.cursorDiv),N(n.selectionDiv),n.gutters.style.height=n.sizer.style.minHeight=0,o&&(n.lastWrapHeight=t.wrapperHeight,n.lastWrapWidth=t.wrapperWidth,ri(e,400)),n.updateLineNumbers=null,!0}function oi(e,t){for(var n=t.viewport,r=!0;(r&&e.options.lineWrapping&&t.oldDisplayWidth!=Nn(e)||(n&&null!=n.top&&(n={top:Math.min(e.doc.height+Cn(e.display)-Tn(e),n.top)}),t.visible=xr(e.display,e.doc,n),!(t.visible.from>=e.display.viewFrom&&t.visible.to<=e.display.viewTo)))&&ai(e,t);r=!1){yr(e);var i=Or(e);cr(e),Dr(e,i),ui(e,i),t.force=!1}t.signal(e,"update",e),e.display.viewFrom==e.display.reportedViewFrom&&e.display.viewTo==e.display.reportedViewTo||(t.signal(e,"viewportChange",e,e.display.viewFrom,e.display.viewTo),e.display.reportedViewFrom=e.display.viewFrom,e.display.reportedViewTo=e.display.viewTo)}function li(e,t){var n=new si(e,t);if(ai(e,n)){yr(e),oi(e,n);var r=Or(e);cr(e),Dr(e,r),ui(e,r),n.finish()}}function ci(e){var t=e.display.gutters.offsetWidth;e.display.sizer.style.marginLeft=t+"px"}function ui(e,t){e.display.sizer.style.minHeight=t.docHeight+"px",e.display.heightForcer.style.top=t.docHeight+"px",e.display.gutters.style.height=t.docHeight+e.display.barHeight+Sn(e)+"px"}function hi(e){var t=e.display.gutters,n=e.options.gutters;N(t);for(var r=0;r<n.length;++r){var i=n[r],s=t.appendChild(A("div",null,"CodeMirror-gutter "+i));"CodeMirror-linenumbers"==i&&(e.display.lineGutter=s,s.style.width=(e.display.lineNumWidth||1)+"px")}t.style.display=r?"":"none",ci(e)}function pi(e){var t=B(e.gutters,"CodeMirror-linenumbers");-1==t&&e.lineNumbers?e.gutters=e.gutters.concat(["CodeMirror-linenumbers"]):t>-1&&!e.lineNumbers&&(e.gutters=e.gutters.slice(0),e.gutters.splice(t,1))}si.prototype.signal=function(e,t){ot(e,t)&&this.events.push(arguments)},si.prototype.finish=function(){for(var e=0;e<this.events.length;e++)it.apply(null,this.events[e])};var di=0,fi=null;a?fi=-.53:n?fi=15:u?fi=-.7:p&&(fi=-1/3);function mi(e){var t=e.wheelDeltaX,n=e.wheelDeltaY;return null==t&&e.detail&&e.axis==e.HORIZONTAL_AXIS&&(t=e.detail),null==n&&e.detail&&e.axis==e.VERTICAL_AXIS?n=e.detail:null==n&&(n=e.wheelDelta),{x:t,y:n}}function gi(e){var t=mi(e);return t.x*=fi,t.y*=fi,t}function vi(e,t){var r=mi(t),i=r.x,s=r.y,a=e.display,o=a.scroller,c=o.scrollWidth>o.clientWidth,u=o.scrollHeight>o.clientHeight;if(i&&c||s&&u){if(s&&b&&l)e:for(var p=t.target,d=a.view;p!=o;p=p.parentNode)for(var f=0;f<d.length;f++)if(d[f].node==p){e.display.currentWheelTarget=p;break e}if(i&&!n&&!h&&null!=fi)return s&&u&&Lr(e,Math.max(0,o.scrollTop+s*fi)),Ir(e,Math.max(0,o.scrollLeft+i*fi)),(!s||s&&u)&&ct(t),void(a.wheelStartX=null);if(s&&null!=fi){var m=s*fi,g=e.doc.scrollTop,v=g+a.wrapper.clientHeight;m<0?g=Math.max(0,g+m-50):v=Math.min(e.doc.height,v+m+50),li(e,{top:g,bottom:v})}di<20&&(null==a.wheelStartX?(a.wheelStartX=o.scrollLeft,a.wheelStartY=o.scrollTop,a.wheelDX=i,a.wheelDY=s,setTimeout(function(){if(null!=a.wheelStartX){var e=o.scrollLeft-a.wheelStartX,t=o.scrollTop-a.wheelStartY,n=t&&a.wheelDY&&t/a.wheelDY||e&&a.wheelDX&&e/a.wheelDX;a.wheelStartX=a.wheelStartY=null,n&&(fi=(fi*di+n)/(di+1),++di)}},200)):(a.wheelDX+=i,a.wheelDY+=s))}}var bi=function(e,t){this.ranges=e,this.primIndex=t};bi.prototype.primary=function(){return this.ranges[this.primIndex]},bi.prototype.equals=function(e){if(e==this)return!0;if(e.primIndex!=this.primIndex||e.ranges.length!=this.ranges.length)return!1;for(var t=0;t<this.ranges.length;t++){var n=this.ranges[t],r=e.ranges[t];if(!be(n.anchor,r.anchor)||!be(n.head,r.head))return!1}return!0},bi.prototype.deepCopy=function(){for(var e=[],t=0;t<this.ranges.length;t++)e[t]=new yi(ye(this.ranges[t].anchor),ye(this.ranges[t].head));return new bi(e,this.primIndex)},bi.prototype.somethingSelected=function(){for(var e=0;e<this.ranges.length;e++)if(!this.ranges[e].empty())return!0;return!1},bi.prototype.contains=function(e,t){t||(t=e);for(var n=0;n<this.ranges.length;n++){var r=this.ranges[n];if(ve(t,r.from())>=0&&ve(e,r.to())<=0)return n}return-1};var yi=function(e,t){this.anchor=e,this.head=t};function wi(e,t,n){var r=e&&e.options.selectionsMayTouch,i=t[n];t.sort(function(e,t){return ve(e.from(),t.from())}),n=B(t,i);for(var s=1;s<t.length;s++){var a=t[s],o=t[s-1],l=ve(o.to(),a.from());if(r&&!a.empty()?l>0:l>=0){var c=xe(o.from(),a.from()),u=we(o.to(),a.to()),h=o.empty()?a.from()==a.head:o.from()==o.head;s<=n&&--n,t.splice(--s,2,new yi(h?u:c,h?c:u))}}return new bi(t,n)}function xi(e,t){return new bi([new yi(e,t||e)],0)}function Ei(e){return e.text?ge(e.from.line+e.text.length-1,Y(e.text).length+(1==e.text.length?e.from.ch:0)):e.to}function ki(e,t){if(ve(e,t.from)<0)return e;if(ve(e,t.to)<=0)return Ei(t);var n=e.line+t.text.length-(t.to.line-t.from.line)-1,r=e.ch;return e.line==t.to.line&&(r+=Ei(t).ch-t.to.ch),ge(n,r)}function Ci(e,t){for(var n=[],r=0;r<e.sel.ranges.length;r++){var i=e.sel.ranges[r];n.push(new yi(ki(i.anchor,t),ki(i.head,t)))}return wi(e.cm,n,e.sel.primIndex)}function _i(e,t,n){return e.line==t.line?ge(n.line,e.ch-t.ch+n.ch):ge(n.line+(e.line-t.line),e.ch)}function Si(e){e.doc.mode=Nt(e.options,e.doc.modeOption),Ni(e)}function Ni(e){e.doc.iter(function(e){e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null)}),e.doc.modeFrontier=e.doc.highlightFrontier=e.doc.first,ri(e,100),e.state.modeGen++,e.curOp&&Xr(e)}function Ti(e,t){return 0==t.from.ch&&0==t.to.ch&&""==Y(t.text)&&(!e.cm||e.cm.options.wholeLineUpdateBefore)}function Ai(e,t,n,r){function i(e){return n?n[e]:null}function s(e,n,i){!function(e,t,n,r){e.text=t,e.stateAfter&&(e.stateAfter=null);e.styles&&(e.styles=null);null!=e.order&&(e.order=null);Ie(e),Oe(e,n);var i=r?r(e):1;i!=e.height&&he(e,i)}(e,n,i,r),ln(e,"change",e,t)}function a(e,t){for(var n=[],s=e;s<t;++s)n.push(new qt(c[s],i(s),r));return n}var o=t.from,l=t.to,c=t.text,u=le(e,o.line),h=le(e,l.line),p=Y(c),d=i(c.length-1),f=l.line-o.line;if(t.full)e.insert(0,a(0,c.length)),e.remove(c.length,e.size-c.length);else if(Ti(e,t)){var m=a(0,c.length-1);s(h,h.text,d),f&&e.remove(o.line,f),m.length&&e.insert(o.line,m)}else if(u==h)if(1==c.length)s(u,u.text.slice(0,o.ch)+p+u.text.slice(l.ch),d);else{var g=a(1,c.length-1);g.push(new qt(p+u.text.slice(l.ch),d,r)),s(u,u.text.slice(0,o.ch)+c[0],i(0)),e.insert(o.line+1,g)}else if(1==c.length)s(u,u.text.slice(0,o.ch)+c[0]+h.text.slice(l.ch),i(0)),e.remove(o.line+1,f);else{s(u,u.text.slice(0,o.ch)+c[0],i(0)),s(h,p+h.text.slice(l.ch),d);var v=a(1,c.length-1);f>1&&e.remove(o.line+1,f-1),e.insert(o.line+1,v)}ln(e,"change",e,t)}function Li(e,t,n){!function e(r,i,s){if(r.linked)for(var a=0;a<r.linked.length;++a){var o=r.linked[a];if(o.doc!=i){var l=s&&o.sharedHist;n&&!l||(t(o.doc,l),e(o.doc,r,l))}}}(e,null,!0)}function Pi(e,t){if(t.cm)throw new Error("This document is already in use.");e.doc=t,t.cm=e,ar(e),Si(e),Ii(e),e.options.lineWrapping||Ye(e),e.options.mode=t.modeOption,Xr(e)}function Ii(e){("rtl"==e.doc.direction?O:S)(e.display.lineDiv,"CodeMirror-rtl")}function Oi(e){this.done=[],this.undone=[],this.undoDepth=1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=e||1}function Mi(e,t){var n={from:ye(t.from),to:Ei(t),text:ce(e,t.from,t.to)};return ji(e,n,t.from.line,t.to.line+1),Li(e,function(e){return ji(e,n,t.from.line,t.to.line+1)},!0),n}function Ri(e){for(;e.length;){var t=Y(e);if(!t.ranges)break;e.pop()}}function Di(e,t,n,r){var i=e.history;i.undone.length=0;var s,a,o=+new Date;if((i.lastOp==r||i.lastOrigin==t.origin&&t.origin&&("+"==t.origin.charAt(0)&&i.lastModTime>o-(e.cm?e.cm.options.historyEventDelay:500)||"*"==t.origin.charAt(0)))&&(s=function(e,t){if(t)return Ri(e.done),Y(e.done);if(e.done.length&&!Y(e.done).ranges)return Y(e.done);if(e.done.length>1&&!e.done[e.done.length-2].ranges)return e.done.pop(),Y(e.done)}(i,i.lastOp==r)))a=Y(s.changes),0==ve(t.from,t.to)&&0==ve(t.from,a.to)?a.to=Ei(t):s.changes.push(Mi(e,t));else{var l=Y(i.done);for(l&&l.ranges||Vi(e.sel,i.done),s={changes:[Mi(e,t)],generation:i.generation},i.done.push(s);i.done.length>i.undoDepth;)i.done.shift(),i.done[0].ranges||i.done.shift()}i.done.push(n),i.generation=++i.maxGeneration,i.lastModTime=i.lastSelTime=o,i.lastOp=i.lastSelOp=r,i.lastOrigin=i.lastSelOrigin=t.origin,a||it(e,"historyAdded")}function Fi(e,t,n,r){var i=e.history,s=r&&r.origin;n==i.lastSelOp||s&&i.lastSelOrigin==s&&(i.lastModTime==i.lastSelTime&&i.lastOrigin==s||function(e,t,n,r){var i=t.charAt(0);return"*"==i||"+"==i&&n.ranges.length==r.ranges.length&&n.somethingSelected()==r.somethingSelected()&&new Date-e.history.lastSelTime<=(e.cm?e.cm.options.historyEventDelay:500)}(e,s,Y(i.done),t))?i.done[i.done.length-1]=t:Vi(t,i.done),i.lastSelTime=+new Date,i.lastSelOrigin=s,i.lastSelOp=n,r&&!1!==r.clearRedo&&Ri(i.undone)}function Vi(e,t){var n=Y(t);n&&n.ranges&&n.equals(e)||t.push(e)}function ji(e,t,n,r){var i=t["spans_"+e.id],s=0;e.iter(Math.max(e.first,n),Math.min(e.first+e.size,r),function(n){n.markedSpans&&((i||(i=t["spans_"+e.id]={}))[s]=n.markedSpans),++s})}function Bi(e){if(!e)return null;for(var t,n=0;n<e.length;++n)e[n].marker.explicitlyCleared?t||(t=e.slice(0,n)):t&&t.push(e[n]);return t?t.length?t:null:e}function Ui(e,t){var n=function(e,t){var n=t["spans_"+e.id];if(!n)return null;for(var r=[],i=0;i<t.text.length;++i)r.push(Bi(n[i]));return r}(e,t),r=Le(e,t);if(!n)return r;if(!r)return n;for(var i=0;i<n.length;++i){var s=n[i],a=r[i];if(s&&a)e:for(var o=0;o<a.length;++o){for(var l=a[o],c=0;c<s.length;++c)if(s[c].marker==l.marker)continue e;s.push(l)}else a&&(n[i]=a)}return n}function Hi(e,t,n){for(var r=[],i=0;i<e.length;++i){var s=e[i];if(s.ranges)r.push(n?bi.prototype.deepCopy.call(s):s);else{var a=s.changes,o=[];r.push({changes:o});for(var l=0;l<a.length;++l){var c=a[l],u=void 0;if(o.push({from:c.from,to:c.to,text:c.text}),t)for(var h in c)(u=h.match(/^spans_(\d+)$/))&&B(t,Number(u[1]))>-1&&(Y(o)[h]=c[h],delete c[h])}}}return r}function $i(e,t,n,r){if(r){var i=e.anchor;if(n){var s=ve(t,i)<0;s!=ve(n,i)<0?(i=t,t=n):s!=ve(t,n)<0&&(t=n)}return new yi(i,t)}return new yi(n||t,t)}function zi(e,t,n,r,i){null==i&&(i=e.cm&&(e.cm.display.shift||e.extend)),Yi(e,new bi([$i(e.sel.primary(),t,n,i)],0),r)}function Wi(e,t,n){for(var r=[],i=e.cm&&(e.cm.display.shift||e.extend),s=0;s<e.sel.ranges.length;s++)r[s]=$i(e.sel.ranges[s],t[s],null,i);var a=wi(e.cm,r,e.sel.primIndex);Yi(e,a,n)}function qi(e,t,n,r){var i=e.sel.ranges.slice(0);i[t]=n,Yi(e,wi(e.cm,i,e.sel.primIndex),r)}function Gi(e,t,n,r){Yi(e,xi(t,n),r)}function Ki(e,t,n){var r=e.history.done,i=Y(r);i&&i.ranges?(r[r.length-1]=t,Zi(e,t,n)):Yi(e,t,n)}function Yi(e,t,n){Zi(e,t,n),Fi(e,e.sel,e.cm?e.cm.curOp.id:NaN,n)}function Zi(e,t,n){(ot(e,"beforeSelectionChange")||e.cm&&ot(e.cm,"beforeSelectionChange"))&&(t=function(e,t,n){var r={ranges:t.ranges,update:function(t){this.ranges=[];for(var n=0;n<t.length;n++)this.ranges[n]=new yi(ke(e,t[n].anchor),ke(e,t[n].head))},origin:n&&n.origin};it(e,"beforeSelectionChange",e,r),e.cm&&it(e.cm,"beforeSelectionChange",e.cm,r);return r.ranges!=t.ranges?wi(e.cm,r.ranges,r.ranges.length-1):t}(e,t,n));var r=n&&n.bias||(ve(t.primary().head,e.sel.primary().head)<0?-1:1);Qi(e,Ji(e,t,r,!0)),n&&!1===n.scroll||!e.cm||Sr(e.cm)}function Qi(e,t){t.equals(e.sel)||(e.sel=t,e.cm&&(e.cm.curOp.updateInput=e.cm.curOp.selectionChanged=!0,at(e.cm)),ln(e,"cursorActivity",e))}function Xi(e){Qi(e,Ji(e,e.sel,null,!1))}function Ji(e,t,n,r){for(var i,s=0;s<t.ranges.length;s++){var a=t.ranges[s],o=t.ranges.length==e.sel.ranges.length&&e.sel.ranges[s],l=ts(e,a.anchor,o&&o.anchor,n,r),c=ts(e,a.head,o&&o.head,n,r);(i||l!=a.anchor||c!=a.head)&&(i||(i=t.ranges.slice(0,s)),i[s]=new yi(l,c))}return i?wi(e.cm,i,t.primIndex):t}function es(e,t,n,r,i){var s=le(e,t.line);if(s.markedSpans)for(var a=0;a<s.markedSpans.length;++a){var o=s.markedSpans[a],l=o.marker;if((null==o.from||(l.inclusiveLeft?o.from<=t.ch:o.from<t.ch))&&(null==o.to||(l.inclusiveRight?o.to>=t.ch:o.to>t.ch))){if(i&&(it(l,"beforeCursorEnter"),l.explicitlyCleared)){if(s.markedSpans){--a;continue}break}if(!l.atomic)continue;if(n){var c=l.find(r<0?1:-1),u=void 0;if((r<0?l.inclusiveRight:l.inclusiveLeft)&&(c=ns(e,c,-r,c&&c.line==t.line?s:null)),c&&c.line==t.line&&(u=ve(c,n))&&(r<0?u<0:u>0))return es(e,c,t,r,i)}var h=l.find(r<0?-1:1);return(r<0?l.inclusiveLeft:l.inclusiveRight)&&(h=ns(e,h,r,h.line==t.line?s:null)),h?es(e,h,t,r,i):null}}return t}function ts(e,t,n,r,i){var s=r||1,a=es(e,t,n,s,i)||!i&&es(e,t,n,s,!0)||es(e,t,n,-s,i)||!i&&es(e,t,n,-s,!0);return a||(e.cantEdit=!0,ge(e.first,0))}function ns(e,t,n,r){return n<0&&0==t.ch?t.line>e.first?ke(e,ge(t.line-1)):null:n>0&&t.ch==(r||le(e,t.line)).text.length?t.line<e.first+e.size-1?ge(t.line+1,0):null:new ge(t.line,t.ch+n)}function rs(e){e.setSelection(ge(e.firstLine(),0),ge(e.lastLine()),$)}function is(e,t,n){var r={canceled:!1,from:t.from,to:t.to,text:t.text,origin:t.origin,cancel:function(){return r.canceled=!0}};return n&&(r.update=function(t,n,i,s){t&&(r.from=ke(e,t)),n&&(r.to=ke(e,n)),i&&(r.text=i),void 0!==s&&(r.origin=s)}),it(e,"beforeChange",e,r),e.cm&&it(e.cm,"beforeChange",e.cm,r),r.canceled?null:{from:r.from,to:r.to,text:r.text,origin:r.origin}}function ss(e,t,n){if(e.cm){if(!e.cm.curOp)return Yr(e.cm,ss)(e,t,n);if(e.cm.state.suppressEdits)return}if(!(ot(e,"beforeChange")||e.cm&&ot(e.cm,"beforeChange"))||(t=is(e,t,!0))){var r=_e&&!n&&function(e,t,n){var r=null;if(e.iter(t.line,n.line+1,function(e){if(e.markedSpans)for(var t=0;t<e.markedSpans.length;++t){var n=e.markedSpans[t].marker;!n.readOnly||r&&-1!=B(r,n)||(r||(r=[])).push(n)}}),!r)return null;for(var i=[{from:t,to:n}],s=0;s<r.length;++s)for(var a=r[s],o=a.find(0),l=0;l<i.length;++l){var c=i[l];if(!(ve(c.to,o.from)<0||ve(c.from,o.to)>0)){var u=[l,1],h=ve(c.from,o.from),p=ve(c.to,o.to);(h<0||!a.inclusiveLeft&&!h)&&u.push({from:c.from,to:o.from}),(p>0||!a.inclusiveRight&&!p)&&u.push({from:o.to,to:c.to}),i.splice.apply(i,u),l+=u.length-3}}return i}(e,t.from,t.to);if(r)for(var i=r.length-1;i>=0;--i)as(e,{from:r[i].from,to:r[i].to,text:i?[""]:t.text,origin:t.origin});else as(e,t)}}function as(e,t){if(1!=t.text.length||""!=t.text[0]||0!=ve(t.from,t.to)){var n=Ci(e,t);Di(e,t,n,e.cm?e.cm.curOp.id:NaN),cs(e,t,n,Le(e,t));var r=[];Li(e,function(e,n){n||-1!=B(r,e.history)||(ds(e.history,t),r.push(e.history)),cs(e,t,null,Le(e,t))})}}function os(e,t,n){var r=e.cm&&e.cm.state.suppressEdits;if(!r||n){for(var i,s=e.history,a=e.sel,o="undo"==t?s.done:s.undone,l="undo"==t?s.undone:s.done,c=0;c<o.length&&(i=o[c],n?!i.ranges||i.equals(e.sel):i.ranges);c++);if(c!=o.length){for(s.lastOrigin=s.lastSelOrigin=null;;){if(!(i=o.pop()).ranges){if(r)return void o.push(i);break}if(Vi(i,l),n&&!i.equals(e.sel))return void Yi(e,i,{clearRedo:!1});a=i}var u=[];Vi(a,l),l.push({changes:u,generation:s.generation}),s.generation=i.generation||++s.maxGeneration;for(var h=ot(e,"beforeChange")||e.cm&&ot(e.cm,"beforeChange"),p=function(n){var r=i.changes[n];if(r.origin=t,h&&!is(e,r,!1))return o.length=0,{};u.push(Mi(e,r));var s=n?Ci(e,r):Y(o);cs(e,r,s,Ui(e,r)),!n&&e.cm&&e.cm.scrollIntoView({from:r.from,to:Ei(r)});var a=[];Li(e,function(e,t){t||-1!=B(a,e.history)||(ds(e.history,r),a.push(e.history)),cs(e,r,null,Ui(e,r))})},d=i.changes.length-1;d>=0;--d){var f=p(d);if(f)return f.v}}}}function ls(e,t){if(0!=t&&(e.first+=t,e.sel=new bi(Z(e.sel.ranges,function(e){return new yi(ge(e.anchor.line+t,e.anchor.ch),ge(e.head.line+t,e.head.ch))}),e.sel.primIndex),e.cm)){Xr(e.cm,e.first,e.first-t,t);for(var n=e.cm.display,r=n.viewFrom;r<n.viewTo;r++)Jr(e.cm,r,"gutter")}}function cs(e,t,n,r){if(e.cm&&!e.cm.curOp)return Yr(e.cm,cs)(e,t,n,r);if(t.to.line<e.first)ls(e,t.text.length-1-(t.to.line-t.from.line));else if(!(t.from.line>e.lastLine())){if(t.from.line<e.first){var i=t.text.length-1-(e.first-t.from.line);ls(e,i),t={from:ge(e.first,0),to:ge(t.to.line+i,t.to.ch),text:[Y(t.text)],origin:t.origin}}var s=e.lastLine();t.to.line>s&&(t={from:t.from,to:ge(s,le(e,s).text.length),text:[t.text[0]],origin:t.origin}),t.removed=ce(e,t.from,t.to),n||(n=Ci(e,t)),e.cm?function(e,t,n){var r=e.doc,i=e.display,s=t.from,a=t.to,o=!1,l=s.line;e.options.lineWrapping||(l=pe(He(le(r,s.line))),r.iter(l,a.line+1,function(e){if(e==i.maxLine)return o=!0,!0}));r.sel.contains(t.from,t.to)>-1&&at(e);Ai(r,t,n,sr(e)),e.options.lineWrapping||(r.iter(l,s.line+t.text.length,function(e){var t=Ke(e);t>i.maxLineLength&&(i.maxLine=e,i.maxLineLength=t,i.maxLineChanged=!0,o=!1)}),o&&(e.curOp.updateMaxLine=!0));(function(e,t){if(e.modeFrontier=Math.min(e.modeFrontier,t),e.highlightFrontier<t-10)return;for(var n=e.first,r=t-1;r>n;r--){var i=le(e,r).stateAfter;if(i&&(!(i instanceof Mt)||r+i.lookAhead<t)){n=r+1;break}}e.highlightFrontier=Math.min(e.highlightFrontier,n)})(r,s.line),ri(e,400);var c=t.text.length-(a.line-s.line)-1;t.full?Xr(e):s.line!=a.line||1!=t.text.length||Ti(e.doc,t)?Xr(e,s.line,a.line+1,c):Jr(e,s.line,"text");var u=ot(e,"changes"),h=ot(e,"change");if(h||u){var p={from:s,to:a,text:t.text,removed:t.removed,origin:t.origin};h&&ln(e,"change",e,p),u&&(e.curOp.changeObjs||(e.curOp.changeObjs=[])).push(p)}e.display.selForContextMenu=null}(e.cm,t,r):Ai(e,t,r),Zi(e,n,$)}}function us(e,t,n,r,i){var s;r||(r=n),ve(r,n)<0&&(n=(s=[r,n])[0],r=s[1]),"string"==typeof t&&(t=e.splitLines(t)),ss(e,{from:n,to:r,text:t,origin:i})}function hs(e,t,n,r){n<e.line?e.line+=r:t<e.line&&(e.line=t,e.ch=0)}function ps(e,t,n,r){for(var i=0;i<e.length;++i){var s=e[i],a=!0;if(s.ranges){s.copied||((s=e[i]=s.deepCopy()).copied=!0);for(var o=0;o<s.ranges.length;o++)hs(s.ranges[o].anchor,t,n,r),hs(s.ranges[o].head,t,n,r)}else{for(var l=0;l<s.changes.length;++l){var c=s.changes[l];if(n<c.from.line)c.from=ge(c.from.line+r,c.from.ch),c.to=ge(c.to.line+r,c.to.ch);else if(t<=c.to.line){a=!1;break}}a||(e.splice(0,i+1),i=0)}}}function ds(e,t){var n=t.from.line,r=t.to.line,i=t.text.length-(r-n)-1;ps(e.done,n,r,i),ps(e.undone,n,r,i)}function fs(e,t,n,r){var i=t,s=t;return"number"==typeof t?s=le(e,Ee(e,t)):i=pe(t),null==i?null:(r(s,i)&&e.cm&&Jr(e.cm,i,n),s)}function ms(e){this.lines=e,this.parent=null;for(var t=0,n=0;n<e.length;++n)e[n].parent=this,t+=e[n].height;this.height=t}function gs(e){this.children=e;for(var t=0,n=0,r=0;r<e.length;++r){var i=e[r];t+=i.chunkSize(),n+=i.height,i.parent=this}this.size=t,this.height=n,this.parent=null}yi.prototype.from=function(){return xe(this.anchor,this.head)},yi.prototype.to=function(){return we(this.anchor,this.head)},yi.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch},ms.prototype={chunkSize:function(){return this.lines.length},removeInner:function(e,t){for(var n=e,r=e+t;n<r;++n){var i=this.lines[n];this.height-=i.height,Gt(i),ln(i,"delete")}this.lines.splice(e,t)},collapse:function(e){e.push.apply(e,this.lines)},insertInner:function(e,t,n){this.height+=n,this.lines=this.lines.slice(0,e).concat(t).concat(this.lines.slice(e));for(var r=0;r<t.length;++r)t[r].parent=this},iterN:function(e,t,n){for(var r=e+t;e<r;++e)if(n(this.lines[e]))return!0}},gs.prototype={chunkSize:function(){return this.size},removeInner:function(e,t){this.size-=t;for(var n=0;n<this.children.length;++n){var r=this.children[n],i=r.chunkSize();if(e<i){var s=Math.min(t,i-e),a=r.height;if(r.removeInner(e,s),this.height-=a-r.height,i==s&&(this.children.splice(n--,1),r.parent=null),0==(t-=s))break;e=0}else e-=i}if(this.size-t<25&&(this.children.length>1||!(this.children[0]instanceof ms))){var o=[];this.collapse(o),this.children=[new ms(o)],this.children[0].parent=this}},collapse:function(e){for(var t=0;t<this.children.length;++t)this.children[t].collapse(e)},insertInner:function(e,t,n){this.size+=t.length,this.height+=n;for(var r=0;r<this.children.length;++r){var i=this.children[r],s=i.chunkSize();if(e<=s){if(i.insertInner(e,t,n),i.lines&&i.lines.length>50){for(var a=i.lines.length%25+25,o=a;o<i.lines.length;){var l=new ms(i.lines.slice(o,o+=25));i.height-=l.height,this.children.splice(++r,0,l),l.parent=this}i.lines=i.lines.slice(0,a),this.maybeSpill()}break}e-=s}},maybeSpill:function(){if(!(this.children.length<=10)){var e=this;do{var t=e.children.splice(e.children.length-5,5),n=new gs(t);if(e.parent){e.size-=n.size,e.height-=n.height;var r=B(e.parent.children,e);e.parent.children.splice(r+1,0,n)}else{var i=new gs(e.children);i.parent=e,e.children=[i,n],e=i}n.parent=e.parent}while(e.children.length>10);e.parent.maybeSpill()}},iterN:function(e,t,n){for(var r=0;r<this.children.length;++r){var i=this.children[r],s=i.chunkSize();if(e<s){var a=Math.min(t,s-e);if(i.iterN(e,a,n))return!0;if(0==(t-=a))break;e=0}else e-=s}}};var vs=function(e,t,n){if(n)for(var r in n)n.hasOwnProperty(r)&&(this[r]=n[r]);this.doc=e,this.node=t};function bs(e,t,n){Ge(t)<(e.curOp&&e.curOp.scrollTop||e.doc.scrollTop)&&_r(e,n)}vs.prototype.clear=function(){var e=this.doc.cm,t=this.line.widgets,n=this.line,r=pe(n);if(null!=r&&t){for(var i=0;i<t.length;++i)t[i]==this&&t.splice(i--,1);t.length||(n.widgets=null);var s=xn(this);he(n,Math.max(0,n.height-s)),e&&(Kr(e,function(){bs(e,n,-s),Jr(e,r,"widget")}),ln(e,"lineWidgetCleared",e,this,r))}},vs.prototype.changed=function(){var e=this,t=this.height,n=this.doc.cm,r=this.line;this.height=null;var i=xn(this)-t;i&&(We(this.doc,r)||he(r,r.height+i),n&&Kr(n,function(){n.curOp.forceUpdate=!0,bs(n,r,i),ln(n,"lineWidgetChanged",n,e,pe(r))}))},lt(vs);var ys=0,ws=function(e,t){this.lines=[],this.type=t,this.doc=e,this.id=++ys};function xs(e,t,n,r,i){if(r&&r.shared)return function(e,t,n,r,i){(r=F(r)).shared=!1;var s=[xs(e,t,n,r,i)],a=s[0],o=r.widgetNode;return Li(e,function(e){o&&(r.widgetNode=o.cloneNode(!0)),s.push(xs(e,ke(e,t),ke(e,n),r,i));for(var l=0;l<e.linked.length;++l)if(e.linked[l].isParent)return;a=Y(s)}),new Es(s,a)}(e,t,n,r,i);if(e.cm&&!e.cm.curOp)return Yr(e.cm,xs)(e,t,n,r,i);var s=new ws(e,i),a=ve(t,n);if(r&&F(r,s,!1),a>0||0==a&&!1!==s.clearWhenEmpty)return s;if(s.replacedWith&&(s.collapsed=!0,s.widgetNode=L("span",[s.replacedWith],"CodeMirror-widget"),r.handleMouseEvents||s.widgetNode.setAttribute("cm-ignore-events","true"),r.insertLeft&&(s.widgetNode.insertLeft=!0)),s.collapsed){if(Ue(e,t.line,t,n,s)||t.line!=n.line&&Ue(e,n.line,t,n,s))throw new Error("Inserting collapsed marker partially overlapping an existing one");!function(){Se=!0}()}s.addToHistory&&Di(e,{from:t,to:n,origin:"markText"},e.sel,NaN);var o,l=t.line,c=e.cm;if(e.iter(l,n.line+1,function(e){c&&s.collapsed&&!c.options.lineWrapping&&He(e)==c.display.maxLine&&(o=!0),s.collapsed&&l!=t.line&&he(e,0),function(e,t){e.markedSpans=e.markedSpans?e.markedSpans.concat([t]):[t],t.marker.attachLine(e)}(e,new Ne(s,l==t.line?t.ch:null,l==n.line?n.ch:null)),++l}),s.collapsed&&e.iter(t.line,n.line+1,function(t){We(e,t)&&he(t,0)}),s.clearOnEnter&&tt(s,"beforeCursorEnter",function(){return s.clear()}),s.readOnly&&(!function(){_e=!0}(),(e.history.done.length||e.history.undone.length)&&e.clearHistory()),s.collapsed&&(s.id=++ys,s.atomic=!0),c){if(o&&(c.curOp.updateMaxLine=!0),s.collapsed)Xr(c,t.line,n.line+1);else if(s.className||s.title||s.startStyle||s.endStyle||s.css)for(var u=t.line;u<=n.line;u++)Jr(c,u,"text");s.atomic&&Xi(c.doc),ln(c,"markerAdded",c,s)}return s}ws.prototype.clear=function(){if(!this.explicitlyCleared){var e=this.doc.cm,t=e&&!e.curOp;if(t&&Ur(e),ot(this,"clear")){var n=this.find();n&&ln(this,"clear",n.from,n.to)}for(var r=null,i=null,s=0;s<this.lines.length;++s){var a=this.lines[s],o=Te(a.markedSpans,this);e&&!this.collapsed?Jr(e,pe(a),"text"):e&&(null!=o.to&&(i=pe(a)),null!=o.from&&(r=pe(a))),a.markedSpans=Ae(a.markedSpans,o),null==o.from&&this.collapsed&&!We(this.doc,a)&&e&&he(a,tr(e.display))}if(e&&this.collapsed&&!e.options.lineWrapping)for(var l=0;l<this.lines.length;++l){var c=He(this.lines[l]),u=Ke(c);u>e.display.maxLineLength&&(e.display.maxLine=c,e.display.maxLineLength=u,e.display.maxLineChanged=!0)}null!=r&&e&&this.collapsed&&Xr(e,r,i+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,e&&Xi(e.doc)),e&&ln(e,"markerCleared",e,this,r,i),t&&Hr(e),this.parent&&this.parent.clear()}},ws.prototype.find=function(e,t){var n,r;null==e&&"bookmark"==this.type&&(e=1);for(var i=0;i<this.lines.length;++i){var s=this.lines[i],a=Te(s.markedSpans,this);if(null!=a.from&&(n=ge(t?s:pe(s),a.from),-1==e))return n;if(null!=a.to&&(r=ge(t?s:pe(s),a.to),1==e))return r}return n&&{from:n,to:r}},ws.prototype.changed=function(){var e=this,t=this.find(-1,!0),n=this,r=this.doc.cm;t&&r&&Kr(r,function(){var i=t.line,s=pe(t.line),a=Pn(r,s);if(a&&(Vn(a),r.curOp.selectionChanged=r.curOp.forceUpdate=!0),r.curOp.updateMaxLine=!0,!We(n.doc,i)&&null!=n.height){var o=n.height;n.height=null;var l=xn(n)-o;l&&he(i,i.height+l)}ln(r,"markerChanged",r,e)})},ws.prototype.attachLine=function(e){if(!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;t.maybeHiddenMarkers&&-1!=B(t.maybeHiddenMarkers,this)||(t.maybeUnhiddenMarkers||(t.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(e)},ws.prototype.detachLine=function(e){if(this.lines.splice(B(this.lines,e),1),!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;(t.maybeHiddenMarkers||(t.maybeHiddenMarkers=[])).push(this)}},lt(ws);var Es=function(e,t){this.markers=e,this.primary=t;for(var n=0;n<e.length;++n)e[n].parent=this};function ks(e){return e.findMarks(ge(e.first,0),e.clipPos(ge(e.lastLine())),function(e){return e.parent})}function Cs(e){for(var t=function(t){var n=e[t],r=[n.primary.doc];Li(n.primary.doc,function(e){return r.push(e)});for(var i=0;i<n.markers.length;i++){var s=n.markers[i];-1==B(r,s.doc)&&(s.parent=null,n.markers.splice(i--,1))}},n=0;n<e.length;n++)t(n)}Es.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var e=0;e<this.markers.length;++e)this.markers[e].clear();ln(this,"clear")}},Es.prototype.find=function(e,t){return this.primary.find(e,t)},lt(Es);var _s=0,Ss=function(e,t,n,r,i){if(!(this instanceof Ss))return new Ss(e,t,n,r,i);null==n&&(n=0),gs.call(this,[new ms([new qt("",null)])]),this.first=n,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.modeFrontier=this.highlightFrontier=n;var s=ge(n,0);this.sel=xi(s),this.history=new Oi(null),this.id=++_s,this.modeOption=t,this.lineSep=r,this.direction="rtl"==i?"rtl":"ltr",this.extend=!1,"string"==typeof e&&(e=this.splitLines(e)),Ai(this,{from:s,to:s,text:e}),Yi(this,xi(s),$)};Ss.prototype=X(gs.prototype,{constructor:Ss,iter:function(e,t,n){n?this.iterN(e-this.first,t-e,n):this.iterN(this.first,this.first+this.size,e)},insert:function(e,t){for(var n=0,r=0;r<t.length;++r)n+=t[r].height;this.insertInner(e-this.first,t,n)},remove:function(e,t){this.removeInner(e-this.first,t)},getValue:function(e){var t=ue(this,this.first,this.first+this.size);return!1===e?t:t.join(e||this.lineSeparator())},setValue:Qr(function(e){var t=ge(this.first,0),n=this.first+this.size-1;ss(this,{from:t,to:ge(n,le(this,n).text.length),text:this.splitLines(e),origin:"setValue",full:!0},!0),this.cm&&Nr(this.cm,0,0),Yi(this,xi(t),$)}),replaceRange:function(e,t,n,r){t=ke(this,t),n=n?ke(this,n):t,us(this,e,t,n,r)},getRange:function(e,t,n){var r=ce(this,ke(this,e),ke(this,t));return!1===n?r:r.join(n||this.lineSeparator())},getLine:function(e){var t=this.getLineHandle(e);return t&&t.text},getLineHandle:function(e){if(fe(this,e))return le(this,e)},getLineNumber:function(e){return pe(e)},getLineHandleVisualStart:function(e){return"number"==typeof e&&(e=le(this,e)),He(e)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(e){return ke(this,e)},getCursor:function(e){var t=this.sel.primary();return null==e||"head"==e?t.head:"anchor"==e?t.anchor:"end"==e||"to"==e||!1===e?t.to():t.from()},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:Qr(function(e,t,n){Gi(this,ke(this,"number"==typeof e?ge(e,t||0):e),null,n)}),setSelection:Qr(function(e,t,n){Gi(this,ke(this,e),ke(this,t||e),n)}),extendSelection:Qr(function(e,t,n){zi(this,ke(this,e),t&&ke(this,t),n)}),extendSelections:Qr(function(e,t){Wi(this,Ce(this,e),t)}),extendSelectionsBy:Qr(function(e,t){var n=Z(this.sel.ranges,e);Wi(this,Ce(this,n),t)}),setSelections:Qr(function(e,t,n){if(e.length){for(var r=[],i=0;i<e.length;i++)r[i]=new yi(ke(this,e[i].anchor),ke(this,e[i].head));null==t&&(t=Math.min(e.length-1,this.sel.primIndex)),Yi(this,wi(this.cm,r,t),n)}}),addSelection:Qr(function(e,t,n){var r=this.sel.ranges.slice(0);r.push(new yi(ke(this,e),ke(this,t||e))),Yi(this,wi(this.cm,r,r.length-1),n)}),getSelection:function(e){for(var t,n=this.sel.ranges,r=0;r<n.length;r++){var i=ce(this,n[r].from(),n[r].to());t=t?t.concat(i):i}return!1===e?t:t.join(e||this.lineSeparator())},getSelections:function(e){for(var t=[],n=this.sel.ranges,r=0;r<n.length;r++){var i=ce(this,n[r].from(),n[r].to());!1!==e&&(i=i.join(e||this.lineSeparator())),t[r]=i}return t},replaceSelection:function(e,t,n){for(var r=[],i=0;i<this.sel.ranges.length;i++)r[i]=e;this.replaceSelections(r,t,n||"+input")},replaceSelections:Qr(function(e,t,n){for(var r=[],i=this.sel,s=0;s<i.ranges.length;s++){var a=i.ranges[s];r[s]={from:a.from(),to:a.to(),text:this.splitLines(e[s]),origin:n}}for(var o=t&&"end"!=t&&function(e,t,n){for(var r=[],i=ge(e.first,0),s=i,a=0;a<t.length;a++){var o=t[a],l=_i(o.from,i,s),c=_i(Ei(o),i,s);if(i=o.to,s=c,"around"==n){var u=e.sel.ranges[a],h=ve(u.head,u.anchor)<0;r[a]=new yi(h?c:l,h?l:c)}else r[a]=new yi(l,l)}return new bi(r,e.sel.primIndex)}(this,r,t),l=r.length-1;l>=0;l--)ss(this,r[l]);o?Ki(this,o):this.cm&&Sr(this.cm)}),undo:Qr(function(){os(this,"undo")}),redo:Qr(function(){os(this,"redo")}),undoSelection:Qr(function(){os(this,"undo",!0)}),redoSelection:Qr(function(){os(this,"redo",!0)}),setExtending:function(e){this.extend=e},getExtending:function(){return this.extend},historySize:function(){for(var e=this.history,t=0,n=0,r=0;r<e.done.length;r++)e.done[r].ranges||++t;for(var i=0;i<e.undone.length;i++)e.undone[i].ranges||++n;return{undo:t,redo:n}},clearHistory:function(){this.history=new Oi(this.history.maxGeneration)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(e){return e&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(e){return this.history.generation==(e||this.cleanGeneration)},getHistory:function(){return{done:Hi(this.history.done),undone:Hi(this.history.undone)}},setHistory:function(e){var t=this.history=new Oi(this.history.maxGeneration);t.done=Hi(e.done.slice(0),null,!0),t.undone=Hi(e.undone.slice(0),null,!0)},setGutterMarker:Qr(function(e,t,n){return fs(this,e,"gutter",function(e){var r=e.gutterMarkers||(e.gutterMarkers={});return r[t]=n,!n&&ne(r)&&(e.gutterMarkers=null),!0})}),clearGutter:Qr(function(e){var t=this;this.iter(function(n){n.gutterMarkers&&n.gutterMarkers[e]&&fs(t,n,"gutter",function(){return n.gutterMarkers[e]=null,ne(n.gutterMarkers)&&(n.gutterMarkers=null),!0})})}),lineInfo:function(e){var t;if("number"==typeof e){if(!fe(this,e))return null;if(t=e,!(e=le(this,e)))return null}else if(null==(t=pe(e)))return null;return{line:t,handle:e,text:e.text,gutterMarkers:e.gutterMarkers,textClass:e.textClass,bgClass:e.bgClass,wrapClass:e.wrapClass,widgets:e.widgets}},addLineClass:Qr(function(e,t,n){return fs(this,e,"gutter"==t?"gutter":"class",function(e){var r="text"==t?"textClass":"background"==t?"bgClass":"gutter"==t?"gutterClass":"wrapClass";if(e[r]){if(C(n).test(e[r]))return!1;e[r]+=" "+n}else e[r]=n;return!0})}),removeLineClass:Qr(function(e,t,n){return fs(this,e,"gutter"==t?"gutter":"class",function(e){var r="text"==t?"textClass":"background"==t?"bgClass":"gutter"==t?"gutterClass":"wrapClass",i=e[r];if(!i)return!1;if(null==n)e[r]=null;else{var s=i.match(C(n));if(!s)return!1;var a=s.index+s[0].length;e[r]=i.slice(0,s.index)+(s.index&&a!=i.length?" ":"")+i.slice(a)||null}return!0})}),addLineWidget:Qr(function(e,t,n){return function(e,t,n,r){var i=new vs(e,n,r),s=e.cm;s&&i.noHScroll&&(s.display.alignWidgets=!0);fs(e,t,"widget",function(t){var n=t.widgets||(t.widgets=[]);if(null==i.insertAt?n.push(i):n.splice(Math.min(n.length-1,Math.max(0,i.insertAt)),0,i),i.line=t,s&&!We(e,t)){var r=Ge(t)<e.scrollTop;he(t,t.height+xn(i)),r&&_r(s,i.height),s.curOp.forceUpdate=!0}return!0}),s&&ln(s,"lineWidgetAdded",s,i,"number"==typeof t?t:pe(t));return i}(this,e,t,n)}),removeLineWidget:function(e){e.clear()},markText:function(e,t,n){return xs(this,ke(this,e),ke(this,t),n,n&&n.type||"range")},setBookmark:function(e,t){var n={replacedWith:t&&(null==t.nodeType?t.widget:t),insertLeft:t&&t.insertLeft,clearWhenEmpty:!1,shared:t&&t.shared,handleMouseEvents:t&&t.handleMouseEvents};return xs(this,e=ke(this,e),e,n,"bookmark")},findMarksAt:function(e){e=ke(this,e);var t=[],n=le(this,e.line).markedSpans;if(n)for(var r=0;r<n.length;++r){var i=n[r];(null==i.from||i.from<=e.ch)&&(null==i.to||i.to>=e.ch)&&t.push(i.marker.parent||i.marker)}return t},findMarks:function(e,t,n){e=ke(this,e),t=ke(this,t);var r=[],i=e.line;return this.iter(e.line,t.line+1,function(s){var a=s.markedSpans;if(a)for(var o=0;o<a.length;o++){var l=a[o];null!=l.to&&i==e.line&&e.ch>=l.to||null==l.from&&i!=e.line||null!=l.from&&i==t.line&&l.from>=t.ch||n&&!n(l.marker)||r.push(l.marker.parent||l.marker)}++i}),r},getAllMarks:function(){var e=[];return this.iter(function(t){var n=t.markedSpans;if(n)for(var r=0;r<n.length;++r)null!=n[r].from&&e.push(n[r].marker)}),e},posFromIndex:function(e){var t,n=this.first,r=this.lineSeparator().length;return this.iter(function(i){var s=i.text.length+r;if(s>e)return t=e,!0;e-=s,++n}),ke(this,ge(n,t))},indexFromPos:function(e){var t=(e=ke(this,e)).ch;if(e.line<this.first||e.ch<0)return 0;var n=this.lineSeparator().length;return this.iter(this.first,e.line,function(e){t+=e.text.length+n}),t},copy:function(e){var t=new Ss(ue(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);return t.scrollTop=this.scrollTop,t.scrollLeft=this.scrollLeft,t.sel=this.sel,t.extend=!1,e&&(t.history.undoDepth=this.history.undoDepth,t.setHistory(this.getHistory())),t},linkedDoc:function(e){e||(e={});var t=this.first,n=this.first+this.size;null!=e.from&&e.from>t&&(t=e.from),null!=e.to&&e.to<n&&(n=e.to);var r=new Ss(ue(this,t,n),e.mode||this.modeOption,t,this.lineSep,this.direction);return e.sharedHist&&(r.history=this.history),(this.linked||(this.linked=[])).push({doc:r,sharedHist:e.sharedHist}),r.linked=[{doc:this,isParent:!0,sharedHist:e.sharedHist}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n],i=r.find(),s=e.clipPos(i.from),a=e.clipPos(i.to);if(ve(s,a)){var o=xs(e,s,a,r.primary,r.primary.type);r.markers.push(o),o.parent=r}}}(r,ks(this)),r},unlinkDoc:function(e){if(e instanceof ka&&(e=e.doc),this.linked)for(var t=0;t<this.linked.length;++t){var n=this.linked[t];if(n.doc==e){this.linked.splice(t,1),e.unlinkDoc(this),Cs(ks(this));break}}if(e.history==this.history){var r=[e.id];Li(e,function(e){return r.push(e.id)},!0),e.history=new Oi(null),e.history.done=Hi(this.history.done,r),e.history.undone=Hi(this.history.undone,r)}},iterLinkedDocs:function(e){Li(this,e)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(e){return this.lineSep?e.split(this.lineSep):wt(e)},lineSeparator:function(){return this.lineSep||"\n"},setDirection:Qr(function(e){"rtl"!=e&&(e="ltr"),e!=this.direction&&(this.direction=e,this.iter(function(e){return e.order=null}),this.cm&&function(e){Kr(e,function(){Ii(e),Xr(e)})}(this.cm))})}),Ss.prototype.eachLine=Ss.prototype.iter;var Ns=0;function Ts(e){var t=this;if(As(t),!st(t,e)&&!En(t.display,e)){ct(e),a&&(Ns=+new Date);var n=or(t,e,!0),r=e.dataTransfer.files;if(n&&!t.isReadOnly())if(r&&r.length&&window.FileReader&&window.File)for(var i=r.length,s=Array(i),o=0,l=function(e,r){if(!t.options.allowDropFileTypes||-1!=B(t.options.allowDropFileTypes,e.type)){var a=new FileReader;a.onload=Yr(t,function(){var e=a.result;if(/[\x00-\x08\x0e-\x1f]{2}/.test(e)&&(e=""),s[r]=e,++o==i){var l={from:n=ke(t.doc,n),to:n,text:t.doc.splitLines(s.join(t.doc.lineSeparator())),origin:"paste"};ss(t.doc,l),Ki(t.doc,xi(n,Ei(l)))}}),a.readAsText(e)}},c=0;c<i;++c)l(r[c],c);else{if(t.state.draggingText&&t.doc.sel.contains(n)>-1)return t.state.draggingText(e),void setTimeout(function(){return t.display.input.focus()},20);try{var u=e.dataTransfer.getData("Text");if(u){var h;if(t.state.draggingText&&!t.state.draggingText.copy&&(h=t.listSelections()),Zi(t.doc,xi(n,n)),h)for(var p=0;p<h.length;++p)us(t.doc,"",h[p].anchor,h[p].head,"drag");t.replaceSelection(u,"around","paste"),t.display.input.focus()}}catch(e){}}}}function As(e){e.display.dragCursor&&(e.display.lineSpace.removeChild(e.display.dragCursor),e.display.dragCursor=null)}function Ls(e){if(document.getElementsByClassName)for(var t=document.getElementsByClassName("CodeMirror"),n=0;n<t.length;n++){var r=t[n].CodeMirror;r&&e(r)}}var Ps=!1;function Is(){Ps||(!function(){var e;tt(window,"resize",function(){null==e&&(e=setTimeout(function(){e=null,Ls(Os)},100))}),tt(window,"blur",function(){return Ls(br)})}(),Ps=!0)}function Os(e){var t=e.display;t.cachedCharWidth=t.cachedTextHeight=t.cachedPaddingH=null,t.scrollbarsClipped=!1,e.setSize()}for(var Ms={3:"Pause",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",127:"Delete",145:"ScrollLock",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},Rs=0;Rs<10;Rs++)Ms[Rs+48]=Ms[Rs+96]=String(Rs);for(var Ds=65;Ds<=90;Ds++)Ms[Ds]=String.fromCharCode(Ds);for(var Fs=1;Fs<=12;Fs++)Ms[Fs+111]=Ms[Fs+63235]="F"+Fs;var Vs={};function js(e){var t,n,r,i,s=e.split(/-(?!$)/);e=s[s.length-1];for(var a=0;a<s.length-1;a++){var o=s[a];if(/^(cmd|meta|m)$/i.test(o))i=!0;else if(/^a(lt)?$/i.test(o))t=!0;else if(/^(c|ctrl|control)$/i.test(o))n=!0;else{if(!/^s(hift)?$/i.test(o))throw new Error("Unrecognized modifier name: "+o);r=!0}}return t&&(e="Alt-"+e),n&&(e="Ctrl-"+e),i&&(e="Cmd-"+e),r&&(e="Shift-"+e),e}function Bs(e){var t={};for(var n in e)if(e.hasOwnProperty(n)){var r=e[n];if(/^(name|fallthrough|(de|at)tach)$/.test(n))continue;if("..."==r){delete e[n];continue}for(var i=Z(n.split(" "),js),s=0;s<i.length;s++){var a=void 0,o=void 0;s==i.length-1?(o=i.join(" "),a=r):(o=i.slice(0,s+1).join(" "),a="...");var l=t[o];if(l){if(l!=a)throw new Error("Inconsistent bindings for "+o)}else t[o]=a}delete e[n]}for(var c in t)e[c]=t[c];return e}function Us(e,t,n,r){var i=(t=Ws(t)).call?t.call(e,r):t[e];if(!1===i)return"nothing";if("..."===i)return"multi";if(null!=i&&n(i))return"handled";if(t.fallthrough){if("[object Array]"!=Object.prototype.toString.call(t.fallthrough))return Us(e,t.fallthrough,n,r);for(var s=0;s<t.fallthrough.length;s++){var a=Us(e,t.fallthrough[s],n,r);if(a)return a}}}function Hs(e){var t="string"==typeof e?e:Ms[e.keyCode];return"Ctrl"==t||"Alt"==t||"Shift"==t||"Mod"==t}function $s(e,t,n){var r=e;return t.altKey&&"Alt"!=r&&(e="Alt-"+e),(E?t.metaKey:t.ctrlKey)&&"Ctrl"!=r&&(e="Ctrl-"+e),(E?t.ctrlKey:t.metaKey)&&"Cmd"!=r&&(e="Cmd-"+e),!n&&t.shiftKey&&"Shift"!=r&&(e="Shift-"+e),e}function zs(e,t){if(h&&34==e.keyCode&&e.char)return!1;var n=Ms[e.keyCode];return null!=n&&!e.altGraphKey&&(3==e.keyCode&&e.code&&(n=e.code),$s(n,e,t))}function Ws(e){return"string"==typeof e?Vs[e]:e}function qs(e,t){for(var n=e.doc.sel.ranges,r=[],i=0;i<n.length;i++){for(var s=t(n[i]);r.length&&ve(s.from,Y(r).to)<=0;){var a=r.pop();if(ve(a.from,s.from)<0){s.from=a.from;break}}r.push(s)}Kr(e,function(){for(var t=r.length-1;t>=0;t--)us(e.doc,"",r[t].from,r[t].to,"+delete");Sr(e)})}function Gs(e,t,n){var r=se(e.text,t+n,n);return r<0||r>e.text.length?null:r}function Ks(e,t,n){var r=Gs(e,t.ch,n);return null==r?null:new ge(t.line,r,n<0?"after":"before")}function Ys(e,t,n,r,i){if(e){var s=Je(n,t.doc.direction);if(s){var a,o=i<0?Y(s):s[0],l=i<0==(1==o.level),c=l?"after":"before";if(o.level>0||"rtl"==t.doc.direction){var u=In(t,n);a=i<0?n.text.length-1:0;var h=On(t,u,a).top;a=ae(function(e){return On(t,u,e).top==h},i<0==(1==o.level)?o.from:o.to-1,a),"before"==c&&(a=Gs(n,a,1))}else a=i<0?o.to:o.from;return new ge(r,a,c)}}return new ge(r,i<0?n.text.length:0,i<0?"before":"after")}Vs.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},Vs.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},Vs.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},Vs.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},Vs.default=b?Vs.macDefault:Vs.pcDefault;var Zs={selectAll:rs,singleSelection:function(e){return e.setSelection(e.getCursor("anchor"),e.getCursor("head"),$)},killLine:function(e){return qs(e,function(t){if(t.empty()){var n=le(e.doc,t.head.line).text.length;return t.head.ch==n&&t.head.line<e.lastLine()?{from:t.head,to:ge(t.head.line+1,0)}:{from:t.head,to:ge(t.head.line,n)}}return{from:t.from(),to:t.to()}})},deleteLine:function(e){return qs(e,function(t){return{from:ge(t.from().line,0),to:ke(e.doc,ge(t.to().line+1,0))}})},delLineLeft:function(e){return qs(e,function(e){return{from:ge(e.from().line,0),to:e.from()}})},delWrappedLineLeft:function(e){return qs(e,function(t){var n=e.charCoords(t.head,"div").top+5,r=e.coordsChar({left:0,top:n},"div");return{from:r,to:t.from()}})},delWrappedLineRight:function(e){return qs(e,function(t){var n=e.charCoords(t.head,"div").top+5,r=e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:n},"div");return{from:t.from(),to:r}})},undo:function(e){return e.undo()},redo:function(e){return e.redo()},undoSelection:function(e){return e.undoSelection()},redoSelection:function(e){return e.redoSelection()},goDocStart:function(e){return e.extendSelection(ge(e.firstLine(),0))},goDocEnd:function(e){return e.extendSelection(ge(e.lastLine()))},goLineStart:function(e){return e.extendSelectionsBy(function(t){return Qs(e,t.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(e){return e.extendSelectionsBy(function(t){return Xs(e,t.head)},{origin:"+move",bias:1})},goLineEnd:function(e){return e.extendSelectionsBy(function(t){return function(e,t){var n=le(e.doc,t),r=function(e){var t;for(;t=je(e);)e=t.find(1,!0).line;return e}(n);r!=n&&(t=pe(r));return Ys(!0,e,n,t,-1)}(e,t.head.line)},{origin:"+move",bias:-1})},goLineRight:function(e){return e.extendSelectionsBy(function(t){var n=e.cursorCoords(t.head,"div").top+5;return e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:n},"div")},W)},goLineLeft:function(e){return e.extendSelectionsBy(function(t){var n=e.cursorCoords(t.head,"div").top+5;return e.coordsChar({left:0,top:n},"div")},W)},goLineLeftSmart:function(e){return e.extendSelectionsBy(function(t){var n=e.cursorCoords(t.head,"div").top+5,r=e.coordsChar({left:0,top:n},"div");return r.ch<e.getLine(r.line).search(/\S/)?Xs(e,t.head):r},W)},goLineUp:function(e){return e.moveV(-1,"line")},goLineDown:function(e){return e.moveV(1,"line")},goPageUp:function(e){return e.moveV(-1,"page")},goPageDown:function(e){return e.moveV(1,"page")},goCharLeft:function(e){return e.moveH(-1,"char")},goCharRight:function(e){return e.moveH(1,"char")},goColumnLeft:function(e){return e.moveH(-1,"column")},goColumnRight:function(e){return e.moveH(1,"column")},goWordLeft:function(e){return e.moveH(-1,"word")},goGroupRight:function(e){return e.moveH(1,"group")},goGroupLeft:function(e){return e.moveH(-1,"group")},goWordRight:function(e){return e.moveH(1,"word")},delCharBefore:function(e){return e.deleteH(-1,"char")},delCharAfter:function(e){return e.deleteH(1,"char")},delWordBefore:function(e){return e.deleteH(-1,"word")},delWordAfter:function(e){return e.deleteH(1,"word")},delGroupBefore:function(e){return e.deleteH(-1,"group")},delGroupAfter:function(e){return e.deleteH(1,"group")},indentAuto:function(e){return e.indentSelection("smart")},indentMore:function(e){return e.indentSelection("add")},indentLess:function(e){return e.indentSelection("subtract")},insertTab:function(e){return e.replaceSelection("\t")},insertSoftTab:function(e){for(var t=[],n=e.listSelections(),r=e.options.tabSize,i=0;i<n.length;i++){var s=n[i].from(),a=V(e.getLine(s.line),s.ch,r);t.push(K(r-a%r))}e.replaceSelections(t)},defaultTab:function(e){e.somethingSelected()?e.indentSelection("add"):e.execCommand("insertTab")},transposeChars:function(e){return Kr(e,function(){for(var t=e.listSelections(),n=[],r=0;r<t.length;r++)if(t[r].empty()){var i=t[r].head,s=le(e.doc,i.line).text;if(s)if(i.ch==s.length&&(i=new ge(i.line,i.ch-1)),i.ch>0)i=new ge(i.line,i.ch+1),e.replaceRange(s.charAt(i.ch-1)+s.charAt(i.ch-2),ge(i.line,i.ch-2),i,"+transpose");else if(i.line>e.doc.first){var a=le(e.doc,i.line-1).text;a&&(i=new ge(i.line,1),e.replaceRange(s.charAt(0)+e.doc.lineSeparator()+a.charAt(a.length-1),ge(i.line-1,a.length-1),i,"+transpose"))}n.push(new yi(i,i))}e.setSelections(n)})},newlineAndIndent:function(e){return Kr(e,function(){for(var t=e.listSelections(),n=t.length-1;n>=0;n--)e.replaceRange(e.doc.lineSeparator(),t[n].anchor,t[n].head,"+input");t=e.listSelections();for(var r=0;r<t.length;r++)e.indentLine(t[r].from().line,null,!0);Sr(e)})},openLine:function(e){return e.replaceSelection("\n","start")},toggleOverwrite:function(e){return e.toggleOverwrite()}};function Qs(e,t){var n=le(e.doc,t),r=He(n);return r!=n&&(t=pe(r)),Ys(!0,e,r,t,1)}function Xs(e,t){var n=Qs(e,t.line),r=le(e.doc,n.line),i=Je(r,e.doc.direction);if(!i||0==i[0].level){var s=Math.max(0,r.text.search(/\S/)),a=t.line==n.line&&t.ch<=s&&t.ch;return ge(n.line,a?0:s,n.sticky)}return n}function Js(e,t,n){if("string"==typeof t&&!(t=Zs[t]))return!1;e.display.input.ensurePolled();var r=e.display.shift,i=!1;try{e.isReadOnly()&&(e.state.suppressEdits=!0),n&&(e.display.shift=!1),i=t(e)!=H}finally{e.display.shift=r,e.state.suppressEdits=!1}return i}var ea=new j;function ta(e,t,n,r){var i=e.state.keySeq;if(i){if(Hs(t))return"handled";if(/\'$/.test(t)?e.state.keySeq=null:ea.set(50,function(){e.state.keySeq==i&&(e.state.keySeq=null,e.display.input.reset())}),na(e,i+" "+t,n,r))return!0}return na(e,t,n,r)}function na(e,t,n,r){var i=function(e,t,n){for(var r=0;r<e.state.keyMaps.length;r++){var i=Us(t,e.state.keyMaps[r],n,e);if(i)return i}return e.options.extraKeys&&Us(t,e.options.extraKeys,n,e)||Us(t,e.options.keyMap,n,e)}(e,t,r);return"multi"==i&&(e.state.keySeq=t),"handled"==i&&ln(e,"keyHandled",e,t,n),"handled"!=i&&"multi"!=i||(ct(n),fr(e)),!!i}function ra(e,t){var n=zs(t,!0);return!!n&&(t.shiftKey&&!e.state.keySeq?ta(e,"Shift-"+n,t,function(t){return Js(e,t,!0)})||ta(e,n,t,function(t){if("string"==typeof t?/^go[A-Z]/.test(t):t.motion)return Js(e,t)}):ta(e,n,t,function(t){return Js(e,t)}))}var ia=null;function sa(e){var t=this;if(t.curOp.focus=I(),!st(t,e)){a&&o<11&&27==e.keyCode&&(e.returnValue=!1);var n=e.keyCode;t.display.shift=16==n||e.shiftKey;var r=ra(t,e);h&&(ia=r?n:null,!r&&88==n&&!Et&&(b?e.metaKey:e.ctrlKey)&&t.replaceSelection("",null,"cut")),18!=n||/\bCodeMirror-crosshair\b/.test(t.display.lineDiv.className)||function(e){var t=e.display.lineDiv;function n(e){18!=e.keyCode&&e.altKey||(S(t,"CodeMirror-crosshair"),rt(document,"keyup",n),rt(document,"mouseover",n))}O(t,"CodeMirror-crosshair"),tt(document,"keyup",n),tt(document,"mouseover",n)}(t)}}function aa(e){16==e.keyCode&&(this.doc.sel.shift=!1),st(this,e)}function oa(e){var t=this;if(!(En(t.display,e)||st(t,e)||e.ctrlKey&&!e.altKey||b&&e.metaKey)){var n=e.keyCode,r=e.charCode;if(h&&n==ia)return ia=null,void ct(e);if(!h||e.which&&!(e.which<10)||!ra(t,e)){var i=String.fromCharCode(null==r?n:r);"\b"!=i&&(function(e,t,n){return ta(e,"'"+n+"'",t,function(t){return Js(e,t,!0)})}(t,e,i)||t.display.input.onKeyPress(e))}}}var la,ca,ua=function(e,t,n){this.time=e,this.pos=t,this.button=n};function ha(e){var t=this,n=t.display;if(!(st(t,e)||n.activeTouch&&n.input.supportsTouch()))if(n.input.ensurePolled(),n.shift=e.shiftKey,En(n,e))l||(n.scroller.draggable=!1,setTimeout(function(){return n.scroller.draggable=!0},100));else if(!fa(t,e)){var r=or(t,e),i=ft(e),s=r?function(e,t){var n=+new Date;return ca&&ca.compare(n,e,t)?(la=ca=null,"triple"):la&&la.compare(n,e,t)?(ca=new ua(n,e,t),la=null,"double"):(la=new ua(n,e,t),ca=null,"single")}(r,i):"single";window.focus(),1==i&&t.state.selectingText&&t.state.selectingText(e),r&&function(e,t,n,r,i){var s="Click";"double"==r?s="Double"+s:"triple"==r&&(s="Triple"+s);return ta(e,$s(s=(1==t?"Left":2==t?"Middle":"Right")+s,i),i,function(t){if("string"==typeof t&&(t=Zs[t]),!t)return!1;var r=!1;try{e.isReadOnly()&&(e.state.suppressEdits=!0),r=t(e,n)!=H}finally{e.state.suppressEdits=!1}return r})}(t,i,r,s,e)||(1==i?r?function(e,t,n,r){a?setTimeout(D(mr,e),0):e.curOp.focus=I();var i,s=function(e,t,n){var r=e.getOption("configureMouse"),i=r?r(e,t,n):{};if(null==i.unit){var s=y?n.shiftKey&&n.metaKey:n.altKey;i.unit=s?"rectangle":"single"==t?"char":"double"==t?"word":"line"}(null==i.extend||e.doc.extend)&&(i.extend=e.doc.extend||n.shiftKey);null==i.addNew&&(i.addNew=b?n.metaKey:n.ctrlKey);null==i.moveOnDrag&&(i.moveOnDrag=!(b?n.altKey:n.ctrlKey));return i}(e,n,r),c=e.doc.sel;e.options.dragDrop&&vt&&!e.isReadOnly()&&"single"==n&&(i=c.contains(t))>-1&&(ve((i=c.ranges[i]).from(),t)<0||t.xRel>0)&&(ve(i.to(),t)>0||t.xRel<0)?function(e,t,n,r){var i=e.display,s=!1,c=Yr(e,function(t){l&&(i.scroller.draggable=!1),e.state.draggingText=!1,rt(i.wrapper.ownerDocument,"mouseup",c),rt(i.wrapper.ownerDocument,"mousemove",u),rt(i.scroller,"dragstart",h),rt(i.scroller,"drop",c),s||(ct(t),r.addNew||zi(e.doc,n,null,null,r.extend),l||a&&9==o?setTimeout(function(){i.wrapper.ownerDocument.body.focus(),i.input.focus()},20):i.input.focus())}),u=function(e){s=s||Math.abs(t.clientX-e.clientX)+Math.abs(t.clientY-e.clientY)>=10},h=function(){return s=!0};l&&(i.scroller.draggable=!0);e.state.draggingText=c,c.copy=!r.moveOnDrag,i.scroller.dragDrop&&i.scroller.dragDrop();tt(i.wrapper.ownerDocument,"mouseup",c),tt(i.wrapper.ownerDocument,"mousemove",u),tt(i.scroller,"dragstart",h),tt(i.scroller,"drop",c),gr(e),setTimeout(function(){return i.input.focus()},20)}(e,r,t,s):function(e,t,n,r){var i=e.display,s=e.doc;ct(t);var a,o,l=s.sel,c=l.ranges;r.addNew&&!r.extend?(o=s.sel.contains(n),a=o>-1?c[o]:new yi(n,n)):(a=s.sel.primary(),o=s.sel.primIndex);if("rectangle"==r.unit)r.addNew||(a=new yi(n,n)),n=or(e,t,!0,!0),o=-1;else{var u=pa(e,n,r.unit);a=r.extend?$i(a,u.anchor,u.head,r.extend):u}r.addNew?-1==o?(o=c.length,Yi(s,wi(e,c.concat([a]),o),{scroll:!1,origin:"*mouse"})):c.length>1&&c[o].empty()&&"char"==r.unit&&!r.extend?(Yi(s,wi(e,c.slice(0,o).concat(c.slice(o+1)),0),{scroll:!1,origin:"*mouse"}),l=s.sel):qi(s,o,a,z):(o=0,Yi(s,new bi([a],0),z),l=s.sel);var h=n;function p(t){if(0!=ve(h,t))if(h=t,"rectangle"==r.unit){for(var i=[],c=e.options.tabSize,u=V(le(s,n.line).text,n.ch,c),p=V(le(s,t.line).text,t.ch,c),d=Math.min(u,p),f=Math.max(u,p),m=Math.min(n.line,t.line),g=Math.min(e.lastLine(),Math.max(n.line,t.line));m<=g;m++){var v=le(s,m).text,b=q(v,d,c);d==f?i.push(new yi(ge(m,b),ge(m,b))):v.length>b&&i.push(new yi(ge(m,b),ge(m,q(v,f,c))))}i.length||i.push(new yi(n,n)),Yi(s,wi(e,l.ranges.slice(0,o).concat(i),o),{origin:"*mouse",scroll:!1}),e.scrollIntoView(t)}else{var y,w=a,x=pa(e,t,r.unit),E=w.anchor;ve(x.anchor,E)>0?(y=x.head,E=xe(w.from(),x.anchor)):(y=x.anchor,E=we(w.to(),x.head));var k=l.ranges.slice(0);k[o]=function(e,t){var n=t.anchor,r=t.head,i=le(e.doc,n.line);if(0==ve(n,r)&&n.sticky==r.sticky)return t;var s=Je(i);if(!s)return t;var a=Qe(s,n.ch,n.sticky),o=s[a];if(o.from!=n.ch&&o.to!=n.ch)return t;var l,c=a+(o.from==n.ch==(1!=o.level)?0:1);if(0==c||c==s.length)return t;if(r.line!=n.line)l=(r.line-n.line)*("ltr"==e.doc.direction?1:-1)>0;else{var u=Qe(s,r.ch,r.sticky),h=u-a||(r.ch-n.ch)*(1==o.level?-1:1);l=u==c-1||u==c?h<0:h>0}var p=s[c+(l?-1:0)],d=l==(1==p.level),f=d?p.from:p.to,m=d?"after":"before";return n.ch==f&&n.sticky==m?t:new yi(new ge(n.line,f,m),r)}(e,new yi(ke(s,E),y)),Yi(s,wi(e,k,o),z)}}var d=i.wrapper.getBoundingClientRect(),f=0;function m(t){e.state.selectingText=!1,f=1/0,ct(t),i.input.focus(),rt(i.wrapper.ownerDocument,"mousemove",g),rt(i.wrapper.ownerDocument,"mouseup",v),s.history.lastSelOrigin=null}var g=Yr(e,function(t){0!==t.buttons&&ft(t)?function t(n){var a=++f;var o=or(e,n,!0,"rectangle"==r.unit);if(!o)return;if(0!=ve(o,h)){e.curOp.focus=I(),p(o);var l=xr(i,s);(o.line>=l.to||o.line<l.from)&&setTimeout(Yr(e,function(){f==a&&t(n)}),150)}else{var c=n.clientY<d.top?-20:n.clientY>d.bottom?20:0;c&&setTimeout(Yr(e,function(){f==a&&(i.scroller.scrollTop+=c,t(n))}),50)}}(t):m(t)}),v=Yr(e,m);e.state.selectingText=v,tt(i.wrapper.ownerDocument,"mousemove",g),tt(i.wrapper.ownerDocument,"mouseup",v)}(e,r,t,s)}(t,r,s,e):dt(e)==n.scroller&&ct(e):2==i?(r&&zi(t.doc,r),setTimeout(function(){return n.input.focus()},20)):3==i&&(k?t.display.input.onContextMenu(e):gr(t)))}}function pa(e,t,n){if("char"==n)return new yi(t,t);if("word"==n)return e.findWordAt(t);if("line"==n)return new yi(ge(t.line,0),ke(e.doc,ge(t.line+1,0)));var r=n(e,t);return new yi(r.from,r.to)}function da(e,t,n,r){var i,s;if(t.touches)i=t.touches[0].clientX,s=t.touches[0].clientY;else try{i=t.clientX,s=t.clientY}catch(t){return!1}if(i>=Math.floor(e.display.gutters.getBoundingClientRect().right))return!1;r&&ct(t);var a=e.display,o=a.lineDiv.getBoundingClientRect();if(s>o.bottom||!ot(e,n))return ht(t);s-=o.top-a.viewOffset;for(var l=0;l<e.options.gutters.length;++l){var c=a.gutters.childNodes[l];if(c&&c.getBoundingClientRect().right>=i){var u=de(e.doc,s),h=e.options.gutters[l];return it(e,n,e,u,h,t),ht(t)}}}function fa(e,t){return da(e,t,"gutterClick",!0)}function ma(e,t){En(e.display,t)||function(e,t){if(!ot(e,"gutterContextMenu"))return!1;return da(e,t,"gutterContextMenu",!1)}(e,t)||st(e,t,"contextmenu")||k||e.display.input.onContextMenu(t)}function ga(e){e.display.wrapper.className=e.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+e.options.theme.replace(/(^|\s)\s*/g," cm-s-"),Bn(e)}ua.prototype.compare=function(e,t,n){return this.time+400>e&&0==ve(t,this.pos)&&n==this.button};var va={toString:function(){return"CodeMirror.Init"}},ba={},ya={};function wa(e){hi(e),Xr(e),Er(e)}function xa(e,t,n){var r=n&&n!=va;if(!t!=!r){var i=e.display.dragFunctions,s=t?tt:rt;s(e.display.scroller,"dragstart",i.start),s(e.display.scroller,"dragenter",i.enter),s(e.display.scroller,"dragover",i.over),s(e.display.scroller,"dragleave",i.leave),s(e.display.scroller,"drop",i.drop)}}function Ea(e){e.options.lineWrapping?(O(e.display.wrapper,"CodeMirror-wrap"),e.display.sizer.style.minWidth="",e.display.sizerWidth=null):(S(e.display.wrapper,"CodeMirror-wrap"),Ye(e)),ar(e),Xr(e),Bn(e),setTimeout(function(){return Dr(e)},100)}function ka(e,t){var n=this;if(!(this instanceof ka))return new ka(e,t);this.options=t=t?F(t):{},F(ba,t,!1),pi(t);var r=t.value;"string"==typeof r?r=new Ss(r,t.mode,null,t.lineSeparator,t.direction):t.mode&&(r.modeOption=t.mode),this.doc=r;var i=new ka.inputStyles[t.inputStyle](this),s=this.display=new oe(e,r,i);for(var c in s.wrapper.CodeMirror=this,hi(this),ga(this),t.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),jr(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:!1,cutIncoming:!1,selectingText:!1,draggingText:!1,highlight:new j,keySeq:null,specialChars:null},t.autofocus&&!v&&s.input.focus(),a&&o<11&&setTimeout(function(){return n.display.input.reset(!0)},20),function(e){var t=e.display;tt(t.scroller,"mousedown",Yr(e,ha)),tt(t.scroller,"dblclick",a&&o<11?Yr(e,function(t){if(!st(e,t)){var n=or(e,t);if(n&&!fa(e,t)&&!En(e.display,t)){ct(t);var r=e.findWordAt(n);zi(e.doc,r.anchor,r.head)}}}):function(t){return st(e,t)||ct(t)});tt(t.scroller,"contextmenu",function(t){return ma(e,t)});var n,r={end:0};function i(){t.activeTouch&&(n=setTimeout(function(){return t.activeTouch=null},1e3),(r=t.activeTouch).end=+new Date)}function s(e,t){if(null==t.left)return!0;var n=t.left-e.left,r=t.top-e.top;return n*n+r*r>400}tt(t.scroller,"touchstart",function(i){if(!st(e,i)&&!function(e){if(1!=e.touches.length)return!1;var t=e.touches[0];return t.radiusX<=1&&t.radiusY<=1}(i)&&!fa(e,i)){t.input.ensurePolled(),clearTimeout(n);var s=+new Date;t.activeTouch={start:s,moved:!1,prev:s-r.end<=300?r:null},1==i.touches.length&&(t.activeTouch.left=i.touches[0].pageX,t.activeTouch.top=i.touches[0].pageY)}}),tt(t.scroller,"touchmove",function(){t.activeTouch&&(t.activeTouch.moved=!0)}),tt(t.scroller,"touchend",function(n){var r=t.activeTouch;if(r&&!En(t,n)&&null!=r.left&&!r.moved&&new Date-r.start<300){var a,o=e.coordsChar(t.activeTouch,"page");a=!r.prev||s(r,r.prev)?new yi(o,o):!r.prev.prev||s(r,r.prev.prev)?e.findWordAt(o):new yi(ge(o.line,0),ke(e.doc,ge(o.line+1,0))),e.setSelection(a.anchor,a.head),e.focus(),ct(n)}i()}),tt(t.scroller,"touchcancel",i),tt(t.scroller,"scroll",function(){t.scroller.clientHeight&&(Lr(e,t.scroller.scrollTop),Ir(e,t.scroller.scrollLeft,!0),it(e,"scroll",e))}),tt(t.scroller,"mousewheel",function(t){return vi(e,t)}),tt(t.scroller,"DOMMouseScroll",function(t){return vi(e,t)}),tt(t.wrapper,"scroll",function(){return t.wrapper.scrollTop=t.wrapper.scrollLeft=0}),t.dragFunctions={enter:function(t){st(e,t)||pt(t)},over:function(t){st(e,t)||(!function(e,t){var n=or(e,t);if(!n)return;var r=document.createDocumentFragment();hr(e,n,r),e.display.dragCursor||(e.display.dragCursor=A("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),e.display.lineSpace.insertBefore(e.display.dragCursor,e.display.cursorDiv));T(e.display.dragCursor,r)}(e,t),pt(t))},start:function(t){return function(e,t){if(a&&(!e.state.draggingText||+new Date-Ns<100))return void pt(t);if(st(e,t)||En(e.display,t))return;if(t.dataTransfer.setData("Text",e.getSelection()),t.dataTransfer.effectAllowed="copyMove",t.dataTransfer.setDragImage&&!p){var n=A("img",null,null,"position: fixed; left: 0; top: 0;");n.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",h&&(n.width=n.height=1,e.display.wrapper.appendChild(n),n._top=n.offsetTop),t.dataTransfer.setDragImage(n,0,0),h&&n.parentNode.removeChild(n)}}(e,t)},drop:Yr(e,Ts),leave:function(t){st(e,t)||As(e)}};var l=t.input.getField();tt(l,"keyup",function(t){return aa.call(e,t)}),tt(l,"keydown",Yr(e,sa)),tt(l,"keypress",Yr(e,oa)),tt(l,"focus",function(t){return vr(e,t)}),tt(l,"blur",function(t){return br(e,t)})}(this),Is(),Ur(this),this.curOp.forceUpdate=!0,Pi(this,r),t.autofocus&&!v||this.hasFocus()?setTimeout(D(vr,this),20):br(this),ya)ya.hasOwnProperty(c)&&ya[c](n,t[c],va);kr(this),t.finishInit&&t.finishInit(this);for(var u=0;u<Ca.length;++u)Ca[u](n);Hr(this),l&&t.lineWrapping&&"optimizelegibility"==getComputedStyle(s.lineDiv).textRendering&&(s.lineDiv.style.textRendering="auto")}ka.defaults=ba,ka.optionHandlers=ya;var Ca=[];function _a(e,t,n,r){var i,s=e.doc;null==n&&(n="add"),"smart"==n&&(s.mode.indent?i=Vt(e,t).state:n="prev");var a=e.options.tabSize,o=le(s,t),l=V(o.text,null,a);o.stateAfter&&(o.stateAfter=null);var c,u=o.text.match(/^\s*/)[0];if(r||/\S/.test(o.text)){if("smart"==n&&((c=s.mode.indent(i,o.text.slice(u.length),o.text))==H||c>150)){if(!r)return;n="prev"}}else c=0,n="not";"prev"==n?c=t>s.first?V(le(s,t-1).text,null,a):0:"add"==n?c=l+e.options.indentUnit:"subtract"==n?c=l-e.options.indentUnit:"number"==typeof n&&(c=l+n),c=Math.max(0,c);var h="",p=0;if(e.options.indentWithTabs)for(var d=Math.floor(c/a);d;--d)p+=a,h+="\t";if(p<c&&(h+=K(c-p)),h!=u)return us(s,h,ge(t,0),ge(t,u.length),"+input"),o.stateAfter=null,!0;for(var f=0;f<s.sel.ranges.length;f++){var m=s.sel.ranges[f];if(m.head.line==t&&m.head.ch<u.length){var g=ge(t,u.length);qi(s,f,new yi(g,g));break}}}ka.defineInitHook=function(e){return Ca.push(e)};var Sa=null;function Na(e){Sa=e}function Ta(e,t,n,r,i){var s=e.doc;e.display.shift=!1,r||(r=s.sel);var a,o=e.state.pasteIncoming||"paste"==i,l=wt(t),c=null;if(o&&r.ranges.length>1)if(Sa&&Sa.text.join("\n")==t){if(r.ranges.length%Sa.text.length==0){c=[];for(var u=0;u<Sa.text.length;u++)c.push(s.splitLines(Sa.text[u]))}}else l.length==r.ranges.length&&e.options.pasteLinesPerSelection&&(c=Z(l,function(e){return[e]}));for(var h=r.ranges.length-1;h>=0;h--){var p=r.ranges[h],d=p.from(),f=p.to();p.empty()&&(n&&n>0?d=ge(d.line,d.ch-n):e.state.overwrite&&!o?f=ge(f.line,Math.min(le(s,f.line).text.length,f.ch+Y(l).length)):o&&Sa&&Sa.lineWise&&Sa.text.join("\n")==t&&(d=f=ge(d.line,0))),a=e.curOp.updateInput;var m={from:d,to:f,text:c?c[h%c.length]:l,origin:i||(o?"paste":e.state.cutIncoming?"cut":"+input")};ss(e.doc,m),ln(e,"inputRead",e,m)}t&&!o&&La(e,t),Sr(e),e.curOp.updateInput=a,e.curOp.typing=!0,e.state.pasteIncoming=e.state.cutIncoming=!1}function Aa(e,t){var n=e.clipboardData&&e.clipboardData.getData("Text");if(n)return e.preventDefault(),t.isReadOnly()||t.options.disableInput||Kr(t,function(){return Ta(t,n,0,null,"paste")}),!0}function La(e,t){if(e.options.electricChars&&e.options.smartIndent)for(var n=e.doc.sel,r=n.ranges.length-1;r>=0;r--){var i=n.ranges[r];if(!(i.head.ch>100||r&&n.ranges[r-1].head.line==i.head.line)){var s=e.getModeAt(i.head),a=!1;if(s.electricChars){for(var o=0;o<s.electricChars.length;o++)if(t.indexOf(s.electricChars.charAt(o))>-1){a=_a(e,i.head.line,"smart");break}}else s.electricInput&&s.electricInput.test(le(e.doc,i.head.line).text.slice(0,i.head.ch))&&(a=_a(e,i.head.line,"smart"));a&&ln(e,"electricInput",e,i.head.line)}}}function Pa(e){for(var t=[],n=[],r=0;r<e.doc.sel.ranges.length;r++){var i=e.doc.sel.ranges[r].head.line,s={anchor:ge(i,0),head:ge(i+1,0)};n.push(s),t.push(e.getRange(s.anchor,s.head))}return{text:t,ranges:n}}function Ia(e,t){e.setAttribute("autocorrect","off"),e.setAttribute("autocapitalize","off"),e.setAttribute("spellcheck",!!t)}function Oa(){var e=A("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; outline: none"),t=A("div",[e],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return l?e.style.width="1000px":e.setAttribute("wrap","off"),m&&(e.style.border="1px solid black"),Ia(e),t}function Ma(e,t,n,r,i){var s=t,a=n,o=le(e,t.line);function l(r){var s;if(null==(s=i?function(e,t,n,r){var i=Je(t,e.doc.direction);if(!i)return Ks(t,n,r);n.ch>=t.text.length?(n.ch=t.text.length,n.sticky="before"):n.ch<=0&&(n.ch=0,n.sticky="after");var s=Qe(i,n.ch,n.sticky),a=i[s];if("ltr"==e.doc.direction&&a.level%2==0&&(r>0?a.to>n.ch:a.from<n.ch))return Ks(t,n,r);var o,l=function(e,n){return Gs(t,e instanceof ge?e.ch:e,n)},c=function(n){return e.options.lineWrapping?(o=o||In(e,t),Xn(e,t,o,n)):{begin:0,end:t.text.length}},u=c("before"==n.sticky?l(n,-1):n.ch);if("rtl"==e.doc.direction||1==a.level){var h=1==a.level==r<0,p=l(n,h?1:-1);if(null!=p&&(h?p<=a.to&&p<=u.end:p>=a.from&&p>=u.begin)){var d=h?"before":"after";return new ge(n.line,p,d)}}var f=function(e,t,r){for(var s=function(e,t){return t?new ge(n.line,l(e,1),"before"):new ge(n.line,e,"after")};e>=0&&e<i.length;e+=t){var a=i[e],o=t>0==(1!=a.level),c=o?r.begin:l(r.end,-1);if(a.from<=c&&c<a.to)return s(c,o);if(c=o?a.from:l(a.to,-1),r.begin<=c&&c<r.end)return s(c,o)}},m=f(s+r,r,u);if(m)return m;var g=r>0?u.end:l(u.begin,-1);if(null!=g&&!(r>0&&g==t.text.length)&&(m=f(r>0?0:i.length-1,r,c(g))))return m;return null}(e.cm,o,t,n):Ks(o,t,n))){if(r||!function(){var r=t.line+n;if(r<e.first||r>=e.first+e.size)return!1;return t=new ge(r,t.ch,t.sticky),o=le(e,r)}())return!1;t=Ys(i,e.cm,o,t.line,n)}else t=s;return!0}if("char"==r)l();else if("column"==r)l(!0);else if("word"==r||"group"==r)for(var c=null,u="group"==r,h=e.cm&&e.cm.getHelper(t,"wordChars"),p=!0;!(n<0)||l(!p);p=!1){var d=o.text.charAt(t.ch)||"\n",f=te(d,h)?"w":u&&"\n"==d?"n":!u||/\s/.test(d)?null:"p";if(!u||p||f||(f="s"),c&&c!=f){n<0&&(n=1,l(),t.sticky="after");break}if(f&&(c=f),n>0&&!l(!p))break}var m=ts(e,t,s,a,!0);return be(s,m)&&(m.hitSide=!0),m}function Ra(e,t,n,r){var i,s,a=e.doc,o=t.left;if("page"==r){var l=Math.min(e.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight),c=Math.max(l-.5*tr(e.display),3);i=(n>0?t.bottom:t.top)+n*c}else"line"==r&&(i=n>0?t.bottom+3:t.top-3);for(;(s=Zn(e,o,i)).outside;){if(n<0?i<=0:i>=a.height){s.hitSide=!0;break}i+=5*n}return s}var Da=function(e){this.cm=e,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new j,this.composing=null,this.gracePeriod=!1,this.readDOMTimeout=null};function Fa(e,t){var n=Pn(e,t.line);if(!n||n.hidden)return null;var r=le(e.doc,t.line),i=An(n,r,t.line),s=Je(r,e.doc.direction),a="left";if(s){var o=Qe(s,t.ch);a=o%2?"right":"left"}var l=Dn(i.map,t.ch,a);return l.offset="right"==l.collapse?l.end:l.start,l}function Va(e,t){return t&&(e.bad=!0),e}function ja(e,t,n){var r;if(t==e.display.lineDiv){if(!(r=e.display.lineDiv.childNodes[n]))return Va(e.clipPos(ge(e.display.viewTo-1)),!0);t=null,n=0}else for(r=t;;r=r.parentNode){if(!r||r==e.display.lineDiv)return null;if(r.parentNode&&r.parentNode==e.display.lineDiv)break}for(var i=0;i<e.display.view.length;i++){var s=e.display.view[i];if(s.node==r)return Ba(s,t,n)}}function Ba(e,t,n){var r=e.text.firstChild,i=!1;if(!t||!P(r,t))return Va(ge(pe(e.line),0),!0);if(t==r&&(i=!0,t=r.childNodes[n],n=0,!t)){var s=e.rest?Y(e.rest):e.line;return Va(ge(pe(s),s.text.length),i)}var a=3==t.nodeType?t:null,o=t;for(a||1!=t.childNodes.length||3!=t.firstChild.nodeType||(a=t.firstChild,n&&(n=a.nodeValue.length));o.parentNode!=r;)o=o.parentNode;var l=e.measure,c=l.maps;function u(t,n,r){for(var i=-1;i<(c?c.length:0);i++)for(var s=i<0?l.map:c[i],a=0;a<s.length;a+=3){var o=s[a+2];if(o==t||o==n){var u=pe(i<0?e.line:e.rest[i]),h=s[a]+r;return(r<0||o!=t)&&(h=s[a+(r?1:0)]),ge(u,h)}}}var h=u(a,o,n);if(h)return Va(h,i);for(var p=o.nextSibling,d=a?a.nodeValue.length-n:0;p;p=p.nextSibling){if(h=u(p,p.firstChild,0))return Va(ge(h.line,h.ch-d),i);d+=p.textContent.length}for(var f=o.previousSibling,m=n;f;f=f.previousSibling){if(h=u(f,f.firstChild,-1))return Va(ge(h.line,h.ch+m),i);m+=f.textContent.length}}Da.prototype.init=function(e){var t=this,n=this,r=n.cm,i=n.div=e.lineDiv;function s(e){if(!st(r,e)){if(r.somethingSelected())Na({lineWise:!1,text:r.getSelections()}),"cut"==e.type&&r.replaceSelection("",null,"cut");else{if(!r.options.lineWiseCopyCut)return;var t=Pa(r);Na({lineWise:!0,text:t.text}),"cut"==e.type&&r.operation(function(){r.setSelections(t.ranges,0,$),r.replaceSelection("",null,"cut")})}if(e.clipboardData){e.clipboardData.clearData();var s=Sa.text.join("\n");if(e.clipboardData.setData("Text",s),e.clipboardData.getData("Text")==s)return void e.preventDefault()}var a=Oa(),o=a.firstChild;r.display.lineSpace.insertBefore(a,r.display.lineSpace.firstChild),o.value=Sa.text.join("\n");var l=document.activeElement;R(o),setTimeout(function(){r.display.lineSpace.removeChild(a),l.focus(),l==i&&n.showPrimarySelection()},50)}}Ia(i,r.options.spellcheck),tt(i,"paste",function(e){st(r,e)||Aa(e,r)||o<=11&&setTimeout(Yr(r,function(){return t.updateFromDOM()}),20)}),tt(i,"compositionstart",function(e){t.composing={data:e.data,done:!1}}),tt(i,"compositionupdate",function(e){t.composing||(t.composing={data:e.data,done:!1})}),tt(i,"compositionend",function(e){t.composing&&(e.data!=t.composing.data&&t.readFromDOMSoon(),t.composing.done=!0)}),tt(i,"touchstart",function(){return n.forceCompositionEnd()}),tt(i,"input",function(){t.composing||t.readFromDOMSoon()}),tt(i,"copy",s),tt(i,"cut",s)},Da.prototype.prepareSelection=function(){var e=ur(this.cm,!1);return e.focus=this.cm.state.focused,e},Da.prototype.showSelection=function(e,t){e&&this.cm.display.view.length&&((e.focus||t)&&this.showPrimarySelection(),this.showMultipleSelections(e))},Da.prototype.getSelection=function(){return this.cm.display.wrapper.ownerDocument.getSelection()},Da.prototype.showPrimarySelection=function(){var e=this.getSelection(),t=this.cm,r=t.doc.sel.primary(),i=r.from(),s=r.to();if(t.display.viewTo==t.display.viewFrom||i.line>=t.display.viewTo||s.line<t.display.viewFrom)e.removeAllRanges();else{var a=ja(t,e.anchorNode,e.anchorOffset),o=ja(t,e.focusNode,e.focusOffset);if(!a||a.bad||!o||o.bad||0!=ve(xe(a,o),i)||0!=ve(we(a,o),s)){var l=t.display.view,c=i.line>=t.display.viewFrom&&Fa(t,i)||{node:l[0].measure.map[2],offset:0},u=s.line<t.display.viewTo&&Fa(t,s);if(!u){var h=l[l.length-1].measure,p=h.maps?h.maps[h.maps.length-1]:h.map;u={node:p[p.length-1],offset:p[p.length-2]-p[p.length-3]}}if(c&&u){var d,f=e.rangeCount&&e.getRangeAt(0);try{d=_(c.node,c.offset,u.offset,u.node)}catch(m){}d&&(!n&&t.state.focused?(e.collapse(c.node,c.offset),d.collapsed||(e.removeAllRanges(),e.addRange(d))):(e.removeAllRanges(),e.addRange(d)),f&&null==e.anchorNode?e.addRange(f):n&&this.startGracePeriod()),this.rememberSelection()}else e.removeAllRanges()}}},Da.prototype.startGracePeriod=function(){var e=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout(function(){e.gracePeriod=!1,e.selectionChanged()&&e.cm.operation(function(){return e.cm.curOp.selectionChanged=!0})},20)},Da.prototype.showMultipleSelections=function(e){T(this.cm.display.cursorDiv,e.cursors),T(this.cm.display.selectionDiv,e.selection)},Da.prototype.rememberSelection=function(){var e=this.getSelection();this.lastAnchorNode=e.anchorNode,this.lastAnchorOffset=e.anchorOffset,this.lastFocusNode=e.focusNode,this.lastFocusOffset=e.focusOffset},Da.prototype.selectionInEditor=function(){var e=this.getSelection();if(!e.rangeCount)return!1;var t=e.getRangeAt(0).commonAncestorContainer;return P(this.div,t)},Da.prototype.focus=function(){"nocursor"!=this.cm.options.readOnly&&(this.selectionInEditor()||this.showSelection(this.prepareSelection(),!0),this.div.focus())},Da.prototype.blur=function(){this.div.blur()},Da.prototype.getField=function(){return this.div},Da.prototype.supportsTouch=function(){return!0},Da.prototype.receivedFocus=function(){var e=this;this.selectionInEditor()?this.pollSelection():Kr(this.cm,function(){return e.cm.curOp.selectionChanged=!0}),this.polling.set(this.cm.options.pollInterval,function t(){e.cm.state.focused&&(e.pollSelection(),e.polling.set(e.cm.options.pollInterval,t))})},Da.prototype.selectionChanged=function(){var e=this.getSelection();return e.anchorNode!=this.lastAnchorNode||e.anchorOffset!=this.lastAnchorOffset||e.focusNode!=this.lastFocusNode||e.focusOffset!=this.lastFocusOffset},Da.prototype.pollSelection=function(){if(null==this.readDOMTimeout&&!this.gracePeriod&&this.selectionChanged()){var e=this.getSelection(),t=this.cm;if(g&&u&&this.cm.options.gutters.length&&function(e){for(var t=e;t;t=t.parentNode)if(/CodeMirror-gutter-wrapper/.test(t.className))return!0;return!1}(e.anchorNode))return this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs}),this.blur(),void this.focus();if(!this.composing){this.rememberSelection();var n=ja(t,e.anchorNode,e.anchorOffset),r=ja(t,e.focusNode,e.focusOffset);n&&r&&Kr(t,function(){Yi(t.doc,xi(n,r),$),(n.bad||r.bad)&&(t.curOp.selectionChanged=!0)})}}},Da.prototype.pollContent=function(){null!=this.readDOMTimeout&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var e,t,n,r=this.cm,i=r.display,s=r.doc.sel.primary(),a=s.from(),o=s.to();if(0==a.ch&&a.line>r.firstLine()&&(a=ge(a.line-1,le(r.doc,a.line-1).length)),o.ch==le(r.doc,o.line).text.length&&o.line<r.lastLine()&&(o=ge(o.line+1,0)),a.line<i.viewFrom||o.line>i.viewTo-1)return!1;a.line==i.viewFrom||0==(e=lr(r,a.line))?(t=pe(i.view[0].line),n=i.view[0].node):(t=pe(i.view[e].line),n=i.view[e-1].node.nextSibling);var l,c,u=lr(r,o.line);if(u==i.view.length-1?(l=i.viewTo-1,c=i.lineDiv.lastChild):(l=pe(i.view[u+1].line)-1,c=i.view[u+1].node.previousSibling),!n)return!1;for(var h=r.doc.splitLines(function(e,t,n,r,i){var s="",a=!1,o=e.doc.lineSeparator(),l=!1;function c(){a&&(s+=o,l&&(s+=o),a=l=!1)}function u(e){e&&(c(),s+=e)}function h(t){if(1==t.nodeType){var n=t.getAttribute("cm-text");if(n)return void u(n);var s,p=t.getAttribute("cm-marker");if(p){var d=e.findMarks(ge(r,0),ge(i+1,0),function(e){return function(t){return t.id==e}}(+p));return void(d.length&&(s=d[0].find(0))&&u(ce(e.doc,s.from,s.to).join(o)))}if("false"==t.getAttribute("contenteditable"))return;var f=/^(pre|div|p|li|table|br)$/i.test(t.nodeName);if(!/^br$/i.test(t.nodeName)&&0==t.textContent.length)return;f&&c();for(var m=0;m<t.childNodes.length;m++)h(t.childNodes[m]);/^(pre|p)$/i.test(t.nodeName)&&(l=!0),f&&(a=!0)}else 3==t.nodeType&&u(t.nodeValue.replace(/\u200b/g,"").replace(/\u00a0/g," "))}for(;h(t),t!=n;)t=t.nextSibling,l=!1;return s}(r,n,c,t,l)),p=ce(r.doc,ge(t,0),ge(l,le(r.doc,l).text.length));h.length>1&&p.length>1;)if(Y(h)==Y(p))h.pop(),p.pop(),l--;else{if(h[0]!=p[0])break;h.shift(),p.shift(),t++}for(var d=0,f=0,m=h[0],g=p[0],v=Math.min(m.length,g.length);d<v&&m.charCodeAt(d)==g.charCodeAt(d);)++d;for(var b=Y(h),y=Y(p),w=Math.min(b.length-(1==h.length?d:0),y.length-(1==p.length?d:0));f<w&&b.charCodeAt(b.length-f-1)==y.charCodeAt(y.length-f-1);)++f;if(1==h.length&&1==p.length&&t==a.line)for(;d&&d>a.ch&&b.charCodeAt(b.length-f-1)==y.charCodeAt(y.length-f-1);)d--,f++;h[h.length-1]=b.slice(0,b.length-f).replace(/^\u200b+/,""),h[0]=h[0].slice(d).replace(/\u200b+$/,"");var x=ge(t,d),E=ge(l,p.length?Y(p).length-f:0);return h.length>1||h[0]||ve(x,E)?(us(r.doc,h,x,E,"+input"),!0):void 0},Da.prototype.ensurePolled=function(){this.forceCompositionEnd()},Da.prototype.reset=function(){this.forceCompositionEnd()},Da.prototype.forceCompositionEnd=function(){this.composing&&(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())},Da.prototype.readFromDOMSoon=function(){var e=this;null==this.readDOMTimeout&&(this.readDOMTimeout=setTimeout(function(){if(e.readDOMTimeout=null,e.composing){if(!e.composing.done)return;e.composing=null}e.updateFromDOM()},80))},Da.prototype.updateFromDOM=function(){var e=this;!this.cm.isReadOnly()&&this.pollContent()||Kr(this.cm,function(){return Xr(e.cm)})},Da.prototype.setUneditable=function(e){e.contentEditable="false"},Da.prototype.onKeyPress=function(e){0==e.charCode||this.composing||(e.preventDefault(),this.cm.isReadOnly()||Yr(this.cm,Ta)(this.cm,String.fromCharCode(null==e.charCode?e.keyCode:e.charCode),0))},Da.prototype.readOnlyChanged=function(e){this.div.contentEditable=String("nocursor"!=e)},Da.prototype.onContextMenu=function(){},Da.prototype.resetPosition=function(){},Da.prototype.needsContentAttribute=!0;var Ua=function(e){this.cm=e,this.prevInput="",this.pollingFast=!1,this.polling=new j,this.hasSelection=!1,this.composing=null};Ua.prototype.init=function(e){var t=this,n=this,r=this.cm;this.createField(e);var i=this.textarea;function s(e){if(!st(r,e)){if(r.somethingSelected())Na({lineWise:!1,text:r.getSelections()});else{if(!r.options.lineWiseCopyCut)return;var t=Pa(r);Na({lineWise:!0,text:t.text}),"cut"==e.type?r.setSelections(t.ranges,null,$):(n.prevInput="",i.value=t.text.join("\n"),R(i))}"cut"==e.type&&(r.state.cutIncoming=!0)}}e.wrapper.insertBefore(this.wrapper,e.wrapper.firstChild),m&&(i.style.width="0px"),tt(i,"input",function(){a&&o>=9&&t.hasSelection&&(t.hasSelection=null),n.poll()}),tt(i,"paste",function(e){st(r,e)||Aa(e,r)||(r.state.pasteIncoming=!0,n.fastPoll())}),tt(i,"cut",s),tt(i,"copy",s),tt(e.scroller,"paste",function(t){En(e,t)||st(r,t)||(r.state.pasteIncoming=!0,n.focus())}),tt(e.lineSpace,"selectstart",function(t){En(e,t)||ct(t)}),tt(i,"compositionstart",function(){var e=r.getCursor("from");n.composing&&n.composing.range.clear(),n.composing={start:e,range:r.markText(e,r.getCursor("to"),{className:"CodeMirror-composing"})}}),tt(i,"compositionend",function(){n.composing&&(n.poll(),n.composing.range.clear(),n.composing=null)})},Ua.prototype.createField=function(e){this.wrapper=Oa(),this.textarea=this.wrapper.firstChild},Ua.prototype.prepareSelection=function(){var e=this.cm,t=e.display,n=e.doc,r=ur(e);if(e.options.moveInputWithCursor){var i=Gn(e,n.sel.primary().head,"div"),s=t.wrapper.getBoundingClientRect(),a=t.lineDiv.getBoundingClientRect();r.teTop=Math.max(0,Math.min(t.wrapper.clientHeight-10,i.top+a.top-s.top)),r.teLeft=Math.max(0,Math.min(t.wrapper.clientWidth-10,i.left+a.left-s.left))}return r},Ua.prototype.showSelection=function(e){var t=this.cm,n=t.display;T(n.cursorDiv,e.cursors),T(n.selectionDiv,e.selection),null!=e.teTop&&(this.wrapper.style.top=e.teTop+"px",this.wrapper.style.left=e.teLeft+"px")},Ua.prototype.reset=function(e){if(!this.contextMenuPending&&!this.composing){var t=this.cm;if(t.somethingSelected()){this.prevInput="";var n=t.getSelection();this.textarea.value=n,t.state.focused&&R(this.textarea),a&&o>=9&&(this.hasSelection=n)}else e||(this.prevInput=this.textarea.value="",a&&o>=9&&(this.hasSelection=null))}},Ua.prototype.getField=function(){return this.textarea},Ua.prototype.supportsTouch=function(){return!1},Ua.prototype.focus=function(){if("nocursor"!=this.cm.options.readOnly&&(!v||I()!=this.textarea))try{this.textarea.focus()}catch(e){}},Ua.prototype.blur=function(){this.textarea.blur()},Ua.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0},Ua.prototype.receivedFocus=function(){this.slowPoll()},Ua.prototype.slowPoll=function(){var e=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,function(){e.poll(),e.cm.state.focused&&e.slowPoll()})},Ua.prototype.fastPoll=function(){var e=!1,t=this;t.pollingFast=!0,t.polling.set(20,function n(){var r=t.poll();r||e?(t.pollingFast=!1,t.slowPoll()):(e=!0,t.polling.set(60,n))})},Ua.prototype.poll=function(){var e=this,t=this.cm,n=this.textarea,r=this.prevInput;if(this.contextMenuPending||!t.state.focused||xt(n)&&!r&&!this.composing||t.isReadOnly()||t.options.disableInput||t.state.keySeq)return!1;var i=n.value;if(i==r&&!t.somethingSelected())return!1;if(a&&o>=9&&this.hasSelection===i||b&&/[\uf700-\uf7ff]/.test(i))return t.display.input.reset(),!1;if(t.doc.sel==t.display.selForContextMenu){var s=i.charCodeAt(0);if(8203!=s||r||(r="​"),8666==s)return this.reset(),this.cm.execCommand("undo")}for(var l=0,c=Math.min(r.length,i.length);l<c&&r.charCodeAt(l)==i.charCodeAt(l);)++l;return Kr(t,function(){Ta(t,i.slice(l),r.length-l,null,e.composing?"*compose":null),i.length>1e3||i.indexOf("\n")>-1?n.value=e.prevInput="":e.prevInput=i,e.composing&&(e.composing.range.clear(),e.composing.range=t.markText(e.composing.start,t.getCursor("to"),{className:"CodeMirror-composing"}))}),!0},Ua.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},Ua.prototype.onKeyPress=function(){a&&o>=9&&(this.hasSelection=null),this.fastPoll()},Ua.prototype.onContextMenu=function(e){var t=this,n=t.cm,r=n.display,i=t.textarea,s=or(n,e),c=r.scroller.scrollTop;if(s&&!h){var u=n.options.resetSelectionOnContextMenu;u&&-1==n.doc.sel.contains(s)&&Yr(n,Yi)(n.doc,xi(s),$);var p=i.style.cssText,d=t.wrapper.style.cssText;t.wrapper.style.cssText="position: absolute";var f,m=t.wrapper.getBoundingClientRect();if(i.style.cssText="position: absolute; width: 30px; height: 30px;\n      top: "+(e.clientY-m.top-5)+"px; left: "+(e.clientX-m.left-5)+"px;\n      z-index: 1000; background: "+(a?"rgba(255, 255, 255, .05)":"transparent")+";\n      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);",l&&(f=window.scrollY),r.input.focus(),l&&window.scrollTo(null,f),r.input.reset(),n.somethingSelected()||(i.value=t.prevInput=" "),t.contextMenuPending=!0,r.selForContextMenu=n.doc.sel,clearTimeout(r.detectingSelectAll),a&&o>=9&&v(),k){pt(e);var g=function(){rt(window,"mouseup",g),setTimeout(b,20)};tt(window,"mouseup",g)}else setTimeout(b,50)}function v(){if(null!=i.selectionStart){var e=n.somethingSelected(),s="​"+(e?i.value:"");i.value="⇚",i.value=s,t.prevInput=e?"":"​",i.selectionStart=1,i.selectionEnd=s.length,r.selForContextMenu=n.doc.sel}}function b(){if(t.contextMenuPending=!1,t.wrapper.style.cssText=d,i.style.cssText=p,a&&o<9&&r.scrollbars.setScrollTop(r.scroller.scrollTop=c),null!=i.selectionStart){(!a||a&&o<9)&&v();var e=0,s=function(){r.selForContextMenu==n.doc.sel&&0==i.selectionStart&&i.selectionEnd>0&&"​"==t.prevInput?Yr(n,rs)(n):e++<10?r.detectingSelectAll=setTimeout(s,500):(r.selForContextMenu=null,r.input.reset())};r.detectingSelectAll=setTimeout(s,200)}}},Ua.prototype.readOnlyChanged=function(e){e||this.reset(),this.textarea.disabled="nocursor"==e},Ua.prototype.setUneditable=function(){},Ua.prototype.needsContentAttribute=!1,function(e){var t=e.optionHandlers;function n(n,r,i,s){e.defaults[n]=r,i&&(t[n]=s?function(e,t,n){n!=va&&i(e,t,n)}:i)}e.defineOption=n,e.Init=va,n("value","",function(e,t){return e.setValue(t)},!0),n("mode",null,function(e,t){e.doc.modeOption=t,Si(e)},!0),n("indentUnit",2,Si,!0),n("indentWithTabs",!1),n("smartIndent",!0),n("tabSize",4,function(e){Ni(e),Bn(e),Xr(e)},!0),n("lineSeparator",null,function(e,t){if(e.doc.lineSep=t,t){var n=[],r=e.doc.first;e.doc.iter(function(e){for(var i=0;;){var s=e.text.indexOf(t,i);if(-1==s)break;i=s+t.length,n.push(ge(r,s))}r++});for(var i=n.length-1;i>=0;i--)us(e.doc,t,n[i],ge(n[i].line,n[i].ch+t.length))}}),n("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b-\u200f\u2028\u2029\ufeff]/g,function(e,t,n){e.state.specialChars=new RegExp(t.source+(t.test("\t")?"":"|\t"),"g"),n!=va&&e.refresh()}),n("specialCharPlaceholder",Xt,function(e){return e.refresh()},!0),n("electricChars",!0),n("inputStyle",v?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor")},!0),n("spellcheck",!1,function(e,t){return e.getInputField().spellcheck=t},!0),n("rtlMoveVisually",!w),n("wholeLineUpdateBefore",!0),n("theme","default",function(e){ga(e),wa(e)},!0),n("keyMap","default",function(e,t,n){var r=Ws(t),i=n!=va&&Ws(n);i&&i.detach&&i.detach(e,r),r.attach&&r.attach(e,i||null)}),n("extraKeys",null),n("configureMouse",null),n("lineWrapping",!1,Ea,!0),n("gutters",[],function(e){pi(e.options),wa(e)},!0),n("fixedGutter",!0,function(e,t){e.display.gutters.style.left=t?ir(e.display)+"px":"0",e.refresh()},!0),n("coverGutterNextToScrollbar",!1,function(e){return Dr(e)},!0),n("scrollbarStyle","native",function(e){jr(e),Dr(e),e.display.scrollbars.setScrollTop(e.doc.scrollTop),e.display.scrollbars.setScrollLeft(e.doc.scrollLeft)},!0),n("lineNumbers",!1,function(e){pi(e.options),wa(e)},!0),n("firstLineNumber",1,wa,!0),n("lineNumberFormatter",function(e){return e},wa,!0),n("showCursorWhenSelecting",!1,cr,!0),n("resetSelectionOnContextMenu",!0),n("lineWiseCopyCut",!0),n("pasteLinesPerSelection",!0),n("selectionsMayTouch",!1),n("readOnly",!1,function(e,t){"nocursor"==t&&(br(e),e.display.input.blur()),e.display.input.readOnlyChanged(t)}),n("disableInput",!1,function(e,t){t||e.display.input.reset()},!0),n("dragDrop",!0,xa),n("allowDropFileTypes",null),n("cursorBlinkRate",530),n("cursorScrollMargin",0),n("cursorHeight",1,cr,!0),n("singleCursorHeightPerLine",!0,cr,!0),n("workTime",100),n("workDelay",100),n("flattenSpans",!0,Ni,!0),n("addModeClass",!1,Ni,!0),n("pollInterval",100),n("undoDepth",200,function(e,t){return e.doc.history.undoDepth=t}),n("historyEventDelay",1250),n("viewportMargin",10,function(e){return e.refresh()},!0),n("maxHighlightLength",1e4,Ni,!0),n("moveInputWithCursor",!0,function(e,t){t||e.display.input.resetPosition()}),n("tabindex",null,function(e,t){return e.display.input.getField().tabIndex=t||""}),n("autofocus",null),n("direction","ltr",function(e,t){return e.doc.setDirection(t)},!0),n("phrases",null)}(ka),function(e){var t=e.optionHandlers,n=e.helpers={};e.prototype={constructor:e,focus:function(){window.focus(),this.display.input.focus()},setOption:function(e,n){var r=this.options,i=r[e];r[e]==n&&"mode"!=e||(r[e]=n,t.hasOwnProperty(e)&&Yr(this,t[e])(this,n,i),it(this,"optionChange",this,e))},getOption:function(e){return this.options[e]},getDoc:function(){return this.doc},addKeyMap:function(e,t){this.state.keyMaps[t?"push":"unshift"](Ws(e))},removeKeyMap:function(e){for(var t=this.state.keyMaps,n=0;n<t.length;++n)if(t[n]==e||t[n].name==e)return t.splice(n,1),!0},addOverlay:Zr(function(t,n){var r=t.token?t:e.getMode(this.options,t);if(r.startState)throw new Error("Overlays may not be stateful.");!function(e,t,n){var r=0,i=n(t);for(;r<e.length&&n(e[r])<=i;)r++;e.splice(r,0,t)}(this.state.overlays,{mode:r,modeSpec:t,opaque:n&&n.opaque,priority:n&&n.priority||0},function(e){return e.priority}),this.state.modeGen++,Xr(this)}),removeOverlay:Zr(function(e){for(var t=this.state.overlays,n=0;n<t.length;++n){var r=t[n].modeSpec;if(r==e||"string"==typeof e&&r.name==e)return t.splice(n,1),this.state.modeGen++,void Xr(this)}}),indentLine:Zr(function(e,t,n){"string"!=typeof t&&"number"!=typeof t&&(t=null==t?this.options.smartIndent?"smart":"prev":t?"add":"subtract"),fe(this.doc,e)&&_a(this,e,t,n)}),indentSelection:Zr(function(e){for(var t=this.doc.sel.ranges,n=-1,r=0;r<t.length;r++){var i=t[r];if(i.empty())i.head.line>n&&(_a(this,i.head.line,e,!0),n=i.head.line,r==this.doc.sel.primIndex&&Sr(this));else{var s=i.from(),a=i.to(),o=Math.max(n,s.line);n=Math.min(this.lastLine(),a.line-(a.ch?0:1))+1;for(var l=o;l<n;++l)_a(this,l,e);var c=this.doc.sel.ranges;0==s.ch&&t.length==c.length&&c[r].from().ch>0&&qi(this.doc,r,new yi(s,c[r].to()),$)}}}),getTokenAt:function(e,t){return $t(this,e,t)},getLineTokens:function(e,t){return $t(this,ge(e),t,!0)},getTokenTypeAt:function(e){e=ke(this.doc,e);var t,n=Ft(this,le(this.doc,e.line)),r=0,i=(n.length-1)/2,s=e.ch;if(0==s)t=n[2];else for(;;){var a=r+i>>1;if((a?n[2*a-1]:0)>=s)i=a;else{if(!(n[2*a+1]<s)){t=n[2*a+2];break}r=a+1}}var o=t?t.indexOf("overlay "):-1;return o<0?t:0==o?null:t.slice(0,o-1)},getModeAt:function(t){var n=this.doc.mode;return n.innerMode?e.innerMode(n,this.getTokenAt(t).state).mode:n},getHelper:function(e,t){return this.getHelpers(e,t)[0]},getHelpers:function(e,t){var r=[];if(!n.hasOwnProperty(t))return r;var i=n[t],s=this.getModeAt(e);if("string"==typeof s[t])i[s[t]]&&r.push(i[s[t]]);else if(s[t])for(var a=0;a<s[t].length;a++){var o=i[s[t][a]];o&&r.push(o)}else s.helperType&&i[s.helperType]?r.push(i[s.helperType]):i[s.name]&&r.push(i[s.name]);for(var l=0;l<i._global.length;l++){var c=i._global[l];c.pred(s,this)&&-1==B(r,c.val)&&r.push(c.val)}return r},getStateAfter:function(e,t){var n=this.doc;return Vt(this,(e=Ee(n,null==e?n.first+n.size-1:e))+1,t).state},cursorCoords:function(e,t){var n=this.doc.sel.primary();return Gn(this,null==e?n.head:"object"==typeof e?ke(this.doc,e):e?n.from():n.to(),t||"page")},charCoords:function(e,t){return qn(this,ke(this.doc,e),t||"page")},coordsChar:function(e,t){return Zn(this,(e=Wn(this,e,t||"page")).left,e.top)},lineAtHeight:function(e,t){return e=Wn(this,{top:e,left:0},t||"page").top,de(this.doc,e+this.display.viewOffset)},heightAtLine:function(e,t,n){var r,i=!1;if("number"==typeof e){var s=this.doc.first+this.doc.size-1;e<this.doc.first?e=this.doc.first:e>s&&(e=s,i=!0),r=le(this.doc,e)}else r=e;return zn(this,r,{top:0,left:0},t||"page",n||i).top+(i?this.doc.height-Ge(r):0)},defaultTextHeight:function(){return tr(this.display)},defaultCharWidth:function(){return nr(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(e,t,n,r,i){var s=this.display,a=(e=Gn(this,ke(this.doc,e))).bottom,o=e.left;if(t.style.position="absolute",t.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(t),s.sizer.appendChild(t),"over"==r)a=e.top;else if("above"==r||"near"==r){var l=Math.max(s.wrapper.clientHeight,this.doc.height),c=Math.max(s.sizer.clientWidth,s.lineSpace.clientWidth);("above"==r||e.bottom+t.offsetHeight>l)&&e.top>t.offsetHeight?a=e.top-t.offsetHeight:e.bottom+t.offsetHeight<=l&&(a=e.bottom),o+t.offsetWidth>c&&(o=c-t.offsetWidth)}t.style.top=a+"px",t.style.left=t.style.right="","right"==i?(o=s.sizer.clientWidth-t.offsetWidth,t.style.right="0px"):("left"==i?o=0:"middle"==i&&(o=(s.sizer.clientWidth-t.offsetWidth)/2),t.style.left=o+"px"),n&&function(e,t){var n=Cr(e,t);null!=n.scrollTop&&Lr(e,n.scrollTop);null!=n.scrollLeft&&Ir(e,n.scrollLeft)}(this,{left:o,top:a,right:o+t.offsetWidth,bottom:a+t.offsetHeight})},triggerOnKeyDown:Zr(sa),triggerOnKeyPress:Zr(oa),triggerOnKeyUp:aa,triggerOnMouseDown:Zr(ha),execCommand:function(e){if(Zs.hasOwnProperty(e))return Zs[e].call(null,this)},triggerElectric:Zr(function(e){La(this,e)}),findPosH:function(e,t,n,r){var i=1;t<0&&(i=-1,t=-t);for(var s=ke(this.doc,e),a=0;a<t&&!(s=Ma(this.doc,s,i,n,r)).hitSide;++a);return s},moveH:Zr(function(e,t){var n=this;this.extendSelectionsBy(function(r){return n.display.shift||n.doc.extend||r.empty()?Ma(n.doc,r.head,e,t,n.options.rtlMoveVisually):e<0?r.from():r.to()},W)}),deleteH:Zr(function(e,t){var n=this.doc.sel,r=this.doc;n.somethingSelected()?r.replaceSelection("",null,"+delete"):qs(this,function(n){var i=Ma(r,n.head,e,t,!1);return e<0?{from:i,to:n.head}:{from:n.head,to:i}})}),findPosV:function(e,t,n,r){var i=1,s=r;t<0&&(i=-1,t=-t);for(var a=ke(this.doc,e),o=0;o<t;++o){var l=Gn(this,a,"div");if(null==s?s=l.left:l.left=s,(a=Ra(this,l,i,n)).hitSide)break}return a},moveV:Zr(function(e,t){var n=this,r=this.doc,i=[],s=!this.display.shift&&!r.extend&&r.sel.somethingSelected();if(r.extendSelectionsBy(function(a){if(s)return e<0?a.from():a.to();var o=Gn(n,a.head,"div");null!=a.goalColumn&&(o.left=a.goalColumn),i.push(o.left);var l=Ra(n,o,e,t);return"page"==t&&a==r.sel.primary()&&_r(n,qn(n,l,"div").top-o.top),l},W),i.length)for(var a=0;a<r.sel.ranges.length;a++)r.sel.ranges[a].goalColumn=i[a]}),findWordAt:function(e){var t=this.doc,n=le(t,e.line).text,r=e.ch,i=e.ch;if(n){var s=this.getHelper(e,"wordChars");"before"!=e.sticky&&i!=n.length||!r?++i:--r;for(var a=n.charAt(r),o=te(a,s)?function(e){return te(e,s)}:/\s/.test(a)?function(e){return/\s/.test(e)}:function(e){return!/\s/.test(e)&&!te(e)};r>0&&o(n.charAt(r-1));)--r;for(;i<n.length&&o(n.charAt(i));)++i}return new yi(ge(e.line,r),ge(e.line,i))},toggleOverwrite:function(e){null!=e&&e==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?O(this.display.cursorDiv,"CodeMirror-overwrite"):S(this.display.cursorDiv,"CodeMirror-overwrite"),it(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==I()},isReadOnly:function(){return!(!this.options.readOnly&&!this.doc.cantEdit)},scrollTo:Zr(function(e,t){Nr(this,e,t)}),getScrollInfo:function(){var e=this.display.scroller;return{left:e.scrollLeft,top:e.scrollTop,height:e.scrollHeight-Sn(this)-this.display.barHeight,width:e.scrollWidth-Sn(this)-this.display.barWidth,clientHeight:Tn(this),clientWidth:Nn(this)}},scrollIntoView:Zr(function(e,t){null==e?(e={from:this.doc.sel.primary().head,to:null},null==t&&(t=this.options.cursorScrollMargin)):"number"==typeof e?e={from:ge(e,0),to:null}:null==e.from&&(e={from:e,to:null}),e.to||(e.to=e.from),e.margin=t||0,null!=e.from.line?function(e,t){Tr(e),e.curOp.scrollToPos=t}(this,e):Ar(this,e.from,e.to,e.margin)}),setSize:Zr(function(e,t){var n=this,r=function(e){return"number"==typeof e||/^\d+$/.test(String(e))?e+"px":e};null!=e&&(this.display.wrapper.style.width=r(e)),null!=t&&(this.display.wrapper.style.height=r(t)),this.options.lineWrapping&&jn(this);var i=this.display.viewFrom;this.doc.iter(i,this.display.viewTo,function(e){if(e.widgets)for(var t=0;t<e.widgets.length;t++)if(e.widgets[t].noHScroll){Jr(n,i,"widget");break}++i}),this.curOp.forceUpdate=!0,it(this,"refresh",this)}),operation:function(e){return Kr(this,e)},startOperation:function(){return Ur(this)},endOperation:function(){return Hr(this)},refresh:Zr(function(){var e=this.display.cachedTextHeight;Xr(this),this.curOp.forceUpdate=!0,Bn(this),Nr(this,this.doc.scrollLeft,this.doc.scrollTop),ci(this),(null==e||Math.abs(e-tr(this.display))>.5)&&ar(this),it(this,"refresh",this)}),swapDoc:Zr(function(e){var t=this.doc;return t.cm=null,Pi(this,e),Bn(this),this.display.input.reset(),Nr(this,e.scrollLeft,e.scrollTop),this.curOp.forceScroll=!0,ln(this,"swapDoc",this,t),t}),phrase:function(e){var t=this.options.phrases;return t&&Object.prototype.hasOwnProperty.call(t,e)?t[e]:e},getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},lt(e),e.registerHelper=function(t,r,i){n.hasOwnProperty(t)||(n[t]=e[t]={_global:[]}),n[t][r]=i},e.registerGlobalHelper=function(t,r,i,s){e.registerHelper(t,r,s),n[t]._global.push({pred:i,val:s})}}(ka);var Ha="iter insert remove copy getEditor constructor".split(" ");for(var $a in Ss.prototype)Ss.prototype.hasOwnProperty($a)&&B(Ha,$a)<0&&(ka.prototype[$a]=function(e){return function(){return e.apply(this.doc,arguments)}}(Ss.prototype[$a]));return lt(Ss),ka.inputStyles={textarea:Ua,contenteditable:Da},ka.defineMode=function(e){ka.defaults.mode||"null"==e||(ka.defaults.mode=e),function(e,t){arguments.length>2&&(t.dependencies=Array.prototype.slice.call(arguments,2)),Ct[e]=t}.apply(this,arguments)},ka.defineMIME=function(e,t){_t[e]=t},ka.defineMode("null",function(){return{token:function(e){return e.skipToEnd()}}}),ka.defineMIME("text/plain","null"),ka.defineExtension=function(e,t){ka.prototype[e]=t},ka.defineDocExtension=function(e,t){Ss.prototype[e]=t},ka.fromTextArea=function(e,t){if((t=t?F(t):{}).value=e.value,!t.tabindex&&e.tabIndex&&(t.tabindex=e.tabIndex),!t.placeholder&&e.placeholder&&(t.placeholder=e.placeholder),null==t.autofocus){var n=I();t.autofocus=n==e||null!=e.getAttribute("autofocus")&&n==document.body}function r(){e.value=o.getValue()}var i;if(e.form&&(tt(e.form,"submit",r),!t.leaveSubmitMethodAlone)){var s=e.form;i=s.submit;try{var a=s.submit=function(){r(),s.submit=i,s.submit(),s.submit=a}}catch(l){}}t.finishInit=function(t){t.save=r,t.getTextArea=function(){return e},t.toTextArea=function(){t.toTextArea=isNaN,r(),e.parentNode.removeChild(t.getWrapperElement()),e.style.display="",e.form&&(rt(e.form,"submit",r),"function"==typeof e.form.submit&&(e.form.submit=i))}},e.style.display="none";var o=ka(function(t){return e.parentNode.insertBefore(t,e.nextSibling)},t);return o},function(e){e.off=rt,e.on=tt,e.wheelEventPixels=gi,e.Doc=Ss,e.splitLines=wt,e.countColumn=V,e.findColumn=q,e.isWordChar=ee,e.Pass=H,e.signal=it,e.Line=qt,e.changeEnd=Ei,e.scrollbarModel=Vr,e.Pos=ge,e.cmpPos=ve,e.modes=Ct,e.mimeModes=_t,e.resolveMode=St,e.getMode=Nt,e.modeExtensions=Tt,e.extendMode=At,e.copyState=Lt,e.startState=It,e.innerMode=Pt,e.commands=Zs,e.keyMap=Vs,e.keyName=zs,e.isModifierKey=Hs,e.lookupKey=Us,e.normalizeKeyMap=Bs,e.StringStream=Ot,e.SharedTextMarker=Es,e.TextMarker=ws,e.LineWidget=vs,e.e_preventDefault=ct,e.e_stopPropagation=ut,e.e_stop=pt,e.addClass=O,e.contains=P,e.rmClass=S,e.keyNames=Ms}(ka),ka.version="5.41.0",ka}()}()});const ow=/Mac|iPhone/.test(navigator.platform),lw={Alt:"⌥",Tab:" ",Up:"↑",Down:"↓",Left:"←",Right:"→",Cmd:"⌘",Ctrl:" ",Shift:"⇧",Enter:"↩",Backspace:" ",Escape:" ",Option:"⌥"},cw={Alt:"opt",Backspace:"delete",Cmd:"cmd",Ctrl:"ctrl",Enter:"return",Escape:"esc",Tab:"tab",Down:" ",Up:" ",Left:" ",Right:" ","?":"Question mark"},uw={Ctrl:-4,Alt:-3,Shift:-2,Cmd:-1};function hw(e,t,n){const r=e.split("-");return r.slice().sort((e,t)=>(uw[e]||r.indexOf(e))-(uw[t]||r.indexOf(t))).map(e=>t[e]||e).join(n)}function pw(e){return hw(e,ow?cw:{},"-").toLowerCase()}function dw(e){return ow?hw(e,lw,""):null}function fw(e){return ow?dw(e):`(${pw(e)})`}const mw={indentLess:"Indent less",indentMore:"Indent more"},gw=aw.keyMap.default==aw.keyMap.macDefault,vw=[{title:"Cell actions",description:"Commands operating on the cell itself.",keybindings:[["Shift-Enter","Run"],[gw?"Alt-Shift-Tab":"Alt-Shift-Up","Move focus","prev↑"],[gw?"Alt-Tab":"Alt-Shift-Down","","next↓"],[gw?"Cmd-Alt-Up":"Ctrl-Shift-Up","Move cell","up↑"],[gw?"Cmd-Alt-Down":"Ctrl-Shift-Down","","down↓"],["Ctrl-Shift-p","Pin/unpin input"],["Escape","Blur"],["Alt-Backspace","Merge cell into ...","prev↑"],["Ctrl-Alt-d","","next↓"],["Alt-Shift-Enter","Split cell & focus on ...","1st cell↑"],["Alt-Enter","","2nd cell↓"]]},{title:"Editing code",description:"Use keyboard for auto-complete, auto-identation, commenting and more.",keybindings:[[gw?"Cmd-/":"Ctrl-/","Toggle commenting"],["Tab","Indent lines/auto-complete"],["Ctrl-K","Cut selected text"],["Ctrl-Y","Paste previous cut text"],["Cmd-Z","Undo"],["Shift-Cmd-Z","Redo"],["Delete","Delete the character ... the cursor","before←"],["Fn-Delete","","after→"],["Alt-Delete","Delete up to the start of the word ... the cursor","before←"],["Ctrl-Alt-Delete","","after→"],["Cmd-Delete","Delete to the ... of current line","start←"],["Cmd-Fn-Delete","","end→"],["Return","Insert a new line/auto-indent"],["Ctrl-O","Insert a new line"],["Ctrl-T","Swap characters before & behind the cursor"],["Shift-Tab","Indent automatically"],["Ctrl-Alt-Tab","Insert a literal tab character"]].concat(Object.entries(aw.keyMap.default).map(([e,t])=>mw[t]&&[e,mw[t]])).filter(Boolean)},{title:"Visual mode",description:Y.createElement("div",{className:"lh-copy"},"Select cells with the keyboard. Available only when ",Y.createElement("em",null,"the page")," is in focus. Click anywhere on the page or press"," ",Y.createElement("span",{className:"dib ph1 lh-f7 lh-solid br1 br2 keyboard-key"},"esc")," ",", then use"," ",Y.createElement("span",{className:"dib ph1 lh-f7 lh-solid br1 br2 keyboard-key"},"j")," ","or"," ",Y.createElement("span",{className:"dib ph1 lh-f7 lh-solid br1 br2 keyboard-key"},"k")," ","to trigger this mode.",Y.createElement("div",{className:"mt3 fw6 tracked ttu dark-gray gold"},"Selecting cells")),keybindings:[["K","Move focus","1st cell/up↑"],["J","","down↓"],["X","Select/unselect"],["Shift-K","Expand selection","up↑"],["Shift-J","","down↓"],["Shift-A","Select all"],["Escape","Unselect"]]},{title:"",description:Y.createElement("div",{className:"mt3 fw6 tracked ttu dark-gray gold"},"Actions"),keybindings:[["Shift-Enter","Run cells"],["Shift-Up","Move cells","up↑"],["Shift-Down","","down↓"],["Shift-O","Insert a new cell","before↑"],["O","","after↓"],["Enter","Open cell input"],["D","Delete cells"],["P","Pin/upin input"]]},{title:"Cursor",description:Y.createElement("div",{className:"lh-copy"},"Cursor is the text insertion point. You can add multiple insertion points at the same time.",Y.createElement("div",{className:"mt3 fw6 tracked ttu dark-gray gold"},"Move cursor")),keybindings:[["Left-Right-Up-Down","Move around"],["Alt-Left","Words","start of prev word←"],["Alt-Right","","end of next word→"],["Fn-Left","Current line","start←"],["Fn-Right","","end→"],["Cmd-Left","Current line without wrapping","start←"],["Cmd-Right","","end→"],["Cmd-Up","Current cell","start←"],["Cmd-Down","","end→"],["Fn-Up","Between screens","↑up"],["Fn-Down","","↓down"]]},{title:"",description:Y.createElement("div",{className:"mt3 fw6 tracked ttu dark-gray gold"},"Block selection & Multiple carets"),keybindings:[["Cmd-Click","Place an additional caret"],["Alt-Cmd-Drag","Place additional carets across lines"],["Alt-Drag","Clear current carets and place carets across lines"],["Esc","Clear all but the primary carets"]]},{title:"Selecting code",description:Y.createElement("div",{className:"lh-copy"},"Select code with the keyboard and mouse. You can select across lines.",Y.createElement("div",{className:"mt3 fw6 tracked ttu dark-gray gold"},"Extend selection to")),keybindings:[["Left-Right-Up-Down","Extend around",""],["Shift-Alt-Left","Words","start of prev word←"],["Shift-Alt-Right","","end of next word→"],["Shift-Fn-Left","Current line","start←"],["Fn-Right","","end→"],["Shift-Cmd-Left","Current line without wrapping","start←"],["Shift-Cmd-Right","","end→"],["Shift-Cmd-Up","Current cell","start←"],["Shift-Cmd-Down","","end→"],["Shift-Fn-Up","Between screens","↑up"],["Shift-Fn-Down","","↓down"],["Cmd-A","Select all text"],["Esc","Deselect"]]},{title:"",description:Y.createElement("div",{className:"mt4 fw6 tracked ttu dark-gray gold"},"Select across lines"),keybindings:[["Cmd-Drag","Select additional text"],["Alt-Cmd-Drag","Select addtional text across lines"],["Alt-Drag","Clear current selection and select across lines"],["Esc","Deselect"]]},{title:"",description:Y.createElement("div",{className:"mt4 fw6 tracked ttu dark-gray gold"},"Selection history"),keybindings:[["Cmd-U","Undo the last change to the selection"],["Shift-Cmd-U","Redo the last change to the selection"]]},{title:"Search",description:"Search on the page.",keybindings:[["Cmd-F","Open search"],["Shift-Cmd-G","Find the ... occurrence","prev↑"],["Cmd-G","","next↓"]]}],bw=Y.memo(({onDismiss:e,stickyHeader:t})=>{const[n,r]=Z(50);return Q(()=>{function e(){if(t)return;const e=window.scrollY;e<50?r(50-e):0!==n&&r(0)}return window.addEventListener("scroll",e),e(),()=>{window.removeEventListener("scroll",e)}},[t,n]),Y.createElement("div",{style:{width:360,top:n},className:"fixed right-0 bg-white bl b--silver z-3"},Y.createElement("div",{className:"overflow-y-scroll overflow-x-hidden",style:{height:`calc(100vh - ${n}px)`}},Y.createElement("div",null,Y.createElement("div",{className:"relative pt2"},Y.createElement("div",{style:{position:"sticky"},className:"top-0 pb3 bg-white bb b--silver"},Y.createElement("button",{onClick:e,title:"Close",className:"inline-flex absolute top-0 right-0 pt3 mr1 black-20 hover-black bg-transparent pointer bn"},Y.createElement(ff,{className:"w1 h1"})),Y.createElement("div",{className:"ph3 pt3 fw6"},"Keyboard Shortcuts"),Y.createElement("div",{className:"ph3 mt2 f7 fw5 lh-f7 mid-gray"},"Press"," ",Y.createElement("span",{className:"dib ph1 lh-f7 lh-solid br1 br2 keyboard-key"},"?")," ","to toggle this panel.")),vw.map((e,t)=>Y.createElement("div",{key:t,className:`${""===e.title?"nt4":"bt b--light-silver"} ${0===t?"b--transparent mt4":"pt4 mt4"} ph3`},Y.createElement("div",{className:"fw6"},e.title),Y.createElement("div",{className:"mt2 mb3 f7 fw5 mid-gray"},e.description),Y.createElement("div",{className:"w-100 fw4 black-70 collapse"},Y.createElement("div",null,e.keybindings.map(([e,t,n],r)=>Y.createElement("div",{key:r,style:{maxHeight:n?36:100},className:`flex  justify-between ${0==r||""===t?"":"bt b--light-silver"} \n                  ${""===t&&""} `},Y.createElement("div",{className:`${""===t?"pb2":"pv2"} v-top fw5 f6 mw5 lh-f7 pr4`},t),Y.createElement("div",{className:`${""===t?"pb2":"pv2"} v-top fw5 lh-f7 tr nowrap`},Y.createElement("span",{className:"f7 mid-gray"},n),e.split("-").map((e,t)=>Y.createElement("span",{style:{minWidth:6},className:`dib f7 lh-solid ${"Drag"===e||"Click"===e?"ml1":"ml2 tc br2 ph1 pv1 keyboard-key"}`,key:t}," ",("Drag"===e||"Click"===e)&&"+ ",dw(e).toLowerCase()!==pw(e)?dw(e)+pw(e):pw(e)))))))))),Y.createElement("div",{className:"ph3 pb4 mt3 f7 fw5 lh-copy mid-gray"},"Read more details about all the"," ",Y.createElement("a",{className:"no-underline blue hover-dark-blue link",href:"/@observablehq/keyboard-shortcuts",target:"_blank"},"keyboard shortcuts"),".")))))});function yw({errorMessage:e}){return Y.createElement("div",{className:"dib ph2 pv1 f7 fw4 lh-copy dark-red bg-washed-red br2 br--bottom pea"},e)}function ww({notebook:e}){return Y.createElement("div",{className:"dib ph2 pv1 f7 fw4 lh-copy black-50 bg-washed-yellow br2 br--bottom pea"},"This notebook has been edited since",e.slug?" publishing":" sharing",".",Y.createElement(fh,{className:"ml1 no-underline black-70 hover-blue",to:`/compare/${e.id}@${e.publish_version}`},"View changes?"))}function xw(e){if(2===e.length)e.splice(1,0," and ");else if(e.length>2){let t=[];for(let n=0;n<e.length;n++)t.push(e[n]),n<e.length-1&&(n==e.length-2?t.push(", and "):t.push(", "));e=t}return e.map((e,t)=>Y.isValidElement(e)?Y.cloneElement(e,{key:t}):e)}const Ew={asyncGenerator:Y.createElement("a",{className:"no-underline black-70 hover-blue",href:"https://github.com/tc39/proposal-async-iteration"},"Async Iterators"),bigInt:Y.createElement("a",{className:"no-underline black-70 hover-blue",href:"https://github.com/tc39/proposal-bigint"},"BigInt"),dynamicImport:Y.createElement("a",{className:"no-underline black-70 hover-blue",href:"https://github.com/tc39/proposal-dynamic-import"},"Dynamic import")},kw=Y.memo(function({cells:e,platformSupport:t}){if(!e)return null;const n=new Set;for(let i of e.values())for(let e of i.features)n.add(e);let r=t.filter(({name:e,support:t})=>n.has(e)&&!t).map(({name:e})=>Ew[e]);return r.length?Y.createElement("div",{className:"flex items-start pa3 mt3 f6 fw4 black-70 bg-washed-yellow br2"},Y.createElement(xf,{className:"w1 h1 ma1",style:{strokeWidth:1,flexShrink:"0"}}),Y.createElement("div",{className:"mr2 lh-copy"},Y.createElement("div",{className:"mb1 b"},"This notebook uses features that aren’t supported by your browser. It may not display correctly."),Y.createElement("div",{className:"black-50"},"Feature",1===r.length?"":"s",": ",xw(r)))):null});function Cw(e){return 1===e.lineCount()&&""===e.getLine(0)}function _w(e){e.state.placeholder&&(e.state.placeholder.parentNode.removeChild(e.state.placeholder),e.state.placeholder=null)}function Sw(e){_w(e);const t=e.state.placeholder=document.createElement("pre");t.style.cssText="height: 0; overflow: visible",t.style.direction=e.getOption("direction"),t.className="CodeMirror-placeholder",t.textContent=e.getOption("placeholder"),e.display.lineSpace.insertBefore(t,e.display.lineSpace.firstChild)}function Nw(e){Cw(e)&&Sw(e)}function Tw(e){Cw(e)?Sw(e):_w(e)}aw.defineOption("placeholder","",function(e,t,n){const r=n&&n!=aw.Init;t?(r||(e.on("blur",Nw),e.on("change",Tw),e.on("swapDoc",Tw)),Tw(e),e.hasFocus()||Nw(e)):r&&(e.off("blur",Nw),e.off("change",Tw),e.off("swapDoc",Tw),_w(e))});const Aw=aw.Pos,Lw={"(":")>",")":"(<","[":"]>","]":"[<","{":"}>","}":"{<"};function Pw(e,t,n){let r=e.getLineHandle(t.line),i=t.ch-1,s=n&&n.afterCursor;null==s&&(s=/(^| )cm-fat-cursor($| )/.test(e.getWrapperElement().className));let a=!s&&i>=0&&Lw[r.text.charAt(i)]||Lw[r.text.charAt(++i)];if(!a)return null;let o=">"==a.charAt(1)?1:-1;if(n&&n.strict&&o>0!=(i==t.ch))return null;let l=e.getTokenTypeAt(Aw(t.line,i+1)),c=Iw(e,Aw(t.line,i+(o>0?1:0)),o,l||null,n);return null==c?null:{from:Aw(t.line,i),to:c&&c.pos,match:c&&c.ch==a.charAt(0),forward:o>0}}function Iw(e,t,n,r,i){let s=i&&i.maxScanLineLength||1e4,a=i&&i.maxScanLines||1e3;const o=[],l=i&&i.bracketRegex?i.bracketRegex:/[(){}[\]]/,c=n>0?Math.min(t.line+a,e.lastLine()+1):Math.max(e.firstLine()-1,t.line-a);let u;for(u=t.line;u!=c;u+=n){let i=e.getLine(u);if(!i)continue;let a=n>0?0:i.length-1,c=n>0?i.length:-1;if(!(i.length>s))for(u==t.line&&(a=t.ch-(n<0?1:0));a!=c;a+=n){const t=i.charAt(a);if(l.test(t)&&(void 0===r||e.getTokenTypeAt(Aw(u,a+1))==r)){if(">"==Lw[t].charAt(1)==n>0)o.push(t);else{if(!o.length)return{pos:Aw(u,a),ch:t};o.pop()}}}}return u-n!=(n>0?e.lastLine():e.firstLine())&&null}function Ow(e,t,n){const r=e.state.matchBrackets.maxHighlightLineLength||1e3;let i=[],s=e.listSelections();for(let a=0;a<s.length;a++){let t=s[a].empty()&&Pw(e,s[a].head,n);if(t&&e.getLine(t.from.line).length<=r){const n=t.match?"CodeMirror-matchingbracket":"CodeMirror-nonmatchingbracket";i.push(e.markText(t.from,Aw(t.from.line,t.from.ch+1),{className:n})),t.to&&e.getLine(t.to.line).length<=r&&i.push(e.markText(t.to,Aw(t.to.line,t.to.ch+1),{className:n}))}}if(i.length){const n=function(){e.operation(function(){for(let e=0;e<i.length;e++)i[e].clear()})};if(!t)return n;setTimeout(n,800)}}let Mw=null;function Rw(e){e.operation(function(){Mw&&(Mw(),Mw=null),Mw=Ow(e,!1,e.state.matchBrackets)})}aw.defineOption("matchBrackets",!1,function(e,t,n){n&&n!=aw.Init&&(e.off("cursorActivity",Rw),Mw&&(Mw(),Mw=null)),t&&(e.state.matchBrackets="object"==typeof t?t:{},e.on("cursorActivity",Rw))}),aw.defineExtension("matchBrackets",function(){Ow(this,!0)}),aw.defineExtension("findMatchingBracket",function(e,t){return Pw(this,e,t)}),aw.defineExtension("scanForBracket",function(e,t,n,r){return Iw(this,e,t,n,r)});let Dw={pairs:"()[]{}''\"\"``",triples:"",explode:"[]{}"};const Fw=aw.Pos;function Vw(e,t){return"pairs"==t&&"string"==typeof e?e:"object"==typeof e&&null!=e[t]?e[t]:Dw[t]}aw.defineOption("autoClosePairs",!1,function(e,t,n){n&&n!=aw.Init&&(e.removeKeyMap(jw),e.state.closePairs=null),t&&(Bw(Vw(t,"pairs")),e.state.closePairs=t,e.addKeyMap(jw))});const jw={Backspace:function(e){let t=Hw(e);if(!t||e.getOption("disableInput"))return aw.Pass;let n=Vw(t,"pairs"),r=e.listSelections();for(let i=0;i<r.length;i++){if(!r[i].empty())return aw.Pass;let t=zw(e,r[i].head);if(!t||n.indexOf(t)%2!=0)return aw.Pass}for(let i=r.length-1;i>=0;i--){let t=r[i].head;e.replaceRange("",Fw(t.line,t.ch-1),Fw(t.line,t.ch+1),"+delete")}},Enter:function(e){let t=Hw(e),n=t&&Vw(t,"explode");if(!n||e.getOption("disableInput"))return aw.Pass;let r=e.listSelections();for(let i=0;i<r.length;i++){if(!r[i].empty())return aw.Pass;let t=zw(e,r[i].head);if(!t||n.indexOf(t)%2!=0)return aw.Pass}e.operation(function(){let t=e.lineSeparator()||"\n";e.replaceSelection(t+t,null),e.execCommand("goCharLeft"),r=e.listSelections();for(let n=0;n<r.length;n++){let t=r[n].head.line;e.indentLine(t,null,!0),e.indentLine(t+1,null,!0)}})}};function Bw(e){for(let t=0;t<e.length;t++){let n=e.charAt(t),r="'"+n+"'";jw[r]||(jw[r]=Uw(n))}}function Uw(e){return function(t){return function(e,t){let n=Hw(e);if(!n||e.getOption("disableInput"))return aw.Pass;let r=Vw(n,"pairs"),i=r.indexOf(t);if(-1==i)return aw.Pass;let s,a=Vw(n,"triples"),o=r.charAt(i+1)==t,l=e.listSelections(),c=i%2==0;for(let p=0;p<l.length;p++){let n,r=l[p],i=r.head,u=e.getRange(i,Fw(i.line,i.ch+1));if(c&&!r.empty())n="surround";else if(!o&&c||u!=t)if(o&&i.ch>1&&a.indexOf(t)>=0&&e.getRange(Fw(i.line,i.ch-2),i)==t+t){if(i.ch>2&&/\bstring/.test(e.getTokenTypeAt(Fw(i.line,i.ch-2))))return aw.Pass;n="addFour"}else if(o){let r=0==i.ch?" ":e.getRange(Fw(i.line,i.ch-1),i);if(aw.isWordChar(u)||r==t||aw.isWordChar(r))return aw.Pass;n="both"}else{if(!c)return aw.Pass;n="both"}else n=o&&Ww(e,i)?"both":a.indexOf(t)>=0&&e.getRange(i,Fw(i.line,i.ch+3))==t+t+t?"skipThree":"skip";if(s){if(s!=n)return aw.Pass}else s=n}let u=i%2?r.charAt(i-1):t,h=i%2?t:r.charAt(i+1);e.operation(function(){if("skip"==s)e.execCommand("goCharRight");else if("skipThree"==s)for(let t=0;t<3;t++)e.execCommand("goCharRight");else if("surround"==s){let t=e.getSelections();for(let e=0;e<t.length;e++)t[e]=u+t[e]+h;e.replaceSelections(t,"around"),t=e.listSelections().slice();for(let e=0;e<t.length;e++)t[e]=$w(t[e]);e.setSelections(t)}else"both"==s?(e.replaceSelection(u+h,null),e.triggerElectric(u+h),e.execCommand("goCharLeft")):"addFour"==s&&(e.replaceSelection(u+u+u+u,"before"),e.execCommand("goCharRight"))})}(t,e)}}function Hw(e){let t=e.state.closePairs;return!t||t.override?t:e.getModeAt(e.getCursor()).closePairs||t}function $w(e){let t=aw.cmpPos(e.anchor,e.head)>0;return{anchor:new Fw(e.anchor.line,e.anchor.ch+(t?-1:1)),head:new Fw(e.head.line,e.head.ch+(t?1:-1))}}function zw(e,t){const n=e.getRange(Fw(t.line,t.ch-1),Fw(t.line,t.ch+1));return 2==n.length?n:null}function Ww(e,t){let n=e.getTokenAt(Fw(t.line,t.ch+1));return/\bstring/.test(n.type)&&n.start==t.ch&&(0==t.ch||!/\bstring/.test(e.getTokenTypeAt(t)))}Bw(Dw.pairs+"`");const qw=new Set(["ga","React","ReactDOM","CodeMirror","content"]),Gw=new Set(Object.getOwnPropertyNames(window).filter(e=>{try{return!/^webkit/i.test(e)&&!/^onmoz/i.test(e)&&!qw.has(e)&&null!=window[e]}catch(t){return!1}})),Kw=aw.Pos,Yw="charAt charCodeAt indexOf lastIndexOf substring substr slice\n trim trimLeft trimRight toUpperCase toLowerCase split concat match replace\n search".split(/\s+/),Zw="length concat join splice push pop shift unshift slice reverse\n  sort indexOf lastIndexOf every some filter forEach map reduce\n  reduceRight ".split(/\s+/),Qw="prototype apply call bind".split(/\s+/),Xw="break case catch class const continue debugger default delete do\n  else extends false finally for function if import in instanceof let new null undefined return super switch\n  this throw true try typeof var void while with yield".split(/\s+/),Jw="exec test flags global ignoreCase multiline\n  source sticky unicode".split(/\s+/);let ex=0;const tx=new Set(["number","string","property"]),nx=new Set(["variable-2","regexp"]),rx=new Set([".","[","]"]);async function ix(e,t){const n=e.getCursor();let r=e.getTokenAt(n);if(!/\b(?:string|comment)\b/.test(r.type))return r.state=aw.innerMode(e.getMode(),r.state).state,/^[\w$_]*$/.test(r.string)?r.end>n.ch&&(r.end=n.ch,r.string=r.string.slice(0,n.ch-r.start)):r={start:n.ch,end:n.ch,string:"",state:r.state,type:"."==r.string?"property":null},yh({},await async function(e,t,n,r){const{cellNames:i,localVars:s}=e.state,a=new Set,o=e.string;function l(e){e.startsWith(o)&&a.add(e)}if(t.length){let s=new Set([]);for(let t=e.state.context;t;t=t.prev)for(let e=t.vars;e;e=e.next)s.add(e.name);let c,u=t.pop();if(u.type&&u.type.startsWith("variable")){if(Gw.has(u.string)&&"window"!==u.string&&(c=window[u.string]),Om.has(u.string)&&!t.length)for(let e of Om)e.startsWith(`${u.string}.${o}`)&&a.add(e.split(".")[1]);if(s.has(u.string))!function(){for(let e=0;e<r.lineCount();e++)for(let t of r.getLineTokens(e))"property"===t.type&&l(t.string)}();else if(i.has(u.string)){const{list:e,nonce:r}=await n({nonce:ex,name:u.string,path:t.map(e=>"string"===e.type?e.string.substring(1,e.string.length-1):"number"===e.type?+e.string:e.string).reverse(),prefix:o});if(ex===r)for(let t of e)a.add(t);ex++}}else"string"==u.type||"string-2"===u.type?c="":"atom"==u.type?c=1:"regexp"==u.type&&(c=/a/);for(;null!=c&&t.length;)c=c[t.pop().string];null!=c&&function(e){"string"==typeof e?Yw.forEach(l):e instanceof RegExp?Jw.forEach(l):e instanceof Array?Zw.forEach(l):e instanceof Function&&Qw.forEach(l);for(let t=e;t;t=Object.getPrototypeOf(t))Object.getOwnPropertyNames(t).forEach(l)}(c)}else if(o){for(let e=s;e;e=e.next)l(e.name);for(let t=e.state.context;t;t=t.prev)for(let e=t.vars;e;e=e.next)l(e.name);for(let e of[i,Om,Gw,Xw])for(let t of e)t.startsWith(o)&&a.add(t)}const c=a.delete(o);return{list:Array.from(a),exactMatch:c}}(r,function(e,t,n){let r=!1,i=t.getLineTokens(n);const s=[],a=i.findIndex(t=>t.end===e);if(-1===a||"."!==i[a].string)return s;for(let o=a;o>=0;o--){if(/^\s*$/.test(i[o].string));else if(rx.has(i[o].string)){if("]"===i[o].string&&(r=!0),"["===i[o].string){if(!r)return[];r=!1}}else{if(!tx.has(i[o].type))return nx.has(i[o].type)?r?[]:(s.push(i[o]),s):r?[]:s;s.push(i[o])}0==i[o].start&&n&&(o=(i=t.getLineTokens(--n)).length)}return s}(r.start,e,n.line),t,e),{from:Kw(n.line,r.start),to:Kw(n.line,r.end)})}const sx="code f7 black-70 pointer nowrap pa1 ma0 hover-bg-light-gray hover-black",ax="bg-blue hover-bg-blue white hover-white";class ox{constructor(e,t,n=!0){bh(this,"options",{completeSingle:!0,closeCharacters:/[\s()\[\]{};:>,]/}),this.cm=e,this.workerAutocomplete=t,this.widget=null,this.debounce=0,this.tick=0,this.options.completeSingle=n,this.startPos=e.getCursor("start"),this.startLen=e.getLine(this.startPos.line).length-e.getSelection().length,e.on("cursorActivity",this.activityFunc=(()=>{this.cursorActivity()}))}close(){this.active()&&(this.cm.state.completionActive=null,this.tick=null,this.cm.off("cursorActivity",this.activityFunc),this.widget&&this.data&&aw.signal(this.data,"close"),this.widget&&this.widget.close(),aw.signal(this.cm,"endCompletion",this.cm))}active(){return this.cm.state.completionActive==this}pick(e,t){const n=e.list[t];n.hint?n.hint(this.cm,e,n):this.cm.replaceRange(lx(n),n.from||e.from,n.to||e.to,"complete"),aw.signal(e,"pick",n),this.close()}cursorActivity(){this.debounce&&(cancelAnimationFrame(this.debounce),this.debounce=0);let e=this.cm.getCursor(),t=this.cm.getLine(e.line);e.line!=this.startPos.line||t.length-e.ch!=this.startLen-this.startPos.ch||e.ch<this.startPos.ch||this.cm.somethingSelected()||e.ch&&this.options.closeCharacters.test(t.charAt(e.ch-1))?this.close():(this.debounce=requestAnimationFrame(()=>{this.update()}),this.widget&&this.widget.disable())}async update(e){if(null==this.tick)return;const t=++this.tick,n=await ix(this.cm,this.workerAutocomplete);return this.tick==t&&this.finishUpdate(n,e),n}finishUpdate(e,t){this.data&&aw.signal(this.data,"update");const n=this.widget&&this.widget.picked||t&&this.options.completeSingle;this.widget&&this.widget.close(),!this.options.completeSingle&&e&&e.exactMatch||(this.data=e,e&&e.list.length&&(n&&1==e.list.length?this.pick(e,0):(this.widget=new ux(this,e),aw.signal(e,"shown"))))}}function lx(e){return"string"==typeof e?e:e.text}function cx(e,t){for(;t&&t!=e;){if("LI"===t.nodeName.toUpperCase()&&t.parentNode==e)return t;t=t.parentNode}}class ux{constructor(e,t){this.completion=e,this.data=t,this.picked=!1;const{cm:n}=e,r=this.hints=document.createElement("ul");r.style.maxHeight="20em",r.className="bg-white br2 pa0 ma0 absolute overflow-y-scroll overflow-x-hidden shadow-2 ba b--black-10 z-999",this.selectedHint=t.selectedHint||0;const{list:i}=t;for(let v=0;v<i.length;++v){let e=r.appendChild(document.createElement("li")),n=i[v],s=sx+(v!=this.selectedHint?"":" "+ax);null!=n.className&&(s=`${n.className} ${s}`),e.className=s,n.render?n.render(e,t,n):e.appendChild(document.createTextNode(n.displayText||lx(n))),e.hintId=v}let s=n.cursorCoords(t.from),a=s.left,o=s.bottom,l=!0;r.style.left=a+"px",r.style.top=o+"px";let c=window.innerWidth,u=window.innerHeight;document.body.appendChild(r);let h=r.getBoundingClientRect(),p=h.bottom-u,d=r.scrollHeight>r.clientHeight+1,f=n.getScrollInfo();if(p>0){let e=h.bottom-h.top;if(s.top-(s.bottom-h.top)-e>0)r.style.top=(o=s.top-e)+"px",l=!1;else if(e>u){r.style.height=u-5+"px",r.style.top=(o=s.bottom-h.top)+"px";const e=n.getCursor();t.from.ch!=e.ch&&(s=n.cursorCoords(e),r.style.left=(a=s.left)+"px",h=r.getBoundingClientRect())}}let m,g=h.right-c;if(g>0&&(h.right-h.left>c&&(r.style.width=c-5+"px",g-=h.right-h.left-c),r.style.left=(a=s.left-g)+"px"),d)for(let v=r.firstChild;v;v=v.nextSibling)v.style.paddingRight=n.display.nativeBarWidth+"px";n.addKeyMap(this.keyMap=function(e,t){const n=()=>t.moveFocus(-1);return{Up:n,"Shift-Tab":n,Down:()=>t.moveFocus(1),Tab:t.pick,PageUp(){t.moveFocus(1-t.menuSize(),!0)},PageDown(){t.moveFocus(t.menuSize()-1,!0)},Home(){t.setFocus(0)},End(){t.setFocus(t.length-1)},Enter:t.pick,Esc:t.close}}(0,{moveFocus:(e,t)=>{this.changeActive(this.selectedHint+e,t)},setFocus:e=>{this.changeActive(e)},menuSize:()=>this.screenAmount(),length:i.length,close:function(){e.close()},pick:()=>{this.pick()},data:t})),n.on("blur",this.onBlur=function(){m=setTimeout(function(){e.close()},100)}),n.on("focus",this.onFocus=function(){clearTimeout(m)}),n.on("scroll",this.onScroll=function(){let t=n.getScrollInfo(),i=n.getWrapperElement().getBoundingClientRect(),s=o+f.top-t.top,c=s-(window.pageYOffset||(document.documentElement||document.body).scrollTop);if(l||(c+=r.offsetHeight),c<=i.top||c>=i.bottom)return e.close();r.style.top=s+"px",r.style.left=a+f.left-t.left+"px"}),aw.on(r,"dblclick",e=>{const t=cx(r,e.target||e.srcElement);t&&null!=t.hintId&&(this.changeActive(t.hintId),this.pick())}),aw.on(r,"click",e=>{const t=cx(r,e.target||e.srcElement);t&&null!=t.hintId&&(this.changeActive(t.hintId),this.pick())}),aw.on(r,"mousedown",function(){setTimeout(function(){n.focus()},20)}),aw.signal(t,"select",i[this.selectedHint],r.childNodes[this.selectedHint])}close(){if(this.completion.widget!=this)return;this.completion.widget=null,this.hints.parentNode.removeChild(this.hints),this.completion.cm.removeKeyMap(this.keyMap);const{cm:e}=this.completion;e.off("blur",this.onBlur),e.off("focus",this.onFocus),e.off("scroll",this.onScroll)}disable(){this.completion.cm.removeKeyMap(this.keyMap),this.keyMap={Enter:()=>{this.picked=!0}},this.completion.cm.addKeyMap(this.keyMap)}pick(){this.completion.pick(this.data,this.selectedHint)}changeActive(e,t){if(e>=this.data.list.length?e=t?this.data.list.length-1:0:e<0&&(e=t?0:this.data.list.length-1),this.selectedHint==e)return;let n=this.hints.childNodes[this.selectedHint];n.className=n.className.replace(" "+ax,""),(n=this.hints.childNodes[this.selectedHint=e]).className+=" "+ax,n.offsetTop<this.hints.scrollTop?this.hints.scrollTop=n.offsetTop-3:n.offsetTop+n.offsetHeight>this.hints.scrollTop+this.hints.clientHeight&&(this.hints.scrollTop=n.offsetTop+n.offsetHeight-this.hints.clientHeight+3),aw.signal(this.data,"select",this.data.list[this.selectedHint],n)}screenAmount(){return Math.floor(this.hints.clientHeight/this.hints.firstChild.offsetHeight)||1}}const{Pos:hx}=aw;let px={cm:null,selections:[]};function dx(e,t){return e.line-t.line||e.ch-t.ch}function fx(e){const t=px.selections.map(e=>e.text);e.listSelections().length===t.length?e.replaceSelections(t):e.replaceSelection(t.join(e.doc.lineSeparator()))}function mx(e){const t=e.isClean(px.generation),n={cm:e,generation:null,selections:e.listSelections().map(({anchor:t,head:n})=>{let r=t,i=n;const s=dx(t,n);if(0===s){const t=e.doc.getLine(r.line).length;i=r.ch===t?e.clipPos(hx(r.line+1,0)):hx(r.line,t)}else s>0&&(r=n,i=t);const a=e.getRange(r,i);return e.replaceRange("",r,i,"+delete"),{start:r,text:a}})};px.cm===e&&t&&px.selections.length===n.selections.length&&px.selections.every((e,t)=>0===dx(e.start,n.selections[t].start))?px.selections.forEach((e,t)=>e.text+=n.selections[t].text):px=n,px.generation=e.changeGeneration()}let gx={};const vx=/[^\s\u00a0]/;let bx=aw.Pos;function yx(e){let t=e.search(vx);return-1==t?0:t}function wx(e){e.toggleComment({indent:!0})}function xx(e,t){const n=e.getMode();return!1!==n.useInnerComments&&n.innerMode?e.getModeAt(t):n}function Ex({anchor:e,head:t}){return{anchor:this.posFromIndex(e),head:this.posFromIndex(t)}}function kx({anchor:e,head:t}){return{anchor:this.indexFromPos(e),head:this.indexFromPos(t)}}function Cx(e){e.preventDefault()}aw.commands.toggleComment=function(e){e.toggleComment()},aw.defineExtension("toggleComment",function(e){e||(e=gx);let t=this,n=1/0,r=this.listSelections(),i=null;for(let s=r.length-1;s>=0;s--){let a=r[s].from(),o=r[s].to();a.line>=n||(o.line>=n&&(o=bx(n,0)),n=a.line,null==i?t.uncomment(a,o,e)?i="un":(t.lineComment(a,o,e),i="line"):"un"==i?t.uncomment(a,o,e):t.lineComment(a,o,e))}}),aw.defineExtension("lineComment",function(e,t,n){n||(n=gx);let r=this,i=xx(r,e),s=r.getLine(e.line);if(null==s||function(e,t,n){return/\bstring\b/.test(e.getTokenTypeAt(bx(t.line,0)))&&!/^[\'\"\`]/.test(n)}(r,e,s))return;let a=n.lineComment||i.lineComment;if(!a)return void((n.blockCommentStart||i.blockCommentStart)&&(n.fullLines=!0,r.blockComment(e,t,n)));let o=Math.min(0!=t.ch||t.line==e.line?t.line+1:t.line,r.lastLine()+1),l=null==n.padding?" ":n.padding,c=n.commentBlankLines||e.line==t.line;r.operation(function(){let t;if(n.indent){let n=null;for(t=e.line;t<o;++t){let e=r.getLine(t),i=e.slice(0,yx(e));(null==n||n.length>i.length)&&(n=i)}for(t=e.line;t<o;++t){let e=r.getLine(t),i=n.length;(c||vx.test(e))&&(e.slice(0,i)!=n&&(i=yx(e)),r.replaceRange(n+a+l,bx(t,0),bx(t,i)))}}else for(t=e.line;t<o;++t)(c||vx.test(r.getLine(t)))&&r.replaceRange(a+l,bx(t,0))})}),aw.defineExtension("blockComment",function(e,t,n){n||(n=gx);let r=this,i=xx(r,e),s=n.blockCommentStart||i.blockCommentStart,a=n.blockCommentEnd||i.blockCommentEnd;if(!s||!a)return void((n.lineComment||i.lineComment)&&0!=n.fullLines&&r.lineComment(e,t,n));if(/\bcomment\b/.test(r.getTokenTypeAt(bx(e.line,0))))return;let o=Math.min(t.line,r.lastLine());o!=e.line&&0==t.ch&&vx.test(r.getLine(o))&&--o;const l=null==n.padding?" ":n.padding;e.line>o||r.operation(function(){if(0!=n.fullLines){let t=vx.test(r.getLine(o));r.replaceRange(l+a,bx(o)),r.replaceRange(s+l,bx(e.line,0));let c=n.blockCommentLead||i.blockCommentLead;if(null!=c)for(let n=e.line+1;n<=o;++n)(n!=o||t)&&r.replaceRange(c+l,bx(n,0))}else r.replaceRange(a,t),r.replaceRange(s,e)})}),aw.defineExtension("uncomment",function(e,t,n){n||(n=gx);let r=this,i=xx(r,e),s=Math.min(0!=t.ch||t.line==e.line?t.line:t.line-1,r.lastLine()),a=Math.min(e.line,s);const o=n.lineComment||i.lineComment,l=[];let c,u=null==n.padding?" ":n.padding;e:if(o){for(let e=a;e<=s;++e){let t=r.getLine(e),n=t.indexOf(o);if(n>-1&&!/comment/.test(r.getTokenTypeAt(bx(e,n+1)))&&(n=-1),-1==n&&vx.test(t))break e;if(n>-1&&vx.test(t.slice(0,n)))break e;l.push(t)}if(r.operation(function(){for(let e=a;e<=s;++e){let t=l[e-a],n=t.indexOf(o),i=n+o.length;n<0||(t.slice(i,i+u.length)==u&&(i+=u.length),c=!0,r.replaceRange("",bx(e,n),bx(e,i)))}}),c)return!0}let h=n.blockCommentStart||i.blockCommentStart,p=n.blockCommentEnd||i.blockCommentEnd;if(!h||!p)return!1;let d=n.blockCommentLead||i.blockCommentLead,f=r.getLine(a),m=f.indexOf(h);if(-1==m)return!1;let g=s==a?f:r.getLine(s),v=g.indexOf(p,s==a?m+h.length:0);-1==v&&a!=s&&(g=r.getLine(--s),v=g.indexOf(p));let b=bx(a,m+1),y=bx(s,v+1);if(-1==v||!/comment/.test(r.getTokenTypeAt(b))||!/comment/.test(r.getTokenTypeAt(y))||r.getRange(b,y,"\n").indexOf(p)>-1)return!1;let w=f.lastIndexOf(h,e.ch),x=-1==w?-1:f.slice(0,e.ch).indexOf(p,w+h.length);if(-1!=w&&-1!=x&&x+p.length!=e.ch)return!1;x=g.indexOf(p,t.ch);let E=g.slice(t.ch).lastIndexOf(h,x-t.ch);return w=-1==x||-1==E?-1:t.ch+E,(-1==x||-1==w||w==t.ch)&&(r.operation(function(){r.replaceRange("",bx(s,v-(u&&g.slice(v-u.length,v)==u?u.length:0)),bx(s,v+p.length));let e=m+h.length;if(u&&f.slice(e,e+u.length)==u&&(e+=u.length),r.replaceRange("",bx(a,m),bx(a,e)),d)for(let t=a+1;t<=s;++t){let e=r.getLine(t),n=e.indexOf(d);if(-1==n||vx.test(e.slice(0,n)))continue;let i=n+d.length;u&&e.slice(i,i+u.length)==u&&(i+=u.length),r.replaceRange("",bx(t,n),bx(t,i))}}),!0)}),aw.defineDocExtension("getLength",function(){let e=this.lineSeparator().length,t=-e;return this.iter(n=>{t+=n.text.length+e}),t}),aw.defineExtension("getCursorIndex",function(){return this.indexFromPos(this.getCursor())}),aw.defineExtension("setCursorIndex",function(e){return this.setCursor(this.posFromIndex(e))}),aw.defineDocExtension("setSelectionIndexes",function(e,t,n){return this.setSelections(e.map(Ex,this),t,n)}),aw.defineDocExtension("listSelectionIndexes",function(){return this.listSelections().map(kx,this)}),aw.defineMode("r-javascript",function(e,t){const n=e.indentUnit,r=t.statementIndent,i=t.wordCharacters||/[\w$\xa1-\uffff]/,s=t.cellNames||new Set;let a;{function o(e){return{type:e,style:"keyword"}}const e=o("keyword a"),t=o("keyword b"),n=o("keyword c"),r=o("operator"),i={type:"atom",style:"atom"};a=new Map([["if",o("if")],["while",e],["with",o("with")],["else",t],["do",t],["try",t],["finally",t],["return",n],["break",n],["continue",n],["new",o("new")],["delete",n],["throw",n],["debugger",n],["var",o("var")],["const",o("var")],["let",o("var")],["function",o("function")],["catch",o("catch")],["for",o("for")],["switch",o("switch")],["case",o("case")],["default",o("default")],["in",r],["typeof",r],["instanceof",r],["true",i],["false",i],["null",i],["undefined",i],["NaN",i],["Infinity",i],["this",o("this")],["class",o("class")],["super",o("atom")],["yield",n],["// export",o("export")],["import",o("import")],["extends",n],["await",n],["viewof",o("viewof")],["mutable",o("mutable")]])}var l,c,u=/[+\-*&%=<>!?|~^@]/;function h(e,t,n){return l=e,c=n,t}function p(e,t){var n=e.next();if('"'==n||"'"==n)return t.tokenize=function(e){return function(t,n){for(var r,i=!1;null!=(r=t.next())&&(r!=e||i);)i=!i&&"\\"==r;return i||(n.tokenize=p),h("string","string")}}(n),t.tokenize(e,t);if("."==n&&e.match(/^\d+(?:[eE][+\-]?\d+)?/))return h("number","number");if("."==n&&e.match(".."))return h("spread","meta");if(/[\[\]{}\(\),;\:\.]/.test(n))return h(n);if("="==n&&e.eat(">"))return h("=>","operator");if("0"==n&&e.match(/^(?:x[\da-f]+|o[0-7]+|b[01]+)n?/i))return h("number","number");if(/\d/.test(n))return e.match(/^\d*(?:n|(?:\.\d*)?(?:[eE][+\-]?\d+)?)?/),h("number","number");if("/"==n)return e.eat("*")?(t.tokenize=d,d(e,t)):e.eat("/")?(e.skipToEnd(),h("comment","comment")):Le(e,t,1)?(function(e){for(var t,n=!1,r=!1;null!=(t=e.next());){if(!n){if("/"==t&&!r)return;"["==t?r=!0:r&&"]"==t&&(r=!1)}n=!n&&"\\"==t}}(e),e.match(/^\b(([gimyus])(?![gimyus]*\2))+\b/),h("regexp","regexp")):(e.eat("="),h("operator","operator",e.current()));if("`"==n)return t.tokenize=f,f(e,t);if("#"==n)return e.skipToEnd(),h("error","error");if(u.test(n))return">"==n&&t.lexical&&">"==t.lexical.type||(e.eat("=")?"!"!=n&&"="!=n||e.eat("="):/[<>*+\-]/.test(n)&&(e.eat(n),">"==n&&e.eat(n))),h("operator","operator",e.current());if(i.test(n)){e.eatWhile(i);var r=e.current();if("."!=t.lastType){if(a.has(r)){var s=a.get(r);return h(s.type,s.style,r)}if("async"==r&&e.match(/^(\s|\/\*.*?\*\/)*[\[\(\w]/,!1))return h("async","keyword",r)}return"sof"!==t.lastType&&"viewof"!==t.lastType&&"mutable"!==t.lastType||!e.match(/\s*=[^=]/,!1)?h("variable","variable",r):h("namedcell","def",r)}}function d(e,t){for(var n,r=!1;n=e.next();){if("/"==n&&r){t.tokenize=p;break}r="*"==n}return h("comment","comment")}function f(e,t){for(var n,r=!1;null!=(n=e.next());){if(!r&&("`"==n||"$"==n&&e.eat("{"))){t.tokenize=p;break}r=!r&&"\\"==n}return h("quasi","string-2",e.current())}var m="([{}])";function g(e,t){t.fatArrowAt&&(t.fatArrowAt=null);var n=e.string.indexOf("=>",e.start);if(!(n<0)){for(var r=0,s=!1,a=n-1;a>=0;--a){var o=e.string.charAt(a),l=m.indexOf(o);if(l>=0&&l<3){if(!r){++a;break}if(0==--r){"("==o&&(s=!0);break}}else if(l>=3&&l<6)++r;else if(i.test(o))s=!0;else{if(/["'\/]/.test(o))return;if(s&&!r){++a;break}}}s&&!r&&(t.fatArrowAt=a)}}var v={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,this:!0};function b(e,t,n,r,i,s){this.indented=e,this.column=t,this.type=n,this.prev=i,this.info=s,null!=r&&(this.align=r)}function y(e,t){for(var n=e.localVars;n;n=n.next)if(n.name==t)return!0;for(var r=e.context;r;r=r.prev)for(n=r.vars;n;n=n.next)if(n.name==t)return!0}var w={state:null,column:null,marked:null,cc:null};function x(){for(var e=arguments.length-1;e>=0;e--)w.cc.push(arguments[e])}function E(){return x.apply(null,arguments),!0}function k(e,t){for(var n=t;n;n=n.next)if(n.name==e)return!0;return!1}function C(e){var n=w.state;if(w.marked="def",n.context)if("var"==n.lexical.info&&n.context&&n.context.block){var r=function e(t,n){if(n){if(n.block){var r=e(t,n.prev);return r?r==n.prev?n:new _(r,n.vars,!0):null}return k(t,n.vars)?n:new _(n.prev,new S(t,n.vars),!1)}return null}(e,n.context);if(null!=r)return void(n.context=r)}else if(!k(e,n.localVars))return void(n.localVars=new S(e,n.localVars));t.globalVars&&!k(e,n.globalVars)&&(n.globalVars=new S(e,n.globalVars))}function _(e,t,n){this.prev=e,this.vars=t,this.block=n}function S(e,t){this.name=e,this.next=t}var N=new S("this",new S("arguments",null));function T(){w.state.context=new _(w.state.context,w.state.localVars,!1),w.state.localVars=N}function A(){w.state.context=new _(w.state.context,w.state.localVars,!0),w.state.localVars=null}function L(){w.state.localVars=w.state.context.vars,w.state.context=w.state.context.prev}function P(e,t){var n=function(){var n=w.state,r=n.indented;if("stat"==n.lexical.type)r=n.lexical.indented;else for(var i=n.lexical;i&&")"==i.type&&i.align;i=i.prev)r=i.indented;n.lexical=new b(r,w.stream.column(),e,null,n.lexical,t)};return n.lex=!0,n}function I(){var e=w.state;e.lexical.prev&&(")"==e.lexical.type&&(e.indented=e.lexical.indented),e.lexical=e.lexical.prev)}function O(e){return function t(n){return n==e?E():";"==e||"}"==n||")"==n||"]"==n?x():E(t)}}function M(e,t){return"var"==e?E(P("vardef",t),re,O(";"),I):"keyword a"==e?E(P("form"),V,M,I):"keyword b"==e?E(P("form"),M,I):"keyword d"==e?w.stream.match(/^\s*$/,!1)?E():E(P("stat"),B,O(";"),I):"debugger"==e?E(O(";")):"{"==e?E(P("}"),A,ne,I,L):";"==e?E():"if"==e?("else"==w.state.lexical.info&&w.state.cc[w.state.cc.length-1]==I&&w.state.cc.pop()(),E(P("form"),V,M,I,ue)):"function"==e?E(ge):"for"==e?E(P("form"),he,M,I):"class"==e?E(P("form"),ye,I):"variable"==e?E(P("stat"),Y):"switch"==e?E(P("form"),V,O("{"),P("}","switch"),A,ne,I,I,L):"case"==e?E(D,O(":")):"default"==e?E(O(":")):"catch"==e?E(P("form"),T,R,M,I,L):"import"==e?E(P("stat"),Ee,I):"async"==e?E(M):"module"==e?E(P("form"),se,O("{"),P("}"),ne,I,I):"namedcell"==e?E(P("blockdef",t.length),ie,I):"@"==t?E(D,M):x(P("stat"),D,O(";"),I)}function R(e){if("("==e)return E(ve,O(")"))}function D(e,t){return j(e,t,!1)}function F(e,t){return j(e,t,!0)}function V(e){return"("!=e?x():E(P(")"),D,O(")"),I)}function j(e,t,n){if(w.state.fatArrowAt==w.stream.start){var r=n?q:W;if("("==e)return E(T,P(")"),ee(ve,")"),I,O("=>"),r,L);if("variable"==e)return x(T,se,O("=>"),r,L)}if("{"===e&&"blockdef"==w.state.lexical.type)return ne(e);var i=n?H:U;return v.hasOwnProperty(e)?E(i):"function"==e?E(ge,i):"class"==e?(w.marked="keyword",E(P("form"),be,I)):"keyword c"==e||"async"==e?E(n?F:D):"("==e?E(P(")"),B,O(")"),I,i):"operator"==e||"spread"==e?E(n?F:D):"["==e?E(P("]"),Ae,I,i):"{"==e?te(Q,"}",null,i):"quasi"==e?x($,i):"new"==e?E(function(e){return function(t){return"."==t?E(e?K:G):x(e?F:D)}}(n)):"import"==e?E(D):("viewof"==e||"mutable"==e)&&w.cc.length>2?E(D):E()}function B(e){return e.match(/[;\}\)\],]/)?x():x(D)}function U(e,t){return","==e?E(D):H(e,t,!1)}function H(e,t,n){var r=0==n?U:H,i=0==n?D:F;return"=>"==e?E(T,n?q:W,L):"operator"==e?/\+\+|--/.test(t)?E(r):"?"==t?E(D,O(":"),i):E(i):"quasi"==e?x($,r):";"!=e?"("==e?te(F,")","call",r):"."==e?E(Z,r):"["==e?E(P("]"),B,O("]"),I,r):"regexp"==e?(w.state.lastType=w.marked="operator",w.stream.backUp(w.stream.pos-w.stream.start-1),E(i)):void 0:void 0}function $(e,t){return"quasi"!=e?x():"${"!=t.slice(t.length-2)?E($):E(D,z)}function z(e){if("}"==e)return w.marked="string-2",w.state.tokenize=f,E($)}function W(e){return g(w.stream,w.state),x("{"==e?M:D)}function q(e){return g(w.stream,w.state),x("{"==e?M:F)}function G(e,t){if("target"==t)return w.marked="keyword",E(U)}function K(e,t){if("target"==t)return w.marked="keyword",E(H)}function Y(e){return":"==e?E(I,M):x(U,O(";"),I)}function Z(e){if("variable"==e)return w.marked="property",E()}function Q(e,t){return"async"==e?(w.marked="property",E(Q)):"variable"==e||"keyword"==w.style?(w.marked="property",E("get"==t||"set"==t?X:J)):"number"==e||"string"==e?(w.marked=w.style+" property",E(J)):"jsonld-keyword"==e?E(J):"modifier"==e?E(Q):"["==e?E(D,O("]"),J):"spread"==e?E(F,J):"*"==t?(w.marked="keyword",E(Q)):":"==e?x(J):void 0}function X(e){return"variable"!=e?x(J):(w.marked="property",E(ge))}function J(e){return":"==e?E(F):"("==e?x(ge):void 0}function ee(e,t,n){function r(i,s){if(n?n.indexOf(i)>-1:","==i){var a=w.state.lexical;return"call"==a.info&&(a.pos=(a.pos||0)+1),E(function(n,r){return n==t||r==t?x():x(e)},r)}return i==t||s==t?E():E(O(t))}return function(n,i){return n==t||i==t?E():x(e,r)}}function te(e,t,n){for(var r=3;r<arguments.length;r++)w.cc.push(arguments[r]);return E(P(t,n),ee(e,t),I)}function ne(e){return"}"==e?E():x(M,ne)}function re(){return x(se,le,ce)}function ie(){return x(function(e,t){if("variable"==e)return C(t),E()},A,function(e,t){if("="==t)return E(D)},L)}function se(e,t){return"modifier"==e?E(se):"variable"==e?(C(t),E()):"spread"==e?E(se):"["==e?te(ae,"]"):"{"==e?te(oe,"}"):void 0}function ae(){return x(se,le)}function oe(e,t){return"variable"!=e||w.stream.match(/^\s*:/,!1)?("variable"==e&&(w.marked="property"),"spread"==e?E(se):"}"==e?x():E(O(":"),se,le)):(C(t),E(le))}function le(e,t){if("="==t)return E(F)}function ce(e){if(","==e)return E(re)}function ue(e,t){if("keyword b"==e&&"else"==t)return E(P("form","else"),M,I)}function he(e,t){return"await"==t?E(he):"("==e?E(P(")"),pe,O(")"),I):void 0}function pe(e){return"var"==e?E(re,O(";"),fe):";"==e?E(fe):"variable"==e?E(de):x(D,O(";"),fe)}function de(e,t){return"in"==t||"of"==t?(w.marked="keyword",E(D)):E(U,fe)}function fe(e,t){return";"==e?E(me):"in"==t||"of"==t?(w.marked="keyword",E(D)):x(D,O(";"),me)}function me(e){")"!=e&&E(D)}function ge(e,t){return"*"==t?(w.marked="keyword",E(ge)):"variable"==e?(C(t),E(ge)):"("==e?E(T,P(")"),ee(ve,")"),I,M,L):void 0}function ve(e){return"spread"==e||"modifier"==e?E(ve):x(se,le)}function be(e,t){return"variable"==e?ye(e,t):we(e,t)}function ye(e,t){if("variable"==e)return C(t),E(we)}function we(e,t){return"extends"==t||"implements"==t?E(D,we):"{"==e?E(P("}"),xe,I):void 0}function xe(e,t){return"modifier"==e||"async"==e||"variable"==e&&("static"==t||"get"==t||"set"==t)&&w.stream.match(/^\s+[\w$\xa1-\uffff]/,!1)?(w.marked="keyword",E(xe)):"variable"==e?(w.marked="property",E(ge,xe)):"["==e?E(D,O("]"),ge,xe):"*"==t?(w.marked="keyword",E(xe)):";"==e?E(xe):"}"==e?E():"@"==t?E(D,xe):void 0}function Ee(e){return"string"==e?E():"("==e?x(D):x(ke,Se,Ce,Te)}function ke(e,t){return"{"==e?te(ke,"}"):("variable"==e&&C(t),"*"==t&&(w.marked="keyword"),E("mutable"==t||"viewof"==t?ke:Ne))}function Ce(e,t){if("with"==e)return w.marked="keyword",E(_e)}function _e(e,t){return"{"==e?te(_e,"}"):("*"==t&&(w.marked="keyword"),E(Ne))}function Se(e){if(","==e)return E(ke,Se)}function Ne(e,t){if("as"==t)return w.marked="keyword",E(ke)}function Te(e,t){if("from"==t)return w.marked="keyword",E(D)}function Ae(e){return"]"==e?E():x(ee(F,"]"))}function Le(e,t,n){return t.tokenize==p&&/^(?:operator|sof|keyword [bcd]|case|new|export|default|spread|[\[{}\(,;:]|=>)$/.test(t.lastType)||"quasi"==t.lastType&&/\{\s*$/.test(e.string.slice(0,e.pos-(n||0)))}return L.lex=!0,I.lex=!0,{startState:function(e){var r={tokenize:p,lastType:"sof",cc:[],lexical:new b((e||0)-n,0,"block",!1),context:new _(null,null,!1),indented:e||0};return r.cellNames=t.cellNames,r},token:function(e,t){if(e.sol()&&(t.lexical.hasOwnProperty("align")||(t.lexical.align=!1),t.indented=e.indentation(),g(e,t)),t.tokenize!=d&&e.eatSpace())return null;var n=t.tokenize(e,t);return"comment"==l?n:(t.lastType="operator"!=l||"++"!=c&&"--"!=c?l:"incdec",function(e,t,n,r,i){var a=e.cc;for(w.state=e,w.stream=i,w.marked=null,w.cc=a,w.style=t,e.lexical.hasOwnProperty("align")||(e.lexical.align=!0);;)if((a.length?a.pop():M)(n,r)){for(;a.length&&a[a.length-1].lex;)a.pop()();return w.marked?w.marked:"variable"==n&&(y(e,r)||Gw.has(r)||Om.has(r)||s.has(r))?"variable-2":t}}(t,n,l,c,e))},indent:function(e,i){if(e.tokenize==d)return aw.Pass;if(e.tokenize!=p)return 0;var s,a=i&&i.charAt(0),o=e.lexical;if(!/^\s*else\b/.test(i))for(var l=e.cc.length-1;l>=0;--l){var c=e.cc[l];if(c==I)o=o.prev;else if(c!=ue)break}for(;("stat"==o.type||"form"==o.type)&&("}"==a||(s=e.cc[e.cc.length-1])&&(s==U||s==H)&&!/^[,\.=+\-*:?[\(]/.test(i));)o=o.prev;r&&")"==o.type&&"stat"==o.prev.type&&(o=o.prev);var h=o.type,f=a==h;return"vardef"==h||"blockdef"===h?o.indented+("operator"==e.lastType||","==e.lastType?o.info.length+1:0):"form"==h&&"{"==a?o.indented:"form"==h?o.indented+n:"stat"==h?o.indented+(function(e,t){return"operator"==e.lastType||","==e.lastType||u.test(t.charAt(0))||/[,.]/.test(t.charAt(0))}(e,i)?r||n:0):"switch"!=o.info||f||0==t.doubleIndentSwitch?o.align?o.column+(f?0:1):o.indented+(f?0:n):o.indented+(/^(?:case|default)\b/.test(i)?n:2*n)},electricInput:/^\s*(?:case .*?:|default:|\{|\})$/,blockCommentStart:"/*",blockCommentEnd:"*/",lineComment:"//",fold:"brace",closeBrackets:"()[]{}''\"\"``",helperType:"javascript",expressionAllowed:Le,skipExpression:function(e){var t=e.cc[e.cc.length-1];t!=D&&t!=F||e.cc.pop()}}}),aw.registerHelper("wordChars","javascript",/[\w$]/),aw.defineMIME("application/r-javascript","javascript");const _x=new Map,Sx=[],Nx=Sx.map,Tx=Sx.some,Ax=Sx.hasOwnProperty,Lx="https://cdn.jsdelivr.net/npm/",Px=/^((?:@[^\/@]+\/)?[^\/@]+)(?:@([^\/]+))?(?:\/(.*))?$/,Ix=/^\d+\.\d+\.\d+(-[\w-.+]+)?$/,Ox=/\.[^\/]*$/,Mx=["unpkg","jsdelivr","browser","main"];class Rx extends Error{constructor(e){super(e)}}function Dx(e){const t=Px.exec(e);return t&&{name:t[1],version:t[2],path:t[3]}}function Fx(e){const t=`${Lx}${e.name}${e.version?`@${e.version}`:""}/package.json`;let n=_x.get(t);return n||_x.set(t,n=fetch(t).then(e=>{if(!e.ok)throw new Rx("unable to load package.json");return e.redirected&&!_x.has(e.url)&&_x.set(e.url,n),e.json()})),n}Rx.prototype.name=Rx.name;const Vx=function e(t){const n=new Map;const r=s(null);function i(e){if("string"!=typeof e)return e;let t=n.get(e);return t||n.set(e,t=new Promise((t,n)=>{const r=document.createElement("script");r.onload=(()=>{try{t(Sx.pop()(s(e)))}catch(i){n(new Rx("invalid module"))}r.remove()}),r.onerror=(()=>{n(new Rx("unable to load module")),r.remove()}),r.async=!0,r.src=e,window.define=Hx,document.head.appendChild(r)})),t}function s(e){return n=>Promise.resolve(t(n,e)).then(i)}function a(n){return e((e,r)=>e in n&&(e=n[e],r=null,"string"!=typeof e)?e:t(e,r))}function o(e){return arguments.length>1?Promise.all(Nx.call(arguments,r)).then(jx):r(e)}o.alias=function a(e){return function e(t){const n=new Map;const r=s(null);function i(e){if("string"!=typeof e)return e;let t=n.get(e);return t||n.set(e,t=new Promise((t,n)=>{const r=document.createElement("script");r.onload=(()=>{try{t(Sx.pop()(s(e)))}catch(i){n(new Rx("invalid module"))}r.remove()}),r.onerror=(()=>{n(new Rx("unable to load module")),r.remove()}),r.async=!0,r.src=e,window.define=Hx,document.head.appendChild(r)})),t}function s(e){return n=>Promise.resolve(t(n,e)).then(i)}function a(n){return e((e,r)=>e in n&&(e=n[e],r=null,"string"!=typeof e)?e:t(e,r))}function o(e){return arguments.length>1?Promise.all(Nx.call(arguments,r)).then(jx):r(e)}o.alias=a;o.resolve=t;return o}((n,r)=>n in e&&(n=e[n],r=null,"string"!=typeof n)?n:t(n,r))};o.resolve=t;return o}(async function(e,t){if(e.startsWith(Lx)&&(e=e.substring(Lx.length)),/^(\w+:)|\/\//i.test(e))return e;if(/^[.]{0,2}\//i.test(e))return new URL(e,null==t?location:t).href;if(!e.length||/^[\s._]/.test(e)||/\s$/.test(e))throw new Rx("illegal name");const n=Dx(e);if(!n)return`${Lx}${e}`;if(!n.version&&null!=t&&t.startsWith(Lx)){const e=await Fx(Dx(t.substring(Lx.length)));n.version=e.dependencies&&e.dependencies[n.name]||e.peerDependencies&&e.peerDependencies[n.name]}if(n.path&&!Ox.test(n.path)&&(n.path+=".js"),n.path&&n.version&&Ix.test(n.version))return`${Lx}${n.name}@${n.version}/${n.path}`;const r=await Fx(n);return`${Lx}${r.name}@${r.version}/${n.path||function(e){for(const t of Mx){const n=e[t];if("string"==typeof n)return Ox.test(n)?n:`${n}.js`}}(r)||"index.js"}`});function jx(e){const t={};for(const n of e)for(const e in n)Ax.call(n,e)&&(null==n[e]?Object.defineProperty(t,e,{get:Bx(n,e)}):t[e]=n[e]);return t}function Bx(e,t){return()=>e[t]}function Ux(e){return e+""=="exports"}function Hx(e,t,n){const r=arguments.length;r<2?(n=e,t=[]):r<3&&(n=t,t="string"==typeof e?[]:e),Sx.push(Tx.call(t,Ux)?e=>{const r={};return Promise.all(Nx.call(t,t=>Ux(t+="")?r:e(t))).then(e=>(n.apply(null,e),r))}:e=>Promise.all(Nx.call(t,e)).then(e=>"function"==typeof n?n.apply(null,e):n))}Hx.amd={};var $x={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},zx="break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",Wx={5:zx,6:zx+" const class extends export import super"},qx=/^in(stanceof)?$/,Gx="ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽͿΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԯԱ-Ֆՙՠ-ֈא-תׯ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࡠ-ࡪࢠ-ࢴࢶ-ࢽऄ-हऽॐक़-ॡॱ-ঀঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱৼਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡૹଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-హఽౘ-ౚౠౡಀಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൔ-ൖൟ-ൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏽᏸ-ᏽᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛸᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡸᢀ-ᢨᢪᢰ-ᣵᤀ-ᤞᥐ-ᥭᥰ-ᥴᦀ-ᦫᦰ-ᧉᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᲀ-ᲈᲐ-ᲺᲽ-Ჿᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕ℘-ℝℤΩℨK-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞ々-〇〡-〩〱-〵〸-〼ぁ-ゖ゛-ゟァ-ヺー-ヿㄅ-ㄯㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿯ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚝꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞹꟷ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꣽꣾꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꧠ-ꧤꧦ-ꧯꧺ-ꧾꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꩾ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꬰ-ꭚꭜ-ꭥꭰ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ",Kx="‌‍·̀-ͯ·҃-֑҇-ׇֽֿׁׂׅׄؐ-ًؚ-٩ٰۖ-ۜ۟-۪ۤۧۨ-ۭ۰-۹ܑܰ-݊ަ-ް߀-߉߫-߽߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛࣓-ࣣ࣡-ःऺ-़ा-ॏ॑-ॗॢॣ०-९ঁ-ঃ়া-ৄেৈো-্ৗৢৣ০-৯৾ਁ-ਃ਼ਾ-ੂੇੈੋ-੍ੑ੦-ੱੵઁ-ઃ઼ા-ૅે-ૉો-્ૢૣ૦-૯ૺ-૿ଁ-ଃ଼ା-ୄେୈୋ-୍ୖୗୢୣ୦-୯ஂா-ூெ-ைொ-்ௗ௦-௯ఀ-ఄా-ౄె-ైొ-్ౕౖౢౣ౦-౯ಁ-ಃ಼ಾ-ೄೆ-ೈೊ-್ೕೖೢೣ೦-೯ഀ-ഃ഻഼ാ-ൄെ-ൈൊ-്ൗൢൣ൦-൯ංඃ්ා-ුූෘ-ෟ෦-෯ෲෳัิ-ฺ็-๎๐-๙ັິ-ູົຼ່-ໍ໐-໙༘༙༠-༩༹༵༷༾༿ཱ-྄྆྇ྍ-ྗྙ-ྼ࿆ါ-ှ၀-၉ၖ-ၙၞ-ၠၢ-ၤၧ-ၭၱ-ၴႂ-ႍႏ-ႝ፝-፟፩-፱ᜒ-᜔ᜲ-᜴ᝒᝓᝲᝳ឴-៓៝០-៩᠋-᠍᠐-᠙ᢩᤠ-ᤫᤰ-᤻᥆-᥏᧐-᧚ᨗ-ᨛᩕ-ᩞ᩠-᩿᩼-᪉᪐-᪙᪰-᪽ᬀ-ᬄ᬴-᭄᭐-᭙᭫-᭳ᮀ-ᮂᮡ-ᮭ᮰-᮹᯦-᯳ᰤ-᰷᱀-᱉᱐-᱙᳐-᳔᳒-᳨᳭ᳲ-᳴᳷-᳹᷀-᷹᷻-᷿‿⁀⁔⃐-⃥⃜⃡-⃰⳯-⵿⳱ⷠ-〪ⷿ-゙゚〯꘠-꘩꙯ꙴ-꙽ꚞꚟ꛰꛱ꠂ꠆ꠋꠣ-ꠧꢀꢁꢴ-ꣅ꣐-꣙꣠-꣱ꣿ-꤉ꤦ-꤭ꥇ-꥓ꦀ-ꦃ꦳-꧀꧐-꧙ꧥ꧰-꧹ꨩ-ꨶꩃꩌꩍ꩐-꩙ꩻ-ꩽꪰꪲ-ꪴꪷꪸꪾ꪿꫁ꫫ-ꫯꫵ꫶ꯣ-ꯪ꯬꯭꯰-꯹ﬞ︀-️︠-︯︳︴﹍-﹏０-９＿",Yx=new RegExp("["+Gx+"]"),Zx=new RegExp("["+Gx+Kx+"]");Gx=Kx=null;var Qx=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,157,310,10,21,11,7,153,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,477,28,11,0,9,21,190,52,76,44,33,24,27,35,30,0,12,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,85,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,159,52,19,3,54,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,86,26,230,43,117,63,32,0,257,0,11,39,8,0,22,0,12,39,3,3,20,0,35,56,264,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,270,921,103,110,18,195,2749,1070,4050,582,8634,568,8,30,114,29,19,47,17,3,32,20,6,18,689,63,129,68,12,0,67,12,65,1,31,6129,15,754,9486,286,82,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,4149,196,60,67,1213,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42710,42,4148,12,221,3,5761,15,7472,3104,541],Xx=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,525,10,176,2,54,14,32,9,16,3,46,10,54,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,4,9,83,11,7,0,161,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,193,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,243,14,166,9,280,9,41,6,2,3,9,0,10,10,47,15,406,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,19306,9,135,4,60,6,26,9,1016,45,17,3,19723,1,5319,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,2214,6,110,6,6,9,792487,239];function Jx(e,t){for(var n=65536,r=0;r<t.length;r+=2){if((n+=t[r])>e)return!1;if((n+=t[r+1])>=e)return!0}}function eE(e,t){return e<65?36===e:e<91||(e<97?95===e:e<123||(e<=65535?e>=170&&Yx.test(String.fromCharCode(e)):!1!==t&&Jx(e,Qx)))}function tE(e,t){return e<48?36===e:e<58||!(e<65)&&(e<91||(e<97?95===e:e<123||(e<=65535?e>=170&&Zx.test(String.fromCharCode(e)):!1!==t&&(Jx(e,Qx)||Jx(e,Xx)))))}var nE=function(e,t){void 0===t&&(t={}),this.label=e,this.keyword=t.keyword,this.beforeExpr=!!t.beforeExpr,this.startsExpr=!!t.startsExpr,this.isLoop=!!t.isLoop,this.isAssign=!!t.isAssign,this.prefix=!!t.prefix,this.postfix=!!t.postfix,this.binop=t.binop||null,this.updateContext=null};function rE(e,t){return new nE(e,{beforeExpr:!0,binop:t})}var iE={beforeExpr:!0},sE={startsExpr:!0},aE={};function oE(e,t){return void 0===t&&(t={}),t.keyword=e,aE[e]=new nE(e,t)}var lE={num:new nE("num",sE),regexp:new nE("regexp",sE),string:new nE("string",sE),name:new nE("name",sE),eof:new nE("eof"),bracketL:new nE("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new nE("]"),braceL:new nE("{",{beforeExpr:!0,startsExpr:!0}),braceR:new nE("}"),parenL:new nE("(",{beforeExpr:!0,startsExpr:!0}),parenR:new nE(")"),comma:new nE(",",iE),semi:new nE(";",iE),colon:new nE(":",iE),dot:new nE("."),question:new nE("?",iE),arrow:new nE("=>",iE),template:new nE("template"),invalidTemplate:new nE("invalidTemplate"),ellipsis:new nE("...",iE),backQuote:new nE("`",sE),dollarBraceL:new nE("${",{beforeExpr:!0,startsExpr:!0}),eq:new nE("=",{beforeExpr:!0,isAssign:!0}),assign:new nE("_=",{beforeExpr:!0,isAssign:!0}),incDec:new nE("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new nE("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:rE("||",1),logicalAND:rE("&&",2),bitwiseOR:rE("|",3),bitwiseXOR:rE("^",4),bitwiseAND:rE("&",5),equality:rE("==/!=/===/!==",6),relational:rE("</>/<=/>=",7),bitShift:rE("<</>>/>>>",8),plusMin:new nE("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:rE("%",10),star:rE("*",10),slash:rE("/",10),starstar:new nE("**",{beforeExpr:!0}),_break:oE("break"),_case:oE("case",iE),_catch:oE("catch"),_continue:oE("continue"),_debugger:oE("debugger"),_default:oE("default",iE),_do:oE("do",{isLoop:!0,beforeExpr:!0}),_else:oE("else",iE),_finally:oE("finally"),_for:oE("for",{isLoop:!0}),_function:oE("function",sE),_if:oE("if"),_return:oE("return",iE),_switch:oE("switch"),_throw:oE("throw",iE),_try:oE("try"),_var:oE("var"),_const:oE("const"),_while:oE("while",{isLoop:!0}),_with:oE("with"),_new:oE("new",{beforeExpr:!0,startsExpr:!0}),_this:oE("this",sE),_super:oE("super",sE),_class:oE("class",sE),_extends:oE("extends",iE),_export:oE("export"),_import:oE("import"),_null:oE("null",sE),_true:oE("true",sE),_false:oE("false",sE),_in:oE("in",{beforeExpr:!0,binop:7}),_instanceof:oE("instanceof",{beforeExpr:!0,binop:7}),_typeof:oE("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:oE("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:oE("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},cE=/\r\n?|\n|\u2028|\u2029/,uE=new RegExp(cE.source,"g");function hE(e,t){return 10===e||13===e||!t&&(8232===e||8233===e)}var pE=/[\u1680\u2000-\u200a\u202f\u205f\u3000\ufeff]/,dE=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,fE=Object.prototype,mE=fE.hasOwnProperty,gE=fE.toString;function vE(e,t){return mE.call(e,t)}var bE=Array.isArray||function(e){return"[object Array]"===gE.call(e)};function yE(e){return new RegExp("^(?:"+e.replace(/ /g,"|")+")$")}var wE=function(e,t){this.line=e,this.column=t};wE.prototype.offset=function(e){return new wE(this.line,this.column+e)};var xE=function(e,t,n){this.start=t,this.end=n,null!==e.sourceFile&&(this.source=e.sourceFile)};var EE={ecmaVersion:9,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:!1,allowHashBang:!1,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1};function kE(e){var t={};for(var n in EE)t[n]=e&&vE(e,n)?e[n]:EE[n];if(t.ecmaVersion>=2015&&(t.ecmaVersion-=2009),null==t.allowReserved&&(t.allowReserved=t.ecmaVersion<5),bE(t.onToken)){var r=t.onToken;t.onToken=function(e){return r.push(e)}}return bE(t.onComment)&&(t.onComment=function(e,t){return function(n,r,i,s,a,o){var l={type:n?"Block":"Line",value:r,start:i,end:s};e.locations&&(l.loc=new xE(this,a,o)),e.ranges&&(l.range=[i,s]),t.push(l)}}(t,t.onComment)),t}var CE=2,_E=1|CE,SE=4,NE=8;function TE(e,t){return CE|(e?SE:0)|(t?NE:0)}var AE=function(e,t,n){this.options=e=kE(e),this.sourceFile=e.sourceFile,this.keywords=yE(Wx[e.ecmaVersion>=6?6:5]);var r="";if(!e.allowReserved){for(var i=e.ecmaVersion;!(r=$x[i]);i--);"module"===e.sourceType&&(r+=" await")}this.reservedWords=yE(r);var s=(r?r+" ":"")+$x.strict;this.reservedWordsStrict=yE(s),this.reservedWordsStrictBind=yE(s+" "+$x.strictBind),this.input=String(t),this.containsEsc=!1,n?(this.pos=n,this.lineStart=this.input.lastIndexOf("\n",n-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(cE).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=lE.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.inModule="module"===e.sourceType,this.strict=this.inModule||this.strictDirective(this.pos),this.potentialArrowAt=-1,this.yieldPos=this.awaitPos=this.awaitIdentPos=0,this.labels=[],this.undefinedExports={},0===this.pos&&e.allowHashBang&&"#!"===this.input.slice(0,2)&&this.skipLineComment(2),this.scopeStack=[],this.enterScope(1),this.regexpState=null},LE={inFunction:{configurable:!0},inGenerator:{configurable:!0},inAsync:{configurable:!0},allowSuper:{configurable:!0},allowDirectSuper:{configurable:!0},treatFunctionsAsVar:{configurable:!0}};AE.prototype.parse=function(){var e=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel(e)},LE.inFunction.get=function(){return(this.currentVarScope().flags&CE)>0},LE.inGenerator.get=function(){return(this.currentVarScope().flags&NE)>0},LE.inAsync.get=function(){return(this.currentVarScope().flags&SE)>0},LE.allowSuper.get=function(){return(64&this.currentThisScope().flags)>0},LE.allowDirectSuper.get=function(){return(128&this.currentThisScope().flags)>0},LE.treatFunctionsAsVar.get=function(){return this.treatFunctionsAsVarInScope(this.currentScope())},AE.prototype.inNonArrowFunction=function(){return(this.currentThisScope().flags&CE)>0},AE.extend=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];for(var n=this,r=0;r<e.length;r++)n=e[r](n);return n},AE.parse=function(e,t){return new this(t,e).parse()},AE.parseExpressionAt=function(e,t,n){var r=new this(n,e,t);return r.nextToken(),r.parseExpression()},AE.tokenizer=function(e,t){return new this(t,e)},Object.defineProperties(AE.prototype,LE);var PE=AE.prototype,IE=/^(?:'((?:\\.|[^'])*?)'|"((?:\\.|[^"])*?)")/;function OE(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1}PE.strictDirective=function(e){for(;;){dE.lastIndex=e,e+=dE.exec(this.input)[0].length;var t=IE.exec(this.input.slice(e));if(!t)return!1;if("use strict"===(t[1]||t[2]))return!0;e+=t[0].length,dE.lastIndex=e,e+=dE.exec(this.input)[0].length,";"===this.input[e]&&e++}},PE.eat=function(e){return this.type===e&&(this.next(),!0)},PE.isContextual=function(e){return this.type===lE.name&&this.value===e&&!this.containsEsc},PE.eatContextual=function(e){return!!this.isContextual(e)&&(this.next(),!0)},PE.expectContextual=function(e){this.eatContextual(e)||this.unexpected()},PE.canInsertSemicolon=function(){return this.type===lE.eof||this.type===lE.braceR||cE.test(this.input.slice(this.lastTokEnd,this.start))},PE.insertSemicolon=function(){if(this.canInsertSemicolon())return this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0},PE.semicolon=function(){this.eat(lE.semi)||this.insertSemicolon()||this.unexpected()},PE.afterTrailingComma=function(e,t){if(this.type===e)return this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),t||this.next(),!0},PE.expect=function(e){this.eat(e)||this.unexpected()},PE.unexpected=function(e){this.raise(null!=e?e:this.start,"Unexpected token")},PE.checkPatternErrors=function(e,t){if(e){e.trailingComma>-1&&this.raiseRecoverable(e.trailingComma,"Comma is not permitted after the rest element");var n=t?e.parenthesizedAssign:e.parenthesizedBind;n>-1&&this.raiseRecoverable(n,"Parenthesized pattern")}},PE.checkExpressionErrors=function(e,t){if(!e)return!1;var n=e.shorthandAssign,r=e.doubleProto;if(!t)return n>=0||r>=0;n>=0&&this.raise(n,"Shorthand property assignments are valid only in destructuring patterns"),r>=0&&this.raiseRecoverable(r,"Redefinition of __proto__ property")},PE.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value"),this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")},PE.isSimpleAssignTarget=function(e){return"ParenthesizedExpression"===e.type?this.isSimpleAssignTarget(e.expression):"Identifier"===e.type||"MemberExpression"===e.type};var ME=AE.prototype;ME.parseTopLevel=function(e){var t={};for(e.body||(e.body=[]);this.type!==lE.eof;){var n=this.parseStatement(null,!0,t);e.body.push(n)}if(this.inModule)for(var r=0,i=Object.keys(this.undefinedExports);r<i.length;r+=1){var s=i[r];this.raiseRecoverable(this.undefinedExports[s].start,"Export '"+s+"' is not defined")}return this.adaptDirectivePrologue(e.body),this.next(),this.options.ecmaVersion>=6&&(e.sourceType=this.options.sourceType),this.finishNode(e,"Program")};var RE={kind:"loop"},DE={kind:"switch"};ME.isLet=function(e){if(this.options.ecmaVersion<6||!this.isContextual("let"))return!1;dE.lastIndex=this.pos;var t=dE.exec(this.input),n=this.pos+t[0].length,r=this.input.charCodeAt(n);if(91===r)return!0;if(e)return!1;if(123===r)return!0;if(eE(r,!0)){for(var i=n+1;tE(this.input.charCodeAt(i),!0);)++i;var s=this.input.slice(n,i);if(!qx.test(s))return!0}return!1},ME.isAsyncFunction=function(){if(this.options.ecmaVersion<8||!this.isContextual("async"))return!1;dE.lastIndex=this.pos;var e=dE.exec(this.input),t=this.pos+e[0].length;return!(cE.test(this.input.slice(this.pos,t))||"function"!==this.input.slice(t,t+8)||t+8!==this.input.length&&tE(this.input.charAt(t+8)))},ME.parseStatement=function(e,t,n){var r,i=this.type,s=this.startNode();switch(this.isLet(e)&&(i=lE._var,r="let"),i){case lE._break:case lE._continue:return this.parseBreakContinueStatement(s,i.keyword);case lE._debugger:return this.parseDebuggerStatement(s);case lE._do:return this.parseDoStatement(s);case lE._for:return this.parseForStatement(s);case lE._function:return e&&(this.strict||"if"!==e&&"label"!==e)&&this.options.ecmaVersion>=6&&this.unexpected(),this.parseFunctionStatement(s,!1,!e);case lE._class:return e&&this.unexpected(),this.parseClass(s,!0);case lE._if:return this.parseIfStatement(s);case lE._return:return this.parseReturnStatement(s);case lE._switch:return this.parseSwitchStatement(s);case lE._throw:return this.parseThrowStatement(s);case lE._try:return this.parseTryStatement(s);case lE._const:case lE._var:return r=r||this.value,e&&"var"!==r&&this.unexpected(),this.parseVarStatement(s,r);case lE._while:return this.parseWhileStatement(s);case lE._with:return this.parseWithStatement(s);case lE.braceL:return this.parseBlock(!0,s);case lE.semi:return this.parseEmptyStatement(s);case lE._export:case lE._import:return this.options.allowImportExportEverywhere||(t||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'")),i===lE._import?this.parseImport(s):this.parseExport(s,n);default:if(this.isAsyncFunction())return e&&this.unexpected(),this.next(),this.parseFunctionStatement(s,!0,!e);var a=this.value,o=this.parseExpression();return i===lE.name&&"Identifier"===o.type&&this.eat(lE.colon)?this.parseLabeledStatement(s,a,o,e):this.parseExpressionStatement(s,o)}},ME.parseBreakContinueStatement=function(e,t){var n="break"===t;this.next(),this.eat(lE.semi)||this.insertSemicolon()?e.label=null:this.type!==lE.name?this.unexpected():(e.label=this.parseIdent(),this.semicolon());for(var r=0;r<this.labels.length;++r){var i=this.labels[r];if(null==e.label||i.name===e.label.name){if(null!=i.kind&&(n||"loop"===i.kind))break;if(e.label&&n)break}}return r===this.labels.length&&this.raise(e.start,"Unsyntactic "+t),this.finishNode(e,n?"BreakStatement":"ContinueStatement")},ME.parseDebuggerStatement=function(e){return this.next(),this.semicolon(),this.finishNode(e,"DebuggerStatement")},ME.parseDoStatement=function(e){return this.next(),this.labels.push(RE),e.body=this.parseStatement("do"),this.labels.pop(),this.expect(lE._while),e.test=this.parseParenExpression(),this.options.ecmaVersion>=6?this.eat(lE.semi):this.semicolon(),this.finishNode(e,"DoWhileStatement")},ME.parseForStatement=function(e){this.next();var t=this.options.ecmaVersion>=9&&(this.inAsync||!this.inFunction&&this.options.allowAwaitOutsideFunction)&&this.eatContextual("await")?this.lastTokStart:-1;if(this.labels.push(RE),this.enterScope(0),this.expect(lE.parenL),this.type===lE.semi)return t>-1&&this.unexpected(t),this.parseFor(e,null);var n=this.isLet();if(this.type===lE._var||this.type===lE._const||n){var r=this.startNode(),i=n?"let":this.value;return this.next(),this.parseVar(r,!0,i),this.finishNode(r,"VariableDeclaration"),!(this.type===lE._in||this.options.ecmaVersion>=6&&this.isContextual("of"))||1!==r.declarations.length||"var"!==i&&r.declarations[0].init?(t>-1&&this.unexpected(t),this.parseFor(e,r)):(this.options.ecmaVersion>=9&&(this.type===lE._in?t>-1&&this.unexpected(t):e.await=t>-1),this.parseForIn(e,r))}var s=new OE,a=this.parseExpression(!0,s);return this.type===lE._in||this.options.ecmaVersion>=6&&this.isContextual("of")?(this.options.ecmaVersion>=9&&(this.type===lE._in?t>-1&&this.unexpected(t):e.await=t>-1),this.toAssignable(a,!1,s),this.checkLVal(a),this.parseForIn(e,a)):(this.checkExpressionErrors(s,!0),t>-1&&this.unexpected(t),this.parseFor(e,a))},ME.parseFunctionStatement=function(e,t,n){return this.next(),this.parseFunction(e,VE|(n?0:jE),!1,t)},ME.parseIfStatement=function(e){return this.next(),e.test=this.parseParenExpression(),e.consequent=this.parseStatement("if"),e.alternate=this.eat(lE._else)?this.parseStatement("if"):null,this.finishNode(e,"IfStatement")},ME.parseReturnStatement=function(e){return this.inFunction||this.options.allowReturnOutsideFunction||this.raise(this.start,"'return' outside of function"),this.next(),this.eat(lE.semi)||this.insertSemicolon()?e.argument=null:(e.argument=this.parseExpression(),this.semicolon()),this.finishNode(e,"ReturnStatement")},ME.parseSwitchStatement=function(e){var t;this.next(),e.discriminant=this.parseParenExpression(),e.cases=[],this.expect(lE.braceL),this.labels.push(DE),this.enterScope(0);for(var n=!1;this.type!==lE.braceR;)if(this.type===lE._case||this.type===lE._default){var r=this.type===lE._case;t&&this.finishNode(t,"SwitchCase"),e.cases.push(t=this.startNode()),t.consequent=[],this.next(),r?t.test=this.parseExpression():(n&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),n=!0,t.test=null),this.expect(lE.colon)}else t||this.unexpected(),t.consequent.push(this.parseStatement(null));return this.exitScope(),t&&this.finishNode(t,"SwitchCase"),this.next(),this.labels.pop(),this.finishNode(e,"SwitchStatement")},ME.parseThrowStatement=function(e){return this.next(),cE.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw"),e.argument=this.parseExpression(),this.semicolon(),this.finishNode(e,"ThrowStatement")};var FE=[];ME.parseTryStatement=function(e){if(this.next(),e.block=this.parseBlock(),e.handler=null,this.type===lE._catch){var t=this.startNode();if(this.next(),this.eat(lE.parenL)){t.param=this.parseBindingAtom();var n="Identifier"===t.param.type;this.enterScope(n?32:0),this.checkLVal(t.param,n?4:2),this.expect(lE.parenR)}else this.options.ecmaVersion<10&&this.unexpected(),t.param=null,this.enterScope(0);t.body=this.parseBlock(!1),this.exitScope(),e.handler=this.finishNode(t,"CatchClause")}return e.finalizer=this.eat(lE._finally)?this.parseBlock():null,e.handler||e.finalizer||this.raise(e.start,"Missing catch or finally clause"),this.finishNode(e,"TryStatement")},ME.parseVarStatement=function(e,t){return this.next(),this.parseVar(e,!1,t),this.semicolon(),this.finishNode(e,"VariableDeclaration")},ME.parseWhileStatement=function(e){return this.next(),e.test=this.parseParenExpression(),this.labels.push(RE),e.body=this.parseStatement("while"),this.labels.pop(),this.finishNode(e,"WhileStatement")},ME.parseWithStatement=function(e){return this.strict&&this.raise(this.start,"'with' in strict mode"),this.next(),e.object=this.parseParenExpression(),e.body=this.parseStatement("with"),this.finishNode(e,"WithStatement")},ME.parseEmptyStatement=function(e){return this.next(),this.finishNode(e,"EmptyStatement")},ME.parseLabeledStatement=function(e,t,n,r){for(var i=0,s=this.labels;i<s.length;i+=1){s[i].name===t&&this.raise(n.start,"Label '"+t+"' is already declared")}for(var a=this.type.isLoop?"loop":this.type===lE._switch?"switch":null,o=this.labels.length-1;o>=0;o--){var l=this.labels[o];if(l.statementStart!==e.start)break;l.statementStart=this.start,l.kind=a}return this.labels.push({name:t,kind:a,statementStart:this.start}),e.body=this.parseStatement(r?-1===r.indexOf("label")?r+"label":r:"label"),this.labels.pop(),e.label=n,this.finishNode(e,"LabeledStatement")},ME.parseExpressionStatement=function(e,t){return e.expression=t,this.semicolon(),this.finishNode(e,"ExpressionStatement")},ME.parseBlock=function(e,t){for(void 0===e&&(e=!0),void 0===t&&(t=this.startNode()),t.body=[],this.expect(lE.braceL),e&&this.enterScope(0);!this.eat(lE.braceR);){var n=this.parseStatement(null);t.body.push(n)}return e&&this.exitScope(),this.finishNode(t,"BlockStatement")},ME.parseFor=function(e,t){return e.init=t,this.expect(lE.semi),e.test=this.type===lE.semi?null:this.parseExpression(),this.expect(lE.semi),e.update=this.type===lE.parenR?null:this.parseExpression(),this.expect(lE.parenR),e.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(e,"ForStatement")},ME.parseForIn=function(e,t){var n=this.type===lE._in?"ForInStatement":"ForOfStatement";return this.next(),"ForInStatement"===n&&("AssignmentPattern"===t.type||"VariableDeclaration"===t.type&&null!=t.declarations[0].init&&(this.strict||"Identifier"!==t.declarations[0].id.type))&&this.raise(t.start,"Invalid assignment in for-in loop head"),e.left=t,e.right="ForInStatement"===n?this.parseExpression():this.parseMaybeAssign(),this.expect(lE.parenR),e.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(e,n)},ME.parseVar=function(e,t,n){for(e.declarations=[],e.kind=n;;){var r=this.startNode();if(this.parseVarId(r,n),this.eat(lE.eq)?r.init=this.parseMaybeAssign(t):"const"!==n||this.type===lE._in||this.options.ecmaVersion>=6&&this.isContextual("of")?"Identifier"===r.id.type||t&&(this.type===lE._in||this.isContextual("of"))?r.init=null:this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):this.unexpected(),e.declarations.push(this.finishNode(r,"VariableDeclarator")),!this.eat(lE.comma))break}return e},ME.parseVarId=function(e,t){"const"!==t&&"let"!==t||!this.isContextual("let")||this.raiseRecoverable(this.start,"let is disallowed as a lexically bound name"),e.id=this.parseBindingAtom(),this.checkLVal(e.id,"var"===t?1:2,!1)};var VE=1,jE=2;ME.parseFunction=function(e,t,n,r){this.initFunction(e),(this.options.ecmaVersion>=9||this.options.ecmaVersion>=6&&!r)&&(this.type===lE.star&&t&jE&&this.unexpected(),e.generator=this.eat(lE.star)),this.options.ecmaVersion>=8&&(e.async=!!r),t&VE&&(e.id=4&t&&this.type!==lE.name?null:this.parseIdent(),!e.id||t&jE||this.checkLVal(e.id,this.strict||e.generator||e.async?this.treatFunctionsAsVar?1:2:3));var i=this.yieldPos,s=this.awaitPos,a=this.awaitIdentPos;return this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(TE(e.async,e.generator)),t&VE||(e.id=this.type===lE.name?this.parseIdent():null),this.parseFunctionParams(e),this.parseFunctionBody(e,n,!1),this.yieldPos=i,this.awaitPos=s,this.awaitIdentPos=a,this.finishNode(e,t&VE?"FunctionDeclaration":"FunctionExpression")},ME.parseFunctionParams=function(e){this.expect(lE.parenL),e.params=this.parseBindingList(lE.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams()},ME.parseClass=function(e,t){this.next();var n=this.strict;this.strict=!0,this.parseClassId(e,t),this.parseClassSuper(e);var r=this.startNode(),i=!1;for(r.body=[],this.expect(lE.braceL);!this.eat(lE.braceR);){var s=this.parseClassElement(null!==e.superClass);s&&(r.body.push(s),"MethodDefinition"===s.type&&"constructor"===s.kind&&(i&&this.raise(s.start,"Duplicate constructor in the same class"),i=!0))}return e.body=this.finishNode(r,"ClassBody"),this.strict=n,this.finishNode(e,t?"ClassDeclaration":"ClassExpression")},ME.parseClassElement=function(e){var t=this;if(this.eat(lE.semi))return null;var n=this.startNode(),r=function(e,r){void 0===r&&(r=!1);var i=t.start,s=t.startLoc;return!!t.eatContextual(e)&&(!(t.type===lE.parenL||r&&t.canInsertSemicolon())||(n.key&&t.unexpected(),n.computed=!1,n.key=t.startNodeAt(i,s),n.key.name=e,t.finishNode(n.key,"Identifier"),!1))};n.kind="method",n.static=r("static");var i=this.eat(lE.star),s=!1;i||(this.options.ecmaVersion>=8&&r("async",!0)?(s=!0,i=this.options.ecmaVersion>=9&&this.eat(lE.star)):r("get")?n.kind="get":r("set")&&(n.kind="set")),n.key||this.parsePropertyName(n);var a=n.key,o=!1;return n.computed||n.static||!("Identifier"===a.type&&"constructor"===a.name||"Literal"===a.type&&"constructor"===a.value)?n.static&&"Identifier"===a.type&&"prototype"===a.name&&this.raise(a.start,"Classes may not have a static property named prototype"):("method"!==n.kind&&this.raise(a.start,"Constructor can't have get/set modifier"),i&&this.raise(a.start,"Constructor can't be a generator"),s&&this.raise(a.start,"Constructor can't be an async method"),n.kind="constructor",o=e),this.parseClassMethod(n,i,s,o),"get"===n.kind&&0!==n.value.params.length&&this.raiseRecoverable(n.value.start,"getter should have no params"),"set"===n.kind&&1!==n.value.params.length&&this.raiseRecoverable(n.value.start,"setter should have exactly one param"),"set"===n.kind&&"RestElement"===n.value.params[0].type&&this.raiseRecoverable(n.value.params[0].start,"Setter cannot use rest params"),n},ME.parseClassMethod=function(e,t,n,r){return e.value=this.parseMethod(t,n,r),this.finishNode(e,"MethodDefinition")},ME.parseClassId=function(e,t){this.type===lE.name?(e.id=this.parseIdent(),t&&this.checkLVal(e.id,2,!1)):(!0===t&&this.unexpected(),e.id=null)},ME.parseClassSuper=function(e){e.superClass=this.eat(lE._extends)?this.parseExprSubscripts():null},ME.parseExport=function(e,t){if(this.next(),this.eat(lE.star))return this.expectContextual("from"),this.type!==lE.string&&this.unexpected(),e.source=this.parseExprAtom(),this.semicolon(),this.finishNode(e,"ExportAllDeclaration");if(this.eat(lE._default)){var n;if(this.checkExport(t,"default",this.lastTokStart),this.type===lE._function||(n=this.isAsyncFunction())){var r=this.startNode();this.next(),n&&this.next(),e.declaration=this.parseFunction(r,4|VE,!1,n)}else if(this.type===lE._class){var i=this.startNode();e.declaration=this.parseClass(i,"nullableID")}else e.declaration=this.parseMaybeAssign(),this.semicolon();return this.finishNode(e,"ExportDefaultDeclaration")}if(this.shouldParseExportStatement())e.declaration=this.parseStatement(null),"VariableDeclaration"===e.declaration.type?this.checkVariableExport(t,e.declaration.declarations):this.checkExport(t,e.declaration.id.name,e.declaration.id.start),e.specifiers=[],e.source=null;else{if(e.declaration=null,e.specifiers=this.parseExportSpecifiers(t),this.eatContextual("from"))this.type!==lE.string&&this.unexpected(),e.source=this.parseExprAtom();else{for(var s=0,a=e.specifiers;s<a.length;s+=1){var o=a[s];this.checkUnreserved(o.local),this.checkLocalExport(o.local)}e.source=null}this.semicolon()}return this.finishNode(e,"ExportNamedDeclaration")},ME.checkExport=function(e,t,n){e&&(vE(e,t)&&this.raiseRecoverable(n,"Duplicate export '"+t+"'"),e[t]=!0)},ME.checkPatternExport=function(e,t){var n=t.type;if("Identifier"===n)this.checkExport(e,t.name,t.start);else if("ObjectPattern"===n)for(var r=0,i=t.properties;r<i.length;r+=1){var s=i[r];this.checkPatternExport(e,s)}else if("ArrayPattern"===n)for(var a=0,o=t.elements;a<o.length;a+=1){var l=o[a];l&&this.checkPatternExport(e,l)}else"Property"===n?this.checkPatternExport(e,t.value):"AssignmentPattern"===n?this.checkPatternExport(e,t.left):"RestElement"===n?this.checkPatternExport(e,t.argument):"ParenthesizedExpression"===n&&this.checkPatternExport(e,t.expression)},ME.checkVariableExport=function(e,t){if(e)for(var n=0,r=t;n<r.length;n+=1){var i=r[n];this.checkPatternExport(e,i.id)}},ME.shouldParseExportStatement=function(){return"var"===this.type.keyword||"const"===this.type.keyword||"class"===this.type.keyword||"function"===this.type.keyword||this.isLet()||this.isAsyncFunction()},ME.parseExportSpecifiers=function(e){var t=[],n=!0;for(this.expect(lE.braceL);!this.eat(lE.braceR);){if(n)n=!1;else if(this.expect(lE.comma),this.afterTrailingComma(lE.braceR))break;var r=this.startNode();r.local=this.parseIdent(!0),r.exported=this.eatContextual("as")?this.parseIdent(!0):r.local,this.checkExport(e,r.exported.name,r.exported.start),t.push(this.finishNode(r,"ExportSpecifier"))}return t},ME.parseImport=function(e){return this.next(),this.type===lE.string?(e.specifiers=FE,e.source=this.parseExprAtom()):(e.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),e.source=this.type===lE.string?this.parseExprAtom():this.unexpected()),this.semicolon(),this.finishNode(e,"ImportDeclaration")},ME.parseImportSpecifiers=function(){var e=[],t=!0;if(this.type===lE.name){var n=this.startNode();if(n.local=this.parseIdent(),this.checkLVal(n.local,2),e.push(this.finishNode(n,"ImportDefaultSpecifier")),!this.eat(lE.comma))return e}if(this.type===lE.star){var r=this.startNode();return this.next(),this.expectContextual("as"),r.local=this.parseIdent(),this.checkLVal(r.local,2),e.push(this.finishNode(r,"ImportNamespaceSpecifier")),e}for(this.expect(lE.braceL);!this.eat(lE.braceR);){if(t)t=!1;else if(this.expect(lE.comma),this.afterTrailingComma(lE.braceR))break;var i=this.startNode();i.imported=this.parseIdent(!0),this.eatContextual("as")?i.local=this.parseIdent():(this.checkUnreserved(i.imported),i.local=i.imported),this.checkLVal(i.local,2),e.push(this.finishNode(i,"ImportSpecifier"))}return e},ME.adaptDirectivePrologue=function(e){for(var t=0;t<e.length&&this.isDirectiveCandidate(e[t]);++t)e[t].directive=e[t].expression.raw.slice(1,-1)},ME.isDirectiveCandidate=function(e){return"ExpressionStatement"===e.type&&"Literal"===e.expression.type&&"string"==typeof e.expression.value&&('"'===this.input[e.start]||"'"===this.input[e.start])};var BE=AE.prototype;BE.toAssignable=function(e,t,n){if(this.options.ecmaVersion>=6&&e)switch(e.type){case"Identifier":this.inAsync&&"await"===e.name&&this.raise(e.start,"Cannot use 'await' as identifier inside an async function");break;case"ObjectPattern":case"ArrayPattern":case"RestElement":break;case"ObjectExpression":e.type="ObjectPattern",n&&this.checkPatternErrors(n,!0);for(var r=0,i=e.properties;r<i.length;r+=1){var s=i[r];this.toAssignable(s,t),"RestElement"!==s.type||"ArrayPattern"!==s.argument.type&&"ObjectPattern"!==s.argument.type||this.raise(s.argument.start,"Unexpected token")}break;case"Property":"init"!==e.kind&&this.raise(e.key.start,"Object pattern can't contain getter or setter"),this.toAssignable(e.value,t);break;case"ArrayExpression":e.type="ArrayPattern",n&&this.checkPatternErrors(n,!0),this.toAssignableList(e.elements,t);break;case"SpreadElement":e.type="RestElement",this.toAssignable(e.argument,t),"AssignmentPattern"===e.argument.type&&this.raise(e.argument.start,"Rest elements cannot have a default value");break;case"AssignmentExpression":"="!==e.operator&&this.raise(e.left.end,"Only '=' operator can be used for specifying default value."),e.type="AssignmentPattern",delete e.operator,this.toAssignable(e.left,t);case"AssignmentPattern":break;case"ParenthesizedExpression":this.toAssignable(e.expression,t,n);break;case"MemberExpression":if(!t)break;default:this.raise(e.start,"Assigning to rvalue")}else n&&this.checkPatternErrors(n,!0);return e},BE.toAssignableList=function(e,t){for(var n=e.length,r=0;r<n;r++){var i=e[r];i&&this.toAssignable(i,t)}if(n){var s=e[n-1];6===this.options.ecmaVersion&&t&&s&&"RestElement"===s.type&&"Identifier"!==s.argument.type&&this.unexpected(s.argument.start)}return e},BE.parseSpread=function(e){var t=this.startNode();return this.next(),t.argument=this.parseMaybeAssign(!1,e),this.finishNode(t,"SpreadElement")},BE.parseRestBinding=function(){var e=this.startNode();return this.next(),6===this.options.ecmaVersion&&this.type!==lE.name&&this.unexpected(),e.argument=this.parseBindingAtom(),this.finishNode(e,"RestElement")},BE.parseBindingAtom=function(){if(this.options.ecmaVersion>=6)switch(this.type){case lE.bracketL:var e=this.startNode();return this.next(),e.elements=this.parseBindingList(lE.bracketR,!0,!0),this.finishNode(e,"ArrayPattern");case lE.braceL:return this.parseObj(!0)}return this.parseIdent()},BE.parseBindingList=function(e,t,n){for(var r=[],i=!0;!this.eat(e);)if(i?i=!1:this.expect(lE.comma),t&&this.type===lE.comma)r.push(null);else{if(n&&this.afterTrailingComma(e))break;if(this.type===lE.ellipsis){var s=this.parseRestBinding();this.parseBindingListItem(s),r.push(s),this.type===lE.comma&&this.raise(this.start,"Comma is not permitted after the rest element"),this.expect(e);break}var a=this.parseMaybeDefault(this.start,this.startLoc);this.parseBindingListItem(a),r.push(a)}return r},BE.parseBindingListItem=function(e){return e},BE.parseMaybeDefault=function(e,t,n){if(n=n||this.parseBindingAtom(),this.options.ecmaVersion<6||!this.eat(lE.eq))return n;var r=this.startNodeAt(e,t);return r.left=n,r.right=this.parseMaybeAssign(),this.finishNode(r,"AssignmentPattern")},BE.checkLVal=function(e,t,n){switch(void 0===t&&(t=0),e.type){case"Identifier":this.strict&&this.reservedWordsStrictBind.test(e.name)&&this.raiseRecoverable(e.start,(t?"Binding ":"Assigning to ")+e.name+" in strict mode"),n&&(vE(n,e.name)&&this.raiseRecoverable(e.start,"Argument name clash"),n[e.name]=!0),0!==t&&5!==t&&this.declareName(e.name,t,e.start);break;case"MemberExpression":t&&this.raiseRecoverable(e.start,"Binding member expression");break;case"ObjectPattern":for(var r=0,i=e.properties;r<i.length;r+=1){var s=i[r];this.checkLVal(s,t,n)}break;case"Property":this.checkLVal(e.value,t,n);break;case"ArrayPattern":for(var a=0,o=e.elements;a<o.length;a+=1){var l=o[a];l&&this.checkLVal(l,t,n)}break;case"AssignmentPattern":this.checkLVal(e.left,t,n);break;case"RestElement":this.checkLVal(e.argument,t,n);break;case"ParenthesizedExpression":this.checkLVal(e.expression,t,n);break;default:this.raise(e.start,(t?"Binding":"Assigning to")+" rvalue")}};var UE=AE.prototype;UE.checkPropClash=function(e,t,n){if(!(this.options.ecmaVersion>=9&&"SpreadElement"===e.type||this.options.ecmaVersion>=6&&(e.computed||e.method||e.shorthand))){var r,i=e.key;switch(i.type){case"Identifier":r=i.name;break;case"Literal":r=String(i.value);break;default:return}var s=e.kind;if(this.options.ecmaVersion>=6)"__proto__"===r&&"init"===s&&(t.proto&&(n&&n.doubleProto<0?n.doubleProto=i.start:this.raiseRecoverable(i.start,"Redefinition of __proto__ property")),t.proto=!0);else{var a=t[r="$"+r];if(a)("init"===s?this.strict&&a.init||a.get||a.set:a.init||a[s])&&this.raiseRecoverable(i.start,"Redefinition of property");else a=t[r]={init:!1,get:!1,set:!1};a[s]=!0}}},UE.parseExpression=function(e,t){var n=this.start,r=this.startLoc,i=this.parseMaybeAssign(e,t);if(this.type===lE.comma){var s=this.startNodeAt(n,r);for(s.expressions=[i];this.eat(lE.comma);)s.expressions.push(this.parseMaybeAssign(e,t));return this.finishNode(s,"SequenceExpression")}return i},UE.parseMaybeAssign=function(e,t,n){if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield(e);this.exprAllowed=!1}var r=!1,i=-1,s=-1,a=-1;t?(i=t.parenthesizedAssign,s=t.trailingComma,a=t.shorthandAssign,t.parenthesizedAssign=t.trailingComma=t.shorthandAssign=-1):(t=new OE,r=!0);var o=this.start,l=this.startLoc;this.type!==lE.parenL&&this.type!==lE.name||(this.potentialArrowAt=this.start);var c=this.parseMaybeConditional(e,t);if(n&&(c=n.call(this,c,o,l)),this.type.isAssign){var u=this.startNodeAt(o,l);return u.operator=this.value,u.left=this.type===lE.eq?this.toAssignable(c,!1,t):c,r||OE.call(t),t.shorthandAssign=-1,this.checkLVal(c),this.next(),u.right=this.parseMaybeAssign(e),this.finishNode(u,"AssignmentExpression")}return r&&this.checkExpressionErrors(t,!0),i>-1&&(t.parenthesizedAssign=i),s>-1&&(t.trailingComma=s),a>-1&&(t.shorthandAssign=a),c},UE.parseMaybeConditional=function(e,t){var n=this.start,r=this.startLoc,i=this.parseExprOps(e,t);if(this.checkExpressionErrors(t))return i;if(this.eat(lE.question)){var s=this.startNodeAt(n,r);return s.test=i,s.consequent=this.parseMaybeAssign(),this.expect(lE.colon),s.alternate=this.parseMaybeAssign(e),this.finishNode(s,"ConditionalExpression")}return i},UE.parseExprOps=function(e,t){var n=this.start,r=this.startLoc,i=this.parseMaybeUnary(t,!1);return this.checkExpressionErrors(t)?i:i.start===n&&"ArrowFunctionExpression"===i.type?i:this.parseExprOp(i,n,r,-1,e)},UE.parseExprOp=function(e,t,n,r,i){var s=this.type.binop;if(null!=s&&(!i||this.type!==lE._in)&&s>r){var a=this.type===lE.logicalOR||this.type===lE.logicalAND,o=this.value;this.next();var l=this.start,c=this.startLoc,u=this.parseExprOp(this.parseMaybeUnary(null,!1),l,c,s,i),h=this.buildBinary(t,n,e,u,o,a);return this.parseExprOp(h,t,n,r,i)}return e},UE.buildBinary=function(e,t,n,r,i,s){var a=this.startNodeAt(e,t);return a.left=n,a.operator=i,a.right=r,this.finishNode(a,s?"LogicalExpression":"BinaryExpression")},UE.parseMaybeUnary=function(e,t){var n,r=this.start,i=this.startLoc;if(this.isContextual("await")&&(this.inAsync||!this.inFunction&&this.options.allowAwaitOutsideFunction))n=this.parseAwait(),t=!0;else if(this.type.prefix){var s=this.startNode(),a=this.type===lE.incDec;s.operator=this.value,s.prefix=!0,this.next(),s.argument=this.parseMaybeUnary(null,!0),this.checkExpressionErrors(e,!0),a?this.checkLVal(s.argument):this.strict&&"delete"===s.operator&&"Identifier"===s.argument.type?this.raiseRecoverable(s.start,"Deleting local variable in strict mode"):t=!0,n=this.finishNode(s,a?"UpdateExpression":"UnaryExpression")}else{if(n=this.parseExprSubscripts(e),this.checkExpressionErrors(e))return n;for(;this.type.postfix&&!this.canInsertSemicolon();){var o=this.startNodeAt(r,i);o.operator=this.value,o.prefix=!1,o.argument=n,this.checkLVal(n),this.next(),n=this.finishNode(o,"UpdateExpression")}}return!t&&this.eat(lE.starstar)?this.buildBinary(r,i,n,this.parseMaybeUnary(null,!1),"**",!1):n},UE.parseExprSubscripts=function(e){var t=this.start,n=this.startLoc,r=this.parseExprAtom(e),i="ArrowFunctionExpression"===r.type&&")"!==this.input.slice(this.lastTokStart,this.lastTokEnd);if(this.checkExpressionErrors(e)||i)return r;var s=this.parseSubscripts(r,t,n);return e&&"MemberExpression"===s.type&&(e.parenthesizedAssign>=s.start&&(e.parenthesizedAssign=-1),e.parenthesizedBind>=s.start&&(e.parenthesizedBind=-1)),s},UE.parseSubscripts=function(e,t,n,r){for(var i=this.options.ecmaVersion>=8&&"Identifier"===e.type&&"async"===e.name&&this.lastTokEnd===e.end&&!this.canInsertSemicolon()&&"async"===this.input.slice(e.start,e.end);;){var s=this.parseSubscript(e,t,n,r,i);if(s===e||"ArrowFunctionExpression"===s.type)return s;e=s}},UE.parseSubscript=function(e,t,n,r,i){var s=this.eat(lE.bracketL);if(s||this.eat(lE.dot)){var a=this.startNodeAt(t,n);a.object=e,a.property=s?this.parseExpression():this.parseIdent(!0),a.computed=!!s,s&&this.expect(lE.bracketR),e=this.finishNode(a,"MemberExpression")}else if(!r&&this.eat(lE.parenL)){var o=new OE,l=this.yieldPos,c=this.awaitPos,u=this.awaitIdentPos;this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0;var h=this.parseExprList(lE.parenR,this.options.ecmaVersion>=8,!1,o);if(i&&!this.canInsertSemicolon()&&this.eat(lE.arrow))return this.checkPatternErrors(o,!1),this.checkYieldAwaitInDefaultParams(),this.awaitIdentPos>0&&this.raise(this.awaitIdentPos,"Cannot use 'await' as identifier inside an async function"),this.yieldPos=l,this.awaitPos=c,this.awaitIdentPos=u,this.parseArrowExpression(this.startNodeAt(t,n),h,!0);this.checkExpressionErrors(o,!0),this.yieldPos=l||this.yieldPos,this.awaitPos=c||this.awaitPos,this.awaitIdentPos=u||this.awaitIdentPos;var p=this.startNodeAt(t,n);p.callee=e,p.arguments=h,e=this.finishNode(p,"CallExpression")}else if(this.type===lE.backQuote){var d=this.startNodeAt(t,n);d.tag=e,d.quasi=this.parseTemplate({isTagged:!0}),e=this.finishNode(d,"TaggedTemplateExpression")}return e},UE.parseExprAtom=function(e){this.type===lE.slash&&this.readRegexp();var t,n=this.potentialArrowAt===this.start;switch(this.type){case lE._super:return this.allowSuper||this.raise(this.start,"'super' keyword outside a method"),t=this.startNode(),this.next(),this.type!==lE.parenL||this.allowDirectSuper||this.raise(t.start,"super() call outside constructor of a subclass"),this.type!==lE.dot&&this.type!==lE.bracketL&&this.type!==lE.parenL&&this.unexpected(),this.finishNode(t,"Super");case lE._this:return t=this.startNode(),this.next(),this.finishNode(t,"ThisExpression");case lE.name:var r=this.start,i=this.startLoc,s=this.containsEsc,a=this.parseIdent(!1);if(this.options.ecmaVersion>=8&&!s&&"async"===a.name&&!this.canInsertSemicolon()&&this.eat(lE._function))return this.parseFunction(this.startNodeAt(r,i),0,!1,!0);if(n&&!this.canInsertSemicolon()){if(this.eat(lE.arrow))return this.parseArrowExpression(this.startNodeAt(r,i),[a],!1);if(this.options.ecmaVersion>=8&&"async"===a.name&&this.type===lE.name&&!s)return a=this.parseIdent(!1),!this.canInsertSemicolon()&&this.eat(lE.arrow)||this.unexpected(),this.parseArrowExpression(this.startNodeAt(r,i),[a],!0)}return a;case lE.regexp:var o=this.value;return(t=this.parseLiteral(o.value)).regex={pattern:o.pattern,flags:o.flags},t;case lE.num:case lE.string:return this.parseLiteral(this.value);case lE._null:case lE._true:case lE._false:return(t=this.startNode()).value=this.type===lE._null?null:this.type===lE._true,t.raw=this.type.keyword,this.next(),this.finishNode(t,"Literal");case lE.parenL:var l=this.start,c=this.parseParenAndDistinguishExpression(n);return e&&(e.parenthesizedAssign<0&&!this.isSimpleAssignTarget(c)&&(e.parenthesizedAssign=l),e.parenthesizedBind<0&&(e.parenthesizedBind=l)),c;case lE.bracketL:return t=this.startNode(),this.next(),t.elements=this.parseExprList(lE.bracketR,!0,!0,e),this.finishNode(t,"ArrayExpression");case lE.braceL:return this.parseObj(!1,e);case lE._function:return t=this.startNode(),this.next(),this.parseFunction(t,0);case lE._class:return this.parseClass(this.startNode(),!1);case lE._new:return this.parseNew();case lE.backQuote:return this.parseTemplate();default:this.unexpected()}},UE.parseLiteral=function(e){var t=this.startNode();return t.value=e,t.raw=this.input.slice(this.start,this.end),this.next(),this.finishNode(t,"Literal")},UE.parseParenExpression=function(){this.expect(lE.parenL);var e=this.parseExpression();return this.expect(lE.parenR),e},UE.parseParenAndDistinguishExpression=function(e){var t,n=this.start,r=this.startLoc,i=this.options.ecmaVersion>=8;if(this.options.ecmaVersion>=6){this.next();var s,a=this.start,o=this.startLoc,l=[],c=!0,u=!1,h=new OE,p=this.yieldPos,d=this.awaitPos;for(this.yieldPos=0,this.awaitPos=0;this.type!==lE.parenR;){if(c?c=!1:this.expect(lE.comma),i&&this.afterTrailingComma(lE.parenR,!0)){u=!0;break}if(this.type===lE.ellipsis){s=this.start,l.push(this.parseParenItem(this.parseRestBinding())),this.type===lE.comma&&this.raise(this.start,"Comma is not permitted after the rest element");break}l.push(this.parseMaybeAssign(!1,h,this.parseParenItem))}var f=this.start,m=this.startLoc;if(this.expect(lE.parenR),e&&!this.canInsertSemicolon()&&this.eat(lE.arrow))return this.checkPatternErrors(h,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=p,this.awaitPos=d,this.parseParenArrowList(n,r,l);l.length&&!u||this.unexpected(this.lastTokStart),s&&this.unexpected(s),this.checkExpressionErrors(h,!0),this.yieldPos=p||this.yieldPos,this.awaitPos=d||this.awaitPos,l.length>1?((t=this.startNodeAt(a,o)).expressions=l,this.finishNodeAt(t,"SequenceExpression",f,m)):t=l[0]}else t=this.parseParenExpression();if(this.options.preserveParens){var g=this.startNodeAt(n,r);return g.expression=t,this.finishNode(g,"ParenthesizedExpression")}return t},UE.parseParenItem=function(e){return e},UE.parseParenArrowList=function(e,t,n){return this.parseArrowExpression(this.startNodeAt(e,t),n)};var HE=[];UE.parseNew=function(){var e=this.startNode(),t=this.parseIdent(!0);if(this.options.ecmaVersion>=6&&this.eat(lE.dot)){e.meta=t;var n=this.containsEsc;return e.property=this.parseIdent(!0),("target"!==e.property.name||n)&&this.raiseRecoverable(e.property.start,"The only valid meta property for new is new.target"),this.inNonArrowFunction()||this.raiseRecoverable(e.start,"new.target can only be used in functions"),this.finishNode(e,"MetaProperty")}var r=this.start,i=this.startLoc;return e.callee=this.parseSubscripts(this.parseExprAtom(),r,i,!0),this.eat(lE.parenL)?e.arguments=this.parseExprList(lE.parenR,this.options.ecmaVersion>=8,!1):e.arguments=HE,this.finishNode(e,"NewExpression")},UE.parseTemplateElement=function(e){var t=e.isTagged,n=this.startNode();return this.type===lE.invalidTemplate?(t||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),n.value={raw:this.value,cooked:null}):n.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,"\n"),cooked:this.value},this.next(),n.tail=this.type===lE.backQuote,this.finishNode(n,"TemplateElement")},UE.parseTemplate=function(e){void 0===e&&(e={});var t=e.isTagged;void 0===t&&(t=!1);var n=this.startNode();this.next(),n.expressions=[];var r=this.parseTemplateElement({isTagged:t});for(n.quasis=[r];!r.tail;)this.type===lE.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect(lE.dollarBraceL),n.expressions.push(this.parseExpression()),this.expect(lE.braceR),n.quasis.push(r=this.parseTemplateElement({isTagged:t}));return this.next(),this.finishNode(n,"TemplateLiteral")},UE.isAsyncProp=function(e){return!e.computed&&"Identifier"===e.key.type&&"async"===e.key.name&&(this.type===lE.name||this.type===lE.num||this.type===lE.string||this.type===lE.bracketL||this.type.keyword||this.options.ecmaVersion>=9&&this.type===lE.star)&&!cE.test(this.input.slice(this.lastTokEnd,this.start))},UE.parseObj=function(e,t){var n=this.startNode(),r=!0,i={};for(n.properties=[],this.next();!this.eat(lE.braceR);){if(r)r=!1;else if(this.expect(lE.comma),this.afterTrailingComma(lE.braceR))break;var s=this.parseProperty(e,t);e||this.checkPropClash(s,i,t),n.properties.push(s)}return this.finishNode(n,e?"ObjectPattern":"ObjectExpression")},UE.parseProperty=function(e,t){var n,r,i,s,a=this.startNode();if(this.options.ecmaVersion>=9&&this.eat(lE.ellipsis))return e?(a.argument=this.parseIdent(!1),this.type===lE.comma&&this.raise(this.start,"Comma is not permitted after the rest element"),this.finishNode(a,"RestElement")):(this.type===lE.parenL&&t&&(t.parenthesizedAssign<0&&(t.parenthesizedAssign=this.start),t.parenthesizedBind<0&&(t.parenthesizedBind=this.start)),a.argument=this.parseMaybeAssign(!1,t),this.type===lE.comma&&t&&t.trailingComma<0&&(t.trailingComma=this.start),this.finishNode(a,"SpreadElement"));this.options.ecmaVersion>=6&&(a.method=!1,a.shorthand=!1,(e||t)&&(i=this.start,s=this.startLoc),e||(n=this.eat(lE.star)));var o=this.containsEsc;return this.parsePropertyName(a),!e&&!o&&this.options.ecmaVersion>=8&&!n&&this.isAsyncProp(a)?(r=!0,n=this.options.ecmaVersion>=9&&this.eat(lE.star),this.parsePropertyName(a,t)):r=!1,this.parsePropertyValue(a,e,n,r,i,s,t,o),this.finishNode(a,"Property")},UE.parsePropertyValue=function(e,t,n,r,i,s,a,o){if((n||r)&&this.type===lE.colon&&this.unexpected(),this.eat(lE.colon))e.value=t?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,a),e.kind="init";else if(this.options.ecmaVersion>=6&&this.type===lE.parenL)t&&this.unexpected(),e.kind="init",e.method=!0,e.value=this.parseMethod(n,r);else if(t||o||!(this.options.ecmaVersion>=5)||e.computed||"Identifier"!==e.key.type||"get"!==e.key.name&&"set"!==e.key.name||this.type===lE.comma||this.type===lE.braceR)this.options.ecmaVersion>=6&&!e.computed&&"Identifier"===e.key.type?((n||r)&&this.unexpected(),this.checkUnreserved(e.key),"await"!==e.key.name||this.awaitIdentPos||(this.awaitIdentPos=i),e.kind="init",t?e.value=this.parseMaybeDefault(i,s,e.key):this.type===lE.eq&&a?(a.shorthandAssign<0&&(a.shorthandAssign=this.start),e.value=this.parseMaybeDefault(i,s,e.key)):e.value=e.key,e.shorthand=!0):this.unexpected();else{(n||r)&&this.unexpected(),e.kind=e.key.name,this.parsePropertyName(e),e.value=this.parseMethod(!1);var l="get"===e.kind?0:1;if(e.value.params.length!==l){var c=e.value.start;"get"===e.kind?this.raiseRecoverable(c,"getter should have no params"):this.raiseRecoverable(c,"setter should have exactly one param")}else"set"===e.kind&&"RestElement"===e.value.params[0].type&&this.raiseRecoverable(e.value.params[0].start,"Setter cannot use rest params")}},UE.parsePropertyName=function(e){if(this.options.ecmaVersion>=6){if(this.eat(lE.bracketL))return e.computed=!0,e.key=this.parseMaybeAssign(),this.expect(lE.bracketR),e.key;e.computed=!1}return e.key=this.type===lE.num||this.type===lE.string?this.parseExprAtom():this.parseIdent(!0)},UE.initFunction=function(e){e.id=null,this.options.ecmaVersion>=6&&(e.generator=e.expression=!1),this.options.ecmaVersion>=8&&(e.async=!1)},UE.parseMethod=function(e,t,n){var r=this.startNode(),i=this.yieldPos,s=this.awaitPos,a=this.awaitIdentPos;return this.initFunction(r),this.options.ecmaVersion>=6&&(r.generator=e),this.options.ecmaVersion>=8&&(r.async=!!t),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(64|TE(t,r.generator)|(n?128:0)),this.expect(lE.parenL),r.params=this.parseBindingList(lE.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams(),this.parseFunctionBody(r,!1,!0),this.yieldPos=i,this.awaitPos=s,this.awaitIdentPos=a,this.finishNode(r,"FunctionExpression")},UE.parseArrowExpression=function(e,t,n){var r=this.yieldPos,i=this.awaitPos,s=this.awaitIdentPos;return this.enterScope(16|TE(n,!1)),this.initFunction(e),this.options.ecmaVersion>=8&&(e.async=!!n),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,e.params=this.toAssignableList(t,!0),this.parseFunctionBody(e,!0,!1),this.yieldPos=r,this.awaitPos=i,this.awaitIdentPos=s,this.finishNode(e,"ArrowFunctionExpression")},UE.parseFunctionBody=function(e,t,n){var r=t&&this.type!==lE.braceL,i=this.strict,s=!1;if(r)e.body=this.parseMaybeAssign(),e.expression=!0,this.checkParams(e,!1);else{var a=this.options.ecmaVersion>=7&&!this.isSimpleParamList(e.params);i&&!a||(s=this.strictDirective(this.end))&&a&&this.raiseRecoverable(e.start,"Illegal 'use strict' directive in function with non-simple parameter list");var o=this.labels;this.labels=[],s&&(this.strict=!0),this.checkParams(e,!i&&!s&&!t&&!n&&this.isSimpleParamList(e.params)),e.body=this.parseBlock(!1),e.expression=!1,this.adaptDirectivePrologue(e.body.body),this.labels=o}this.exitScope(),this.strict&&e.id&&this.checkLVal(e.id,5),this.strict=i},UE.isSimpleParamList=function(e){for(var t=0,n=e;t<n.length;t+=1){if("Identifier"!==n[t].type)return!1}return!0},UE.checkParams=function(e,t){for(var n={},r=0,i=e.params;r<i.length;r+=1){var s=i[r];this.checkLVal(s,1,t?null:n)}},UE.parseExprList=function(e,t,n,r){for(var i=[],s=!0;!this.eat(e);){if(s)s=!1;else if(this.expect(lE.comma),t&&this.afterTrailingComma(e))break;var a=void 0;n&&this.type===lE.comma?a=null:this.type===lE.ellipsis?(a=this.parseSpread(r),r&&this.type===lE.comma&&r.trailingComma<0&&(r.trailingComma=this.start)):a=this.parseMaybeAssign(!1,r),i.push(a)}return i},UE.checkUnreserved=function(e){var t=e.start,n=e.end,r=e.name;(this.inGenerator&&"yield"===r&&this.raiseRecoverable(t,"Cannot use 'yield' as identifier inside a generator"),this.inAsync&&"await"===r&&this.raiseRecoverable(t,"Cannot use 'await' as identifier inside an async function"),this.keywords.test(r)&&this.raise(t,"Unexpected keyword '"+r+"'"),this.options.ecmaVersion<6&&-1!==this.input.slice(t,n).indexOf("\\"))||(this.strict?this.reservedWordsStrict:this.reservedWords).test(r)&&(this.inAsync||"await"!==r||this.raiseRecoverable(t,"Cannot use keyword 'await' outside an async function"),this.raiseRecoverable(t,"The keyword '"+r+"' is reserved"))},UE.parseIdent=function(e,t){var n=this.startNode();return e&&"never"===this.options.allowReserved&&(e=!1),this.type===lE.name?n.name=this.value:this.type.keyword?(n.name=this.type.keyword,"class"!==n.name&&"function"!==n.name||this.lastTokEnd===this.lastTokStart+1&&46===this.input.charCodeAt(this.lastTokStart)||this.context.pop()):this.unexpected(),this.next(),this.finishNode(n,"Identifier"),e||(this.checkUnreserved(n),"await"!==n.name||this.awaitIdentPos||(this.awaitIdentPos=n.start)),n},UE.parseYield=function(e){this.yieldPos||(this.yieldPos=this.start);var t=this.startNode();return this.next(),this.type===lE.semi||this.canInsertSemicolon()||this.type!==lE.star&&!this.type.startsExpr?(t.delegate=!1,t.argument=null):(t.delegate=this.eat(lE.star),t.argument=this.parseMaybeAssign(e)),this.finishNode(t,"YieldExpression")},UE.parseAwait=function(){this.awaitPos||(this.awaitPos=this.start);var e=this.startNode();return this.next(),e.argument=this.parseMaybeUnary(null,!0),this.finishNode(e,"AwaitExpression")};var $E=AE.prototype;$E.raise=function(e,t){var n=function(e,t){for(var n=1,r=0;;){uE.lastIndex=r;var i=uE.exec(e);if(!(i&&i.index<t))return new wE(n,t-r);++n,r=i.index+i[0].length}}(this.input,e);t+=" ("+n.line+":"+n.column+")";var r=new SyntaxError(t);throw r.pos=e,r.loc=n,r.raisedAt=this.pos,r},$E.raiseRecoverable=$E.raise,$E.curPosition=function(){if(this.options.locations)return new wE(this.curLine,this.pos-this.lineStart)};var zE=AE.prototype,WE=function(e){this.flags=e,this.var=[],this.lexical=[],this.functions=[]};zE.enterScope=function(e){this.scopeStack.push(new WE(e))},zE.exitScope=function(){this.scopeStack.pop()},zE.treatFunctionsAsVarInScope=function(e){return e.flags&CE||!this.inModule&&1&e.flags},zE.declareName=function(e,t,n){var r=!1;if(2===t){var i=this.currentScope();r=i.lexical.indexOf(e)>-1||i.functions.indexOf(e)>-1||i.var.indexOf(e)>-1,i.lexical.push(e),this.inModule&&1&i.flags&&delete this.undefinedExports[e]}else if(4===t){this.currentScope().lexical.push(e)}else if(3===t){var s=this.currentScope();r=this.treatFunctionsAsVar?s.lexical.indexOf(e)>-1:s.lexical.indexOf(e)>-1||s.var.indexOf(e)>-1,s.functions.push(e)}else for(var a=this.scopeStack.length-1;a>=0;--a){var o=this.scopeStack[a];if(o.lexical.indexOf(e)>-1&&!(32&o.flags&&o.lexical[0]===e)||!this.treatFunctionsAsVarInScope(o)&&o.functions.indexOf(e)>-1){r=!0;break}if(o.var.push(e),this.inModule&&1&o.flags&&delete this.undefinedExports[e],o.flags&_E)break}r&&this.raiseRecoverable(n,"Identifier '"+e+"' has already been declared")},zE.checkLocalExport=function(e){-1===this.scopeStack[0].lexical.indexOf(e.name)&&-1===this.scopeStack[0].var.indexOf(e.name)&&(this.undefinedExports[e.name]=e)},zE.currentScope=function(){return this.scopeStack[this.scopeStack.length-1]},zE.currentVarScope=function(){for(var e=this.scopeStack.length-1;;e--){var t=this.scopeStack[e];if(t.flags&_E)return t}},zE.currentThisScope=function(){for(var e=this.scopeStack.length-1;;e--){var t=this.scopeStack[e];if(t.flags&_E&&!(16&t.flags))return t}};var qE=function(e,t,n){this.type="",this.start=t,this.end=0,e.options.locations&&(this.loc=new xE(e,n)),e.options.directSourceFile&&(this.sourceFile=e.options.directSourceFile),e.options.ranges&&(this.range=[t,0])},GE=AE.prototype;function KE(e,t,n,r){return e.type=t,e.end=n,this.options.locations&&(e.loc.end=r),this.options.ranges&&(e.range[1]=n),e}GE.startNode=function(){return new qE(this,this.start,this.startLoc)},GE.startNodeAt=function(e,t){return new qE(this,e,t)},GE.finishNode=function(e,t){return KE.call(this,e,t,this.lastTokEnd,this.lastTokEndLoc)},GE.finishNodeAt=function(e,t,n,r){return KE.call(this,e,t,n,r)};var YE=function(e,t,n,r,i){this.token=e,this.isExpr=!!t,this.preserveSpace=!!n,this.override=r,this.generator=!!i},ZE={b_stat:new YE("{",!1),b_expr:new YE("{",!0),b_tmpl:new YE("${",!1),p_stat:new YE("(",!1),p_expr:new YE("(",!0),q_tmpl:new YE("`",!0,!0,function(e){return e.tryReadTemplateToken()}),f_stat:new YE("function",!1),f_expr:new YE("function",!0),f_expr_gen:new YE("function",!0,!1,null,!0),f_gen:new YE("function",!1,!1,null,!0)},QE=AE.prototype;QE.initialContext=function(){return[ZE.b_stat]},QE.braceIsBlock=function(e){var t=this.curContext();return t===ZE.f_expr||t===ZE.f_stat||(e!==lE.colon||t!==ZE.b_stat&&t!==ZE.b_expr?e===lE._return||e===lE.name&&this.exprAllowed?cE.test(this.input.slice(this.lastTokEnd,this.start)):e===lE._else||e===lE.semi||e===lE.eof||e===lE.parenR||e===lE.arrow||(e===lE.braceL?t===ZE.b_stat:e!==lE._var&&e!==lE._const&&e!==lE.name&&!this.exprAllowed):!t.isExpr)},QE.inGeneratorContext=function(){for(var e=this.context.length-1;e>=1;e--){var t=this.context[e];if("function"===t.token)return t.generator}return!1},QE.updateContext=function(e){var t,n=this.type;n.keyword&&e===lE.dot?this.exprAllowed=!1:(t=n.updateContext)?t.call(this,e):this.exprAllowed=n.beforeExpr},lE.parenR.updateContext=lE.braceR.updateContext=function(){if(1!==this.context.length){var e=this.context.pop();e===ZE.b_stat&&"function"===this.curContext().token&&(e=this.context.pop()),this.exprAllowed=!e.isExpr}else this.exprAllowed=!0},lE.braceL.updateContext=function(e){this.context.push(this.braceIsBlock(e)?ZE.b_stat:ZE.b_expr),this.exprAllowed=!0},lE.dollarBraceL.updateContext=function(){this.context.push(ZE.b_tmpl),this.exprAllowed=!0},lE.parenL.updateContext=function(e){var t=e===lE._if||e===lE._for||e===lE._with||e===lE._while;this.context.push(t?ZE.p_stat:ZE.p_expr),this.exprAllowed=!0},lE.incDec.updateContext=function(){},lE._function.updateContext=lE._class.updateContext=function(e){!e.beforeExpr||e===lE.semi||e===lE._else||e===lE._return&&cE.test(this.input.slice(this.lastTokEnd,this.start))||(e===lE.colon||e===lE.braceL)&&this.curContext()===ZE.b_stat?this.context.push(ZE.f_stat):this.context.push(ZE.f_expr),this.exprAllowed=!1},lE.backQuote.updateContext=function(){this.curContext()===ZE.q_tmpl?this.context.pop():this.context.push(ZE.q_tmpl),this.exprAllowed=!1},lE.star.updateContext=function(e){if(e===lE._function){var t=this.context.length-1;this.context[t]===ZE.f_expr?this.context[t]=ZE.f_expr_gen:this.context[t]=ZE.f_gen}this.exprAllowed=!0},lE.name.updateContext=function(e){var t=!1;this.options.ecmaVersion>=6&&e!==lE.dot&&("of"===this.value&&!this.exprAllowed||"yield"===this.value&&this.inGeneratorContext())&&(t=!0),this.exprAllowed=t};var XE="ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS",JE={9:XE,10:XE+" Extended_Pictographic"},ek="Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu",tk="Adlam Adlm Ahom Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb",nk={9:tk,10:tk+" Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd"},rk={};function ik(e){var t=rk[e]={binary:yE(JE[e]+" "+ek),nonBinary:{General_Category:yE(ek),Script:yE(nk[e])}};t.nonBinary.Script_Extensions=t.nonBinary.Script,t.nonBinary.gc=t.nonBinary.General_Category,t.nonBinary.sc=t.nonBinary.Script,t.nonBinary.scx=t.nonBinary.Script_Extensions}ik(9),ik(10);var sk=AE.prototype,ak=function(e){this.parser=e,this.validFlags="gim"+(e.options.ecmaVersion>=6?"uy":"")+(e.options.ecmaVersion>=9?"s":""),this.unicodeProperties=rk[e.options.ecmaVersion>=10?10:e.options.ecmaVersion],this.source="",this.flags="",this.start=0,this.switchU=!1,this.switchN=!1,this.pos=0,this.lastIntValue=0,this.lastStringValue="",this.lastAssertionIsQuantifiable=!1,this.numCapturingParens=0,this.maxBackReference=0,this.groupNames=[],this.backReferenceNames=[]};function ok(e){return e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode(55296+(e>>10),56320+(1023&e)))}function lk(e){return 36===e||e>=40&&e<=43||46===e||63===e||e>=91&&e<=94||e>=123&&e<=125}function ck(e){return e>=65&&e<=90||e>=97&&e<=122}function uk(e){return ck(e)||95===e}function hk(e){return uk(e)||pk(e)}function pk(e){return e>=48&&e<=57}function dk(e){return e>=48&&e<=57||e>=65&&e<=70||e>=97&&e<=102}function fk(e){return e>=65&&e<=70?e-65+10:e>=97&&e<=102?e-97+10:e-48}function mk(e){return e>=48&&e<=55}ak.prototype.reset=function(e,t,n){var r=-1!==n.indexOf("u");this.start=0|e,this.source=t+"",this.flags=n,this.switchU=r&&this.parser.options.ecmaVersion>=6,this.switchN=r&&this.parser.options.ecmaVersion>=9},ak.prototype.raise=function(e){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+e)},ak.prototype.at=function(e){var t=this.source,n=t.length;if(e>=n)return-1;var r=t.charCodeAt(e);return!this.switchU||r<=55295||r>=57344||e+1>=n?r:(r<<10)+t.charCodeAt(e+1)-56613888},ak.prototype.nextIndex=function(e){var t=this.source,n=t.length;if(e>=n)return n;var r=t.charCodeAt(e);return!this.switchU||r<=55295||r>=57344||e+1>=n?e+1:e+2},ak.prototype.current=function(){return this.at(this.pos)},ak.prototype.lookahead=function(){return this.at(this.nextIndex(this.pos))},ak.prototype.advance=function(){this.pos=this.nextIndex(this.pos)},ak.prototype.eat=function(e){return this.current()===e&&(this.advance(),!0)},sk.validateRegExpFlags=function(e){for(var t=e.validFlags,n=e.flags,r=0;r<n.length;r++){var i=n.charAt(r);-1===t.indexOf(i)&&this.raise(e.start,"Invalid regular expression flag"),n.indexOf(i,r+1)>-1&&this.raise(e.start,"Duplicate regular expression flag")}},sk.validateRegExpPattern=function(e){this.regexp_pattern(e),!e.switchN&&this.options.ecmaVersion>=9&&e.groupNames.length>0&&(e.switchN=!0,this.regexp_pattern(e))},sk.regexp_pattern=function(e){e.pos=0,e.lastIntValue=0,e.lastStringValue="",e.lastAssertionIsQuantifiable=!1,e.numCapturingParens=0,e.maxBackReference=0,e.groupNames.length=0,e.backReferenceNames.length=0,this.regexp_disjunction(e),e.pos!==e.source.length&&(e.eat(41)&&e.raise("Unmatched ')'"),(e.eat(93)||e.eat(125))&&e.raise("Lone quantifier brackets")),e.maxBackReference>e.numCapturingParens&&e.raise("Invalid escape");for(var t=0,n=e.backReferenceNames;t<n.length;t+=1){var r=n[t];-1===e.groupNames.indexOf(r)&&e.raise("Invalid named capture referenced")}},sk.regexp_disjunction=function(e){for(this.regexp_alternative(e);e.eat(124);)this.regexp_alternative(e);this.regexp_eatQuantifier(e,!0)&&e.raise("Nothing to repeat"),e.eat(123)&&e.raise("Lone quantifier brackets")},sk.regexp_alternative=function(e){for(;e.pos<e.source.length&&this.regexp_eatTerm(e););},sk.regexp_eatTerm=function(e){return this.regexp_eatAssertion(e)?(e.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(e)&&e.switchU&&e.raise("Invalid quantifier"),!0):!(e.switchU?!this.regexp_eatAtom(e):!this.regexp_eatExtendedAtom(e))&&(this.regexp_eatQuantifier(e),!0)},sk.regexp_eatAssertion=function(e){var t=e.pos;if(e.lastAssertionIsQuantifiable=!1,e.eat(94)||e.eat(36))return!0;if(e.eat(92)){if(e.eat(66)||e.eat(98))return!0;e.pos=t}if(e.eat(40)&&e.eat(63)){var n=!1;if(this.options.ecmaVersion>=9&&(n=e.eat(60)),e.eat(61)||e.eat(33))return this.regexp_disjunction(e),e.eat(41)||e.raise("Unterminated group"),e.lastAssertionIsQuantifiable=!n,!0}return e.pos=t,!1},sk.regexp_eatQuantifier=function(e,t){return void 0===t&&(t=!1),!!this.regexp_eatQuantifierPrefix(e,t)&&(e.eat(63),!0)},sk.regexp_eatQuantifierPrefix=function(e,t){return e.eat(42)||e.eat(43)||e.eat(63)||this.regexp_eatBracedQuantifier(e,t)},sk.regexp_eatBracedQuantifier=function(e,t){var n=e.pos;if(e.eat(123)){var r=0,i=-1;if(this.regexp_eatDecimalDigits(e)&&(r=e.lastIntValue,e.eat(44)&&this.regexp_eatDecimalDigits(e)&&(i=e.lastIntValue),e.eat(125)))return-1!==i&&i<r&&!t&&e.raise("numbers out of order in {} quantifier"),!0;e.switchU&&!t&&e.raise("Incomplete quantifier"),e.pos=n}return!1},sk.regexp_eatAtom=function(e){return this.regexp_eatPatternCharacters(e)||e.eat(46)||this.regexp_eatReverseSolidusAtomEscape(e)||this.regexp_eatCharacterClass(e)||this.regexp_eatUncapturingGroup(e)||this.regexp_eatCapturingGroup(e)},sk.regexp_eatReverseSolidusAtomEscape=function(e){var t=e.pos;if(e.eat(92)){if(this.regexp_eatAtomEscape(e))return!0;e.pos=t}return!1},sk.regexp_eatUncapturingGroup=function(e){var t=e.pos;if(e.eat(40)){if(e.eat(63)&&e.eat(58)){if(this.regexp_disjunction(e),e.eat(41))return!0;e.raise("Unterminated group")}e.pos=t}return!1},sk.regexp_eatCapturingGroup=function(e){if(e.eat(40)){if(this.options.ecmaVersion>=9?this.regexp_groupSpecifier(e):63===e.current()&&e.raise("Invalid group"),this.regexp_disjunction(e),e.eat(41))return e.numCapturingParens+=1,!0;e.raise("Unterminated group")}return!1},sk.regexp_eatExtendedAtom=function(e){return e.eat(46)||this.regexp_eatReverseSolidusAtomEscape(e)||this.regexp_eatCharacterClass(e)||this.regexp_eatUncapturingGroup(e)||this.regexp_eatCapturingGroup(e)||this.regexp_eatInvalidBracedQuantifier(e)||this.regexp_eatExtendedPatternCharacter(e)},sk.regexp_eatInvalidBracedQuantifier=function(e){return this.regexp_eatBracedQuantifier(e,!0)&&e.raise("Nothing to repeat"),!1},sk.regexp_eatSyntaxCharacter=function(e){var t=e.current();return!!lk(t)&&(e.lastIntValue=t,e.advance(),!0)},sk.regexp_eatPatternCharacters=function(e){for(var t=e.pos,n=0;-1!==(n=e.current())&&!lk(n);)e.advance();return e.pos!==t},sk.regexp_eatExtendedPatternCharacter=function(e){var t=e.current();return!(-1===t||36===t||t>=40&&t<=43||46===t||63===t||91===t||94===t||124===t)&&(e.advance(),!0)},sk.regexp_groupSpecifier=function(e){if(e.eat(63)){if(this.regexp_eatGroupName(e))return-1!==e.groupNames.indexOf(e.lastStringValue)&&e.raise("Duplicate capture group name"),void e.groupNames.push(e.lastStringValue);e.raise("Invalid group")}},sk.regexp_eatGroupName=function(e){if(e.lastStringValue="",e.eat(60)){if(this.regexp_eatRegExpIdentifierName(e)&&e.eat(62))return!0;e.raise("Invalid capture group name")}return!1},sk.regexp_eatRegExpIdentifierName=function(e){if(e.lastStringValue="",this.regexp_eatRegExpIdentifierStart(e)){for(e.lastStringValue+=ok(e.lastIntValue);this.regexp_eatRegExpIdentifierPart(e);)e.lastStringValue+=ok(e.lastIntValue);return!0}return!1},sk.regexp_eatRegExpIdentifierStart=function(e){var t=e.pos,n=e.current();return e.advance(),92===n&&this.regexp_eatRegExpUnicodeEscapeSequence(e)&&(n=e.lastIntValue),function(e){return eE(e,!0)||36===e||95===e}(n)?(e.lastIntValue=n,!0):(e.pos=t,!1)},sk.regexp_eatRegExpIdentifierPart=function(e){var t=e.pos,n=e.current();return e.advance(),92===n&&this.regexp_eatRegExpUnicodeEscapeSequence(e)&&(n=e.lastIntValue),function(e){return tE(e,!0)||36===e||95===e||8204===e||8205===e}(n)?(e.lastIntValue=n,!0):(e.pos=t,!1)},sk.regexp_eatAtomEscape=function(e){return!!(this.regexp_eatBackReference(e)||this.regexp_eatCharacterClassEscape(e)||this.regexp_eatCharacterEscape(e)||e.switchN&&this.regexp_eatKGroupName(e))||(e.switchU&&(99===e.current()&&e.raise("Invalid unicode escape"),e.raise("Invalid escape")),!1)},sk.regexp_eatBackReference=function(e){var t=e.pos;if(this.regexp_eatDecimalEscape(e)){var n=e.lastIntValue;if(e.switchU)return n>e.maxBackReference&&(e.maxBackReference=n),!0;if(n<=e.numCapturingParens)return!0;e.pos=t}return!1},sk.regexp_eatKGroupName=function(e){if(e.eat(107)){if(this.regexp_eatGroupName(e))return e.backReferenceNames.push(e.lastStringValue),!0;e.raise("Invalid named reference")}return!1},sk.regexp_eatCharacterEscape=function(e){return this.regexp_eatControlEscape(e)||this.regexp_eatCControlLetter(e)||this.regexp_eatZero(e)||this.regexp_eatHexEscapeSequence(e)||this.regexp_eatRegExpUnicodeEscapeSequence(e)||!e.switchU&&this.regexp_eatLegacyOctalEscapeSequence(e)||this.regexp_eatIdentityEscape(e)},sk.regexp_eatCControlLetter=function(e){var t=e.pos;if(e.eat(99)){if(this.regexp_eatControlLetter(e))return!0;e.pos=t}return!1},sk.regexp_eatZero=function(e){return 48===e.current()&&!pk(e.lookahead())&&(e.lastIntValue=0,e.advance(),!0)},sk.regexp_eatControlEscape=function(e){var t=e.current();return 116===t?(e.lastIntValue=9,e.advance(),!0):110===t?(e.lastIntValue=10,e.advance(),!0):118===t?(e.lastIntValue=11,e.advance(),!0):102===t?(e.lastIntValue=12,e.advance(),!0):114===t&&(e.lastIntValue=13,e.advance(),!0)},sk.regexp_eatControlLetter=function(e){var t=e.current();return!!ck(t)&&(e.lastIntValue=t%32,e.advance(),!0)},sk.regexp_eatRegExpUnicodeEscapeSequence=function(e){var t=e.pos;if(e.eat(117)){if(this.regexp_eatFixedHexDigits(e,4)){var n=e.lastIntValue;if(e.switchU&&n>=55296&&n<=56319){var r=e.pos;if(e.eat(92)&&e.eat(117)&&this.regexp_eatFixedHexDigits(e,4)){var i=e.lastIntValue;if(i>=56320&&i<=57343)return e.lastIntValue=1024*(n-55296)+(i-56320)+65536,!0}e.pos=r,e.lastIntValue=n}return!0}if(e.switchU&&e.eat(123)&&this.regexp_eatHexDigits(e)&&e.eat(125)&&function(e){return e>=0&&e<=1114111}(e.lastIntValue))return!0;e.switchU&&e.raise("Invalid unicode escape"),e.pos=t}return!1},sk.regexp_eatIdentityEscape=function(e){if(e.switchU)return!!this.regexp_eatSyntaxCharacter(e)||!!e.eat(47)&&(e.lastIntValue=47,!0);var t=e.current();return!(99===t||e.switchN&&107===t)&&(e.lastIntValue=t,e.advance(),!0)},sk.regexp_eatDecimalEscape=function(e){e.lastIntValue=0;var t=e.current();if(t>=49&&t<=57){do{e.lastIntValue=10*e.lastIntValue+(t-48),e.advance()}while((t=e.current())>=48&&t<=57);return!0}return!1},sk.regexp_eatCharacterClassEscape=function(e){var t=e.current();if(function(e){return 100===e||68===e||115===e||83===e||119===e||87===e}(t))return e.lastIntValue=-1,e.advance(),!0;if(e.switchU&&this.options.ecmaVersion>=9&&(80===t||112===t)){if(e.lastIntValue=-1,e.advance(),e.eat(123)&&this.regexp_eatUnicodePropertyValueExpression(e)&&e.eat(125))return!0;e.raise("Invalid property name")}return!1},sk.regexp_eatUnicodePropertyValueExpression=function(e){var t=e.pos;if(this.regexp_eatUnicodePropertyName(e)&&e.eat(61)){var n=e.lastStringValue;if(this.regexp_eatUnicodePropertyValue(e)){var r=e.lastStringValue;return this.regexp_validateUnicodePropertyNameAndValue(e,n,r),!0}}if(e.pos=t,this.regexp_eatLoneUnicodePropertyNameOrValue(e)){var i=e.lastStringValue;return this.regexp_validateUnicodePropertyNameOrValue(e,i),!0}return!1},sk.regexp_validateUnicodePropertyNameAndValue=function(e,t,n){vE(e.unicodeProperties.nonBinary,t)||e.raise("Invalid property name"),e.unicodeProperties.nonBinary[t].test(n)||e.raise("Invalid property value")},sk.regexp_validateUnicodePropertyNameOrValue=function(e,t){e.unicodeProperties.binary.test(t)||e.raise("Invalid property name")},sk.regexp_eatUnicodePropertyName=function(e){var t=0;for(e.lastStringValue="";uk(t=e.current());)e.lastStringValue+=ok(t),e.advance();return""!==e.lastStringValue},sk.regexp_eatUnicodePropertyValue=function(e){var t=0;for(e.lastStringValue="";hk(t=e.current());)e.lastStringValue+=ok(t),e.advance();return""!==e.lastStringValue},sk.regexp_eatLoneUnicodePropertyNameOrValue=function(e){return this.regexp_eatUnicodePropertyValue(e)},sk.regexp_eatCharacterClass=function(e){if(e.eat(91)){if(e.eat(94),this.regexp_classRanges(e),e.eat(93))return!0;e.raise("Unterminated character class")}return!1},sk.regexp_classRanges=function(e){for(;this.regexp_eatClassAtom(e);){var t=e.lastIntValue;if(e.eat(45)&&this.regexp_eatClassAtom(e)){var n=e.lastIntValue;!e.switchU||-1!==t&&-1!==n||e.raise("Invalid character class"),-1!==t&&-1!==n&&t>n&&e.raise("Range out of order in character class")}}},sk.regexp_eatClassAtom=function(e){var t=e.pos;if(e.eat(92)){if(this.regexp_eatClassEscape(e))return!0;if(e.switchU){var n=e.current();(99===n||mk(n))&&e.raise("Invalid class escape"),e.raise("Invalid escape")}e.pos=t}var r=e.current();return 93!==r&&(e.lastIntValue=r,e.advance(),!0)},sk.regexp_eatClassEscape=function(e){var t=e.pos;if(e.eat(98))return e.lastIntValue=8,!0;if(e.switchU&&e.eat(45))return e.lastIntValue=45,!0;if(!e.switchU&&e.eat(99)){if(this.regexp_eatClassControlLetter(e))return!0;e.pos=t}return this.regexp_eatCharacterClassEscape(e)||this.regexp_eatCharacterEscape(e)},sk.regexp_eatClassControlLetter=function(e){var t=e.current();return!(!pk(t)&&95!==t)&&(e.lastIntValue=t%32,e.advance(),!0)},sk.regexp_eatHexEscapeSequence=function(e){var t=e.pos;if(e.eat(120)){if(this.regexp_eatFixedHexDigits(e,2))return!0;e.switchU&&e.raise("Invalid escape"),e.pos=t}return!1},sk.regexp_eatDecimalDigits=function(e){var t=e.pos,n=0;for(e.lastIntValue=0;pk(n=e.current());)e.lastIntValue=10*e.lastIntValue+(n-48),e.advance();return e.pos!==t},sk.regexp_eatHexDigits=function(e){var t=e.pos,n=0;for(e.lastIntValue=0;dk(n=e.current());)e.lastIntValue=16*e.lastIntValue+fk(n),e.advance();return e.pos!==t},sk.regexp_eatLegacyOctalEscapeSequence=function(e){if(this.regexp_eatOctalDigit(e)){var t=e.lastIntValue;if(this.regexp_eatOctalDigit(e)){var n=e.lastIntValue;t<=3&&this.regexp_eatOctalDigit(e)?e.lastIntValue=64*t+8*n+e.lastIntValue:e.lastIntValue=8*t+n}else e.lastIntValue=t;return!0}return!1},sk.regexp_eatOctalDigit=function(e){var t=e.current();return mk(t)?(e.lastIntValue=t-48,e.advance(),!0):(e.lastIntValue=0,!1)},sk.regexp_eatFixedHexDigits=function(e,t){var n=e.pos;e.lastIntValue=0;for(var r=0;r<t;++r){var i=e.current();if(!dk(i))return e.pos=n,!1;e.lastIntValue=16*e.lastIntValue+fk(i),e.advance()}return!0};var gk=function(e){this.type=e.type,this.value=e.value,this.start=e.start,this.end=e.end,e.options.locations&&(this.loc=new xE(e,e.startLoc,e.endLoc)),e.options.ranges&&(this.range=[e.start,e.end])},vk=AE.prototype;function bk(e){return e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode(55296+(e>>10),56320+(1023&e)))}vk.next=function(){this.options.onToken&&this.options.onToken(new gk(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken()},vk.getToken=function(){return this.next(),new gk(this)},"undefined"!=typeof Symbol&&(vk[Symbol.iterator]=function(){var e=this;return{next:function(){var t=e.getToken();return{done:t.type===lE.eof,value:t}}}}),vk.curContext=function(){return this.context[this.context.length-1]},vk.nextToken=function(){var e=this.curContext();return e&&e.preserveSpace||this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length?this.finishToken(lE.eof):e.override?e.override(this):void this.readToken(this.fullCharCodeAtPos())},vk.readToken=function(e){return eE(e,this.options.ecmaVersion>=6)||92===e?this.readWord():this.getTokenFromCode(e)},vk.fullCharCodeAtPos=function(){var e=this.input.charCodeAt(this.pos);return e<=55295||e>=57344?e:(e<<10)+this.input.charCodeAt(this.pos+1)-56613888},vk.skipBlockComment=function(){var e,t=this.options.onComment&&this.curPosition(),n=this.pos,r=this.input.indexOf("*/",this.pos+=2);if(-1===r&&this.raise(this.pos-2,"Unterminated comment"),this.pos=r+2,this.options.locations)for(uE.lastIndex=n;(e=uE.exec(this.input))&&e.index<this.pos;)++this.curLine,this.lineStart=e.index+e[0].length;this.options.onComment&&this.options.onComment(!0,this.input.slice(n+2,r),n,this.pos,t,this.curPosition())},vk.skipLineComment=function(e){for(var t=this.pos,n=this.options.onComment&&this.curPosition(),r=this.input.charCodeAt(this.pos+=e);this.pos<this.input.length&&!hE(r);)r=this.input.charCodeAt(++this.pos);this.options.onComment&&this.options.onComment(!1,this.input.slice(t+e,this.pos),t,this.pos,n,this.curPosition())},vk.skipSpace=function(){e:for(;this.pos<this.input.length;){var e=this.input.charCodeAt(this.pos);switch(e){case 32:case 160:++this.pos;break;case 13:10===this.input.charCodeAt(this.pos+1)&&++this.pos;case 10:case 8232:case 8233:++this.pos,this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break e}break;default:if(!(e>8&&e<14||e>=5760&&pE.test(String.fromCharCode(e))))break e;++this.pos}}},vk.finishToken=function(e,t){this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());var n=this.type;this.type=e,this.value=t,this.updateContext(n)},vk.readToken_dot=function(){var e=this.input.charCodeAt(this.pos+1);if(e>=48&&e<=57)return this.readNumber(!0);var t=this.input.charCodeAt(this.pos+2);return this.options.ecmaVersion>=6&&46===e&&46===t?(this.pos+=3,this.finishToken(lE.ellipsis)):(++this.pos,this.finishToken(lE.dot))},vk.readToken_slash=function(){var e=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):61===e?this.finishOp(lE.assign,2):this.finishOp(lE.slash,1)},vk.readToken_mult_modulo_exp=function(e){var t=this.input.charCodeAt(this.pos+1),n=1,r=42===e?lE.star:lE.modulo;return this.options.ecmaVersion>=7&&42===e&&42===t&&(++n,r=lE.starstar,t=this.input.charCodeAt(this.pos+2)),61===t?this.finishOp(lE.assign,n+1):this.finishOp(r,n)},vk.readToken_pipe_amp=function(e){var t=this.input.charCodeAt(this.pos+1);return t===e?this.finishOp(124===e?lE.logicalOR:lE.logicalAND,2):61===t?this.finishOp(lE.assign,2):this.finishOp(124===e?lE.bitwiseOR:lE.bitwiseAND,1)},vk.readToken_caret=function(){return 61===this.input.charCodeAt(this.pos+1)?this.finishOp(lE.assign,2):this.finishOp(lE.bitwiseXOR,1)},vk.readToken_plus_min=function(e){var t=this.input.charCodeAt(this.pos+1);return t===e?45!==t||this.inModule||62!==this.input.charCodeAt(this.pos+2)||0!==this.lastTokEnd&&!cE.test(this.input.slice(this.lastTokEnd,this.pos))?this.finishOp(lE.incDec,2):(this.skipLineComment(3),this.skipSpace(),this.nextToken()):61===t?this.finishOp(lE.assign,2):this.finishOp(lE.plusMin,1)},vk.readToken_lt_gt=function(e){var t=this.input.charCodeAt(this.pos+1),n=1;return t===e?(n=62===e&&62===this.input.charCodeAt(this.pos+2)?3:2,61===this.input.charCodeAt(this.pos+n)?this.finishOp(lE.assign,n+1):this.finishOp(lE.bitShift,n)):33!==t||60!==e||this.inModule||45!==this.input.charCodeAt(this.pos+2)||45!==this.input.charCodeAt(this.pos+3)?(61===t&&(n=2),this.finishOp(lE.relational,n)):(this.skipLineComment(4),this.skipSpace(),this.nextToken())},vk.readToken_eq_excl=function(e){var t=this.input.charCodeAt(this.pos+1);return 61===t?this.finishOp(lE.equality,61===this.input.charCodeAt(this.pos+2)?3:2):61===e&&62===t&&this.options.ecmaVersion>=6?(this.pos+=2,this.finishToken(lE.arrow)):this.finishOp(61===e?lE.eq:lE.prefix,1)},vk.getTokenFromCode=function(e){switch(e){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(lE.parenL);case 41:return++this.pos,this.finishToken(lE.parenR);case 59:return++this.pos,this.finishToken(lE.semi);case 44:return++this.pos,this.finishToken(lE.comma);case 91:return++this.pos,this.finishToken(lE.bracketL);case 93:return++this.pos,this.finishToken(lE.bracketR);case 123:return++this.pos,this.finishToken(lE.braceL);case 125:return++this.pos,this.finishToken(lE.braceR);case 58:return++this.pos,this.finishToken(lE.colon);case 63:return++this.pos,this.finishToken(lE.question);case 96:if(this.options.ecmaVersion<6)break;return++this.pos,this.finishToken(lE.backQuote);case 48:var t=this.input.charCodeAt(this.pos+1);if(120===t||88===t)return this.readRadixNumber(16);if(this.options.ecmaVersion>=6){if(111===t||79===t)return this.readRadixNumber(8);if(98===t||66===t)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(e);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(e);case 124:case 38:return this.readToken_pipe_amp(e);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(e);case 60:case 62:return this.readToken_lt_gt(e);case 61:case 33:return this.readToken_eq_excl(e);case 126:return this.finishOp(lE.prefix,1)}this.raise(this.pos,"Unexpected character '"+bk(e)+"'")},vk.finishOp=function(e,t){var n=this.input.slice(this.pos,this.pos+t);return this.pos+=t,this.finishToken(e,n)},vk.readRegexp=function(){for(var e,t,n=this.pos;;){this.pos>=this.input.length&&this.raise(n,"Unterminated regular expression");var r=this.input.charAt(this.pos);if(cE.test(r)&&this.raise(n,"Unterminated regular expression"),e)e=!1;else{if("["===r)t=!0;else if("]"===r&&t)t=!1;else if("/"===r&&!t)break;e="\\"===r}++this.pos}var i=this.input.slice(n,this.pos);++this.pos;var s=this.pos,a=this.readWord1();this.containsEsc&&this.unexpected(s);var o=this.regexpState||(this.regexpState=new ak(this));o.reset(n,i,a),this.validateRegExpFlags(o),this.validateRegExpPattern(o);var l=null;try{l=new RegExp(i,a)}catch(c){}return this.finishToken(lE.regexp,{pattern:i,flags:a,value:l})},vk.readInt=function(e,t){for(var n=this.pos,r=0,i=0,s=null==t?1/0:t;i<s;++i){var a=this.input.charCodeAt(this.pos),o=void 0;if((o=a>=97?a-97+10:a>=65?a-65+10:a>=48&&a<=57?a-48:1/0)>=e)break;++this.pos,r=r*e+o}return this.pos===n||null!=t&&this.pos-n!==t?null:r},vk.readRadixNumber=function(e){this.pos+=2;var t=this.readInt(e);return null==t&&this.raise(this.start+2,"Expected number in radix "+e),eE(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(lE.num,t)},vk.readNumber=function(e){var t=this.pos;e||null!==this.readInt(10)||this.raise(t,"Invalid number");var n=this.pos-t>=2&&48===this.input.charCodeAt(t);n&&this.strict&&this.raise(t,"Invalid number"),n&&/[89]/.test(this.input.slice(t,this.pos))&&(n=!1);var r=this.input.charCodeAt(this.pos);46!==r||n||(++this.pos,this.readInt(10),r=this.input.charCodeAt(this.pos)),69!==r&&101!==r||n||(43!==(r=this.input.charCodeAt(++this.pos))&&45!==r||++this.pos,null===this.readInt(10)&&this.raise(t,"Invalid number")),eE(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");var i=this.input.slice(t,this.pos),s=n?parseInt(i,8):parseFloat(i);return this.finishToken(lE.num,s)},vk.readCodePoint=function(){var e;if(123===this.input.charCodeAt(this.pos)){this.options.ecmaVersion<6&&this.unexpected();var t=++this.pos;e=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos),++this.pos,e>1114111&&this.invalidStringToken(t,"Code point out of bounds")}else e=this.readHexChar(4);return e},vk.readString=function(e){for(var t="",n=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var r=this.input.charCodeAt(this.pos);if(r===e)break;92===r?(t+=this.input.slice(n,this.pos),t+=this.readEscapedChar(!1),n=this.pos):(hE(r,this.options.ecmaVersion>=10)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}return t+=this.input.slice(n,this.pos++),this.finishToken(lE.string,t)};var yk={};function wk(e){let t,n,r,i;const s=(e,t)=>e===n[t];return function(){const a=Array.from(arguments);return i&&t===this&&n.length===arguments.length&&a.every(s)?r:(r=e.apply(this,a),i=!0,t=this,n=a,r)}}vk.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(ZL){if(ZL!==yk)throw ZL;this.readInvalidTemplateToken()}this.inTemplateElement=!1},vk.invalidStringToken=function(e,t){if(this.inTemplateElement&&this.options.ecmaVersion>=9)throw yk;this.raise(e,t)},vk.readTmplToken=function(){for(var e="",t=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var n=this.input.charCodeAt(this.pos);if(96===n||36===n&&123===this.input.charCodeAt(this.pos+1))return this.pos!==this.start||this.type!==lE.template&&this.type!==lE.invalidTemplate?(e+=this.input.slice(t,this.pos),this.finishToken(lE.template,e)):36===n?(this.pos+=2,this.finishToken(lE.dollarBraceL)):(++this.pos,this.finishToken(lE.backQuote));if(92===n)e+=this.input.slice(t,this.pos),e+=this.readEscapedChar(!0),t=this.pos;else if(hE(n)){switch(e+=this.input.slice(t,this.pos),++this.pos,n){case 13:10===this.input.charCodeAt(this.pos)&&++this.pos;case 10:e+="\n";break;default:e+=String.fromCharCode(n)}this.options.locations&&(++this.curLine,this.lineStart=this.pos),t=this.pos}else++this.pos}},vk.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case"\\":++this.pos;break;case"$":if("{"!==this.input[this.pos+1])break;case"`":return this.finishToken(lE.invalidTemplate,this.input.slice(this.start,this.pos))}this.raise(this.start,"Unterminated template")},vk.readEscapedChar=function(e){var t=this.input.charCodeAt(++this.pos);switch(++this.pos,t){case 110:return"\n";case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return bk(this.readCodePoint());case 116:return"\t";case 98:return"\b";case 118:return"\v";case 102:return"\f";case 13:10===this.input.charCodeAt(this.pos)&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";default:if(t>=48&&t<=55){var n=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],r=parseInt(n,8);return r>255&&(n=n.slice(0,-1),r=parseInt(n,8)),this.pos+=n.length-1,t=this.input.charCodeAt(this.pos),"0"===n&&56!==t&&57!==t||!this.strict&&!e||this.invalidStringToken(this.pos-1-n.length,e?"Octal literal in template string":"Octal literal in strict mode"),String.fromCharCode(r)}return hE(t)?"":String.fromCharCode(t)}},vk.readHexChar=function(e){var t=this.pos,n=this.readInt(16,e);return null===n&&this.invalidStringToken(t,"Bad character escape sequence"),n},vk.readWord1=function(){this.containsEsc=!1;for(var e="",t=!0,n=this.pos,r=this.options.ecmaVersion>=6;this.pos<this.input.length;){var i=this.fullCharCodeAtPos();if(tE(i,r))this.pos+=i<=65535?1:2;else{if(92!==i)break;this.containsEsc=!0,e+=this.input.slice(n,this.pos);var s=this.pos;117!==this.input.charCodeAt(++this.pos)&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos;var a=this.readCodePoint();(t?eE:tE)(a,r)||this.invalidStringToken(s,"Invalid Unicode escape"),e+=bk(a),n=this.pos}t=!1}return e+this.input.slice(n,this.pos)},vk.readWord=function(){var e=this.readWord1(),t=lE.name;return this.keywords.test(e)&&(this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+e),t=aE[e]),this.finishToken(t,e)};var xk=wk(function(e){try{const n=AE.tokenizer(e);let r=n.getToken();if(r.type===lE._var||r.type===lE._const||r.type===lE.name&&"let"===r.value)return{summary:"Cells don’t need to start with var, let, or const.",code:(e.substring(0,r.start)+e.substring(r.end+1)).trim()};if(r.type!==lE.name||"viewof"!==r.value&&"mutable"!==r.value||(r=n.getToken()),r.type===lE.name&&n.getToken().type===lE.eq&&(r=n.getToken()),r.type!==lE.braceL)return;const i=function(e,t,n){return AE.parseExpressionAt(e,t,n)}(e,r.start);if("ObjectExpression"===i.type)return function(e,t){return{summary:"Objects need to be parenthesized to differentiate them from blocks.",code:t.substring(0,e.start)+"("+t.substring(e.start,e.end)+")"+t.substring(e.end)}}(i,e)}catch(t){}});function Ek(e){return null!=e&&"object"==typeof e&&1===e.nodeType}function kk(e,t){return(!t||"hidden"!==e)&&("visible"!==e&&"clip"!==e)}function Ck(e,t){if(e.clientHeight<e.scrollHeight||e.clientWidth<e.scrollWidth){var n=getComputedStyle(e,null);return kk(n.overflowY,t)||kk(n.overflowX,t)}return!1}function _k(e,t,n,r,i,s,a,o){return s<e&&a>t||s>e&&a<t?0:s<=e&&o<=n||a>=t&&o>=n?s-e-r:a>t&&o<n||s<e&&o>n?a-t+i:0}var Sk=function(e,t){var n=t.scrollMode,r=t.block,i=t.inline,s=t.boundary,a=t.skipOverflowHiddenElements,o="function"==typeof s?s:function(e){return e!==s};if(!Ek(e))throw new TypeError("Invalid target");for(var l=document.scrollingElement||document.documentElement,c=[],u=e;Ek(u)&&o(u);){if((u=u.parentNode)===l){c.push(u);break}u===document.body&&Ck(u)&&!Ck(document.documentElement)||Ck(u,a)&&c.push(u)}for(var h=window.visualViewport?visualViewport.width:innerWidth,p=window.visualViewport?visualViewport.height:innerHeight,d=window.scrollX||pageXOffset,f=window.scrollY||pageYOffset,m=e.getBoundingClientRect(),g=m.height,v=m.width,b=m.top,y=m.right,w=m.bottom,x=m.left,E="start"===r||"nearest"===r?b:"end"===r?w:b+g/2,k="center"===i?x+v/2:"end"===i?y:x,C=[],_=0;_<c.length;_++){var S=c[_],N=S.getBoundingClientRect(),T=N.height,A=N.width,L=N.top,P=N.right,I=N.bottom,O=N.left;if("if-needed"===n&&b>=0&&x>=0&&w<=p&&y<=h&&b>=L&&w<=I&&x>=O&&y<=P)return C;var M=getComputedStyle(S),R=parseInt(M.borderLeftWidth,10),D=parseInt(M.borderTopWidth,10),F=parseInt(M.borderRightWidth,10),V=parseInt(M.borderBottomWidth,10),j=0,B=0,U="offsetWidth"in S?S.offsetWidth-S.clientWidth-R-F:0,H="offsetHeight"in S?S.offsetHeight-S.clientHeight-D-V:0;if(l===S)j="start"===r?E:"end"===r?E-p:"nearest"===r?_k(f,f+p,p,D,V,f+E,f+E+g,g):E-p/2,B="start"===i?k:"center"===i?k-h/2:"end"===i?k-h:_k(d,d+h,h,R,F,d+k,d+k+v,v),j=Math.max(0,j+f),B=Math.max(0,B+d);else{j="start"===r?E-L-D:"end"===r?E-I+V+H:"nearest"===r?_k(L,I,T,D,V+H,E,E+g,g):E-(L+T/2)+H/2,B="start"===i?k-O-R:"center"===i?k-(O+A/2)+U/2:"end"===i?k-P+F+U:_k(O,P,A,R,F+U,k,k+v,v);var $=S.scrollLeft,z=S.scrollTop;E+=z-(j=Math.max(0,Math.min(z+j,S.scrollHeight-T+H))),k+=$-(B=Math.max(0,Math.min($+B,S.scrollWidth-A+U)))}C.push({el:S,top:j,left:B})}return C};function Nk(e){return e===Object(e)&&0!==Object.keys(e).length}function Tk(e,t){var n=!e.ownerDocument.documentElement.contains(e);if(Nk(t)&&"function"==typeof t.behavior)return t.behavior(n?[]:Sk(e,t));if(!n){var r=function(e){return!1===e?{block:"end",inline:"nearest"}:Nk(e)?e:{block:"start",inline:"nearest"}}(t);return function(e,t){void 0===t&&(t="auto");var n="scrollBehavior"in document.body.style;e.forEach(function(e){var r=e.el,i=e.top,s=e.left;r.scroll&&n?r.scroll({top:i,left:s,behavior:t}):(r.scrollTop=i,r.scrollLeft=s)})}(Sk(e,r),r.behavior)}}const Ak=function(e){return function(t,n){if(n.update){let r=n.text.join("\n"),i=r.length-(t.indexFromPos(n.to)-t.indexFromPos(n.from));if(i<=0)return!0;(i=t.doc.getLength()+i-e)>0&&(r=r.substr(0,r.length-i),n.update(n.from,n.to,r.split("\n")))}return!0}}(65536),Lk={scroll:!1},Pk={insert_node:"bg-washed-green",remove_node:"bg-washed-red"},Ik=`Type, then ${pw("Shift-Enter")} to run.`,Ok=`${pw("Alt-Backspace")} to delete.`;let Mk;function Rk({value:e,onFix:t}){const n=xk(e);return n?Y.createElement("div",{className:"absolute top-0 right-2 z-2"},Y.createElement("button",{"aria-label":n.summary,onClick:()=>t(n.code),className:"pa2 black-30 bg-transparent bn tooltipped tooltipped-w pointer"},Y.createElement(Df,null))):null}class Dk extends Y.Component{constructor(...e){super(...e),bh(this,"state",{dirty:!1}),bh(this,"ref",null),bh(this,"editor",null),bh(this,"editorGeneration",void 0),bh(this,"height",void 0),bh(this,"errorLine",null),bh(this,"errorIcons",this.renderErrorIcons()),bh(this,"onRef",e=>{this.ref=e}),bh(this,"onFocus",(e,t)=>{const{id:n,focused:r,onFocus:i}=this.props;r||i(n),t&&!t.relatedTarget||e.scrollIntoView(),e.setOption("placeholder",Ik)}),bh(this,"onBlur",e=>{e.setOption("placeholder",""),this.props.onInputBlur(this.props.id),window.innerWidth<=640&&this.save()}),bh(this,"onBeforeChange",e=>{Cw(e)&&e.setOption("placeholder",Ik)}),bh(this,"onChanges",e=>{const{dirty:t}=this.state,n=this.editorGeneration!==e.changeGeneration();t!==n&&this.setState({dirty:n})}),bh(this,"onUpdate",e=>{const{clientHeight:t}=e.getScrollInfo(),n=Math.max(Am,t);if(n!==this.height){const{id:e,onHeight:t}=this.props;this.height=n,t(e,n)}}),bh(this,"onRefresh",()=>{this.errorLine&&this.renderError()}),bh(this,"userSave",async()=>{const{cell:{disabled:e}}=this.props;if(!e){if(qy&&qy.getItem("tryPrettier"))try{const e=this.editor.getValue(),n=this.editor.indexFromPos(this.editor.getCursor()),{cursorOffset:r,text:i}=await async function(e,t){try{return Mk||(Mk=await Vx("https://static.observablehq.com/format.5ae419b5806823a4a881cb504a98efd893c66a4206c572290cb6b15a34338d6a.js")),Mk(e,t)}catch(ZL){console.error(ZL)}}(e,n);i!==e&&(this.editor.setValue(i),this.editor.setCursorIndex(r))}catch(t){}this.save()}}),bh(this,"setValue",e=>{this.editor.setValue(e),this.save()}),bh(this,"save",()=>{const{id:e,onInput:t}=this.props;this.editorGeneration=this.editor.changeGeneration(),this.setState({dirty:!1}),t(e,this.editor.getValue(),!0)}),bh(this,"togglePin",()=>{const{id:e,pinned:t,onPinNode:n}=this.props;n(e,!t)})}componentDidMount(){const{focused:e,value:t,cell:{selections:n,error:r,codemirrorHistory:i},cellNames:s,autoClosePairs:a,alwaysOnAutocomplete:o}=this.props,l=aw.keyMap.default==aw.keyMap.macDefault;this.editor=aw(this.ref,{value:t,mode:{name:"r-javascript",cellNames:s},theme:"observable",autofocus:e,placeholder:e?Ik:"",lineNumbers:!1,lineWrapping:!0,indentUnit:2,tabSize:2,indentWithTabs:!1,autoClosePairs:a,viewportMargin:1/0,matchBrackets:!0,extraKeys:{[l?"Alt-Tab":"Shift-Alt-Down"]:()=>this.moveFocus(1),[l?"Shift-Alt-Tab":"Shift-Alt-Up"]:()=>this.moveFocus(-1),[l?"Cmd-/":"Ctrl-/"]:wx,[l?"Cmd-Alt-Up":"Shift-Ctrl-Up"]:()=>this.move(-1),[l?"Cmd-Alt-Down":"Shift-Ctrl-Down"]:()=>this.move(1),"Shift-Enter":this.userSave,[l?"Cmd-S":"Ctrl-S"]:this.userSave,"Ctrl-K":mx,"Ctrl-Y":fx,Backspace:e=>{if(!Cw(e))return aw.Pass;e.setOption("placeholder",Ok)},"Alt-Enter":()=>this.split(!1),"Shift-Alt-Enter":()=>this.split(!0),"Alt-Backspace":()=>this.merge(!0),"Ctrl-Alt-D":()=>this.merge(!1),"Shift-Ctrl-P":()=>this.togglePin(),"Ctrl-Alt-Tab":e=>e.execCommand("insertTab"),Esc:e=>{if(this.editor.doc.listSelectionIndexes().length>1)return aw.Pass;e.getInputField().blur(),this.props.onBlur(this.props.id)},Tab:e=>{if(function(e,t){const n=e.getTokenAt(e.getCursor());if(1!==e.listSelections().length||e.somethingSelected()||/\b(?:string|comment)\b/.test(n.type)||!/^[\w$_]+$/.test(n.string)&&"."!==n.string)return aw.Pass;{e.state.completionActive&&e.state.completionActive.close();const n=e.state.completionActive=new ox(e,t);aw.signal(e,"startCompletion",e),n.update(!0).then(t=>{t&&t.list.length||e.replaceSelection(" ")})}}(e,this.props.workerAutocomplete)===aw.Pass){if(e.somethingSelected()){if(this.editor.getSelections("\n").every(e=>e.indexOf("\n")>-1))return void e.execCommand("indentMore")}e.execCommand("insertSoftTab")}},"Alt-B":!1,"Alt-F":!1,"Alt-D":!1,"Cmd-D":!1,"Cmd-U":!1,"Cmd-Y":!1,"Shift-Cmd-U":!1}}),i&&i.editorValue===t&&this.editor.setHistory(i.history),this.editor.setSize(null,"auto"),this.editor.on("focus",this.onFocus),this.editor.on("blur",this.onBlur),this.editor.on("update",this.onUpdate),this.editor.on("beforeChange",Ak),this.editor.on("beforeChange",this.onBeforeChange),this.editor.on("changes",this.onChanges),this.editor.on("refresh",this.onRefresh),this.editor.on("inputRead",e=>{o&&function(e,t){const n=e.getTokenAt(e.getCursor());if(1!==e.listSelections().length||e.somethingSelected()||/\b(?:string|comment)\b/.test(n.type)||!(/^[\w$_]+$/.test(n.string)&&n.string.length>2||"."===n.string||"property"===n.type))return e.state.completionActive&&e.state.completionActive.close(),aw.Pass;e.state.completionActive||(e.state.completionActive=new ox(e,t,!1)),aw.signal(e,"startCompletion",e),e.state.completionActive.update(!0)}(e,this.props.workerAutocomplete)}),n&&n.length&&this.editor.doc.setSelectionIndexes(n,null,Lk),r&&this.renderError(),this.editorGeneration=this.editor.changeGeneration(),this.onUpdate(this.editor)}componentWillReceiveProps({focused:e,value:t,cellNames:n,cell:{selections:r,disabled:i}}){const s=this.editor.getValue();if(i!==this.editor.isReadOnly()&&(this.editor.setOption("theme",i?"disabled":"observable"),this.editor.setOption("readOnly",!!i&&"nocursor")),e!==this.props.focused)if(e)this.editor.focus();else{if(/^\s*$/.test(s))return this.props.onRemoveNode(this.props.id);this.editor.getInputField().blur()}if(t===s)this.setState({dirty:!1});else if(t===this.props.value)e||this.save();else{const e=this.editor.doc.listSelections();this.editor.setValue(t),this.editor.doc.setSelections(e,null,Lk),this.editorGeneration=this.editor.changeGeneration(),this.setState({dirty:!1})}(function(e,t){if(e===t)return!0;if(e.size!==t.size)return!1;for(let n of e)if(!t.has(n))return!1;return!0})(this.props.cellNames,n)||this.editor.setOption("mode",{name:"r-javascript",cellNames:n}),r!==this.props.cell.selections&&this.editor.doc.setSelectionIndexes(r,null,Lk)}componentDidUpdate(e,t){e.cell.error===this.props.cell.error&&t.dirty===this.state.dirty||this.renderError()}componentWillUnmount(){const{id:e,value:t,onHeight:n,onInput:r,onRemoveNode:i,onSelect:s,onHistory:a}=this.props;this.editor.off("focus",this.onFocus),this.editor.off("blur",this.onBlur),this.editor.off("update",this.onUpdate),this.editor.off("beforeChange",Ak),this.editor.off("beforeChange",this.onBeforeChange),this.editor.off("changes",this.onChanges),this.editor.off("refresh",this.onRefresh);const o=this.editor.getValue();if(t!==o){if(/^\s*$/.test(o))return i(e);r(e,o,!1)}a(e,{editorValue:o,history:this.editor.getHistory()}),s(e,this.editor.doc.listSelectionIndexes()),n(e,0)}moveFocus(e,t){const{id:n,onMoveFocus:r}=this.props;r(n,e,t)}move(e){const{id:t,onMoveNode:n}=this.props;n(t,e),Tk(this.ref,{scrollMode:"if-needed",block:"nearest",behavior:"instant"})}merge(e){const{id:t,onMergeNode:n}=this.props;if(this.editor.getCursorIndex()!==(e?0:this.editor.doc.getLength()))return aw.Pass;n(t,this.editor.getValue(),e)}split(e){const{id:t,pinned:n,onInsertBefore:r,onInsertAfter:i}=this.props,s=this.editor.getValue(),a=this.editor.doc.listSelectionIndexes(),o=[];{let e=0;for(const t of a){const{anchor:n,head:r}=t;o.push([e,Math.min(n,r)]),e=Math.max(n,r)}o.push([e,s.length])}let l,c=-1;const u=e?0:o.length-1;for(let d=0;d<o.length;++d){const e=o[d][1]-o[d][0];e>c&&(c=e,l=d)}for(let d=0;d<l;++d){const[e,i]=o[d];(e<i||d===u)&&r(t,s.substring(e,i),d===u,i>e?n:void 0)}const[h,p]=o[l];(h>0||p<s.length)&&(this.setValue(s.substring(h,p)),this.editor.setCursorIndex(l===a.length?0:p-h));for(let d=o.length-1;d>l;--d){const[e,r]=o[d];(e<r||d===u)&&i(t,s.substring(e,r),d===u,r>e?n:void 0)}}renderError(){const e=this.props.cell.error;if(this.errorLine&&(this.errorIcons.caret.remove(),this.errorIcons.margin.remove(),this.errorLine=null),e&&!this.state.dirty){const t=e.line-1;if(this.errorLine=this.editor.getLineHandle(t),!this.errorLine)return;this.editor.addWidget({line:t,ch:e.column},this.errorIcons.caret),this.editor.addWidget({line:t,ch:0},this.errorIcons.margin)}}renderErrorIcons(){const e=document.createElement("div");nc.render(Y.createElement(Tf,{className:"db relative w1 h1 dark-red pen z-1",style:{marginTop:-8,marginLeft:-2}}),e);const t=document.createElement("div");return nc.render(Y.createElement(Af,{className:"db relative dark-red",style:{marginTop:-21,marginLeft:-4}}),t),{margin:t,caret:e}}render(){const{cell:{disabled:e,source:t},hovered:n,focused:r,type:i,value:s,hasBorder:a}=this.props,{dirty:o}=this.state,l=("insert_node"!==i&&"remove_node"!==i||"base"!==t)&&Pk[i]||"bg-near-white";return Y.createElement("div",{ref:this.onRef,className:`relative pea ${l}`,style:a?{borderBottomLeftRadius:2,borderBottomRightRadius:2}:{}},!e&&(n||r)&&Y.createElement(Y.Fragment,null,Y.createElement(Rk,{value:s,onFix:e=>this.setValue(e)}),Y.createElement("button",{onMouseDown:Cx,onClick:this.userSave,className:`pa0 bn bg-transparent absolute top-0 right-0 z-2 pointer ${o?"blue hover-dark-blue":"black-30 hover-black"}`,style:{userSelect:"none"}},Y.createElement("div",{"aria-label":`Run cell ${fw("Shift-Enter")}`,className:"pa2 tooltipped tooltipped-w"},Y.createElement(Sf,{strong:o})))))}}bh(Dk,"defaultProps",{focused:!1,cellNames:new Set,autoClosePairs:!1,alwaysOnAutocomplete:!1,type:"normal"});const Fk=new Set(["csv","map","set","typedarray","array","object"]),Vk="flex w-100 items-center pa2 pr3 f6 fw6 dark-gray lh-solid bg-transparent hover-bg-near-white bg-animate bn nowrap pointer",jk=Y.memo(function({cell:{name:e,workerHeight:t,disabled:n,empty:r,downloadType:i},commentNodeId:s,commentable:a,detectDownloadType:o,focused:l,hovered:c,visuallySelected:u,mobile:h,node:p,node:{pinned:d},onCommentOpen:f,onClick:m,onDownloadCell:g,onNodeDrag:v,onNodeDragStart:b,onNodeDrop:y,onRemove:w,open:x,exitVisualMode:E,resetDownloadType:k,type:C}){const[_,S]=Z(!1),[N,T]=Z(!1),{id:A}=p,L=!n&&!r&&"safe"!==C,P=_&&("safe"===C||void 0!==i);let I,O,M=null,R=null,D=-1;function F(e){e.stopPropagation(),"safe"!==C&&k(A),S(!1),T(!1)}function V(){R&&window.scrollBy(0,(Date.now()-R)*D),R=Date.now(),M=window.requestAnimationFrame(V)}function j(e){v(e.pageY),B(e.clientY)}function B(e){if(e<50)D=-1;else{if(!(e>window.innerHeight-50))return H();D=1}M||(R=null,M=window.requestAnimationFrame(V))}function U(e){e.view.removeEventListener("mousemove",j),e.view.removeEventListener("mouseup",U),y(e.pageY),H()}function H(){window.cancelAnimationFrame(M),R=null,M=null}function $(e){m(A,!1),F(e)}function z(e){const{touches:[{pageY:t}]}=e;e.stopPropagation(),e.preventDefault(),b(A),O=!1,I=t}function W(e){const{changedTouches:[{pageY:t}]}=e;y(t),H(),O||S(e=>(e=!e,"safe"!==C&&(e?o(A):k(A)),e))}function q(t,n){t.stopPropagation(),t.preventDefault(),g(A,e,i,n),F(t)}return Y.createElement("div",{title:P||r?"":x&&!d&&L?`Close cell editor ${fw("Escape")}`:"Edit cell",className:`absolute pointer pea tr top-0 br hide-child\n          ${l?"bg-near-white black b--black":`bg-white ${P?"":"hover-bg-near-white hover-black"}  black-30 ${"safe"===C||c||!u&&(x||d)?"b--black-30":"b--white"}`}`,role:"button",tabIndex:"0",onKeyPress:e=>{" "!==e.key&&"Enter"!==e.key||$(e)},onMouseDown:Cx,onClick:$,style:{height:"100%",padding:"6px 0.25rem",left:u?"calc(-50vw - 5px)":"-50vw",width:"50vw"}},Y.createElement("div",{className:"dib absolute right-0"},(c||l||P||h)&&Y.createElement("button",{onClick:function(e){e.stopPropagation(),E(),"safe"!==C&&(_?k(A):o(A)),S(!_),T(!1)},onMouseDown:function(e){E(),e.view.addEventListener("mousemove",j),e.view.addEventListener("mouseup",U),b(A)},onTouchMove:function(e){e.stopPropagation();const{touches:[{pageY:t,clientY:n}]}=e;v(t),B(n),Math.abs(t-I)>10&&(O=!0)},onTouchCancel:W,onTouchEnd:W,ref:function(e){e&&e.addEventListener("touchstart",z,{passive:!1})},type:"button",title:"","aria-label":"Click for cell actions\nDrag to move cell",style:{padding:"9px 6px 10px",marginTop:-6,cursor:"grab"},className:`inline-flex hover-mid-gray moon-gray br2 ${P?"bg-light-gray":"hover-bg-near-white bg-transparent tooltipped tooltipped-e"} bn no-wrap`},Y.createElement(Of,null)),P&&Y.createElement($g,{onClickOutside:F},Y.createElement("nav",{className:"db absolute lh-solid tl z-4",style:{width:"auto",left:"16px",top:0},"aria-label":"submenu","aria-hidden":""+!x},Y.createElement("div",{className:"bg-white br2 overflow-hidden shadow-4"},Y.createElement("div",{className:"pv1 sans-serif"},e?Y.createElement("a",{href:`#${e}`,onClick:F,className:"flex mw5 items-center pa2 pt1 code f7 truncate no-underline dark-gray hover-blue bb b--light-silver pointer"},e):null,x||d?!d&&L?Y.createElement("button",{onClick:$,className:`${Vk} hover-blue`},Y.createElement(ff,{className:"w1 h1 mr1"}),"Close"):null:Y.createElement("button",{onClick:$,className:`${Vk} hover-blue`},Y.createElement(Md,{className:"w1 h1 mr1"}),"Edit"),a&&"scratchpad"!==C?Y.createElement("button",{onClick:function(e){f(s),F(e)},className:`${Vk} hover-blue`},Y.createElement(Nd,{className:"w1 h1 mr1"}),"Comment"):null,"svg"===i&&Y.createElement("button",{onClick:e=>q(e,"svg"),className:`${Vk} hover-blue`},Y.createElement(Od,{className:"w1 h1 mr1"}),"Download SVG"),("svg"===i||"canvas"===i)&&Y.createElement("button",{onClick:e=>q(e,"png"),className:`${Vk} hover-blue`},Y.createElement(Od,{className:"w1 h1 mr1"}),"Download PNG"),"css"===i&&Y.createElement("button",{onClick:e=>q(e,"css"),className:`${Vk} hover-blue`},Y.createElement(Od,{className:"w1 h1 mr1"}),"Download CSS"),"csv"===i&&Y.createElement("button",{onClick:e=>q(e,"csv"),className:`${Vk} hover-blue`},Y.createElement(Od,{className:"w1 h1 mr1",style:{strokeWidth:1}}),"Download CSV"),"string"===i&&Y.createElement("button",{onClick:e=>q(e,"txt"),className:`${Vk} hover-blue`},Y.createElement(Od,{className:"w1 h1 mr1",style:{strokeWidth:1}}),"Download text"),Fk.has(i)&&Y.createElement("button",{onClick:e=>q(e,"json"),className:`${Vk} hover-blue`},Y.createElement(Od,{className:"w1 h1 mr1"}),"Download JSON"),w?N?Y.createElement(Y.Fragment,null,Y.createElement("div",{className:"ph2 pt2 f7 black-50 nowrap"},"Are you sure?"),Y.createElement("div",{className:"pv2"},Y.createElement("button",{onClick:function(e){w(A),F(e)},className:"bn no-wrap bg-transparent w-100 flex items-center pa2 f6 fw6 dark-gray hover-red bg-washed-red pointer bg-animate"},Y.createElement(lf,{className:"w1 h1 mr1"}),"Delete"))):Y.createElement("button",{onClick:function(e){T(!0),e.stopPropagation()},className:`${Vk} hover-red`},Y.createElement(lf,{className:"w1 h1 mr1"}),"Delete"):null))))),L&&(l||d&&c)&&Y.createElement("div",{className:"absolute right-0 mv1",style:{top:t}},Y.createElement("button",{className:`pointer bn dib bg-transparent tooltipped tooltipped-e br-pill v-top ${d?"blue":"hover-black black-30"}`,"aria-label":`${d?"Unpin":"Pin"} cell ${fw("Ctrl-Shift-P")}`,title:"",style:{width:20,height:20,padding:2},onMouseDown:Cx,onClick:function(e){m(A,!0),e.stopPropagation()}},Y.createElement(Lf,{className:"v-top"}))))}),Bk=rh(function({onPutBack:e,history:t}){function n(){t.length>2?t.goBack():t.push("/")}return Y.createElement(wd,{onDismiss:n},Y.createElement("div",{className:"relative"},Y.createElement("div",{className:Mg},"This notebook is in the trash."),Y.createElement(Rg,{onDismiss:n}),Y.createElement("p",{className:"lh-copy"},"Notebooks can’t be edited from the trash. To edit this notebook, first put it back from the trash."),Y.createElement("div",{className:"flex justify-end mt3 tr"},Y.createElement(Dg,{secondary:!0,onClick:n,className:"mr2"},"Cancel"),Y.createElement(Dg,{highlight:!0,onClick:e},"Put back from trash"))))}),Uk="bg-white black br2",Hk="hover-blue black-30";function $k({id:e,source:t,diff:n,edited:r,onChangeSource:i,notebook:s,baseNotebook:a}){const o=n=>{(r||t!==n)&&i(e,n)},[l,c]=Ng(a,s);return Y.createElement("div",{style:{height:Am,paddingTop:3,paddingBottom:3,paddingRight:3},className:"flex relative justify-between pl3 sans-serif bg-light-silver pea"},Y.createElement("div",{className:"inline-flex items-center f7 fw7 mid-gray"},function({baseNotebook:e,notebook:t,baseName:n,targetName:r,edited:i,diff:s}){const a=Tg(e,t);return i?"You edited":"modify_node"===s.type?a?"Changed":`Changed in ${"both"===s.modified_by?"both":"base"===s.modified_by?n:r}`:a?s.target?"Added":"Removed":"insert_node"===s.type?`Added in ${s.target?r:n}`:`Removed in ${s.target?n:r}`}({baseNotebook:a,notebook:s,baseName:l,targetName:c,edited:r,diff:n})),Y.createElement("div",{className:"flex items-stretch f7 fw6 br1 overflow-hidden pointer",style:{padding:3}},Y.createElement("div",{className:`ph2 inline-flex items-center ttc ${"base"!==t||r?Hk:Uk}`,title:`Select changes from ${l}`,onClick:()=>o("base")},l),"modify_node"===n.type&&Y.createElement("div",{className:`ph2 inline-flex items-center ${"diff"===t?Uk:Hk}`,onClick:()=>o("diff")},"Diff"),Y.createElement("div",{className:`ph2 inline-flex items-center ttc ${"target"!==t||r?Hk:Uk}`,title:`Select changes from ${c}`,onClick:()=>o("target")},c)))}class zk extends Y.PureComponent{constructor(...e){super(...e),bh(this,"diff",null),bh(this,"ref",null),bh(this,"onRef",e=>{this.ref=e})}componentDidMount(){const e=Math.max(Am,this.ref.clientHeight),{id:t,onHeight:n}=this.props;n(t,e)}componentWillUnmount(){const{id:e,onHeight:t}=this.props;t(e,0)}render(){const{diff:{lineDiff:e}}=this.props;return Y.createElement("div",{ref:this.onRef,className:"relative cm-s-observable cm-s-diff pea CodeMirror-wrap"},Y.createElement("pre",{className:"ma0",style:{paddingTop:6,paddingBottom:6}},e.map((e,t)=>Y.createElement("div",{key:t,className:`relative ${e.added?"bg-washed-green":e.removed?"bg-washed-red":""}`,style:{paddingLeft:14,paddingRight:14}},Y.createElement("div",{className:"absolute code f7 prevent-selection black-50",style:{left:3,marginTop:1}},e.added?"+":e.removed?"-":""),e.wordDiff?Y.createElement(Y.Fragment,null,e.wordDiff.map((t,n)=>Y.createElement("span",{key:n,className:`${e.added&&t.added?"bg-lightest-green":""} ${e.removed&&t.removed?"bg-lightest-red":""}`},t.value))):e.value))))}}function Wk({id:e,onMerge:t,onInsert:n,merge:r,hovered:i,visible:s}){return Y.createElement("button",{className:`bn bg-transparent absolute pointer ${i?"black bg-near-white":s?"black-30":"transparent"} hover-black hover-bg-near-white br1 pea z-2`,style:{top:-20,left:-12,width:24,height:24,padding:4},onClick:r=>{(r.shiftKey&&t?t:n)(e)}},Y.createElement("div",{className:"tooltipped tooltipped-e","aria-label":`Click to insert new cell ${fw("Alt-Enter")}${t?`\nShift-click to merge cells ${fw("Alt-Backspace")}`:""}`},r&&t?Y.createElement("svg",{viewBox:"0.5 -0.5 16 17",width:"16",height:"17",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"},Y.createElement("path",{d:"M5.5 11.5 L8 9.5 L10.5 11.5 M8 16.5 L8 9.5"}),Y.createElement("path",{d:"M5.5 11 L8 9 L10.5 11 M8 15.5 L8 9",transform:"rotate(180, 8, 8)translate(0, 0.5)"})):Y.createElement("svg",{viewBox:"0 0 15 15",width:"15",height:"15",stroke:"currentColor",style:{strokeWidth:"1",strokeLinecap:"round"}},Y.createElement("line",{x1:"7.5",x2:"7.5",y1:"2.5",y2:"12.5"}),Y.createElement("line",{y1:"7.5",y2:"7.5",x1:"2.5",x2:"12.5"}))))}function qk({notebook:{fork_of:e,forks:t,id:n,owner:r,slug:i}}){const s=e&&e.owner;if(!e&&!t)return null;const a=e?Y.createElement(Y.Fragment,null,"Fork of"," ",Y.createElement(fh,{key:1,className:"no-underline dark-gray hover-blue",to:Cg(e)},Sg(e)),r.id!==s.id?Y.createElement(Y.Fragment,null," by ",Y.createElement(fh,{key:2,className:"no-underline dark-gray hover-blue",to:`/@${s.login}`},Y.createElement(Wf,{user:s,s:16,style:{verticalAlign:"text-bottom"},className:"w1 h1 mr1 br-100"}),Og(s))):null):null,o=t?Y.createElement(Y.Fragment,null,e?" · ":"",Y.createElement(fh,{key:1,className:"no-underline dark-gray hover-blue",to:i?`/@${r.login}/${i}/forks`:`/d/${n}/forks`},nv(t)," ",1===t?"fork":"forks")):null;return Y.createElement("div",{className:"inline-flex f6"},Y.createElement(Dd,{className:"mr1 moon-gray",style:{strokeWidth:1}}),Y.createElement("div",{className:"mid-gray"},a,o))}function Gk({participants:e,mobile:t}){const[n,r]=Z(!1),i=ee(jf);return t?Y.createElement("div",{className:"flex items-center pa2 mt3 f7 bg-near-white overflow-x-auto"},Y.createElement("span",{className:"mr2 nowrap ttu black-30"},e.length+1," Editing"),Y.createElement("div",{className:"flex items-center"},[i].concat(e).map(e=>Y.createElement(fh,{to:`/@${e.login}`,key:e.id,className:"flex items-center mr2 nowrap no-underline black-70"},Y.createElement(Wf,{user:e,s:14,style:{flexShrink:0},className:"mr1 br-100"}),Og(e))))):Y.createElement("div",{className:"flex items-center justify-end"},Y.createElement("div",{className:"v-mid mr1 f6 nowrap tr truncate"},n?Og(n):`${e.length+1} editing`),Y.createElement("div",{className:"flex items-center"},[i].concat(e).map(e=>Y.createElement(fh,{to:`/@${e.login}`,key:e.id,className:"flex",onMouseOver:()=>r(e),onMouseOut:()=>r(void 0)},Y.createElement(Wf,{user:e,s:24,style:{flexShrink:0},className:"ba b--white br-100 bw1 hover-b--black-50"})))))}function Kk({children:e,actions:t,exitTo:n}){return Y.createElement("div",{className:"flex justify-between items-center ph3 pa2 mb3 f6 fw4 lh-copy black-70 bg-washed-yellow br2",style:{marginLeft:21}},Y.createElement("div",{className:"pv1 mr2"},e),Y.createElement("div",{className:"flex mt2 mt0-ns"},t,n&&Y.createElement(fh,{className:"ph3 pa1 nt1 nb1 no-underline black-50 hover-blue bg-white hover-bg-white ba b--black-10 br2 pointer",to:n},"Exit")))}function Yk(e){return(e=new Date(e)).setHours(0,0,0,0),e}function Zk(e){return(e=new Date(e)).setTime(e-e.getMilliseconds()-1e3*e.getSeconds()-6e4*e.getMinutes()),e}function Qk(e){return(e=new Date(e)).setTime(e-e.getMilliseconds()-1e3*e.getSeconds()),e}const Xk="black hover-blue no-underline";let Jk=({notebook:e,time:t,formattedTime:n,other:r})=>{const{id:i,save_version:s,owner:a}=e;return Y.createElement("div",null,r&&i===r.id?Y.createElement(Y.Fragment,null,Y.createElement(fh,{className:Xk,to:Cg(e,bg(e,s)?null:s)},bg(e,s)?"Latest":`Version ${s}`),Y.createElement("span",{title:Nm(new Date(t)),className:"ml1"},n)):Y.createElement(fh,{className:Xk,to:Cg(e,bg(e,s)?null:s)},Sg(e)),r&&r.owner&&a.id!==r.owner.id&&Y.createElement(Y.Fragment,null," ",Y.createElement("span",{className:"nowrap"},Y.createElement("span",{className:"mr1"},"by"),Y.createElement(fh,{className:Xk,to:Ig(a)},Y.createElement(Wf,{user:a,s:16,className:"mr1 br-100",style:{verticalAlign:"text-bottom"}}),Og(a)))))};function eC({changeAllSource:e,baseName:t,targetName:n}){const[r,i]=Z(!1);function s(e){e.stopPropagation(),i(e=>!e)}function a(t,n){n.currentTarget&&n.currentTarget.blur(),s(n),e(t)}const o="flex w-100 items-center ph3 pv2 fw6 ttc dark-gray hover-black bn pointer";return Y.createElement("div",{className:"relative"},Y.createElement("button",{onClick:s,title:"Comparison options",className:"inline-flex items-center pa0 mid-gray hover-blue bg-white bg-transparent bn pointer"},Y.createElement(jd,{className:"w1 h1"})),r&&Y.createElement(zg,{extraStyle:{right:-16,width:"7rem"},onClickOutside:s},Y.createElement("div",{className:"pv2"},Y.createElement("button",{onClick:function(e){a("diff",e)},className:`${o} hover-bg-near-white`},Y.createElement(vf,{className:"w1 h1 mr1"}),"Diff"),Y.createElement("button",{onClick:function(e){a("base",e)},className:`${o} bg-washed-red hover-bg-lightest-red`},Y.createElement(gf,{className:"w1 h1 mr1"})," ",t),Y.createElement("button",{onClick:function(e){a("target",e)},className:`${o} bg-washed-green hover-bg-lightest-green`},Y.createElement(Jd,{className:"mr1"})," ",n))))}function tC({changeAllSource:e,notebook:t,baseNotebook:n,ancestry:r,user:i,type:s,autoMerge:a}){const[o,l]=Z(!1);const[c,u]=function(e,t){const n={};return Yk(e)-Yk(t)==0&&(n.hour="numeric",Zk(e)-Zk(t)==0&&(n.minute="numeric",Qk(e)-Qk(t)==0&&(n.second="numeric")),Yk(new Date)-Yk(t)==0)?[`at ${Nm(e,n)}`,`at ${Nm(t,n)}`]:(n.month="short",n.day="numeric",n.year="numeric",[`on ${Nm(e,n)}`,`on ${Nm(t,n)}`])}(new Date(n.update_time),new Date(t.update_time)),[h,p]=Ng(n,t),d=!o&&cg(i,n)&&function(e){return Eg(e).length>0}(r)&&!Tg(t,n);return Y.createElement(Y.Fragment,null,Y.createElement("div",{style:{marginLeft:21},className:`ph3 pa2 f6 fw4 lh-copy dark-gray bg-washed-yellow ${"compare"===s&&null!=t.suggestion_from?"br--bottom":""} ${d?"":"br2 mb4"}`},Y.createElement("div",{className:"flex justify-between items-center"},Y.createElement("div",{className:"pv1 mr2"},Y.createElement("span",{className:"fw7"},"Comparing"," ",t.id===n.id?"versions":"notebooks",".")," ",cg(i,n)?n.id===t.id?"Merge to overwrite this notebook.":`Merge to overwrite the ${h} notebook.`:rg(i,n)&&n.id!==t.id?Y.createElement(Y.Fragment,null,"To merge these changes,"," ",Y.createElement(fh,{className:Xk,to:Pg(n,null,t,t.save_version)},"compare to the latest ",h," version.")):null),Y.createElement(eC,{changeAllSource:e,baseName:h,targetName:p})),Y.createElement("div",{className:"pv1"},Y.createElement("div",{className:"flex"},Y.createElement("div",{className:"flex-shrink-0 w3 tr"},Y.createElement("span",{className:"i ttc"},h)," ",Y.createElement("span",{className:"mr1"},"=")),Y.createElement(Jk,{notebook:n,other:t,time:n.update_time,formattedTime:c})),Y.createElement("div",{className:"flex"},Y.createElement("div",{className:"flex-shrink-0 w3 tr"},Y.createElement("span",{className:"i ttc"},p)," ",Y.createElement("span",{className:"mr1"},"=")),Y.createElement(Jk,{notebook:t,other:n,time:t.update_time,formattedTime:u})))),d?Y.createElement("div",{style:{marginLeft:21},className:"ph3 pa2 flex mb4 flex-column lh-copy flex-row-ns justify-between items-center f6 fw4 dark-gray bg-washed-yellow br2 br--bottom bt b--light-gray"},Y.createElement("div",{className:"pv1 mr2"},Y.createElement("span",{className:"fw7"},"Missing changes.")," The ",p," is missing some ",h," changes. Apply them below?"),Y.createElement("div",{className:"flex mt2 mt0-ns"},Y.createElement("button",{className:"bn bg-transparent mr2 ph3 nt1 nb1 pa1 mid-gray hover-blue ba b--transparent pointer",onClick:function(){l(!0)}},"Ignore"),Y.createElement("button",{className:"bn bg-transparent ph3 nt1 nb1 pa1 mid-gray hover-blue bg-white hover-bg-white ba b--light-gray br2 pointer",onClick:function(){l(!0),a()}},"Apply"))):null)}function nC({suggestion:e,id:t,i:n}){const{from_id:r,from_owner:i,create_time:s,to_owner:a}=e,o=r===t?"to":"from",l="from"===o?i:a;return Y.createElement(fh,{title:"View suggestion",to:Lg(e),className:`db ph3 pv2 f6 fw4 lh-copy no-underline dark-gray hover-blue ${0===n?"":"bt b--light-silver"}`},e.description?Y.createElement("div",null,"“",e.description,"”"):null," ",Tm(new Date(s))," ",o,Y.createElement(Wf,{user:l,s:16,className:"mh1 br-100",style:{verticalAlign:"sub"}}),Og(l))}function rC({id:e,suggestions:t}){const[n,r]=Z(!1);const i=Y.createElement("span",{className:"inline-flex items-center f6 dark-gray hover-blue"},Y.createElement(Kd,{className:"mr1 moon-gray",style:{strokeWidth:1}}),`${nv(t.length)} suggestion${1===t.length?"":"s"}`);return Y.createElement("div",{className:`relative ${n?"dark-gray":"hover-blue"} pointer inline-flex items-center mr4 f6`,onClick:function(e){e.stopPropagation(),r(e=>!e)}},i,n&&Y.createElement(zg,{left:!0,leftPos:-16,onClickOutside:function(e){e.stopPropagation(),r(!1)},extraStyle:{width:"18rem",marginTop:"0.5rem"}},Y.createElement("div",{className:"pv1"},t.map((t,n)=>Y.createElement(nC,{suggestion:t,id:e,key:n,i:n})))))}const iC=Y.memo(function({notebook:e,onClick:t}){const{id:n,likes:r,like:i}=e,[s,a]=Z([]),[o,l]=Z(!1),c=ee(jf),u=ee(Bf);const h=Y.createElement(Cf,{className:i?"bump":"",fill:i?"var(--red)":"var(--white)",stroke:i?"var(--dark-red)":"var(--mid-gray)",style:{width:22,height:22,strokeWidth:1,transition:"all 0.4s ease-in-out"}}),p=`${i?"Unlike":"Like"} this notebook`;return rg(c,e)?Y.createElement("div",{className:"relative"},Y.createElement("div",{className:"flex-column inline-flex w2 items-stretch pa0 mid-gray ba b--light-gray br2 pointer"},Y.createElement("button",{onClick:t,title:p,className:"flex h2 items-center justify-center pa1 bg-transparent grow bn pointer"},h),r>0&&Y.createElement("button",{"aria-label":o?"":"See who liked this notebook",onClick:async function(e){e.stopPropagation();const t=await u.documentLoadLikes(n);a(t),l(!0)},style:{paddingTop:2,paddingBottom:2,paddingLeft:0,paddingRight:0},className:`relative f7 tc underline-hover bg-white bt b--light-gray br2 br--bottom br-0 bb-0 bl-0 pointer ${o?"":"tooltipped tooltipped-w"}`},nv(r))),o?Y.createElement(zg,{onClickOutside:e=>{e.stopPropagation(),l(!1)}},Y.createElement("div",{className:"flex justify-between ph2 pt2 pb1"},Y.createElement("div",{className:"f7 fw5 ttc mid-gray"},nv(r)," Like",1===r?"":"s"),Y.createElement("button",{onClick:e=>{e.stopPropagation(),l(!1)},className:"inline-flex pa0 dark-gray hover-near-black bg-transparent bn pointer"},Y.createElement(ff,{style:{width:10,height:10}}))),Y.createElement("div",{className:"pa2 dg overflow-y-auto",style:{maxHeight:250,gridTemplateColumns:"20px 1fr",gridGap:"8px 0"}},s?s.map(e=>Y.createElement(Y.Fragment,{key:e.id},Y.createElement(fh,{to:Ig(e)},Y.createElement(Wf,{user:e,s:16,className:"br-pill"})),Y.createElement(fh,{className:"truncate no-underline dark-gray hover-near-black",to:Ig(e)},Og(e)))):null)):null):Y.createElement("button",{onClick:t,title:p,className:"flex-column inline-flex w2 items-stretch pa0 black-50 bg-white hover-bg-near-white ba b--light-gray br2 pointer overflow-hidden"},Y.createElement("div",{className:"flex h2 items-center justify-center pa1 bg-transparent hover-bg-near-white bn pointer"},h),r>0&&Y.createElement("div",{style:{paddingTop:2,paddingBottom:2},className:"f7 fw5 tc bg-white bt b--light-gray"},nv(r)))});function sC({onHelp:e,save:t}){return Y.createElement("div",{className:"flex flex-items-center justify-between items-start mb4 f5 f6 lh-copy black-50",style:{marginLeft:21}},Y.createElement("div",null,Y.createElement("div",{className:"f5 fw7 black-70 semitracked"},"Demo"),Y.createElement("div",{className:"measure-wide mt2 fw4"},"Use this notebook to start playing with Observable. Edit the code below, then ",pw("Shift-Enter")," ",fw("Shift-Enter")," to run. To save your changes,"," ",Y.createElement("button",{className:"pa0 blue hover-dark-blue bg-transparent bn link pointer",onClick:t},"sign in"),".")),Y.createElement("div",{className:"ph2 nowrap"},Y.createElement("div",{className:"f5 fw7 black-70 semitracked"},"Help"),Y.createElement(fh,{to:"/@observablehq/user-manual",target:"_blank",rel:"noopener noreferrer",className:"db mt2 blue hover-dark-blue link"},"User manual"),Y.createElement("button",{onClick:e,className:"db pa0 lh-copy blue hover-dark-blue bg-transparent bn link pointer"},"Keyboard shortcuts"),Y.createElement("a",{href:"https://talk.observablehq.com/",target:"_blank",rel:"noopener noreferrer",className:"db blue hover-dark-blue link"},"Forum")))}function aC({forkFromDemo:e}){return Y.createElement(Y.Fragment,null,Y.createElement("div",{className:"relative",key:"2"},Y.createElement("button",{onClick:e,className:"br2 pa2 f6 inline-flex fw6 mr3-ns mr2 bn white bg-blue hover-bg-light-blue bg-animate pointer"},Y.createElement(nf,{className:"w1 h1 v-top mr2-ns"}),Y.createElement("span",{className:"dn db-ns mr2-ns"},"Save"))))}var oC={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},lC="break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",cC={5:lC,6:lC+" const class extends export import super"},uC=/^in(stanceof)?$/,hC="ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽͿΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԯԱ-Ֆՙՠ-ֈא-תׯ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࡠ-ࡪࢠ-ࢴࢶ-ࢽऄ-हऽॐक़-ॡॱ-ঀঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱৼਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡૹଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-హఽౘ-ౚౠౡಀಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൔ-ൖൟ-ൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏽᏸ-ᏽᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛸᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡸᢀ-ᢨᢪᢰ-ᣵᤀ-ᤞᥐ-ᥭᥰ-ᥴᦀ-ᦫᦰ-ᧉᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᲀ-ᲈᲐ-ᲺᲽ-Ჿᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕ℘-ℝℤΩℨK-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞ々-〇〡-〩〱-〵〸-〼ぁ-ゖ゛-ゟァ-ヺー-ヿㄅ-ㄯㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿯ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚝꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞹꟷ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꣽꣾꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꧠ-ꧤꧦ-ꧯꧺ-ꧾꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꩾ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꬰ-ꭚꭜ-ꭥꭰ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ",pC="‌‍·̀-ͯ·҃-֑҇-ׇֽֿׁׂׅׄؐ-ًؚ-٩ٰۖ-ۜ۟-۪ۤۧۨ-ۭ۰-۹ܑܰ-݊ަ-ް߀-߉߫-߽߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛࣓-ࣣ࣡-ःऺ-़ा-ॏ॑-ॗॢॣ०-९ঁ-ঃ়া-ৄেৈো-্ৗৢৣ০-৯৾ਁ-ਃ਼ਾ-ੂੇੈੋ-੍ੑ੦-ੱੵઁ-ઃ઼ા-ૅે-ૉો-્ૢૣ૦-૯ૺ-૿ଁ-ଃ଼ା-ୄେୈୋ-୍ୖୗୢୣ୦-୯ஂா-ூெ-ைொ-்ௗ௦-௯ఀ-ఄా-ౄె-ైొ-్ౕౖౢౣ౦-౯ಁ-ಃ಼ಾ-ೄೆ-ೈೊ-್ೕೖೢೣ೦-೯ഀ-ഃ഻഼ാ-ൄെ-ൈൊ-്ൗൢൣ൦-൯ංඃ්ා-ුූෘ-ෟ෦-෯ෲෳัิ-ฺ็-๎๐-๙ັິ-ູົຼ່-ໍ໐-໙༘༙༠-༩༹༵༷༾༿ཱ-྄྆྇ྍ-ྗྙ-ྼ࿆ါ-ှ၀-၉ၖ-ၙၞ-ၠၢ-ၤၧ-ၭၱ-ၴႂ-ႍႏ-ႝ፝-፟፩-፱ᜒ-᜔ᜲ-᜴ᝒᝓᝲᝳ឴-៓៝០-៩᠋-᠍᠐-᠙ᢩᤠ-ᤫᤰ-᤻᥆-᥏᧐-᧚ᨗ-ᨛᩕ-ᩞ᩠-᩿᩼-᪉᪐-᪙᪰-᪽ᬀ-ᬄ᬴-᭄᭐-᭙᭫-᭳ᮀ-ᮂᮡ-ᮭ᮰-᮹᯦-᯳ᰤ-᰷᱀-᱉᱐-᱙᳐-᳔᳒-᳨᳭ᳲ-᳴᳷-᳹᷀-᷹᷻-᷿‿⁀⁔⃐-⃥⃜⃡-⃰⳯-⵿⳱ⷠ-〪ⷿ-゙゚〯꘠-꘩꙯ꙴ-꙽ꚞꚟ꛰꛱ꠂ꠆ꠋꠣ-ꠧꢀꢁꢴ-ꣅ꣐-꣙꣠-꣱ꣿ-꤉ꤦ-꤭ꥇ-꥓ꦀ-ꦃ꦳-꧀꧐-꧙ꧥ꧰-꧹ꨩ-ꨶꩃꩌꩍ꩐-꩙ꩻ-ꩽꪰꪲ-ꪴꪷꪸꪾ꪿꫁ꫫ-ꫯꫵ꫶ꯣ-ꯪ꯬꯭꯰-꯹ﬞ︀-️︠-︯︳︴﹍-﹏０-９＿",dC=new RegExp("["+hC+"]"),fC=new RegExp("["+hC+pC+"]");hC=pC=null;var mC=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,157,310,10,21,11,7,153,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,477,28,11,0,9,21,190,52,76,44,33,24,27,35,30,0,12,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,85,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,159,52,19,3,54,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,86,26,230,43,117,63,32,0,257,0,11,39,8,0,22,0,12,39,3,3,20,0,35,56,264,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,270,921,103,110,18,195,2749,1070,4050,582,8634,568,8,30,114,29,19,47,17,3,32,20,6,18,689,63,129,68,12,0,67,12,65,1,31,6129,15,754,9486,286,82,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,4149,196,60,67,1213,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42710,42,4148,12,221,3,5761,15,7472,3104,541],gC=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,525,10,176,2,54,14,32,9,16,3,46,10,54,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,4,9,83,11,7,0,161,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,193,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,243,14,166,9,280,9,41,6,2,3,9,0,10,10,47,15,406,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,19306,9,135,4,60,6,26,9,1016,45,17,3,19723,1,5319,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,2214,6,110,6,6,9,792487,239];function vC(e,t){for(var n=65536,r=0;r<t.length;r+=2){if((n+=t[r])>e)return!1;if((n+=t[r+1])>=e)return!0}}function bC(e,t){return e<65?36===e:e<91||(e<97?95===e:e<123||(e<=65535?e>=170&&dC.test(String.fromCharCode(e)):!1!==t&&vC(e,mC)))}function yC(e,t){return e<48?36===e:e<58||!(e<65)&&(e<91||(e<97?95===e:e<123||(e<=65535?e>=170&&fC.test(String.fromCharCode(e)):!1!==t&&(vC(e,mC)||vC(e,gC)))))}var wC=function(e,t){void 0===t&&(t={}),this.label=e,this.keyword=t.keyword,this.beforeExpr=!!t.beforeExpr,this.startsExpr=!!t.startsExpr,this.isLoop=!!t.isLoop,this.isAssign=!!t.isAssign,this.prefix=!!t.prefix,this.postfix=!!t.postfix,this.binop=t.binop||null,this.updateContext=null};function xC(e,t){return new wC(e,{beforeExpr:!0,binop:t})}var EC={beforeExpr:!0},kC={startsExpr:!0},CC={};function _C(e,t){return void 0===t&&(t={}),t.keyword=e,CC[e]=new wC(e,t)}var SC={num:new wC("num",kC),regexp:new wC("regexp",kC),string:new wC("string",kC),name:new wC("name",kC),eof:new wC("eof"),bracketL:new wC("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new wC("]"),braceL:new wC("{",{beforeExpr:!0,startsExpr:!0}),braceR:new wC("}"),parenL:new wC("(",{beforeExpr:!0,startsExpr:!0}),parenR:new wC(")"),comma:new wC(",",EC),semi:new wC(";",EC),colon:new wC(":",EC),dot:new wC("."),question:new wC("?",EC),arrow:new wC("=>",EC),template:new wC("template"),invalidTemplate:new wC("invalidTemplate"),ellipsis:new wC("...",EC),backQuote:new wC("`",kC),dollarBraceL:new wC("${",{beforeExpr:!0,startsExpr:!0}),eq:new wC("=",{beforeExpr:!0,isAssign:!0}),assign:new wC("_=",{beforeExpr:!0,isAssign:!0}),incDec:new wC("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new wC("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:xC("||",1),logicalAND:xC("&&",2),bitwiseOR:xC("|",3),bitwiseXOR:xC("^",4),bitwiseAND:xC("&",5),equality:xC("==/!=/===/!==",6),relational:xC("</>/<=/>=",7),bitShift:xC("<</>>/>>>",8),plusMin:new wC("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:xC("%",10),star:xC("*",10),slash:xC("/",10),starstar:new wC("**",{beforeExpr:!0}),_break:_C("break"),_case:_C("case",EC),_catch:_C("catch"),_continue:_C("continue"),_debugger:_C("debugger"),_default:_C("default",EC),_do:_C("do",{isLoop:!0,beforeExpr:!0}),_else:_C("else",EC),_finally:_C("finally"),_for:_C("for",{isLoop:!0}),_function:_C("function",kC),_if:_C("if"),_return:_C("return",EC),_switch:_C("switch"),_throw:_C("throw",EC),_try:_C("try"),_var:_C("var"),_const:_C("const"),_while:_C("while",{isLoop:!0}),_with:_C("with"),_new:_C("new",{beforeExpr:!0,startsExpr:!0}),_this:_C("this",kC),_super:_C("super",kC),_class:_C("class",kC),_extends:_C("extends",EC),_export:_C("export"),_import:_C("import"),_null:_C("null",kC),_true:_C("true",kC),_false:_C("false",kC),_in:_C("in",{beforeExpr:!0,binop:7}),_instanceof:_C("instanceof",{beforeExpr:!0,binop:7}),_typeof:_C("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:_C("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:_C("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},NC=/\r\n?|\n|\u2028|\u2029/,TC=new RegExp(NC.source,"g");function AC(e,t){return 10===e||13===e||!t&&(8232===e||8233===e)}var LC=/[\u1680\u180e\u2000-\u200a\u202f\u205f\u3000\ufeff]/,PC=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,IC=Object.prototype,OC=IC.hasOwnProperty,MC=IC.toString;function RC(e,t){return OC.call(e,t)}var DC=Array.isArray||function(e){return"[object Array]"===MC.call(e)},FC=function(e,t){this.line=e,this.column=t};FC.prototype.offset=function(e){return new FC(this.line,this.column+e)};var VC=function(e,t,n){this.start=t,this.end=n,null!==e.sourceFile&&(this.source=e.sourceFile)};function jC(e,t){for(var n=1,r=0;;){TC.lastIndex=r;var i=TC.exec(e);if(!(i&&i.index<t))return new FC(n,t-r);++n,r=i.index+i[0].length}}var BC={ecmaVersion:9,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:!1,allowHashBang:!1,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1};function UC(e){var t={};for(var n in BC)t[n]=e&&RC(e,n)?e[n]:BC[n];if(t.ecmaVersion>=2015&&(t.ecmaVersion-=2009),null==t.allowReserved&&(t.allowReserved=t.ecmaVersion<5),DC(t.onToken)){var r=t.onToken;t.onToken=function(e){return r.push(e)}}return DC(t.onComment)&&(t.onComment=function(e,t){return function(n,r,i,s,a,o){var l={type:n?"Block":"Line",value:r,start:i,end:s};e.locations&&(l.loc=new VC(this,a,o)),e.ranges&&(l.range=[i,s]),t.push(l)}}(t,t.onComment)),t}var HC=2,$C=1|HC,zC=4,WC=8;function qC(e,t){return HC|(e?zC:0)|(t?WC:0)}function GC(e){return new RegExp("^(?:"+e.replace(/ /g,"|")+")$")}var KC=function(e,t,n){this.options=e=UC(e),this.sourceFile=e.sourceFile,this.keywords=GC(cC[e.ecmaVersion>=6?6:5]);var r="";if(!e.allowReserved){for(var i=e.ecmaVersion;!(r=oC[i]);i--);"module"===e.sourceType&&(r+=" await")}this.reservedWords=GC(r);var s=(r?r+" ":"")+oC.strict;this.reservedWordsStrict=GC(s),this.reservedWordsStrictBind=GC(s+" "+oC.strictBind),this.input=String(t),this.containsEsc=!1,n?(this.pos=n,this.lineStart=this.input.lastIndexOf("\n",n-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(NC).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=SC.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.inModule="module"===e.sourceType,this.strict=this.inModule||this.strictDirective(this.pos),this.potentialArrowAt=-1,this.yieldPos=this.awaitPos=0,this.labels=[],0===this.pos&&e.allowHashBang&&"#!"===this.input.slice(0,2)&&this.skipLineComment(2),this.scopeStack=[],this.enterScope(1),this.regexpState=null},YC={inFunction:{configurable:!0},inGenerator:{configurable:!0},inAsync:{configurable:!0},allowSuper:{configurable:!0},allowDirectSuper:{configurable:!0}};KC.prototype.parse=function(){var e=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel(e)},YC.inFunction.get=function(){return(this.currentVarScope().flags&HC)>0},YC.inGenerator.get=function(){return(this.currentVarScope().flags&WC)>0},YC.inAsync.get=function(){return(this.currentVarScope().flags&zC)>0},YC.allowSuper.get=function(){return(64&this.currentThisScope().flags)>0},YC.allowDirectSuper.get=function(){return(128&this.currentThisScope().flags)>0},KC.prototype.inNonArrowFunction=function(){return(this.currentThisScope().flags&HC)>0},KC.extend=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];for(var n=this,r=0;r<e.length;r++)n=e[r](n);return n},KC.parse=function(e,t){return new this(t,e).parse()},KC.parseExpressionAt=function(e,t,n){var r=new this(n,e,t);return r.nextToken(),r.parseExpression()},KC.tokenizer=function(e,t){return new this(t,e)},Object.defineProperties(KC.prototype,YC);var ZC=KC.prototype,QC=/^(?:'((?:\\.|[^'])*?)'|"((?:\\.|[^"])*?)"|;)/;function XC(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1}ZC.strictDirective=function(e){for(;;){PC.lastIndex=e,e+=PC.exec(this.input)[0].length;var t=QC.exec(this.input.slice(e));if(!t)return!1;if("use strict"===(t[1]||t[2]))return!0;e+=t[0].length}},ZC.eat=function(e){return this.type===e&&(this.next(),!0)},ZC.isContextual=function(e){return this.type===SC.name&&this.value===e&&!this.containsEsc},ZC.eatContextual=function(e){return!!this.isContextual(e)&&(this.next(),!0)},ZC.expectContextual=function(e){this.eatContextual(e)||this.unexpected()},ZC.canInsertSemicolon=function(){return this.type===SC.eof||this.type===SC.braceR||NC.test(this.input.slice(this.lastTokEnd,this.start))},ZC.insertSemicolon=function(){if(this.canInsertSemicolon())return this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0},ZC.semicolon=function(){this.eat(SC.semi)||this.insertSemicolon()||this.unexpected()},ZC.afterTrailingComma=function(e,t){if(this.type===e)return this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),t||this.next(),!0},ZC.expect=function(e){this.eat(e)||this.unexpected()},ZC.unexpected=function(e){this.raise(null!=e?e:this.start,"Unexpected token")},ZC.checkPatternErrors=function(e,t){if(e){e.trailingComma>-1&&this.raiseRecoverable(e.trailingComma,"Comma is not permitted after the rest element");var n=t?e.parenthesizedAssign:e.parenthesizedBind;n>-1&&this.raiseRecoverable(n,"Parenthesized pattern")}},ZC.checkExpressionErrors=function(e,t){if(!e)return!1;var n=e.shorthandAssign,r=e.doubleProto;if(!t)return n>=0||r>=0;n>=0&&this.raise(n,"Shorthand property assignments are valid only in destructuring patterns"),r>=0&&this.raiseRecoverable(r,"Redefinition of __proto__ property")},ZC.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value"),this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")},ZC.isSimpleAssignTarget=function(e){return"ParenthesizedExpression"===e.type?this.isSimpleAssignTarget(e.expression):"Identifier"===e.type||"MemberExpression"===e.type};var JC=KC.prototype;JC.parseTopLevel=function(e){var t={};for(e.body||(e.body=[]);this.type!==SC.eof;){var n=this.parseStatement(null,!0,t);e.body.push(n)}return this.adaptDirectivePrologue(e.body),this.next(),this.options.ecmaVersion>=6&&(e.sourceType=this.options.sourceType),this.finishNode(e,"Program")};var e_={kind:"loop"},t_={kind:"switch"};JC.isLet=function(){if(this.options.ecmaVersion<6||!this.isContextual("let"))return!1;PC.lastIndex=this.pos;var e=PC.exec(this.input),t=this.pos+e[0].length,n=this.input.charCodeAt(t);if(91===n||123===n)return!0;if(bC(n,!0)){for(var r=t+1;yC(this.input.charCodeAt(r),!0);)++r;var i=this.input.slice(t,r);if(!uC.test(i))return!0}return!1},JC.isAsyncFunction=function(){if(this.options.ecmaVersion<8||!this.isContextual("async"))return!1;PC.lastIndex=this.pos;var e=PC.exec(this.input),t=this.pos+e[0].length;return!(NC.test(this.input.slice(this.pos,t))||"function"!==this.input.slice(t,t+8)||t+8!==this.input.length&&yC(this.input.charAt(t+8)))},JC.parseStatement=function(e,t,n){var r,i=this.type,s=this.startNode();switch(this.isLet()&&(i=SC._var,r="let"),i){case SC._break:case SC._continue:return this.parseBreakContinueStatement(s,i.keyword);case SC._debugger:return this.parseDebuggerStatement(s);case SC._do:return this.parseDoStatement(s);case SC._for:return this.parseForStatement(s);case SC._function:return e&&(this.strict||"if"!==e)&&this.options.ecmaVersion>=6&&this.unexpected(),this.parseFunctionStatement(s,!1,!e);case SC._class:return e&&this.unexpected(),this.parseClass(s,!0);case SC._if:return this.parseIfStatement(s);case SC._return:return this.parseReturnStatement(s);case SC._switch:return this.parseSwitchStatement(s);case SC._throw:return this.parseThrowStatement(s);case SC._try:return this.parseTryStatement(s);case SC._const:case SC._var:return r=r||this.value,e&&"var"!==r&&this.unexpected(),this.parseVarStatement(s,r);case SC._while:return this.parseWhileStatement(s);case SC._with:return this.parseWithStatement(s);case SC.braceL:return this.parseBlock(!0,s);case SC.semi:return this.parseEmptyStatement(s);case SC._export:case SC._import:return this.options.allowImportExportEverywhere||(t||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'")),i===SC._import?this.parseImport(s):this.parseExport(s,n);default:if(this.isAsyncFunction())return e&&this.unexpected(),this.next(),this.parseFunctionStatement(s,!0,!e);var a=this.value,o=this.parseExpression();return i===SC.name&&"Identifier"===o.type&&this.eat(SC.colon)?this.parseLabeledStatement(s,a,o,e):this.parseExpressionStatement(s,o)}},JC.parseBreakContinueStatement=function(e,t){var n="break"===t;this.next(),this.eat(SC.semi)||this.insertSemicolon()?e.label=null:this.type!==SC.name?this.unexpected():(e.label=this.parseIdent(),this.semicolon());for(var r=0;r<this.labels.length;++r){var i=this.labels[r];if(null==e.label||i.name===e.label.name){if(null!=i.kind&&(n||"loop"===i.kind))break;if(e.label&&n)break}}return r===this.labels.length&&this.raise(e.start,"Unsyntactic "+t),this.finishNode(e,n?"BreakStatement":"ContinueStatement")},JC.parseDebuggerStatement=function(e){return this.next(),this.semicolon(),this.finishNode(e,"DebuggerStatement")},JC.parseDoStatement=function(e){return this.next(),this.labels.push(e_),e.body=this.parseStatement("do"),this.labels.pop(),this.expect(SC._while),e.test=this.parseParenExpression(),this.options.ecmaVersion>=6?this.eat(SC.semi):this.semicolon(),this.finishNode(e,"DoWhileStatement")},JC.parseForStatement=function(e){this.next();var t=this.options.ecmaVersion>=9&&(this.inAsync||!this.inFunction&&this.options.allowAwaitOutsideFunction)&&this.eatContextual("await")?this.lastTokStart:-1;if(this.labels.push(e_),this.enterScope(0),this.expect(SC.parenL),this.type===SC.semi)return t>-1&&this.unexpected(t),this.parseFor(e,null);var n=this.isLet();if(this.type===SC._var||this.type===SC._const||n){var r=this.startNode(),i=n?"let":this.value;return this.next(),this.parseVar(r,!0,i),this.finishNode(r,"VariableDeclaration"),!(this.type===SC._in||this.options.ecmaVersion>=6&&this.isContextual("of"))||1!==r.declarations.length||"var"!==i&&r.declarations[0].init?(t>-1&&this.unexpected(t),this.parseFor(e,r)):(this.options.ecmaVersion>=9&&(this.type===SC._in?t>-1&&this.unexpected(t):e.await=t>-1),this.parseForIn(e,r))}var s=new XC,a=this.parseExpression(!0,s);return this.type===SC._in||this.options.ecmaVersion>=6&&this.isContextual("of")?(this.options.ecmaVersion>=9&&(this.type===SC._in?t>-1&&this.unexpected(t):e.await=t>-1),this.toAssignable(a,!1,s),this.checkLVal(a),this.parseForIn(e,a)):(this.checkExpressionErrors(s,!0),t>-1&&this.unexpected(t),this.parseFor(e,a))},JC.parseFunctionStatement=function(e,t,n){return this.next(),this.parseFunction(e,r_|(n?0:i_),!1,t)},JC.parseIfStatement=function(e){return this.next(),e.test=this.parseParenExpression(),e.consequent=this.parseStatement("if"),e.alternate=this.eat(SC._else)?this.parseStatement("if"):null,this.finishNode(e,"IfStatement")},JC.parseReturnStatement=function(e){return this.inFunction||this.options.allowReturnOutsideFunction||this.raise(this.start,"'return' outside of function"),this.next(),this.eat(SC.semi)||this.insertSemicolon()?e.argument=null:(e.argument=this.parseExpression(),this.semicolon()),this.finishNode(e,"ReturnStatement")},JC.parseSwitchStatement=function(e){var t;this.next(),e.discriminant=this.parseParenExpression(),e.cases=[],this.expect(SC.braceL),this.labels.push(t_),this.enterScope(0);for(var n=!1;this.type!==SC.braceR;)if(this.type===SC._case||this.type===SC._default){var r=this.type===SC._case;t&&this.finishNode(t,"SwitchCase"),e.cases.push(t=this.startNode()),t.consequent=[],this.next(),r?t.test=this.parseExpression():(n&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),n=!0,t.test=null),this.expect(SC.colon)}else t||this.unexpected(),t.consequent.push(this.parseStatement(null));return this.exitScope(),t&&this.finishNode(t,"SwitchCase"),this.next(),this.labels.pop(),this.finishNode(e,"SwitchStatement")},JC.parseThrowStatement=function(e){return this.next(),NC.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw"),e.argument=this.parseExpression(),this.semicolon(),this.finishNode(e,"ThrowStatement")};var n_=[];JC.parseTryStatement=function(e){if(this.next(),e.block=this.parseBlock(),e.handler=null,this.type===SC._catch){var t=this.startNode();if(this.next(),this.eat(SC.parenL)){t.param=this.parseBindingAtom();var n="Identifier"===t.param.type;this.enterScope(n?32:0),this.checkLVal(t.param,n?4:2),this.expect(SC.parenR)}else this.options.ecmaVersion<10&&this.unexpected(),t.param=null,this.enterScope(0);t.body=this.parseBlock(!1),this.exitScope(),e.handler=this.finishNode(t,"CatchClause")}return e.finalizer=this.eat(SC._finally)?this.parseBlock():null,e.handler||e.finalizer||this.raise(e.start,"Missing catch or finally clause"),this.finishNode(e,"TryStatement")},JC.parseVarStatement=function(e,t){return this.next(),this.parseVar(e,!1,t),this.semicolon(),this.finishNode(e,"VariableDeclaration")},JC.parseWhileStatement=function(e){return this.next(),e.test=this.parseParenExpression(),this.labels.push(e_),e.body=this.parseStatement("while"),this.labels.pop(),this.finishNode(e,"WhileStatement")},JC.parseWithStatement=function(e){return this.strict&&this.raise(this.start,"'with' in strict mode"),this.next(),e.object=this.parseParenExpression(),e.body=this.parseStatement("with"),this.finishNode(e,"WithStatement")},JC.parseEmptyStatement=function(e){return this.next(),this.finishNode(e,"EmptyStatement")},JC.parseLabeledStatement=function(e,t,n,r){for(var i=0,s=this.labels;i<s.length;i+=1){s[i].name===t&&this.raise(n.start,"Label '"+t+"' is already declared")}for(var a=this.type.isLoop?"loop":this.type===SC._switch?"switch":null,o=this.labels.length-1;o>=0;o--){var l=this.labels[o];if(l.statementStart!==e.start)break;l.statementStart=this.start,l.kind=a}return this.labels.push({name:t,kind:a,statementStart:this.start}),e.body=this.parseStatement(r),("ClassDeclaration"===e.body.type||"VariableDeclaration"===e.body.type&&"var"!==e.body.kind||"FunctionDeclaration"===e.body.type&&(this.strict||e.body.generator||e.body.async))&&this.raiseRecoverable(e.body.start,"Invalid labeled declaration"),this.labels.pop(),e.label=n,this.finishNode(e,"LabeledStatement")},JC.parseExpressionStatement=function(e,t){return e.expression=t,this.semicolon(),this.finishNode(e,"ExpressionStatement")},JC.parseBlock=function(e,t){for(void 0===e&&(e=!0),void 0===t&&(t=this.startNode()),t.body=[],this.expect(SC.braceL),e&&this.enterScope(0);!this.eat(SC.braceR);){var n=this.parseStatement(null);t.body.push(n)}return e&&this.exitScope(),this.finishNode(t,"BlockStatement")},JC.parseFor=function(e,t){return e.init=t,this.expect(SC.semi),e.test=this.type===SC.semi?null:this.parseExpression(),this.expect(SC.semi),e.update=this.type===SC.parenR?null:this.parseExpression(),this.expect(SC.parenR),this.exitScope(),e.body=this.parseStatement("for"),this.labels.pop(),this.finishNode(e,"ForStatement")},JC.parseForIn=function(e,t){var n=this.type===SC._in?"ForInStatement":"ForOfStatement";return this.next(),"ForInStatement"===n&&("AssignmentPattern"===t.type||"VariableDeclaration"===t.type&&null!=t.declarations[0].init&&(this.strict||"Identifier"!==t.declarations[0].id.type))&&this.raise(t.start,"Invalid assignment in for-in loop head"),e.left=t,e.right="ForInStatement"===n?this.parseExpression():this.parseMaybeAssign(),this.expect(SC.parenR),this.exitScope(),e.body=this.parseStatement("for"),this.labels.pop(),this.finishNode(e,n)},JC.parseVar=function(e,t,n){for(e.declarations=[],e.kind=n;;){var r=this.startNode();if(this.parseVarId(r,n),this.eat(SC.eq)?r.init=this.parseMaybeAssign(t):"const"!==n||this.type===SC._in||this.options.ecmaVersion>=6&&this.isContextual("of")?"Identifier"===r.id.type||t&&(this.type===SC._in||this.isContextual("of"))?r.init=null:this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):this.unexpected(),e.declarations.push(this.finishNode(r,"VariableDeclarator")),!this.eat(SC.comma))break}return e},JC.parseVarId=function(e,t){e.id=this.parseBindingAtom(t),this.checkLVal(e.id,"var"===t?1:2,!1)};var r_=1,i_=2;JC.parseFunction=function(e,t,n,r){this.initFunction(e),(this.options.ecmaVersion>=9||this.options.ecmaVersion>=6&&!r)&&(e.generator=this.eat(SC.star)),this.options.ecmaVersion>=8&&(e.async=!!r),t&r_&&(e.id=4&t&&this.type!==SC.name?null:this.parseIdent(),!e.id||t&i_||this.checkLVal(e.id,this.inModule&&!this.inFunction?2:3));var i=this.yieldPos,s=this.awaitPos;return this.yieldPos=0,this.awaitPos=0,this.enterScope(qC(e.async,e.generator)),t&r_||(e.id=this.type===SC.name?this.parseIdent():null),this.parseFunctionParams(e),this.parseFunctionBody(e,n),this.yieldPos=i,this.awaitPos=s,this.finishNode(e,t&r_?"FunctionDeclaration":"FunctionExpression")},JC.parseFunctionParams=function(e){this.expect(SC.parenL),e.params=this.parseBindingList(SC.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams()},JC.parseClass=function(e,t){this.next(),this.parseClassId(e,t),this.parseClassSuper(e);var n=this.startNode(),r=!1;for(n.body=[],this.expect(SC.braceL);!this.eat(SC.braceR);){var i=this.parseClassElement(null!==e.superClass);i&&(n.body.push(i),"MethodDefinition"===i.type&&"constructor"===i.kind&&(r&&this.raise(i.start,"Duplicate constructor in the same class"),r=!0))}return e.body=this.finishNode(n,"ClassBody"),this.finishNode(e,t?"ClassDeclaration":"ClassExpression")},JC.parseClassElement=function(e){var t=this;if(this.eat(SC.semi))return null;var n=this.startNode(),r=function(e,r){void 0===r&&(r=!1);var i=t.start,s=t.startLoc;return!!t.eatContextual(e)&&(!(t.type===SC.parenL||r&&t.canInsertSemicolon())||(n.key&&t.unexpected(),n.computed=!1,n.key=t.startNodeAt(i,s),n.key.name=e,t.finishNode(n.key,"Identifier"),!1))};n.kind="method",n.static=r("static");var i=this.eat(SC.star),s=!1;i||(this.options.ecmaVersion>=8&&r("async",!0)?(s=!0,i=this.options.ecmaVersion>=9&&this.eat(SC.star)):r("get")?n.kind="get":r("set")&&(n.kind="set")),n.key||this.parsePropertyName(n);var a=n.key,o=!1;return n.computed||n.static||!("Identifier"===a.type&&"constructor"===a.name||"Literal"===a.type&&"constructor"===a.value)?n.static&&"Identifier"===a.type&&"prototype"===a.name&&this.raise(a.start,"Classes may not have a static property named prototype"):("method"!==n.kind&&this.raise(a.start,"Constructor can't have get/set modifier"),i&&this.raise(a.start,"Constructor can't be a generator"),s&&this.raise(a.start,"Constructor can't be an async method"),n.kind="constructor",o=e),this.parseClassMethod(n,i,s,o),"get"===n.kind&&0!==n.value.params.length&&this.raiseRecoverable(n.value.start,"getter should have no params"),"set"===n.kind&&1!==n.value.params.length&&this.raiseRecoverable(n.value.start,"setter should have exactly one param"),"set"===n.kind&&"RestElement"===n.value.params[0].type&&this.raiseRecoverable(n.value.params[0].start,"Setter cannot use rest params"),n},JC.parseClassMethod=function(e,t,n,r){return e.value=this.parseMethod(t,n,r),this.finishNode(e,"MethodDefinition")},JC.parseClassId=function(e,t){e.id=this.type===SC.name?this.parseIdent():!0===t?this.unexpected():null},JC.parseClassSuper=function(e){e.superClass=this.eat(SC._extends)?this.parseExprSubscripts():null},JC.parseExport=function(e,t){if(this.next(),this.eat(SC.star))return this.expectContextual("from"),this.type!==SC.string&&this.unexpected(),e.source=this.parseExprAtom(),this.semicolon(),this.finishNode(e,"ExportAllDeclaration");if(this.eat(SC._default)){var n;if(this.checkExport(t,"default",this.lastTokStart),this.type===SC._function||(n=this.isAsyncFunction())){var r=this.startNode();this.next(),n&&this.next(),e.declaration=this.parseFunction(r,4|r_,!1,n,!0)}else if(this.type===SC._class){var i=this.startNode();e.declaration=this.parseClass(i,"nullableID")}else e.declaration=this.parseMaybeAssign(),this.semicolon();return this.finishNode(e,"ExportDefaultDeclaration")}if(this.shouldParseExportStatement())e.declaration=this.parseStatement(null),"VariableDeclaration"===e.declaration.type?this.checkVariableExport(t,e.declaration.declarations):this.checkExport(t,e.declaration.id.name,e.declaration.id.start),e.specifiers=[],e.source=null;else{if(e.declaration=null,e.specifiers=this.parseExportSpecifiers(t),this.eatContextual("from"))this.type!==SC.string&&this.unexpected(),e.source=this.parseExprAtom();else{for(var s=0,a=e.specifiers;s<a.length;s+=1){var o=a[s];this.checkUnreserved(o.local)}e.source=null}this.semicolon()}return this.finishNode(e,"ExportNamedDeclaration")},JC.checkExport=function(e,t,n){e&&(RC(e,t)&&this.raiseRecoverable(n,"Duplicate export '"+t+"'"),e[t]=!0)},JC.checkPatternExport=function(e,t){var n=t.type;if("Identifier"===n)this.checkExport(e,t.name,t.start);else if("ObjectPattern"===n)for(var r=0,i=t.properties;r<i.length;r+=1){var s=i[r];this.checkPatternExport(e,s)}else if("ArrayPattern"===n)for(var a=0,o=t.elements;a<o.length;a+=1){var l=o[a];l&&this.checkPatternExport(e,l)}else"Property"===n?this.checkPatternExport(e,t.value):"AssignmentPattern"===n?this.checkPatternExport(e,t.left):"RestElement"===n?this.checkPatternExport(e,t.argument):"ParenthesizedExpression"===n&&this.checkPatternExport(e,t.expression)},JC.checkVariableExport=function(e,t){if(e)for(var n=0,r=t;n<r.length;n+=1){var i=r[n];this.checkPatternExport(e,i.id)}},JC.shouldParseExportStatement=function(){return"var"===this.type.keyword||"const"===this.type.keyword||"class"===this.type.keyword||"function"===this.type.keyword||this.isLet()||this.isAsyncFunction()},JC.parseExportSpecifiers=function(e){var t=[],n=!0;for(this.expect(SC.braceL);!this.eat(SC.braceR);){if(n)n=!1;else if(this.expect(SC.comma),this.afterTrailingComma(SC.braceR))break;var r=this.startNode();r.local=this.parseIdent(!0),r.exported=this.eatContextual("as")?this.parseIdent(!0):r.local,this.checkExport(e,r.exported.name,r.exported.start),t.push(this.finishNode(r,"ExportSpecifier"))}return t},JC.parseImport=function(e){return this.next(),this.type===SC.string?(e.specifiers=n_,e.source=this.parseExprAtom()):(e.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),e.source=this.type===SC.string?this.parseExprAtom():this.unexpected()),this.semicolon(),this.finishNode(e,"ImportDeclaration")},JC.parseImportSpecifiers=function(){var e=[],t=!0;if(this.type===SC.name){var n=this.startNode();if(n.local=this.parseIdent(),this.checkLVal(n.local,2),e.push(this.finishNode(n,"ImportDefaultSpecifier")),!this.eat(SC.comma))return e}if(this.type===SC.star){var r=this.startNode();return this.next(),this.expectContextual("as"),r.local=this.parseIdent(),this.checkLVal(r.local,2),e.push(this.finishNode(r,"ImportNamespaceSpecifier")),e}for(this.expect(SC.braceL);!this.eat(SC.braceR);){if(t)t=!1;else if(this.expect(SC.comma),this.afterTrailingComma(SC.braceR))break;var i=this.startNode();i.imported=this.parseIdent(!0),this.eatContextual("as")?i.local=this.parseIdent():(this.checkUnreserved(i.imported),i.local=i.imported),this.checkLVal(i.local,2),e.push(this.finishNode(i,"ImportSpecifier"))}return e},JC.adaptDirectivePrologue=function(e){for(var t=0;t<e.length&&this.isDirectiveCandidate(e[t]);++t)e[t].directive=e[t].expression.raw.slice(1,-1)},JC.isDirectiveCandidate=function(e){return"ExpressionStatement"===e.type&&"Literal"===e.expression.type&&"string"==typeof e.expression.value&&('"'===this.input[e.start]||"'"===this.input[e.start])};var s_=KC.prototype;s_.toAssignable=function(e,t,n){if(this.options.ecmaVersion>=6&&e)switch(e.type){case"Identifier":this.inAsync&&"await"===e.name&&this.raise(e.start,"Can not use 'await' as identifier inside an async function");break;case"ObjectPattern":case"ArrayPattern":case"RestElement":break;case"ObjectExpression":e.type="ObjectPattern",n&&this.checkPatternErrors(n,!0);for(var r=0,i=e.properties;r<i.length;r+=1){var s=i[r];this.toAssignable(s,t),"RestElement"!==s.type||"ArrayPattern"!==s.argument.type&&"ObjectPattern"!==s.argument.type||this.raise(s.argument.start,"Unexpected token")}break;case"Property":"init"!==e.kind&&this.raise(e.key.start,"Object pattern can't contain getter or setter"),this.toAssignable(e.value,t);break;case"ArrayExpression":e.type="ArrayPattern",n&&this.checkPatternErrors(n,!0),this.toAssignableList(e.elements,t);break;case"SpreadElement":e.type="RestElement",this.toAssignable(e.argument,t),"AssignmentPattern"===e.argument.type&&this.raise(e.argument.start,"Rest elements cannot have a default value");break;case"AssignmentExpression":"="!==e.operator&&this.raise(e.left.end,"Only '=' operator can be used for specifying default value."),e.type="AssignmentPattern",delete e.operator,this.toAssignable(e.left,t);case"AssignmentPattern":break;case"ParenthesizedExpression":this.toAssignable(e.expression,t);break;case"MemberExpression":if(!t)break;default:this.raise(e.start,"Assigning to rvalue")}else n&&this.checkPatternErrors(n,!0);return e},s_.toAssignableList=function(e,t){for(var n=e.length,r=0;r<n;r++){var i=e[r];i&&this.toAssignable(i,t)}if(n){var s=e[n-1];6===this.options.ecmaVersion&&t&&s&&"RestElement"===s.type&&"Identifier"!==s.argument.type&&this.unexpected(s.argument.start)}return e},s_.parseSpread=function(e){var t=this.startNode();return this.next(),t.argument=this.parseMaybeAssign(!1,e),this.finishNode(t,"SpreadElement")},s_.parseRestBinding=function(){var e=this.startNode();return this.next(),6===this.options.ecmaVersion&&this.type!==SC.name&&this.unexpected(),e.argument=this.parseBindingAtom(),this.finishNode(e,"RestElement")},s_.parseBindingAtom=function(){if(this.options.ecmaVersion>=6)switch(this.type){case SC.bracketL:var e=this.startNode();return this.next(),e.elements=this.parseBindingList(SC.bracketR,!0,!0),this.finishNode(e,"ArrayPattern");case SC.braceL:return this.parseObj(!0)}return this.parseIdent()},s_.parseBindingList=function(e,t,n){for(var r=[],i=!0;!this.eat(e);)if(i?i=!1:this.expect(SC.comma),t&&this.type===SC.comma)r.push(null);else{if(n&&this.afterTrailingComma(e))break;if(this.type===SC.ellipsis){var s=this.parseRestBinding();this.parseBindingListItem(s),r.push(s),this.type===SC.comma&&this.raise(this.start,"Comma is not permitted after the rest element"),this.expect(e);break}var a=this.parseMaybeDefault(this.start,this.startLoc);this.parseBindingListItem(a),r.push(a)}return r},s_.parseBindingListItem=function(e){return e},s_.parseMaybeDefault=function(e,t,n){if(n=n||this.parseBindingAtom(),this.options.ecmaVersion<6||!this.eat(SC.eq))return n;var r=this.startNodeAt(e,t);return r.left=n,r.right=this.parseMaybeAssign(),this.finishNode(r,"AssignmentPattern")},s_.checkLVal=function(e,t,n){switch(void 0===t&&(t=0),e.type){case"Identifier":this.strict&&this.reservedWordsStrictBind.test(e.name)&&this.raiseRecoverable(e.start,(t?"Binding ":"Assigning to ")+e.name+" in strict mode"),n&&(RC(n,e.name)&&this.raiseRecoverable(e.start,"Argument name clash"),n[e.name]=!0),0!==t&&5!==t&&this.declareName(e.name,t,e.start);break;case"MemberExpression":t&&this.raiseRecoverable(e.start,"Binding member expression");break;case"ObjectPattern":for(var r=0,i=e.properties;r<i.length;r+=1){var s=i[r];this.checkLVal(s,t,n)}break;case"Property":this.checkLVal(e.value,t,n);break;case"ArrayPattern":for(var a=0,o=e.elements;a<o.length;a+=1){var l=o[a];l&&this.checkLVal(l,t,n)}break;case"AssignmentPattern":this.checkLVal(e.left,t,n);break;case"RestElement":this.checkLVal(e.argument,t,n);break;case"ParenthesizedExpression":this.checkLVal(e.expression,t,n);break;default:this.raise(e.start,(t?"Binding":"Assigning to")+" rvalue")}};var a_=KC.prototype;a_.checkPropClash=function(e,t,n){if(!(this.options.ecmaVersion>=9&&"SpreadElement"===e.type||this.options.ecmaVersion>=6&&(e.computed||e.method||e.shorthand))){var r,i=e.key;switch(i.type){case"Identifier":r=i.name;break;case"Literal":r=String(i.value);break;default:return}var s=e.kind;if(this.options.ecmaVersion>=6)"__proto__"===r&&"init"===s&&(t.proto&&(n&&n.doubleProto<0?n.doubleProto=i.start:this.raiseRecoverable(i.start,"Redefinition of __proto__ property")),t.proto=!0);else{var a=t[r="$"+r];if(a)("init"===s?this.strict&&a.init||a.get||a.set:a.init||a[s])&&this.raiseRecoverable(i.start,"Redefinition of property");else a=t[r]={init:!1,get:!1,set:!1};a[s]=!0}}},a_.parseExpression=function(e,t){var n=this.start,r=this.startLoc,i=this.parseMaybeAssign(e,t);if(this.type===SC.comma){var s=this.startNodeAt(n,r);for(s.expressions=[i];this.eat(SC.comma);)s.expressions.push(this.parseMaybeAssign(e,t));return this.finishNode(s,"SequenceExpression")}return i},a_.parseMaybeAssign=function(e,t,n){if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield();this.exprAllowed=!1}var r=!1,i=-1,s=-1,a=-1;t?(i=t.parenthesizedAssign,s=t.trailingComma,a=t.shorthandAssign,t.parenthesizedAssign=t.trailingComma=t.shorthandAssign=-1):(t=new XC,r=!0);var o=this.start,l=this.startLoc;this.type!==SC.parenL&&this.type!==SC.name||(this.potentialArrowAt=this.start);var c=this.parseMaybeConditional(e,t);if(n&&(c=n.call(this,c,o,l)),this.type.isAssign){var u=this.startNodeAt(o,l);return u.operator=this.value,u.left=this.type===SC.eq?this.toAssignable(c,!1,t):c,r||XC.call(t),t.shorthandAssign=-1,this.checkLVal(c),this.next(),u.right=this.parseMaybeAssign(e),this.finishNode(u,"AssignmentExpression")}return r&&this.checkExpressionErrors(t,!0),i>-1&&(t.parenthesizedAssign=i),s>-1&&(t.trailingComma=s),a>-1&&(t.shorthandAssign=a),c},a_.parseMaybeConditional=function(e,t){var n=this.start,r=this.startLoc,i=this.parseExprOps(e,t);if(this.checkExpressionErrors(t))return i;if(this.eat(SC.question)){var s=this.startNodeAt(n,r);return s.test=i,s.consequent=this.parseMaybeAssign(),this.expect(SC.colon),s.alternate=this.parseMaybeAssign(e),this.finishNode(s,"ConditionalExpression")}return i},a_.parseExprOps=function(e,t){var n=this.start,r=this.startLoc,i=this.parseMaybeUnary(t,!1);return this.checkExpressionErrors(t)?i:i.start===n&&"ArrowFunctionExpression"===i.type?i:this.parseExprOp(i,n,r,-1,e)},a_.parseExprOp=function(e,t,n,r,i){var s=this.type.binop;if(null!=s&&(!i||this.type!==SC._in)&&s>r){var a=this.type===SC.logicalOR||this.type===SC.logicalAND,o=this.value;this.next();var l=this.start,c=this.startLoc,u=this.parseExprOp(this.parseMaybeUnary(null,!1),l,c,s,i),h=this.buildBinary(t,n,e,u,o,a);return this.parseExprOp(h,t,n,r,i)}return e},a_.buildBinary=function(e,t,n,r,i,s){var a=this.startNodeAt(e,t);return a.left=n,a.operator=i,a.right=r,this.finishNode(a,s?"LogicalExpression":"BinaryExpression")},a_.parseMaybeUnary=function(e,t){var n,r=this.start,i=this.startLoc;if(this.isContextual("await")&&(this.inAsync||!this.inFunction&&this.options.allowAwaitOutsideFunction))n=this.parseAwait(),t=!0;else if(this.type.prefix){var s=this.startNode(),a=this.type===SC.incDec;s.operator=this.value,s.prefix=!0,this.next(),s.argument=this.parseMaybeUnary(null,!0),this.checkExpressionErrors(e,!0),a?this.checkLVal(s.argument):this.strict&&"delete"===s.operator&&"Identifier"===s.argument.type?this.raiseRecoverable(s.start,"Deleting local variable in strict mode"):t=!0,n=this.finishNode(s,a?"UpdateExpression":"UnaryExpression")}else{if(n=this.parseExprSubscripts(e),this.checkExpressionErrors(e))return n;for(;this.type.postfix&&!this.canInsertSemicolon();){var o=this.startNodeAt(r,i);o.operator=this.value,o.prefix=!1,o.argument=n,this.checkLVal(n),this.next(),n=this.finishNode(o,"UpdateExpression")}}return!t&&this.eat(SC.starstar)?this.buildBinary(r,i,n,this.parseMaybeUnary(null,!1),"**",!1):n},a_.parseExprSubscripts=function(e){var t=this.start,n=this.startLoc,r=this.parseExprAtom(e),i="ArrowFunctionExpression"===r.type&&")"!==this.input.slice(this.lastTokStart,this.lastTokEnd);if(this.checkExpressionErrors(e)||i)return r;var s=this.parseSubscripts(r,t,n);return e&&"MemberExpression"===s.type&&(e.parenthesizedAssign>=s.start&&(e.parenthesizedAssign=-1),e.parenthesizedBind>=s.start&&(e.parenthesizedBind=-1)),s},a_.parseSubscripts=function(e,t,n,r){for(var i=this.options.ecmaVersion>=8&&"Identifier"===e.type&&"async"===e.name&&this.lastTokEnd===e.end&&!this.canInsertSemicolon()&&"async"===this.input.slice(e.start,e.end),s=void 0;;)if((s=this.eat(SC.bracketL))||this.eat(SC.dot)){var a=this.startNodeAt(t,n);a.object=e,a.property=s?this.parseExpression():this.parseIdent(!0),a.computed=!!s,s&&this.expect(SC.bracketR),e=this.finishNode(a,"MemberExpression")}else if(!r&&this.eat(SC.parenL)){var o=new XC,l=this.yieldPos,c=this.awaitPos;this.yieldPos=0,this.awaitPos=0;var u=this.parseExprList(SC.parenR,this.options.ecmaVersion>=8,!1,o);if(i&&!this.canInsertSemicolon()&&this.eat(SC.arrow))return this.checkPatternErrors(o,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=l,this.awaitPos=c,this.parseArrowExpression(this.startNodeAt(t,n),u,!0);this.checkExpressionErrors(o,!0),this.yieldPos=l||this.yieldPos,this.awaitPos=c||this.awaitPos;var h=this.startNodeAt(t,n);h.callee=e,h.arguments=u,e=this.finishNode(h,"CallExpression")}else{if(this.type!==SC.backQuote)return e;var p=this.startNodeAt(t,n);p.tag=e,p.quasi=this.parseTemplate({isTagged:!0}),e=this.finishNode(p,"TaggedTemplateExpression")}},a_.parseExprAtom=function(e){this.type===SC.slash&&this.readRegexp();var t,n=this.potentialArrowAt===this.start;switch(this.type){case SC._super:return this.allowSuper||this.raise(this.start,"'super' keyword outside a method"),t=this.startNode(),this.next(),this.type!==SC.parenL||this.allowDirectSuper||this.raise(t.start,"super() call outside constructor of a subclass"),this.type!==SC.dot&&this.type!==SC.bracketL&&this.type!==SC.parenL&&this.unexpected(),this.finishNode(t,"Super");case SC._this:return t=this.startNode(),this.next(),this.finishNode(t,"ThisExpression");case SC.name:var r=this.start,i=this.startLoc,s=this.containsEsc,a=this.parseIdent(this.type!==SC.name);if(this.options.ecmaVersion>=8&&!s&&"async"===a.name&&!this.canInsertSemicolon()&&this.eat(SC._function))return this.parseFunction(this.startNodeAt(r,i),0,!1,!0);if(n&&!this.canInsertSemicolon()){if(this.eat(SC.arrow))return this.parseArrowExpression(this.startNodeAt(r,i),[a],!1);if(this.options.ecmaVersion>=8&&"async"===a.name&&this.type===SC.name&&!s)return a=this.parseIdent(),!this.canInsertSemicolon()&&this.eat(SC.arrow)||this.unexpected(),this.parseArrowExpression(this.startNodeAt(r,i),[a],!0)}return a;case SC.regexp:var o=this.value;return(t=this.parseLiteral(o.value)).regex={pattern:o.pattern,flags:o.flags},t;case SC.num:case SC.string:return this.parseLiteral(this.value);case SC._null:case SC._true:case SC._false:return(t=this.startNode()).value=this.type===SC._null?null:this.type===SC._true,t.raw=this.type.keyword,this.next(),this.finishNode(t,"Literal");case SC.parenL:var l=this.start,c=this.parseParenAndDistinguishExpression(n);return e&&(e.parenthesizedAssign<0&&!this.isSimpleAssignTarget(c)&&(e.parenthesizedAssign=l),e.parenthesizedBind<0&&(e.parenthesizedBind=l)),c;case SC.bracketL:return t=this.startNode(),this.next(),t.elements=this.parseExprList(SC.bracketR,!0,!0,e),this.finishNode(t,"ArrayExpression");case SC.braceL:return this.parseObj(!1,e);case SC._function:return t=this.startNode(),this.next(),this.parseFunction(t,0);case SC._class:return this.parseClass(this.startNode(),!1);case SC._new:return this.parseNew();case SC.backQuote:return this.parseTemplate();default:this.unexpected()}},a_.parseLiteral=function(e){var t=this.startNode();return t.value=e,t.raw=this.input.slice(this.start,this.end),this.next(),this.finishNode(t,"Literal")},a_.parseParenExpression=function(){this.expect(SC.parenL);var e=this.parseExpression();return this.expect(SC.parenR),e},a_.parseParenAndDistinguishExpression=function(e){var t,n=this.start,r=this.startLoc,i=this.options.ecmaVersion>=8;if(this.options.ecmaVersion>=6){this.next();var s,a=this.start,o=this.startLoc,l=[],c=!0,u=!1,h=new XC,p=this.yieldPos,d=this.awaitPos;for(this.yieldPos=0,this.awaitPos=0;this.type!==SC.parenR;){if(c?c=!1:this.expect(SC.comma),i&&this.afterTrailingComma(SC.parenR,!0)){u=!0;break}if(this.type===SC.ellipsis){s=this.start,l.push(this.parseParenItem(this.parseRestBinding())),this.type===SC.comma&&this.raise(this.start,"Comma is not permitted after the rest element");break}l.push(this.parseMaybeAssign(!1,h,this.parseParenItem))}var f=this.start,m=this.startLoc;if(this.expect(SC.parenR),e&&!this.canInsertSemicolon()&&this.eat(SC.arrow))return this.checkPatternErrors(h,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=p,this.awaitPos=d,this.parseParenArrowList(n,r,l);l.length&&!u||this.unexpected(this.lastTokStart),s&&this.unexpected(s),this.checkExpressionErrors(h,!0),this.yieldPos=p||this.yieldPos,this.awaitPos=d||this.awaitPos,l.length>1?((t=this.startNodeAt(a,o)).expressions=l,this.finishNodeAt(t,"SequenceExpression",f,m)):t=l[0]}else t=this.parseParenExpression();if(this.options.preserveParens){var g=this.startNodeAt(n,r);return g.expression=t,this.finishNode(g,"ParenthesizedExpression")}return t},a_.parseParenItem=function(e){return e},a_.parseParenArrowList=function(e,t,n){return this.parseArrowExpression(this.startNodeAt(e,t),n)};var o_=[];a_.parseNew=function(){var e=this.startNode(),t=this.parseIdent(!0);if(this.options.ecmaVersion>=6&&this.eat(SC.dot)){e.meta=t;var n=this.containsEsc;return e.property=this.parseIdent(!0),("target"!==e.property.name||n)&&this.raiseRecoverable(e.property.start,"The only valid meta property for new is new.target"),this.inNonArrowFunction()||this.raiseRecoverable(e.start,"new.target can only be used in functions"),this.finishNode(e,"MetaProperty")}var r=this.start,i=this.startLoc;return e.callee=this.parseSubscripts(this.parseExprAtom(),r,i,!0),this.eat(SC.parenL)?e.arguments=this.parseExprList(SC.parenR,this.options.ecmaVersion>=8,!1):e.arguments=o_,this.finishNode(e,"NewExpression")},a_.parseTemplateElement=function(e){var t=e.isTagged,n=this.startNode();return this.type===SC.invalidTemplate?(t||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),n.value={raw:this.value,cooked:null}):n.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,"\n"),cooked:this.value},this.next(),n.tail=this.type===SC.backQuote,this.finishNode(n,"TemplateElement")},a_.parseTemplate=function(e){void 0===e&&(e={});var t=e.isTagged;void 0===t&&(t=!1);var n=this.startNode();this.next(),n.expressions=[];var r=this.parseTemplateElement({isTagged:t});for(n.quasis=[r];!r.tail;)this.type===SC.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect(SC.dollarBraceL),n.expressions.push(this.parseExpression()),this.expect(SC.braceR),n.quasis.push(r=this.parseTemplateElement({isTagged:t}));return this.next(),this.finishNode(n,"TemplateLiteral")},a_.isAsyncProp=function(e){return!e.computed&&"Identifier"===e.key.type&&"async"===e.key.name&&(this.type===SC.name||this.type===SC.num||this.type===SC.string||this.type===SC.bracketL||this.type.keyword||this.options.ecmaVersion>=9&&this.type===SC.star)&&!NC.test(this.input.slice(this.lastTokEnd,this.start))},a_.parseObj=function(e,t){var n=this.startNode(),r=!0,i={};for(n.properties=[],this.next();!this.eat(SC.braceR);){if(r)r=!1;else if(this.expect(SC.comma),this.afterTrailingComma(SC.braceR))break;var s=this.parseProperty(e,t);e||this.checkPropClash(s,i,t),n.properties.push(s)}return this.finishNode(n,e?"ObjectPattern":"ObjectExpression")},a_.parseProperty=function(e,t){var n,r,i,s,a=this.startNode();if(this.options.ecmaVersion>=9&&this.eat(SC.ellipsis))return e?(a.argument=this.parseIdent(!1),this.type===SC.comma&&this.raise(this.start,"Comma is not permitted after the rest element"),this.finishNode(a,"RestElement")):(this.type===SC.parenL&&t&&(t.parenthesizedAssign<0&&(t.parenthesizedAssign=this.start),t.parenthesizedBind<0&&(t.parenthesizedBind=this.start)),a.argument=this.parseMaybeAssign(!1,t),this.type===SC.comma&&t&&t.trailingComma<0&&(t.trailingComma=this.start),this.finishNode(a,"SpreadElement"));this.options.ecmaVersion>=6&&(a.method=!1,a.shorthand=!1,(e||t)&&(i=this.start,s=this.startLoc),e||(n=this.eat(SC.star)));var o=this.containsEsc;return this.parsePropertyName(a),!e&&!o&&this.options.ecmaVersion>=8&&!n&&this.isAsyncProp(a)?(r=!0,n=this.options.ecmaVersion>=9&&this.eat(SC.star),this.parsePropertyName(a,t)):r=!1,this.parsePropertyValue(a,e,n,r,i,s,t,o),this.finishNode(a,"Property")},a_.parsePropertyValue=function(e,t,n,r,i,s,a,o){if((n||r)&&this.type===SC.colon&&this.unexpected(),this.eat(SC.colon))e.value=t?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,a),e.kind="init";else if(this.options.ecmaVersion>=6&&this.type===SC.parenL)t&&this.unexpected(),e.kind="init",e.method=!0,e.value=this.parseMethod(n,r);else if(t||o||!(this.options.ecmaVersion>=5)||e.computed||"Identifier"!==e.key.type||"get"!==e.key.name&&"set"!==e.key.name||this.type===SC.comma||this.type===SC.braceR)this.options.ecmaVersion>=6&&!e.computed&&"Identifier"===e.key.type?(this.checkUnreserved(e.key),e.kind="init",t?e.value=this.parseMaybeDefault(i,s,e.key):this.type===SC.eq&&a?(a.shorthandAssign<0&&(a.shorthandAssign=this.start),e.value=this.parseMaybeDefault(i,s,e.key)):e.value=e.key,e.shorthand=!0):this.unexpected();else{(n||r)&&this.unexpected(),e.kind=e.key.name,this.parsePropertyName(e),e.value=this.parseMethod(!1);var l="get"===e.kind?0:1;if(e.value.params.length!==l){var c=e.value.start;"get"===e.kind?this.raiseRecoverable(c,"getter should have no params"):this.raiseRecoverable(c,"setter should have exactly one param")}else"set"===e.kind&&"RestElement"===e.value.params[0].type&&this.raiseRecoverable(e.value.params[0].start,"Setter cannot use rest params")}},a_.parsePropertyName=function(e){if(this.options.ecmaVersion>=6){if(this.eat(SC.bracketL))return e.computed=!0,e.key=this.parseMaybeAssign(),this.expect(SC.bracketR),e.key;e.computed=!1}return e.key=this.type===SC.num||this.type===SC.string?this.parseExprAtom():this.parseIdent(!0)},a_.initFunction=function(e){e.id=null,this.options.ecmaVersion>=6&&(e.generator=e.expression=!1),this.options.ecmaVersion>=8&&(e.async=!1)},a_.parseMethod=function(e,t,n){var r=this.startNode(),i=this.yieldPos,s=this.awaitPos;return this.initFunction(r),this.options.ecmaVersion>=6&&(r.generator=e),this.options.ecmaVersion>=8&&(r.async=!!t),this.yieldPos=0,this.awaitPos=0,this.enterScope(64|qC(t,r.generator)|(n?128:0)),this.expect(SC.parenL),r.params=this.parseBindingList(SC.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams(),this.parseFunctionBody(r,!1),this.yieldPos=i,this.awaitPos=s,this.finishNode(r,"FunctionExpression")},a_.parseArrowExpression=function(e,t,n){var r=this.yieldPos,i=this.awaitPos;return this.enterScope(16|qC(n,!1)),this.initFunction(e),this.options.ecmaVersion>=8&&(e.async=!!n),this.yieldPos=0,this.awaitPos=0,e.params=this.toAssignableList(t,!0),this.parseFunctionBody(e,!0),this.yieldPos=r,this.awaitPos=i,this.finishNode(e,"ArrowFunctionExpression")},a_.parseFunctionBody=function(e,t){var n=t&&this.type!==SC.braceL,r=this.strict,i=!1;if(n)e.body=this.parseMaybeAssign(),e.expression=!0,this.checkParams(e,!1);else{var s=this.options.ecmaVersion>=7&&!this.isSimpleParamList(e.params);r&&!s||(i=this.strictDirective(this.end))&&s&&this.raiseRecoverable(e.start,"Illegal 'use strict' directive in function with non-simple parameter list");var a=this.labels;this.labels=[],i&&(this.strict=!0),this.checkParams(e,!r&&!i&&!t&&this.isSimpleParamList(e.params)),e.body=this.parseBlock(!1),e.expression=!1,this.adaptDirectivePrologue(e.body.body),this.labels=a}this.exitScope(),this.strict&&e.id&&this.checkLVal(e.id,5),this.strict=r},a_.isSimpleParamList=function(e){for(var t=0,n=e;t<n.length;t+=1){if("Identifier"!==n[t].type)return!1}return!0},a_.checkParams=function(e,t){for(var n={},r=0,i=e.params;r<i.length;r+=1){var s=i[r];this.checkLVal(s,1,t?null:n)}},a_.parseExprList=function(e,t,n,r){for(var i=[],s=!0;!this.eat(e);){if(s)s=!1;else if(this.expect(SC.comma),t&&this.afterTrailingComma(e))break;var a=void 0;n&&this.type===SC.comma?a=null:this.type===SC.ellipsis?(a=this.parseSpread(r),r&&this.type===SC.comma&&r.trailingComma<0&&(r.trailingComma=this.start)):a=this.parseMaybeAssign(!1,r),i.push(a)}return i},a_.checkUnreserved=function(e){var t=e.start,n=e.end,r=e.name;(this.inGenerator&&"yield"===r&&this.raiseRecoverable(t,"Can not use 'yield' as identifier inside a generator"),this.inAsync&&"await"===r&&this.raiseRecoverable(t,"Can not use 'await' as identifier inside an async function"),this.keywords.test(r)&&this.raise(t,"Unexpected keyword '"+r+"'"),this.options.ecmaVersion<6&&-1!==this.input.slice(t,n).indexOf("\\"))||(this.strict?this.reservedWordsStrict:this.reservedWords).test(r)&&(this.inAsync||"await"!==r||this.raiseRecoverable(t,"Can not use keyword 'await' outside an async function"),this.raiseRecoverable(t,"The keyword '"+r+"' is reserved"))},a_.parseIdent=function(e,t){var n=this.startNode();return e&&"never"===this.options.allowReserved&&(e=!1),this.type===SC.name?n.name=this.value:this.type.keyword?(n.name=this.type.keyword,"class"!==n.name&&"function"!==n.name||this.lastTokEnd===this.lastTokStart+1&&46===this.input.charCodeAt(this.lastTokStart)||this.context.pop()):this.unexpected(),this.next(),this.finishNode(n,"Identifier"),e||this.checkUnreserved(n),n},a_.parseYield=function(){this.yieldPos||(this.yieldPos=this.start);var e=this.startNode();return this.next(),this.type===SC.semi||this.canInsertSemicolon()||this.type!==SC.star&&!this.type.startsExpr?(e.delegate=!1,e.argument=null):(e.delegate=this.eat(SC.star),e.argument=this.parseMaybeAssign()),this.finishNode(e,"YieldExpression")},a_.parseAwait=function(){this.awaitPos||(this.awaitPos=this.start);var e=this.startNode();return this.next(),e.argument=this.parseMaybeUnary(null,!0),this.finishNode(e,"AwaitExpression")};var l_=KC.prototype;l_.raise=function(e,t){var n=jC(this.input,e);t+=" ("+n.line+":"+n.column+")";var r=new SyntaxError(t);throw r.pos=e,r.loc=n,r.raisedAt=this.pos,r},l_.raiseRecoverable=l_.raise,l_.curPosition=function(){if(this.options.locations)return new FC(this.curLine,this.pos-this.lineStart)};var c_=KC.prototype,u_=function(e){this.flags=e,this.var=[],this.lexical=[]};c_.enterScope=function(e){this.scopeStack.push(new u_(e))},c_.exitScope=function(){this.scopeStack.pop()},c_.declareName=function(e,t,n){var r=!1;if(2===t){var i=this.currentScope();r=i.lexical.indexOf(e)>-1||i.var.indexOf(e)>-1,i.lexical.push(e)}else if(4===t){this.currentScope().lexical.push(e)}else if(3===t){var s=this.currentScope();r=s.lexical.indexOf(e)>-1,s.var.push(e)}else for(var a=this.scopeStack.length-1;a>=0;--a){var o=this.scopeStack[a];if(o.lexical.indexOf(e)>-1&&!(32&o.flags)&&o.lexical[0]===e&&(r=!0),o.var.push(e),o.flags&$C)break}r&&this.raiseRecoverable(n,"Identifier '"+e+"' has already been declared")},c_.currentScope=function(){return this.scopeStack[this.scopeStack.length-1]},c_.currentVarScope=function(){for(var e=this.scopeStack.length-1;;e--){var t=this.scopeStack[e];if(t.flags&$C)return t}},c_.currentThisScope=function(){for(var e=this.scopeStack.length-1;;e--){var t=this.scopeStack[e];if(t.flags&$C&&!(16&t.flags))return t}};var h_=function(e,t,n){this.type="",this.start=t,this.end=0,e.options.locations&&(this.loc=new VC(e,n)),e.options.directSourceFile&&(this.sourceFile=e.options.directSourceFile),e.options.ranges&&(this.range=[t,0])},p_=KC.prototype;function d_(e,t,n,r){return e.type=t,e.end=n,this.options.locations&&(e.loc.end=r),this.options.ranges&&(e.range[1]=n),e}p_.startNode=function(){return new h_(this,this.start,this.startLoc)},p_.startNodeAt=function(e,t){return new h_(this,e,t)},p_.finishNode=function(e,t){return d_.call(this,e,t,this.lastTokEnd,this.lastTokEndLoc)},p_.finishNodeAt=function(e,t,n,r){return d_.call(this,e,t,n,r)};var f_=function(e,t,n,r,i){this.token=e,this.isExpr=!!t,this.preserveSpace=!!n,this.override=r,this.generator=!!i},m_={b_stat:new f_("{",!1),b_expr:new f_("{",!0),b_tmpl:new f_("${",!1),p_stat:new f_("(",!1),p_expr:new f_("(",!0),q_tmpl:new f_("`",!0,!0,function(e){return e.tryReadTemplateToken()}),f_stat:new f_("function",!1),f_expr:new f_("function",!0),f_expr_gen:new f_("function",!0,!1,null,!0),f_gen:new f_("function",!1,!1,null,!0)},g_=KC.prototype;g_.initialContext=function(){return[m_.b_stat]},g_.braceIsBlock=function(e){var t=this.curContext();return t===m_.f_expr||t===m_.f_stat||(e!==SC.colon||t!==m_.b_stat&&t!==m_.b_expr?e===SC._return||e===SC.name&&this.exprAllowed?NC.test(this.input.slice(this.lastTokEnd,this.start)):e===SC._else||e===SC.semi||e===SC.eof||e===SC.parenR||e===SC.arrow||(e===SC.braceL?t===m_.b_stat:e!==SC._var&&e!==SC._const&&e!==SC.name&&!this.exprAllowed):!t.isExpr)},g_.inGeneratorContext=function(){for(var e=this.context.length-1;e>=1;e--){var t=this.context[e];if("function"===t.token)return t.generator}return!1},g_.updateContext=function(e){var t,n=this.type;n.keyword&&e===SC.dot?this.exprAllowed=!1:(t=n.updateContext)?t.call(this,e):this.exprAllowed=n.beforeExpr},SC.parenR.updateContext=SC.braceR.updateContext=function(){if(1!==this.context.length){var e=this.context.pop();e===m_.b_stat&&"function"===this.curContext().token&&(e=this.context.pop()),this.exprAllowed=!e.isExpr}else this.exprAllowed=!0},SC.braceL.updateContext=function(e){this.context.push(this.braceIsBlock(e)?m_.b_stat:m_.b_expr),this.exprAllowed=!0},SC.dollarBraceL.updateContext=function(){this.context.push(m_.b_tmpl),this.exprAllowed=!0},SC.parenL.updateContext=function(e){var t=e===SC._if||e===SC._for||e===SC._with||e===SC._while;this.context.push(t?m_.p_stat:m_.p_expr),this.exprAllowed=!0},SC.incDec.updateContext=function(){},SC._function.updateContext=SC._class.updateContext=function(e){!e.beforeExpr||e===SC.semi||e===SC._else||e===SC._return&&NC.test(this.input.slice(this.lastTokEnd,this.start))||(e===SC.colon||e===SC.braceL)&&this.curContext()===m_.b_stat?this.context.push(m_.f_stat):this.context.push(m_.f_expr),this.exprAllowed=!1},SC.backQuote.updateContext=function(){this.curContext()===m_.q_tmpl?this.context.pop():this.context.push(m_.q_tmpl),this.exprAllowed=!1},SC.star.updateContext=function(e){if(e===SC._function){var t=this.context.length-1;this.context[t]===m_.f_expr?this.context[t]=m_.f_expr_gen:this.context[t]=m_.f_gen}this.exprAllowed=!0},SC.name.updateContext=function(e){var t=!1;this.options.ecmaVersion>=6&&e!==SC.dot&&("of"===this.value&&!this.exprAllowed||"yield"===this.value&&this.inGeneratorContext())&&(t=!0),this.exprAllowed=t};var v_={$LONE:["ASCII","ASCII_Hex_Digit","AHex","Alphabetic","Alpha","Any","Assigned","Bidi_Control","Bidi_C","Bidi_Mirrored","Bidi_M","Case_Ignorable","CI","Cased","Changes_When_Casefolded","CWCF","Changes_When_Casemapped","CWCM","Changes_When_Lowercased","CWL","Changes_When_NFKC_Casefolded","CWKCF","Changes_When_Titlecased","CWT","Changes_When_Uppercased","CWU","Dash","Default_Ignorable_Code_Point","DI","Deprecated","Dep","Diacritic","Dia","Emoji","Emoji_Component","Emoji_Modifier","Emoji_Modifier_Base","Emoji_Presentation","Extender","Ext","Grapheme_Base","Gr_Base","Grapheme_Extend","Gr_Ext","Hex_Digit","Hex","IDS_Binary_Operator","IDSB","IDS_Trinary_Operator","IDST","ID_Continue","IDC","ID_Start","IDS","Ideographic","Ideo","Join_Control","Join_C","Logical_Order_Exception","LOE","Lowercase","Lower","Math","Noncharacter_Code_Point","NChar","Pattern_Syntax","Pat_Syn","Pattern_White_Space","Pat_WS","Quotation_Mark","QMark","Radical","Regional_Indicator","RI","Sentence_Terminal","STerm","Soft_Dotted","SD","Terminal_Punctuation","Term","Unified_Ideograph","UIdeo","Uppercase","Upper","Variation_Selector","VS","White_Space","space","XID_Continue","XIDC","XID_Start","XIDS"],General_Category:["Cased_Letter","LC","Close_Punctuation","Pe","Connector_Punctuation","Pc","Control","Cc","cntrl","Currency_Symbol","Sc","Dash_Punctuation","Pd","Decimal_Number","Nd","digit","Enclosing_Mark","Me","Final_Punctuation","Pf","Format","Cf","Initial_Punctuation","Pi","Letter","L","Letter_Number","Nl","Line_Separator","Zl","Lowercase_Letter","Ll","Mark","M","Combining_Mark","Math_Symbol","Sm","Modifier_Letter","Lm","Modifier_Symbol","Sk","Nonspacing_Mark","Mn","Number","N","Open_Punctuation","Ps","Other","C","Other_Letter","Lo","Other_Number","No","Other_Punctuation","Po","Other_Symbol","So","Paragraph_Separator","Zp","Private_Use","Co","Punctuation","P","punct","Separator","Z","Space_Separator","Zs","Spacing_Mark","Mc","Surrogate","Cs","Symbol","S","Titlecase_Letter","Lt","Unassigned","Cn","Uppercase_Letter","Lu"],Script:["Adlam","Adlm","Ahom","Anatolian_Hieroglyphs","Hluw","Arabic","Arab","Armenian","Armn","Avestan","Avst","Balinese","Bali","Bamum","Bamu","Bassa_Vah","Bass","Batak","Batk","Bengali","Beng","Bhaiksuki","Bhks","Bopomofo","Bopo","Brahmi","Brah","Braille","Brai","Buginese","Bugi","Buhid","Buhd","Canadian_Aboriginal","Cans","Carian","Cari","Caucasian_Albanian","Aghb","Chakma","Cakm","Cham","Cherokee","Cher","Common","Zyyy","Coptic","Copt","Qaac","Cuneiform","Xsux","Cypriot","Cprt","Cyrillic","Cyrl","Deseret","Dsrt","Devanagari","Deva","Duployan","Dupl","Egyptian_Hieroglyphs","Egyp","Elbasan","Elba","Ethiopic","Ethi","Georgian","Geor","Glagolitic","Glag","Gothic","Goth","Grantha","Gran","Greek","Grek","Gujarati","Gujr","Gurmukhi","Guru","Han","Hani","Hangul","Hang","Hanunoo","Hano","Hatran","Hatr","Hebrew","Hebr","Hiragana","Hira","Imperial_Aramaic","Armi","Inherited","Zinh","Qaai","Inscriptional_Pahlavi","Phli","Inscriptional_Parthian","Prti","Javanese","Java","Kaithi","Kthi","Kannada","Knda","Katakana","Kana","Kayah_Li","Kali","Kharoshthi","Khar","Khmer","Khmr","Khojki","Khoj","Khudawadi","Sind","Lao","Laoo","Latin","Latn","Lepcha","Lepc","Limbu","Limb","Linear_A","Lina","Linear_B","Linb","Lisu","Lycian","Lyci","Lydian","Lydi","Mahajani","Mahj","Malayalam","Mlym","Mandaic","Mand","Manichaean","Mani","Marchen","Marc","Masaram_Gondi","Gonm","Meetei_Mayek","Mtei","Mende_Kikakui","Mend","Meroitic_Cursive","Merc","Meroitic_Hieroglyphs","Mero","Miao","Plrd","Modi","Mongolian","Mong","Mro","Mroo","Multani","Mult","Myanmar","Mymr","Nabataean","Nbat","New_Tai_Lue","Talu","Newa","Nko","Nkoo","Nushu","Nshu","Ogham","Ogam","Ol_Chiki","Olck","Old_Hungarian","Hung","Old_Italic","Ital","Old_North_Arabian","Narb","Old_Permic","Perm","Old_Persian","Xpeo","Old_South_Arabian","Sarb","Old_Turkic","Orkh","Oriya","Orya","Osage","Osge","Osmanya","Osma","Pahawh_Hmong","Hmng","Palmyrene","Palm","Pau_Cin_Hau","Pauc","Phags_Pa","Phag","Phoenician","Phnx","Psalter_Pahlavi","Phlp","Rejang","Rjng","Runic","Runr","Samaritan","Samr","Saurashtra","Saur","Sharada","Shrd","Shavian","Shaw","Siddham","Sidd","SignWriting","Sgnw","Sinhala","Sinh","Sora_Sompeng","Sora","Soyombo","Soyo","Sundanese","Sund","Syloti_Nagri","Sylo","Syriac","Syrc","Tagalog","Tglg","Tagbanwa","Tagb","Tai_Le","Tale","Tai_Tham","Lana","Tai_Viet","Tavt","Takri","Takr","Tamil","Taml","Tangut","Tang","Telugu","Telu","Thaana","Thaa","Thai","Tibetan","Tibt","Tifinagh","Tfng","Tirhuta","Tirh","Ugaritic","Ugar","Vai","Vaii","Warang_Citi","Wara","Yi","Yiii","Zanabazar_Square","Zanb"]};Array.prototype.push.apply(v_.$LONE,v_.General_Category),v_.gc=v_.General_Category,v_.sc=v_.Script_Extensions=v_.scx=v_.Script;var b_=KC.prototype,y_=function(e){this.parser=e,this.validFlags="gim"+(e.options.ecmaVersion>=6?"uy":"")+(e.options.ecmaVersion>=9?"s":""),this.source="",this.flags="",this.start=0,this.switchU=!1,this.switchN=!1,this.pos=0,this.lastIntValue=0,this.lastStringValue="",this.lastAssertionIsQuantifiable=!1,this.numCapturingParens=0,this.maxBackReference=0,this.groupNames=[],this.backReferenceNames=[]};function w_(e){return e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode(55296+(e>>10),56320+(1023&e)))}function x_(e){return 36===e||e>=40&&e<=43||46===e||63===e||e>=91&&e<=94||e>=123&&e<=125}function E_(e){return e>=65&&e<=90||e>=97&&e<=122}function k_(e){return E_(e)||95===e}function C_(e){return k_(e)||__(e)}function __(e){return e>=48&&e<=57}function S_(e){return e>=48&&e<=57||e>=65&&e<=70||e>=97&&e<=102}function N_(e){return e>=65&&e<=70?e-65+10:e>=97&&e<=102?e-97+10:e-48}function T_(e){return e>=48&&e<=55}y_.prototype.reset=function(e,t,n){var r=-1!==n.indexOf("u");this.start=0|e,this.source=t+"",this.flags=n,this.switchU=r&&this.parser.options.ecmaVersion>=6,this.switchN=r&&this.parser.options.ecmaVersion>=9},y_.prototype.raise=function(e){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+e)},y_.prototype.at=function(e){var t=this.source,n=t.length;if(e>=n)return-1;var r=t.charCodeAt(e);return!this.switchU||r<=55295||r>=57344||e+1>=n?r:(r<<10)+t.charCodeAt(e+1)-56613888},y_.prototype.nextIndex=function(e){var t=this.source,n=t.length;if(e>=n)return n;var r=t.charCodeAt(e);return!this.switchU||r<=55295||r>=57344||e+1>=n?e+1:e+2},y_.prototype.current=function(){return this.at(this.pos)},y_.prototype.lookahead=function(){return this.at(this.nextIndex(this.pos))},y_.prototype.advance=function(){this.pos=this.nextIndex(this.pos)},y_.prototype.eat=function(e){return this.current()===e&&(this.advance(),!0)},b_.validateRegExpFlags=function(e){for(var t=e.validFlags,n=e.flags,r=0;r<n.length;r++){var i=n.charAt(r);-1===t.indexOf(i)&&this.raise(e.start,"Invalid regular expression flag"),n.indexOf(i,r+1)>-1&&this.raise(e.start,"Duplicate regular expression flag")}},b_.validateRegExpPattern=function(e){this.regexp_pattern(e),!e.switchN&&this.options.ecmaVersion>=9&&e.groupNames.length>0&&(e.switchN=!0,this.regexp_pattern(e))},b_.regexp_pattern=function(e){e.pos=0,e.lastIntValue=0,e.lastStringValue="",e.lastAssertionIsQuantifiable=!1,e.numCapturingParens=0,e.maxBackReference=0,e.groupNames.length=0,e.backReferenceNames.length=0,this.regexp_disjunction(e),e.pos!==e.source.length&&(e.eat(41)&&e.raise("Unmatched ')'"),(e.eat(93)||e.eat(125))&&e.raise("Lone quantifier brackets")),e.maxBackReference>e.numCapturingParens&&e.raise("Invalid escape");for(var t=0,n=e.backReferenceNames;t<n.length;t+=1){var r=n[t];-1===e.groupNames.indexOf(r)&&e.raise("Invalid named capture referenced")}},b_.regexp_disjunction=function(e){for(this.regexp_alternative(e);e.eat(124);)this.regexp_alternative(e);this.regexp_eatQuantifier(e,!0)&&e.raise("Nothing to repeat"),e.eat(123)&&e.raise("Lone quantifier brackets")},b_.regexp_alternative=function(e){for(;e.pos<e.source.length&&this.regexp_eatTerm(e););},b_.regexp_eatTerm=function(e){return this.regexp_eatAssertion(e)?(e.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(e)&&e.switchU&&e.raise("Invalid quantifier"),!0):!(e.switchU?!this.regexp_eatAtom(e):!this.regexp_eatExtendedAtom(e))&&(this.regexp_eatQuantifier(e),!0)},b_.regexp_eatAssertion=function(e){var t=e.pos;if(e.lastAssertionIsQuantifiable=!1,e.eat(94)||e.eat(36))return!0;if(e.eat(92)){if(e.eat(66)||e.eat(98))return!0;e.pos=t}if(e.eat(40)&&e.eat(63)){var n=!1;if(this.options.ecmaVersion>=9&&(n=e.eat(60)),e.eat(61)||e.eat(33))return this.regexp_disjunction(e),e.eat(41)||e.raise("Unterminated group"),e.lastAssertionIsQuantifiable=!n,!0}return e.pos=t,!1},b_.regexp_eatQuantifier=function(e,t){return void 0===t&&(t=!1),!!this.regexp_eatQuantifierPrefix(e,t)&&(e.eat(63),!0)},b_.regexp_eatQuantifierPrefix=function(e,t){return e.eat(42)||e.eat(43)||e.eat(63)||this.regexp_eatBracedQuantifier(e,t)},b_.regexp_eatBracedQuantifier=function(e,t){var n=e.pos;if(e.eat(123)){var r=0,i=-1;if(this.regexp_eatDecimalDigits(e)&&(r=e.lastIntValue,e.eat(44)&&this.regexp_eatDecimalDigits(e)&&(i=e.lastIntValue),e.eat(125)))return-1!==i&&i<r&&!t&&e.raise("numbers out of order in {} quantifier"),!0;e.switchU&&!t&&e.raise("Incomplete quantifier"),e.pos=n}return!1},b_.regexp_eatAtom=function(e){return this.regexp_eatPatternCharacters(e)||e.eat(46)||this.regexp_eatReverseSolidusAtomEscape(e)||this.regexp_eatCharacterClass(e)||this.regexp_eatUncapturingGroup(e)||this.regexp_eatCapturingGroup(e)},b_.regexp_eatReverseSolidusAtomEscape=function(e){var t=e.pos;if(e.eat(92)){if(this.regexp_eatAtomEscape(e))return!0;e.pos=t}return!1},b_.regexp_eatUncapturingGroup=function(e){var t=e.pos;if(e.eat(40)){if(e.eat(63)&&e.eat(58)){if(this.regexp_disjunction(e),e.eat(41))return!0;e.raise("Unterminated group")}e.pos=t}return!1},b_.regexp_eatCapturingGroup=function(e){if(e.eat(40)){if(this.options.ecmaVersion>=9?this.regexp_groupSpecifier(e):63===e.current()&&e.raise("Invalid group"),this.regexp_disjunction(e),e.eat(41))return e.numCapturingParens+=1,!0;e.raise("Unterminated group")}return!1},b_.regexp_eatExtendedAtom=function(e){return e.eat(46)||this.regexp_eatReverseSolidusAtomEscape(e)||this.regexp_eatCharacterClass(e)||this.regexp_eatUncapturingGroup(e)||this.regexp_eatCapturingGroup(e)||this.regexp_eatInvalidBracedQuantifier(e)||this.regexp_eatExtendedPatternCharacter(e)},b_.regexp_eatInvalidBracedQuantifier=function(e){return this.regexp_eatBracedQuantifier(e,!0)&&e.raise("Nothing to repeat"),!1},b_.regexp_eatSyntaxCharacter=function(e){var t=e.current();return!!x_(t)&&(e.lastIntValue=t,e.advance(),!0)},b_.regexp_eatPatternCharacters=function(e){for(var t=e.pos,n=0;-1!==(n=e.current())&&!x_(n);)e.advance();return e.pos!==t},b_.regexp_eatExtendedPatternCharacter=function(e){var t=e.current();return!(-1===t||36===t||t>=40&&t<=43||46===t||63===t||91===t||94===t||124===t)&&(e.advance(),!0)},b_.regexp_groupSpecifier=function(e){if(e.eat(63)){if(this.regexp_eatGroupName(e))return-1!==e.groupNames.indexOf(e.lastStringValue)&&e.raise("Duplicate capture group name"),void e.groupNames.push(e.lastStringValue);e.raise("Invalid group")}},b_.regexp_eatGroupName=function(e){if(e.lastStringValue="",e.eat(60)){if(this.regexp_eatRegExpIdentifierName(e)&&e.eat(62))return!0;e.raise("Invalid capture group name")}return!1},b_.regexp_eatRegExpIdentifierName=function(e){if(e.lastStringValue="",this.regexp_eatRegExpIdentifierStart(e)){for(e.lastStringValue+=w_(e.lastIntValue);this.regexp_eatRegExpIdentifierPart(e);)e.lastStringValue+=w_(e.lastIntValue);return!0}return!1},b_.regexp_eatRegExpIdentifierStart=function(e){var t=e.pos,n=e.current();return e.advance(),92===n&&this.regexp_eatRegExpUnicodeEscapeSequence(e)&&(n=e.lastIntValue),function(e){return bC(e,!0)||36===e||95===e}(n)?(e.lastIntValue=n,!0):(e.pos=t,!1)},b_.regexp_eatRegExpIdentifierPart=function(e){var t=e.pos,n=e.current();return e.advance(),92===n&&this.regexp_eatRegExpUnicodeEscapeSequence(e)&&(n=e.lastIntValue),function(e){return yC(e,!0)||36===e||95===e||8204===e||8205===e}(n)?(e.lastIntValue=n,!0):(e.pos=t,!1)},b_.regexp_eatAtomEscape=function(e){return!!(this.regexp_eatBackReference(e)||this.regexp_eatCharacterClassEscape(e)||this.regexp_eatCharacterEscape(e)||e.switchN&&this.regexp_eatKGroupName(e))||(e.switchU&&(99===e.current()&&e.raise("Invalid unicode escape"),e.raise("Invalid escape")),!1)},b_.regexp_eatBackReference=function(e){var t=e.pos;if(this.regexp_eatDecimalEscape(e)){var n=e.lastIntValue;if(e.switchU)return n>e.maxBackReference&&(e.maxBackReference=n),!0;if(n<=e.numCapturingParens)return!0;e.pos=t}return!1},b_.regexp_eatKGroupName=function(e){if(e.eat(107)){if(this.regexp_eatGroupName(e))return e.backReferenceNames.push(e.lastStringValue),!0;e.raise("Invalid named reference")}return!1},b_.regexp_eatCharacterEscape=function(e){return this.regexp_eatControlEscape(e)||this.regexp_eatCControlLetter(e)||this.regexp_eatZero(e)||this.regexp_eatHexEscapeSequence(e)||this.regexp_eatRegExpUnicodeEscapeSequence(e)||!e.switchU&&this.regexp_eatLegacyOctalEscapeSequence(e)||this.regexp_eatIdentityEscape(e)},b_.regexp_eatCControlLetter=function(e){var t=e.pos;if(e.eat(99)){if(this.regexp_eatControlLetter(e))return!0;e.pos=t}return!1},b_.regexp_eatZero=function(e){return 48===e.current()&&!__(e.lookahead())&&(e.lastIntValue=0,e.advance(),!0)},b_.regexp_eatControlEscape=function(e){var t=e.current();return 116===t?(e.lastIntValue=9,e.advance(),!0):110===t?(e.lastIntValue=10,e.advance(),!0):118===t?(e.lastIntValue=11,e.advance(),!0):102===t?(e.lastIntValue=12,e.advance(),!0):114===t&&(e.lastIntValue=13,e.advance(),!0)},b_.regexp_eatControlLetter=function(e){var t=e.current();return!!E_(t)&&(e.lastIntValue=t%32,e.advance(),!0)},b_.regexp_eatRegExpUnicodeEscapeSequence=function(e){var t=e.pos;if(e.eat(117)){if(this.regexp_eatFixedHexDigits(e,4)){var n=e.lastIntValue;if(e.switchU&&n>=55296&&n<=56319){var r=e.pos;if(e.eat(92)&&e.eat(117)&&this.regexp_eatFixedHexDigits(e,4)){var i=e.lastIntValue;if(i>=56320&&i<=57343)return e.lastIntValue=1024*(n-55296)+(i-56320)+65536,!0}e.pos=r,e.lastIntValue=n}return!0}if(e.switchU&&e.eat(123)&&this.regexp_eatHexDigits(e)&&e.eat(125)&&function(e){return e>=0&&e<=1114111}(e.lastIntValue))return!0;e.switchU&&e.raise("Invalid unicode escape"),e.pos=t}return!1},b_.regexp_eatIdentityEscape=function(e){if(e.switchU)return!!this.regexp_eatSyntaxCharacter(e)||!!e.eat(47)&&(e.lastIntValue=47,!0);var t=e.current();return!(99===t||e.switchN&&107===t)&&(e.lastIntValue=t,e.advance(),!0)},b_.regexp_eatDecimalEscape=function(e){e.lastIntValue=0;var t=e.current();if(t>=49&&t<=57){do{e.lastIntValue=10*e.lastIntValue+(t-48),e.advance()}while((t=e.current())>=48&&t<=57);return!0}return!1},b_.regexp_eatCharacterClassEscape=function(e){var t=e.current();if(function(e){return 100===e||68===e||115===e||83===e||119===e||87===e}(t))return e.lastIntValue=-1,e.advance(),!0;if(e.switchU&&this.options.ecmaVersion>=9&&(80===t||112===t)){if(e.lastIntValue=-1,e.advance(),e.eat(123)&&this.regexp_eatUnicodePropertyValueExpression(e)&&e.eat(125))return!0;e.raise("Invalid property name")}return!1},b_.regexp_eatUnicodePropertyValueExpression=function(e){var t=e.pos;if(this.regexp_eatUnicodePropertyName(e)&&e.eat(61)){var n=e.lastStringValue;if(this.regexp_eatUnicodePropertyValue(e)){var r=e.lastStringValue;return this.regexp_validateUnicodePropertyNameAndValue(e,n,r),!0}}if(e.pos=t,this.regexp_eatLoneUnicodePropertyNameOrValue(e)){var i=e.lastStringValue;return this.regexp_validateUnicodePropertyNameOrValue(e,i),!0}return!1},b_.regexp_validateUnicodePropertyNameAndValue=function(e,t,n){v_.hasOwnProperty(t)&&-1!==v_[t].indexOf(n)||e.raise("Invalid property name")},b_.regexp_validateUnicodePropertyNameOrValue=function(e,t){-1===v_.$LONE.indexOf(t)&&e.raise("Invalid property name")},b_.regexp_eatUnicodePropertyName=function(e){var t=0;for(e.lastStringValue="";k_(t=e.current());)e.lastStringValue+=w_(t),e.advance();return""!==e.lastStringValue},b_.regexp_eatUnicodePropertyValue=function(e){var t=0;for(e.lastStringValue="";C_(t=e.current());)e.lastStringValue+=w_(t),e.advance();return""!==e.lastStringValue},b_.regexp_eatLoneUnicodePropertyNameOrValue=function(e){return this.regexp_eatUnicodePropertyValue(e)},b_.regexp_eatCharacterClass=function(e){if(e.eat(91)){if(e.eat(94),this.regexp_classRanges(e),e.eat(93))return!0;e.raise("Unterminated character class")}return!1},b_.regexp_classRanges=function(e){for(;this.regexp_eatClassAtom(e);){var t=e.lastIntValue;if(e.eat(45)&&this.regexp_eatClassAtom(e)){var n=e.lastIntValue;!e.switchU||-1!==t&&-1!==n||e.raise("Invalid character class"),-1!==t&&-1!==n&&t>n&&e.raise("Range out of order in character class")}}},b_.regexp_eatClassAtom=function(e){var t=e.pos;if(e.eat(92)){if(this.regexp_eatClassEscape(e))return!0;if(e.switchU){var n=e.current();(99===n||T_(n))&&e.raise("Invalid class escape"),e.raise("Invalid escape")}e.pos=t}var r=e.current();return 93!==r&&(e.lastIntValue=r,e.advance(),!0)},b_.regexp_eatClassEscape=function(e){var t=e.pos;if(e.eat(98))return e.lastIntValue=8,!0;if(e.switchU&&e.eat(45))return e.lastIntValue=45,!0;if(!e.switchU&&e.eat(99)){if(this.regexp_eatClassControlLetter(e))return!0;e.pos=t}return this.regexp_eatCharacterClassEscape(e)||this.regexp_eatCharacterEscape(e)},b_.regexp_eatClassControlLetter=function(e){var t=e.current();return!(!__(t)&&95!==t)&&(e.lastIntValue=t%32,e.advance(),!0)},b_.regexp_eatHexEscapeSequence=function(e){var t=e.pos;if(e.eat(120)){if(this.regexp_eatFixedHexDigits(e,2))return!0;e.switchU&&e.raise("Invalid escape"),e.pos=t}return!1},b_.regexp_eatDecimalDigits=function(e){var t=e.pos,n=0;for(e.lastIntValue=0;__(n=e.current());)e.lastIntValue=10*e.lastIntValue+(n-48),e.advance();return e.pos!==t},b_.regexp_eatHexDigits=function(e){var t=e.pos,n=0;for(e.lastIntValue=0;S_(n=e.current());)e.lastIntValue=16*e.lastIntValue+N_(n),e.advance();return e.pos!==t},b_.regexp_eatLegacyOctalEscapeSequence=function(e){if(this.regexp_eatOctalDigit(e)){var t=e.lastIntValue;if(this.regexp_eatOctalDigit(e)){var n=e.lastIntValue;t<=3&&this.regexp_eatOctalDigit(e)?e.lastIntValue=64*t+8*n+e.lastIntValue:e.lastIntValue=8*t+n}else e.lastIntValue=t;return!0}return!1},b_.regexp_eatOctalDigit=function(e){var t=e.current();return T_(t)?(e.lastIntValue=t-48,e.advance(),!0):(e.lastIntValue=0,!1)},b_.regexp_eatFixedHexDigits=function(e,t){var n=e.pos;e.lastIntValue=0;for(var r=0;r<t;++r){var i=e.current();if(!S_(i))return e.pos=n,!1;e.lastIntValue=16*e.lastIntValue+N_(i),e.advance()}return!0};var A_=function(e){this.type=e.type,this.value=e.value,this.start=e.start,this.end=e.end,e.options.locations&&(this.loc=new VC(e,e.startLoc,e.endLoc)),e.options.ranges&&(this.range=[e.start,e.end])},L_=KC.prototype;function P_(e){return e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode(55296+(e>>10),56320+(1023&e)))}L_.next=function(){this.options.onToken&&this.options.onToken(new A_(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken()},L_.getToken=function(){return this.next(),new A_(this)},"undefined"!=typeof Symbol&&(L_[Symbol.iterator]=function(){var e=this;return{next:function(){var t=e.getToken();return{done:t.type===SC.eof,value:t}}}}),L_.curContext=function(){return this.context[this.context.length-1]},L_.nextToken=function(){var e=this.curContext();return e&&e.preserveSpace||this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length?this.finishToken(SC.eof):e.override?e.override(this):void this.readToken(this.fullCharCodeAtPos())},L_.readToken=function(e){return bC(e,this.options.ecmaVersion>=6)||92===e?this.readWord():this.getTokenFromCode(e)},L_.fullCharCodeAtPos=function(){var e=this.input.charCodeAt(this.pos);return e<=55295||e>=57344?e:(e<<10)+this.input.charCodeAt(this.pos+1)-56613888},L_.skipBlockComment=function(){var e,t=this.options.onComment&&this.curPosition(),n=this.pos,r=this.input.indexOf("*/",this.pos+=2);if(-1===r&&this.raise(this.pos-2,"Unterminated comment"),this.pos=r+2,this.options.locations)for(TC.lastIndex=n;(e=TC.exec(this.input))&&e.index<this.pos;)++this.curLine,this.lineStart=e.index+e[0].length;this.options.onComment&&this.options.onComment(!0,this.input.slice(n+2,r),n,this.pos,t,this.curPosition())},L_.skipLineComment=function(e){for(var t=this.pos,n=this.options.onComment&&this.curPosition(),r=this.input.charCodeAt(this.pos+=e);this.pos<this.input.length&&!AC(r);)r=this.input.charCodeAt(++this.pos);this.options.onComment&&this.options.onComment(!1,this.input.slice(t+e,this.pos),t,this.pos,n,this.curPosition())},L_.skipSpace=function(){e:for(;this.pos<this.input.length;){var e=this.input.charCodeAt(this.pos);switch(e){case 32:case 160:++this.pos;break;case 13:10===this.input.charCodeAt(this.pos+1)&&++this.pos;case 10:case 8232:case 8233:++this.pos,this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break e}break;default:if(!(e>8&&e<14||e>=5760&&LC.test(String.fromCharCode(e))))break e;++this.pos}}},L_.finishToken=function(e,t){this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());var n=this.type;this.type=e,this.value=t,this.updateContext(n)},L_.readToken_dot=function(){var e=this.input.charCodeAt(this.pos+1);if(e>=48&&e<=57)return this.readNumber(!0);var t=this.input.charCodeAt(this.pos+2);return this.options.ecmaVersion>=6&&46===e&&46===t?(this.pos+=3,this.finishToken(SC.ellipsis)):(++this.pos,this.finishToken(SC.dot))},L_.readToken_slash=function(){var e=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):61===e?this.finishOp(SC.assign,2):this.finishOp(SC.slash,1)},L_.readToken_mult_modulo_exp=function(e){var t=this.input.charCodeAt(this.pos+1),n=1,r=42===e?SC.star:SC.modulo;return this.options.ecmaVersion>=7&&42===e&&42===t&&(++n,r=SC.starstar,t=this.input.charCodeAt(this.pos+2)),61===t?this.finishOp(SC.assign,n+1):this.finishOp(r,n)},L_.readToken_pipe_amp=function(e){var t=this.input.charCodeAt(this.pos+1);return t===e?this.finishOp(124===e?SC.logicalOR:SC.logicalAND,2):61===t?this.finishOp(SC.assign,2):this.finishOp(124===e?SC.bitwiseOR:SC.bitwiseAND,1)},L_.readToken_caret=function(){return 61===this.input.charCodeAt(this.pos+1)?this.finishOp(SC.assign,2):this.finishOp(SC.bitwiseXOR,1)},L_.readToken_plus_min=function(e){var t=this.input.charCodeAt(this.pos+1);return t===e?45!==t||this.inModule||62!==this.input.charCodeAt(this.pos+2)||0!==this.lastTokEnd&&!NC.test(this.input.slice(this.lastTokEnd,this.pos))?this.finishOp(SC.incDec,2):(this.skipLineComment(3),this.skipSpace(),this.nextToken()):61===t?this.finishOp(SC.assign,2):this.finishOp(SC.plusMin,1)},L_.readToken_lt_gt=function(e){var t=this.input.charCodeAt(this.pos+1),n=1;return t===e?(n=62===e&&62===this.input.charCodeAt(this.pos+2)?3:2,61===this.input.charCodeAt(this.pos+n)?this.finishOp(SC.assign,n+1):this.finishOp(SC.bitShift,n)):33!==t||60!==e||this.inModule||45!==this.input.charCodeAt(this.pos+2)||45!==this.input.charCodeAt(this.pos+3)?(61===t&&(n=2),this.finishOp(SC.relational,n)):(this.skipLineComment(4),this.skipSpace(),this.nextToken())},L_.readToken_eq_excl=function(e){var t=this.input.charCodeAt(this.pos+1);return 61===t?this.finishOp(SC.equality,61===this.input.charCodeAt(this.pos+2)?3:2):61===e&&62===t&&this.options.ecmaVersion>=6?(this.pos+=2,this.finishToken(SC.arrow)):this.finishOp(61===e?SC.eq:SC.prefix,1)},L_.getTokenFromCode=function(e){switch(e){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(SC.parenL);case 41:return++this.pos,this.finishToken(SC.parenR);case 59:return++this.pos,this.finishToken(SC.semi);case 44:return++this.pos,this.finishToken(SC.comma);case 91:return++this.pos,this.finishToken(SC.bracketL);case 93:return++this.pos,this.finishToken(SC.bracketR);case 123:return++this.pos,this.finishToken(SC.braceL);case 125:return++this.pos,this.finishToken(SC.braceR);case 58:return++this.pos,this.finishToken(SC.colon);case 63:return++this.pos,this.finishToken(SC.question);case 96:if(this.options.ecmaVersion<6)break;return++this.pos,this.finishToken(SC.backQuote);case 48:var t=this.input.charCodeAt(this.pos+1);if(120===t||88===t)return this.readRadixNumber(16);if(this.options.ecmaVersion>=6){if(111===t||79===t)return this.readRadixNumber(8);if(98===t||66===t)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(e);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(e);case 124:case 38:return this.readToken_pipe_amp(e);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(e);case 60:case 62:return this.readToken_lt_gt(e);case 61:case 33:return this.readToken_eq_excl(e);case 126:return this.finishOp(SC.prefix,1)}this.raise(this.pos,"Unexpected character '"+P_(e)+"'")},L_.finishOp=function(e,t){var n=this.input.slice(this.pos,this.pos+t);return this.pos+=t,this.finishToken(e,n)},L_.readRegexp=function(){for(var e,t,n=this.pos;;){this.pos>=this.input.length&&this.raise(n,"Unterminated regular expression");var r=this.input.charAt(this.pos);if(NC.test(r)&&this.raise(n,"Unterminated regular expression"),e)e=!1;else{if("["===r)t=!0;else if("]"===r&&t)t=!1;else if("/"===r&&!t)break;e="\\"===r}++this.pos}var i=this.input.slice(n,this.pos);++this.pos;var s=this.pos,a=this.readWord1();this.containsEsc&&this.unexpected(s);var o=this.regexpState||(this.regexpState=new y_(this));o.reset(n,i,a),this.validateRegExpFlags(o),this.validateRegExpPattern(o);var l=null;try{l=new RegExp(i,a)}catch(c){}return this.finishToken(SC.regexp,{pattern:i,flags:a,value:l})},L_.readInt=function(e,t){for(var n=this.pos,r=0,i=0,s=null==t?1/0:t;i<s;++i){var a=this.input.charCodeAt(this.pos),o=void 0;if((o=a>=97?a-97+10:a>=65?a-65+10:a>=48&&a<=57?a-48:1/0)>=e)break;++this.pos,r=r*e+o}return this.pos===n||null!=t&&this.pos-n!==t?null:r},L_.readRadixNumber=function(e){this.pos+=2;var t=this.readInt(e);return null==t&&this.raise(this.start+2,"Expected number in radix "+e),bC(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(SC.num,t)},L_.readNumber=function(e){var t=this.pos;e||null!==this.readInt(10)||this.raise(t,"Invalid number");var n=this.pos-t>=2&&48===this.input.charCodeAt(t);n&&this.strict&&this.raise(t,"Invalid number"),n&&/[89]/.test(this.input.slice(t,this.pos))&&(n=!1);var r=this.input.charCodeAt(this.pos);46!==r||n||(++this.pos,this.readInt(10),r=this.input.charCodeAt(this.pos)),69!==r&&101!==r||n||(43!==(r=this.input.charCodeAt(++this.pos))&&45!==r||++this.pos,null===this.readInt(10)&&this.raise(t,"Invalid number")),bC(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");var i=this.input.slice(t,this.pos),s=n?parseInt(i,8):parseFloat(i);return this.finishToken(SC.num,s)},L_.readCodePoint=function(){var e;if(123===this.input.charCodeAt(this.pos)){this.options.ecmaVersion<6&&this.unexpected();var t=++this.pos;e=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos),++this.pos,e>1114111&&this.invalidStringToken(t,"Code point out of bounds")}else e=this.readHexChar(4);return e},L_.readString=function(e){for(var t="",n=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var r=this.input.charCodeAt(this.pos);if(r===e)break;92===r?(t+=this.input.slice(n,this.pos),t+=this.readEscapedChar(!1),n=this.pos):(AC(r,this.options.ecmaVersion>=10)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}return t+=this.input.slice(n,this.pos++),this.finishToken(SC.string,t)};var I_={};L_.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(ZL){if(ZL!==I_)throw ZL;this.readInvalidTemplateToken()}this.inTemplateElement=!1},L_.invalidStringToken=function(e,t){if(this.inTemplateElement&&this.options.ecmaVersion>=9)throw I_;this.raise(e,t)},L_.readTmplToken=function(){for(var e="",t=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var n=this.input.charCodeAt(this.pos);if(96===n||36===n&&123===this.input.charCodeAt(this.pos+1))return this.pos!==this.start||this.type!==SC.template&&this.type!==SC.invalidTemplate?(e+=this.input.slice(t,this.pos),this.finishToken(SC.template,e)):36===n?(this.pos+=2,this.finishToken(SC.dollarBraceL)):(++this.pos,this.finishToken(SC.backQuote));if(92===n)e+=this.input.slice(t,this.pos),e+=this.readEscapedChar(!0),t=this.pos;else if(AC(n)){switch(e+=this.input.slice(t,this.pos),++this.pos,n){case 13:10===this.input.charCodeAt(this.pos)&&++this.pos;case 10:e+="\n";break;default:e+=String.fromCharCode(n)}this.options.locations&&(++this.curLine,this.lineStart=this.pos),t=this.pos}else++this.pos}},L_.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case"\\":++this.pos;break;case"$":if("{"!==this.input[this.pos+1])break;case"`":return this.finishToken(SC.invalidTemplate,this.input.slice(this.start,this.pos))}this.raise(this.start,"Unterminated template")},L_.readEscapedChar=function(e){var t=this.input.charCodeAt(++this.pos);switch(++this.pos,t){case 110:return"\n";case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return P_(this.readCodePoint());case 116:return"\t";case 98:return"\b";case 118:return"\v";case 102:return"\f";case 13:10===this.input.charCodeAt(this.pos)&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";default:if(t>=48&&t<=55){var n=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],r=parseInt(n,8);return r>255&&(n=n.slice(0,-1),r=parseInt(n,8)),this.pos+=n.length-1,t=this.input.charCodeAt(this.pos),"0"===n&&56!==t&&57!==t||!this.strict&&!e||this.invalidStringToken(this.pos-1-n.length,e?"Octal literal in template string":"Octal literal in strict mode"),String.fromCharCode(r)}return String.fromCharCode(t)}},L_.readHexChar=function(e){var t=this.pos,n=this.readInt(16,e);return null===n&&this.invalidStringToken(t,"Bad character escape sequence"),n},L_.readWord1=function(){this.containsEsc=!1;for(var e="",t=!0,n=this.pos,r=this.options.ecmaVersion>=6;this.pos<this.input.length;){var i=this.fullCharCodeAtPos();if(yC(i,r))this.pos+=i<=65535?1:2;else{if(92!==i)break;this.containsEsc=!0,e+=this.input.slice(n,this.pos);var s=this.pos;117!==this.input.charCodeAt(++this.pos)&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos;var a=this.readCodePoint();(t?bC:yC)(a,r)||this.invalidStringToken(s,"Invalid Unicode escape"),e+=P_(a),n=this.pos}t=!1}return e+this.input.slice(n,this.pos)},L_.readWord=function(){var e=this.readWord1(),t=SC.name;return this.keywords.test(e)&&(this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+e),t=CC[e]),this.finishToken(t,e)};var O_=function(e){return e&&e.default||e}(Object.freeze({version:"6.0.4",parse:function(e,t){return KC.parse(e,t)},parseExpressionAt:function(e,t,n){return KC.parseExpressionAt(e,t,n)},tokenizer:function(e,t){return KC.tokenizer(e,t)},Parser:KC,defaultOptions:BC,Position:FC,SourceLocation:VC,getLineInfo:jC,Node:h_,TokenType:wC,tokTypes:SC,keywordTypes:CC,TokContext:f_,tokContexts:m_,isIdentifierChar:yC,isIdentifierStart:bC,Token:A_,isNewLine:AC,lineBreak:NC,lineBreakG:TC,nonASCIIwhitespace:LC}));const M_=O_.tokTypes,R_=O_.isIdentifierStart;var D_=function(e){return class extends e{parseLiteral(e){const t=super.parseLiteral(e);return 110==t.raw.charCodeAt(t.raw.length-1)&&(t.bigint=t.raw),t}readRadixNumber(e){let t=this.pos;this.pos+=2;let n=this.readInt(e);if(null===n&&this.raise(this.start+2,`Expected number in radix ${e}`),110==this.input.charCodeAt(this.pos)){let e=this.input.slice(t,this.pos);n="undefined"!=typeof BigInt?BigInt(e):null,++this.pos}else R_(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");return this.finishToken(M_.num,n)}readNumber(e){let t=this.pos;if(e)return super.readNumber(e);if(48===this.input.charCodeAt(t)&&110!==this.input.charCodeAt(t+1))return super.readNumber(e);if(null===this.readInt(10)&&this.raise(t,"Invalid number"),110!=this.input.charCodeAt(this.pos))return this.pos=t,super.readNumber(e);let n=this.input.slice(t,this.pos),r="undefined"!=typeof BigInt?BigInt(n):null;return++this.pos,this.finishToken(M_.num,r)}}};function F_(e){const t=new e;function n({input:e,pos:n}){return t.input=e,t.pos=n,t.nextToken(),t}return class extends e{parseExprAtom(...e){if(this.type===SC._import){const{type:e}=n(this);if(e===SC.parenL)return function(e){const t=e.startNode();return e.expect(SC._import),e.finishNode(t,"Import")}(this);this.unexpected()}return super.parseExprAtom(...e)}parseStatement(...e){if(this.type===SC._import){const{type:e}=n(this);if(e===SC.parenL)return function(e){const t=e.startNode(),{start:n}=e,r=e.startNode(),i=e.parseExprAtom();e.expect(SC.parenL),r.arguments=[e.parseMaybeAssign()],r.callee=i,e.finishNode(r,"CallExpression"),e.expect(SC.parenR);const s=e.parseSubscripts(r,n);return e.parseExpressionStatement(t,s)}(this)}return super.parseStatement(...e)}}}SC._import.startsExpr=!0;var V_=new Set(["Array","ArrayBuffer","atob","AudioContext","Blob","Boolean","BigInt","btoa","clearInterval","clearTimeout","console","crypto","CustomEvent","DataView","Date","decodeURI","decodeURIComponent","devicePixelRatio","document","encodeURI","encodeURIComponent","Error","escape","eval","fetch","File","FileList","FileReader","Float32Array","Float64Array","Function","Headers","Image","ImageData","Infinity","Int16Array","Int32Array","Int8Array","Intl","isFinite","isNaN","JSON","Map","Math","NaN","Number","navigator","Object","parseFloat","parseInt","performance","Path2D","Promise","Proxy","RangeError","ReferenceError","Reflect","RegExp","cancelAnimationFrame","requestAnimationFrame","Set","setInterval","setTimeout","String","Symbol","SyntaxError","TextDecoder","TextEncoder","this","TypeError","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray","undefined","unescape","URIError","URL","WeakMap","WeakSet","WebSocket","Worker","window"]);function j_(e,t,n,r){var i=[];n||(n=$_),function e(r,s,a){var o=a||r.type,l=t[o],c=r!==i[i.length-1];c&&i.push(r),n[o](r,s,e),l&&l(r,s||i,i),c&&i.pop()}(e,r)}var B_=Object.create||function(e){function t(){}return t.prototype=e,new t};function U_(e,t,n){n(e,t)}function H_(e,t,n){}var $_={};$_.Program=$_.BlockStatement=function(e,t,n){for(var r=0,i=e.body;r<i.length;r+=1){n(i[r],t,"Statement")}},$_.Statement=U_,$_.EmptyStatement=H_,$_.ExpressionStatement=$_.ParenthesizedExpression=function(e,t,n){return n(e.expression,t,"Expression")},$_.IfStatement=function(e,t,n){n(e.test,t,"Expression"),n(e.consequent,t,"Statement"),e.alternate&&n(e.alternate,t,"Statement")},$_.LabeledStatement=function(e,t,n){return n(e.body,t,"Statement")},$_.BreakStatement=$_.ContinueStatement=H_,$_.WithStatement=function(e,t,n){n(e.object,t,"Expression"),n(e.body,t,"Statement")},$_.SwitchStatement=function(e,t,n){n(e.discriminant,t,"Expression");for(var r=0,i=e.cases;r<i.length;r+=1){var s=i[r];s.test&&n(s.test,t,"Expression");for(var a=0,o=s.consequent;a<o.length;a+=1){n(o[a],t,"Statement")}}},$_.SwitchCase=function(e,t,n){e.test&&n(e.test,t,"Expression");for(var r=0,i=e.consequent;r<i.length;r+=1){n(i[r],t,"Statement")}},$_.ReturnStatement=$_.YieldExpression=$_.AwaitExpression=function(e,t,n){e.argument&&n(e.argument,t,"Expression")},$_.ThrowStatement=$_.SpreadElement=function(e,t,n){return n(e.argument,t,"Expression")},$_.TryStatement=function(e,t,n){n(e.block,t,"Statement"),e.handler&&n(e.handler,t),e.finalizer&&n(e.finalizer,t,"Statement")},$_.CatchClause=function(e,t,n){e.param&&n(e.param,t,"Pattern"),n(e.body,t,"Statement")},$_.WhileStatement=$_.DoWhileStatement=function(e,t,n){n(e.test,t,"Expression"),n(e.body,t,"Statement")},$_.ForStatement=function(e,t,n){e.init&&n(e.init,t,"ForInit"),e.test&&n(e.test,t,"Expression"),e.update&&n(e.update,t,"Expression"),n(e.body,t,"Statement")},$_.ForInStatement=$_.ForOfStatement=function(e,t,n){n(e.left,t,"ForInit"),n(e.right,t,"Expression"),n(e.body,t,"Statement")},$_.ForInit=function(e,t,n){"VariableDeclaration"===e.type?n(e,t):n(e,t,"Expression")},$_.DebuggerStatement=H_,$_.FunctionDeclaration=function(e,t,n){return n(e,t,"Function")},$_.VariableDeclaration=function(e,t,n){for(var r=0,i=e.declarations;r<i.length;r+=1){n(i[r],t)}},$_.VariableDeclarator=function(e,t,n){n(e.id,t,"Pattern"),e.init&&n(e.init,t,"Expression")},$_.Function=function(e,t,n){e.id&&n(e.id,t,"Pattern");for(var r=0,i=e.params;r<i.length;r+=1){n(i[r],t,"Pattern")}n(e.body,t,e.expression?"Expression":"Statement")},$_.Pattern=function(e,t,n){"Identifier"===e.type?n(e,t,"VariablePattern"):"MemberExpression"===e.type?n(e,t,"MemberPattern"):n(e,t)},$_.VariablePattern=H_,$_.MemberPattern=U_,$_.RestElement=function(e,t,n){return n(e.argument,t,"Pattern")},$_.ArrayPattern=function(e,t,n){for(var r=0,i=e.elements;r<i.length;r+=1){var s=i[r];s&&n(s,t,"Pattern")}},$_.ObjectPattern=function(e,t,n){for(var r=0,i=e.properties;r<i.length;r+=1){var s=i[r];"Property"===s.type?(s.computed&&n(s.key,t,"Expression"),n(s.value,t,"Pattern")):"RestElement"===s.type&&n(s.argument,t,"Pattern")}},$_.Expression=U_,$_.ThisExpression=$_.Super=$_.MetaProperty=H_,$_.ArrayExpression=function(e,t,n){for(var r=0,i=e.elements;r<i.length;r+=1){var s=i[r];s&&n(s,t,"Expression")}},$_.ObjectExpression=function(e,t,n){for(var r=0,i=e.properties;r<i.length;r+=1){n(i[r],t)}},$_.FunctionExpression=$_.ArrowFunctionExpression=$_.FunctionDeclaration,$_.SequenceExpression=function(e,t,n){for(var r=0,i=e.expressions;r<i.length;r+=1){n(i[r],t,"Expression")}},$_.TemplateLiteral=function(e,t,n){for(var r=0,i=e.quasis;r<i.length;r+=1){n(i[r],t)}for(var s=0,a=e.expressions;s<a.length;s+=1){n(a[s],t,"Expression")}},$_.TemplateElement=H_,$_.UnaryExpression=$_.UpdateExpression=function(e,t,n){n(e.argument,t,"Expression")},$_.BinaryExpression=$_.LogicalExpression=function(e,t,n){n(e.left,t,"Expression"),n(e.right,t,"Expression")},$_.AssignmentExpression=$_.AssignmentPattern=function(e,t,n){n(e.left,t,"Pattern"),n(e.right,t,"Expression")},$_.ConditionalExpression=function(e,t,n){n(e.test,t,"Expression"),n(e.consequent,t,"Expression"),n(e.alternate,t,"Expression")},$_.NewExpression=$_.CallExpression=function(e,t,n){if(n(e.callee,t,"Expression"),e.arguments)for(var r=0,i=e.arguments;r<i.length;r+=1){n(i[r],t,"Expression")}},$_.MemberExpression=function(e,t,n){n(e.object,t,"Expression"),e.computed&&n(e.property,t,"Expression")},$_.ExportNamedDeclaration=$_.ExportDefaultDeclaration=function(e,t,n){e.declaration&&n(e.declaration,t,"ExportNamedDeclaration"===e.type||e.declaration.id?"Statement":"Expression"),e.source&&n(e.source,t,"Expression")},$_.ExportAllDeclaration=function(e,t,n){n(e.source,t,"Expression")},$_.ImportDeclaration=function(e,t,n){for(var r=0,i=e.specifiers;r<i.length;r+=1){n(i[r],t)}n(e.source,t,"Expression")},$_.ImportSpecifier=$_.ImportDefaultSpecifier=$_.ImportNamespaceSpecifier=$_.Identifier=$_.Literal=H_,$_.TaggedTemplateExpression=function(e,t,n){n(e.tag,t,"Expression"),n(e.quasi,t,"Expression")},$_.ClassDeclaration=$_.ClassExpression=function(e,t,n){return n(e,t,"Class")},$_.Class=function(e,t,n){e.id&&n(e.id,t,"Pattern"),e.superClass&&n(e.superClass,t,"Expression"),n(e.body,t)},$_.ClassBody=function(e,t,n){for(var r=0,i=e.body;r<i.length;r+=1){n(i[r],t)}},$_.MethodDefinition=$_.Property=function(e,t,n){e.computed&&n(e.key,t,"Expression"),n(e.value,t,"Expression")};var z_=function(e,t){var n=B_(t||$_);for(var r in e)n[r]=e[r];return n}({Import(){},SpreadProperty(e,t,n){n(e.argument,t,"Expression")},ObjectPattern(e,t,n){const r=e.properties;for(const i of r)n(i.value||i.argument,t,"Pattern")},ViewExpression(e,t,n){n(e.id,t,"Identifier")},MutableExpression(e,t,n){n(e.id,t,"Identifier")}});function W_(e){return"FunctionExpression"===e.type||"FunctionDeclaration"===e.type||"ArrowFunctionExpression"===e.type||"Program"===e.type}function q_(e){return"BlockStatement"===e.type||"ForInStatement"===e.type||"ForOfStatement"===e.type||"ForStatement"===e.type||W_(e)}function G_(e){return"FunctionExpression"===e.type||"FunctionDeclaration"===e.type}const K_=2,Y_=4,Z_=8;function Q_(e,{globals:t}={}){return function(e,t,n=V_){if(e.body&&"ImportDeclaration"!==e.body.type)try{e.references=function(e,t){const n={type:"Program",body:[e.body]},r=new Map,i=new Set(t),s=[];function a(e,t){const n=r.get(e);return!!n&&n.has(t)}function o(e,t){const n=r.get(e);n?n.add(t.name):r.set(e,new Set([t.name]))}function l(e){e.params.forEach(t=>c(t,e)),e.id&&o(e,e.id)}function c(e,t){switch(e.type){case"Identifier":o(t,e);break;case"ObjectPattern":e.properties.forEach(e=>c(e,t));break;case"ArrayPattern":e.elements.forEach(e=>e&&c(e,t));break;case"Property":c(e.value,t);break;case"RestElement":c(e.argument,t);break;case"AssignmentPattern":c(e.left,t);break;default:throw new Error("Unrecognized pattern type: "+e.type)}}function u(e){o(n,e.local)}function h(e,t){let n=e.name;if("undefined"!==n){for(let r=t.length-2;r>=0;--r){if("arguments"===n&&G_(t[r]))return;if(a(t[r],n))return;"ViewExpression"===t[r].type&&(n=`viewof ${(e=t[r]).id.name}`),"MutableExpression"===t[r].type&&(n=`mutable ${(e=t[r]).id.name}`)}if(!i.has(n)){if("arguments"===n)throw Object.assign(new ReferenceError("arguments is not allowed"),{node:e});i.add(n),s.push(e)}}}function p(e,t){switch(e.type){case"Identifier":case"VariablePattern":n(e,t);break;case"ArrayPattern":case"ObjectPattern":j_(e,{Identifier:n,VariablePattern:n},z_)}function n(e,n){for(const r of t)if(a(r,e.name))return;if("MutableExpression"!==n[n.length-2].type)throw Object.assign(new TypeError(`Assignment to constant variable ${e.name}`),{node:e})}}function d(e,t){p(e.left,t)}return j_(n,{VariableDeclaration:(e,t)=>{let n=null;for(let r=t.length-1;r>=0&&null===n;--r)("var"===e.kind?W_(t[r]):q_(t[r]))&&(n=t[r]);e.declarations.forEach(e=>c(e.id,n))},FunctionDeclaration:(e,t)=>{let n=null;for(let r=t.length-2;r>=0&&null===n;--r)W_(t[r])&&(n=t[r]);o(n,e.id),l(e)},Function:l,ClassDeclaration:(e,t)=>{let n=null;for(let r=t.length-2;r>=0&&null===n;r--)W_(t[r])&&(n=t[r]);o(n,e.id)},Class:function(e){e.id&&o(e,e.id)},CatchClause:function(e){e.param&&c(e.param,e)},ImportDefaultSpecifier:u,ImportSpecifier:u,ImportNamespaceSpecifier:u},z_),j_(n,{VariablePattern:h,Identifier:h},z_),j_(n,{AssignmentExpression:d,UpdateExpression:function(e,t){p(e.argument,t)},ForOfStatement:d,ForInStatement:d},z_),s}(e,n)}catch(r){if(r.node){const e=jC(t,r.node.start);r.message+=` (${e.line}:${e.column})`,r.pos=r.node.start,r.loc=e,delete r.node}throw r}return e}(X_.parse(e),e,t)}class X_ extends(KC.extend(D_,F_)){enterScope(e){return e&K_&&++this.O_function,super.enterScope(e)}exitScope(){return this.currentScope().flags&K_&&--this.O_function,super.exitScope()}parseForIn(e,t){return 1===this.O_function&&e.await&&(this.O_async=!0),super.parseForIn(e,t)}parseAwait(){return 1===this.O_function&&(this.O_async=!0),super.parseAwait()}parseYield(e){return 1===this.O_function&&(this.O_generator=!0),super.parseYield(e)}parseImport(e){return this.next(),e.specifiers=this.parseImportSpecifiers(),this.type===SC._with&&(this.next(),e.injections=this.parseImportSpecifiers()),this.expectContextual("from"),e.source=this.type===SC.string?this.parseExprAtom():this.unexpected(),this.finishNode(e,"ImportDeclaration")}parseImportSpecifiers(){const e=[];let t=!0;for(this.expect(SC.braceL);!this.eat(SC.braceR);){if(t)t=!1;else if(this.expect(SC.comma),this.afterTrailingComma(SC.braceR))break;const n=this.startNode();n.view=this.eatContextual("viewof"),n.view||(n.mutable=this.eatContextual("mutable")),n.imported=this.parseIdent(),this.eatContextual("as")?n.local=this.parseIdent():(this.checkUnreserved(n.imported),n.local=n.imported),this.checkLVal(n.local,"let"),e.push(this.finishNode(n,"ImportSpecifier"))}return e}parseExprAtom(e){return this.parseMaybeKeywordExpression("viewof","ViewExpression")||this.parseMaybeKeywordExpression("mutable","MutableExpression")||super.parseExprAtom(e)}parseCell(e,t){const n=new X_({},this.input,this.start);let r=n.getToken(),i=null,s=null;return this.O_function=0,this.O_async=!1,this.O_generator=!1,this.strict=!0,this.enterScope(K_|Y_|Z_),r.type===SC._import&&n.getToken().type!==SC.parenL?i=this.parseImport(this.startNode()):r.type!==SC.eof&&r.type!==SC.semi&&(r.type===SC.name&&("viewof"!==r.value&&"mutable"!==r.value||(r=n.getToken()).type!==SC.name&&n.unexpected(),(r=n.getToken()).type===SC.eq&&(s=this.parseMaybeKeywordExpression("viewof","ViewExpression")||this.parseMaybeKeywordExpression("mutable","MutableExpression")||this.parseIdent(),r=n.getToken(),this.expect(SC.eq))),r.type===SC.braceL?i=this.parseBlock():(i=this.parseExpression(),null!==s||"FunctionExpression"!==i.type&&"ClassExpression"!==i.type||(s=i.id))),this.semicolon(),t&&this.expect(SC.eof),e.id=s,e.async=this.O_async,e.generator=this.O_generator,e.body=i,this.exitScope(),this.finishNode(e,"Cell")}parseTopLevel(e){return this.parseCell(e,!0)}toAssignable(e,t,n){return"MutableExpression"===e.type?e:super.toAssignable(e,t,n)}checkUnreserved(e){return"viewof"!==e.name&&"mutable"!==e.name||this.raise(e.start,`Unexpected keyword '${e.name}'`),super.checkUnreserved(e)}checkLVal(e,t,n){return super.checkLVal("MutableExpression"===e.type?e.id:e,t,n)}unexpected(e){this.raise(null!=e?e:this.start,this.type===SC.eof?"Unexpected end of input":"Unexpected token")}parseMaybeKeywordExpression(e,t){if(this.isContextual(e)){const e=this.startNode();return this.next(),e.id=this.parseIdent(),this.finishNode(e,t)}}}var J_={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},eS="break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",tS={5:eS,6:eS+" const class extends export import super"},nS=/^in(stanceof)?$/,rS="ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽͿΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԯԱ-Ֆՙՠ-ֈא-תׯ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࡠ-ࡪࢠ-ࢴࢶ-ࢽऄ-हऽॐक़-ॡॱ-ঀঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱৼਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡૹଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-హఽౘ-ౚౠౡಀಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൔ-ൖൟ-ൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏽᏸ-ᏽᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛸᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡸᢀ-ᢨᢪᢰ-ᣵᤀ-ᤞᥐ-ᥭᥰ-ᥴᦀ-ᦫᦰ-ᧉᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᲀ-ᲈᲐ-ᲺᲽ-Ჿᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕ℘-ℝℤΩℨK-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞ々-〇〡-〩〱-〵〸-〼ぁ-ゖ゛-ゟァ-ヺー-ヿㄅ-ㄯㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿯ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚝꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞹꟷ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꣽꣾꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꧠ-ꧤꧦ-ꧯꧺ-ꧾꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꩾ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꬰ-ꭚꭜ-ꭥꭰ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ",iS="‌‍·̀-ͯ·҃-֑҇-ׇֽֿׁׂׅׄؐ-ًؚ-٩ٰۖ-ۜ۟-۪ۤۧۨ-ۭ۰-۹ܑܰ-݊ަ-ް߀-߉߫-߽߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛࣓-ࣣ࣡-ःऺ-़ा-ॏ॑-ॗॢॣ०-९ঁ-ঃ়া-ৄেৈো-্ৗৢৣ০-৯৾ਁ-ਃ਼ਾ-ੂੇੈੋ-੍ੑ੦-ੱੵઁ-ઃ઼ા-ૅે-ૉો-્ૢૣ૦-૯ૺ-૿ଁ-ଃ଼ା-ୄେୈୋ-୍ୖୗୢୣ୦-୯ஂா-ூெ-ைொ-்ௗ௦-௯ఀ-ఄా-ౄె-ైొ-్ౕౖౢౣ౦-౯ಁ-ಃ಼ಾ-ೄೆ-ೈೊ-್ೕೖೢೣ೦-೯ഀ-ഃ഻഼ാ-ൄെ-ൈൊ-്ൗൢൣ൦-൯ංඃ්ා-ුූෘ-ෟ෦-෯ෲෳัิ-ฺ็-๎๐-๙ັິ-ູົຼ່-ໍ໐-໙༘༙༠-༩༹༵༷༾༿ཱ-྄྆྇ྍ-ྗྙ-ྼ࿆ါ-ှ၀-၉ၖ-ၙၞ-ၠၢ-ၤၧ-ၭၱ-ၴႂ-ႍႏ-ႝ፝-፟፩-፱ᜒ-᜔ᜲ-᜴ᝒᝓᝲᝳ឴-៓៝០-៩᠋-᠍᠐-᠙ᢩᤠ-ᤫᤰ-᤻᥆-᥏᧐-᧚ᨗ-ᨛᩕ-ᩞ᩠-᩿᩼-᪉᪐-᪙᪰-᪽ᬀ-ᬄ᬴-᭄᭐-᭙᭫-᭳ᮀ-ᮂᮡ-ᮭ᮰-᮹᯦-᯳ᰤ-᰷᱀-᱉᱐-᱙᳐-᳔᳒-᳨᳭ᳲ-᳴᳷-᳹᷀-᷹᷻-᷿‿⁀⁔⃐-⃥⃜⃡-⃰⳯-⵿⳱ⷠ-〪ⷿ-゙゚〯꘠-꘩꙯ꙴ-꙽ꚞꚟ꛰꛱ꠂ꠆ꠋꠣ-ꠧꢀꢁꢴ-ꣅ꣐-꣙꣠-꣱ꣿ-꤉ꤦ-꤭ꥇ-꥓ꦀ-ꦃ꦳-꧀꧐-꧙ꧥ꧰-꧹ꨩ-ꨶꩃꩌꩍ꩐-꩙ꩻ-ꩽꪰꪲ-ꪴꪷꪸꪾ꪿꫁ꫫ-ꫯꫵ꫶ꯣ-ꯪ꯬꯭꯰-꯹ﬞ︀-️︠-︯︳︴﹍-﹏０-９＿",sS=new RegExp("["+rS+"]"),aS=new RegExp("["+rS+iS+"]");rS=iS=null;var oS=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,157,310,10,21,11,7,153,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,477,28,11,0,9,21,190,52,76,44,33,24,27,35,30,0,12,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,85,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,159,52,19,3,54,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,86,26,230,43,117,63,32,0,257,0,11,39,8,0,22,0,12,39,3,3,20,0,35,56,264,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,270,921,103,110,18,195,2749,1070,4050,582,8634,568,8,30,114,29,19,47,17,3,32,20,6,18,689,63,129,68,12,0,67,12,65,1,31,6129,15,754,9486,286,82,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,4149,196,60,67,1213,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42710,42,4148,12,221,3,5761,15,7472,3104,541],lS=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,525,10,176,2,54,14,32,9,16,3,46,10,54,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,4,9,83,11,7,0,161,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,193,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,243,14,166,9,280,9,41,6,2,3,9,0,10,10,47,15,406,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,19306,9,135,4,60,6,26,9,1016,45,17,3,19723,1,5319,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,2214,6,110,6,6,9,792487,239];function cS(e,t){for(var n=65536,r=0;r<t.length;r+=2){if((n+=t[r])>e)return!1;if((n+=t[r+1])>=e)return!0}}function uS(e,t){return e<65?36===e:e<91||(e<97?95===e:e<123||(e<=65535?e>=170&&sS.test(String.fromCharCode(e)):!1!==t&&cS(e,oS)))}function hS(e,t){return e<48?36===e:e<58||!(e<65)&&(e<91||(e<97?95===e:e<123||(e<=65535?e>=170&&aS.test(String.fromCharCode(e)):!1!==t&&(cS(e,oS)||cS(e,lS)))))}var pS=function(e,t){void 0===t&&(t={}),this.label=e,this.keyword=t.keyword,this.beforeExpr=!!t.beforeExpr,this.startsExpr=!!t.startsExpr,this.isLoop=!!t.isLoop,this.isAssign=!!t.isAssign,this.prefix=!!t.prefix,this.postfix=!!t.postfix,this.binop=t.binop||null,this.updateContext=null};function dS(e,t){return new pS(e,{beforeExpr:!0,binop:t})}var fS={beforeExpr:!0},mS={startsExpr:!0},gS={};function vS(e,t){return void 0===t&&(t={}),t.keyword=e,gS[e]=new pS(e,t)}var bS={num:new pS("num",mS),regexp:new pS("regexp",mS),string:new pS("string",mS),name:new pS("name",mS),eof:new pS("eof"),bracketL:new pS("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new pS("]"),braceL:new pS("{",{beforeExpr:!0,startsExpr:!0}),braceR:new pS("}"),parenL:new pS("(",{beforeExpr:!0,startsExpr:!0}),parenR:new pS(")"),comma:new pS(",",fS),semi:new pS(";",fS),colon:new pS(":",fS),dot:new pS("."),question:new pS("?",fS),arrow:new pS("=>",fS),template:new pS("template"),invalidTemplate:new pS("invalidTemplate"),ellipsis:new pS("...",fS),backQuote:new pS("`",mS),dollarBraceL:new pS("${",{beforeExpr:!0,startsExpr:!0}),eq:new pS("=",{beforeExpr:!0,isAssign:!0}),assign:new pS("_=",{beforeExpr:!0,isAssign:!0}),incDec:new pS("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new pS("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:dS("||",1),logicalAND:dS("&&",2),bitwiseOR:dS("|",3),bitwiseXOR:dS("^",4),bitwiseAND:dS("&",5),equality:dS("==/!=/===/!==",6),relational:dS("</>/<=/>=",7),bitShift:dS("<</>>/>>>",8),plusMin:new pS("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:dS("%",10),star:dS("*",10),slash:dS("/",10),starstar:new pS("**",{beforeExpr:!0}),_break:vS("break"),_case:vS("case",fS),_catch:vS("catch"),_continue:vS("continue"),_debugger:vS("debugger"),_default:vS("default",fS),_do:vS("do",{isLoop:!0,beforeExpr:!0}),_else:vS("else",fS),_finally:vS("finally"),_for:vS("for",{isLoop:!0}),_function:vS("function",mS),_if:vS("if"),_return:vS("return",fS),_switch:vS("switch"),_throw:vS("throw",fS),_try:vS("try"),_var:vS("var"),_const:vS("const"),_while:vS("while",{isLoop:!0}),_with:vS("with"),_new:vS("new",{beforeExpr:!0,startsExpr:!0}),_this:vS("this",mS),_super:vS("super",mS),_class:vS("class",mS),_extends:vS("extends",fS),_export:vS("export"),_import:vS("import"),_null:vS("null",mS),_true:vS("true",mS),_false:vS("false",mS),_in:vS("in",{beforeExpr:!0,binop:7}),_instanceof:vS("instanceof",{beforeExpr:!0,binop:7}),_typeof:vS("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:vS("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:vS("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},yS=/\r\n?|\n|\u2028|\u2029/,wS=new RegExp(yS.source,"g");function xS(e,t){return 10===e||13===e||!t&&(8232===e||8233===e)}var ES=/[\u1680\u180e\u2000-\u200a\u202f\u205f\u3000\ufeff]/,kS=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,CS=Object.prototype,_S=CS.hasOwnProperty,SS=CS.toString;function NS(e,t){return _S.call(e,t)}var TS=Array.isArray||function(e){return"[object Array]"===SS.call(e)},AS=function(e,t){this.line=e,this.column=t};AS.prototype.offset=function(e){return new AS(this.line,this.column+e)};var LS=function(e,t,n){this.start=t,this.end=n,null!==e.sourceFile&&(this.source=e.sourceFile)};function PS(e,t){for(var n=1,r=0;;){wS.lastIndex=r;var i=wS.exec(e);if(!(i&&i.index<t))return new AS(n,t-r);++n,r=i.index+i[0].length}}var IS={ecmaVersion:9,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:!1,allowHashBang:!1,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1};function OS(e){var t={};for(var n in IS)t[n]=e&&NS(e,n)?e[n]:IS[n];if(t.ecmaVersion>=2015&&(t.ecmaVersion-=2009),null==t.allowReserved&&(t.allowReserved=t.ecmaVersion<5),TS(t.onToken)){var r=t.onToken;t.onToken=function(e){return r.push(e)}}return TS(t.onComment)&&(t.onComment=function(e,t){return function(n,r,i,s,a,o){var l={type:n?"Block":"Line",value:r,start:i,end:s};e.locations&&(l.loc=new LS(this,a,o)),e.ranges&&(l.range=[i,s]),t.push(l)}}(t,t.onComment)),t}var MS=2,RS=1|MS,DS=4,FS=8;function VS(e,t){return MS|(e?DS:0)|(t?FS:0)}function jS(e){return new RegExp("^(?:"+e.replace(/ /g,"|")+")$")}var BS=function(e,t,n){this.options=e=OS(e),this.sourceFile=e.sourceFile,this.keywords=jS(tS[e.ecmaVersion>=6?6:5]);var r="";if(!e.allowReserved){for(var i=e.ecmaVersion;!(r=J_[i]);i--);"module"===e.sourceType&&(r+=" await")}this.reservedWords=jS(r);var s=(r?r+" ":"")+J_.strict;this.reservedWordsStrict=jS(s),this.reservedWordsStrictBind=jS(s+" "+J_.strictBind),this.input=String(t),this.containsEsc=!1,n?(this.pos=n,this.lineStart=this.input.lastIndexOf("\n",n-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(yS).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=bS.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.inModule="module"===e.sourceType,this.strict=this.inModule||this.strictDirective(this.pos),this.potentialArrowAt=-1,this.yieldPos=this.awaitPos=0,this.labels=[],0===this.pos&&e.allowHashBang&&"#!"===this.input.slice(0,2)&&this.skipLineComment(2),this.scopeStack=[],this.enterScope(1),this.regexpState=null},US={inFunction:{configurable:!0},inGenerator:{configurable:!0},inAsync:{configurable:!0},allowSuper:{configurable:!0},allowDirectSuper:{configurable:!0}};BS.prototype.parse=function(){var e=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel(e)},US.inFunction.get=function(){return(this.currentVarScope().flags&MS)>0},US.inGenerator.get=function(){return(this.currentVarScope().flags&FS)>0},US.inAsync.get=function(){return(this.currentVarScope().flags&DS)>0},US.allowSuper.get=function(){return(64&this.currentThisScope().flags)>0},US.allowDirectSuper.get=function(){return(128&this.currentThisScope().flags)>0},BS.prototype.inNonArrowFunction=function(){return(this.currentThisScope().flags&MS)>0},BS.extend=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];for(var n=this,r=0;r<e.length;r++)n=e[r](n);return n},BS.parse=function(e,t){return new this(t,e).parse()},BS.parseExpressionAt=function(e,t,n){var r=new this(n,e,t);return r.nextToken(),r.parseExpression()},BS.tokenizer=function(e,t){return new this(t,e)},Object.defineProperties(BS.prototype,US);var HS=BS.prototype,$S=/^(?:'((?:\\.|[^'])*?)'|"((?:\\.|[^"])*?)"|;)/;function zS(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1}HS.strictDirective=function(e){for(;;){kS.lastIndex=e,e+=kS.exec(this.input)[0].length;var t=$S.exec(this.input.slice(e));if(!t)return!1;if("use strict"===(t[1]||t[2]))return!0;e+=t[0].length}},HS.eat=function(e){return this.type===e&&(this.next(),!0)},HS.isContextual=function(e){return this.type===bS.name&&this.value===e&&!this.containsEsc},HS.eatContextual=function(e){return!!this.isContextual(e)&&(this.next(),!0)},HS.expectContextual=function(e){this.eatContextual(e)||this.unexpected()},HS.canInsertSemicolon=function(){return this.type===bS.eof||this.type===bS.braceR||yS.test(this.input.slice(this.lastTokEnd,this.start))},HS.insertSemicolon=function(){if(this.canInsertSemicolon())return this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0},HS.semicolon=function(){this.eat(bS.semi)||this.insertSemicolon()||this.unexpected()},HS.afterTrailingComma=function(e,t){if(this.type===e)return this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),t||this.next(),!0},HS.expect=function(e){this.eat(e)||this.unexpected()},HS.unexpected=function(e){this.raise(null!=e?e:this.start,"Unexpected token")},HS.checkPatternErrors=function(e,t){if(e){e.trailingComma>-1&&this.raiseRecoverable(e.trailingComma,"Comma is not permitted after the rest element");var n=t?e.parenthesizedAssign:e.parenthesizedBind;n>-1&&this.raiseRecoverable(n,"Parenthesized pattern")}},HS.checkExpressionErrors=function(e,t){if(!e)return!1;var n=e.shorthandAssign,r=e.doubleProto;if(!t)return n>=0||r>=0;n>=0&&this.raise(n,"Shorthand property assignments are valid only in destructuring patterns"),r>=0&&this.raiseRecoverable(r,"Redefinition of __proto__ property")},HS.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value"),this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")},HS.isSimpleAssignTarget=function(e){return"ParenthesizedExpression"===e.type?this.isSimpleAssignTarget(e.expression):"Identifier"===e.type||"MemberExpression"===e.type};var WS=BS.prototype;WS.parseTopLevel=function(e){var t={};for(e.body||(e.body=[]);this.type!==bS.eof;){var n=this.parseStatement(null,!0,t);e.body.push(n)}return this.adaptDirectivePrologue(e.body),this.next(),this.options.ecmaVersion>=6&&(e.sourceType=this.options.sourceType),this.finishNode(e,"Program")};var qS={kind:"loop"},GS={kind:"switch"};WS.isLet=function(){if(this.options.ecmaVersion<6||!this.isContextual("let"))return!1;kS.lastIndex=this.pos;var e=kS.exec(this.input),t=this.pos+e[0].length,n=this.input.charCodeAt(t);if(91===n||123===n)return!0;if(uS(n,!0)){for(var r=t+1;hS(this.input.charCodeAt(r),!0);)++r;var i=this.input.slice(t,r);if(!nS.test(i))return!0}return!1},WS.isAsyncFunction=function(){if(this.options.ecmaVersion<8||!this.isContextual("async"))return!1;kS.lastIndex=this.pos;var e=kS.exec(this.input),t=this.pos+e[0].length;return!(yS.test(this.input.slice(this.pos,t))||"function"!==this.input.slice(t,t+8)||t+8!==this.input.length&&hS(this.input.charAt(t+8)))},WS.parseStatement=function(e,t,n){var r,i=this.type,s=this.startNode();switch(this.isLet()&&(i=bS._var,r="let"),i){case bS._break:case bS._continue:return this.parseBreakContinueStatement(s,i.keyword);case bS._debugger:return this.parseDebuggerStatement(s);case bS._do:return this.parseDoStatement(s);case bS._for:return this.parseForStatement(s);case bS._function:return e&&(this.strict||"if"!==e)&&this.options.ecmaVersion>=6&&this.unexpected(),this.parseFunctionStatement(s,!1,!e);case bS._class:return e&&this.unexpected(),this.parseClass(s,!0);case bS._if:return this.parseIfStatement(s);case bS._return:return this.parseReturnStatement(s);case bS._switch:return this.parseSwitchStatement(s);case bS._throw:return this.parseThrowStatement(s);case bS._try:return this.parseTryStatement(s);case bS._const:case bS._var:return r=r||this.value,e&&"var"!==r&&this.unexpected(),this.parseVarStatement(s,r);case bS._while:return this.parseWhileStatement(s);case bS._with:return this.parseWithStatement(s);case bS.braceL:return this.parseBlock(!0,s);case bS.semi:return this.parseEmptyStatement(s);case bS._export:case bS._import:return this.options.allowImportExportEverywhere||(t||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'")),i===bS._import?this.parseImport(s):this.parseExport(s,n);default:if(this.isAsyncFunction())return e&&this.unexpected(),this.next(),this.parseFunctionStatement(s,!0,!e);var a=this.value,o=this.parseExpression();return i===bS.name&&"Identifier"===o.type&&this.eat(bS.colon)?this.parseLabeledStatement(s,a,o,e):this.parseExpressionStatement(s,o)}},WS.parseBreakContinueStatement=function(e,t){var n="break"===t;this.next(),this.eat(bS.semi)||this.insertSemicolon()?e.label=null:this.type!==bS.name?this.unexpected():(e.label=this.parseIdent(),this.semicolon());for(var r=0;r<this.labels.length;++r){var i=this.labels[r];if(null==e.label||i.name===e.label.name){if(null!=i.kind&&(n||"loop"===i.kind))break;if(e.label&&n)break}}return r===this.labels.length&&this.raise(e.start,"Unsyntactic "+t),this.finishNode(e,n?"BreakStatement":"ContinueStatement")},WS.parseDebuggerStatement=function(e){return this.next(),this.semicolon(),this.finishNode(e,"DebuggerStatement")},WS.parseDoStatement=function(e){return this.next(),this.labels.push(qS),e.body=this.parseStatement("do"),this.labels.pop(),this.expect(bS._while),e.test=this.parseParenExpression(),this.options.ecmaVersion>=6?this.eat(bS.semi):this.semicolon(),this.finishNode(e,"DoWhileStatement")},WS.parseForStatement=function(e){this.next();var t=this.options.ecmaVersion>=9&&(this.inAsync||!this.inFunction&&this.options.allowAwaitOutsideFunction)&&this.eatContextual("await")?this.lastTokStart:-1;if(this.labels.push(qS),this.enterScope(0),this.expect(bS.parenL),this.type===bS.semi)return t>-1&&this.unexpected(t),this.parseFor(e,null);var n=this.isLet();if(this.type===bS._var||this.type===bS._const||n){var r=this.startNode(),i=n?"let":this.value;return this.next(),this.parseVar(r,!0,i),this.finishNode(r,"VariableDeclaration"),!(this.type===bS._in||this.options.ecmaVersion>=6&&this.isContextual("of"))||1!==r.declarations.length||"var"!==i&&r.declarations[0].init?(t>-1&&this.unexpected(t),this.parseFor(e,r)):(this.options.ecmaVersion>=9&&(this.type===bS._in?t>-1&&this.unexpected(t):e.await=t>-1),this.parseForIn(e,r))}var s=new zS,a=this.parseExpression(!0,s);return this.type===bS._in||this.options.ecmaVersion>=6&&this.isContextual("of")?(this.options.ecmaVersion>=9&&(this.type===bS._in?t>-1&&this.unexpected(t):e.await=t>-1),this.toAssignable(a,!1,s),this.checkLVal(a),this.parseForIn(e,a)):(this.checkExpressionErrors(s,!0),t>-1&&this.unexpected(t),this.parseFor(e,a))},WS.parseFunctionStatement=function(e,t,n){return this.next(),this.parseFunction(e,YS|(n?0:ZS),!1,t)},WS.parseIfStatement=function(e){return this.next(),e.test=this.parseParenExpression(),e.consequent=this.parseStatement("if"),e.alternate=this.eat(bS._else)?this.parseStatement("if"):null,this.finishNode(e,"IfStatement")},WS.parseReturnStatement=function(e){return this.inFunction||this.options.allowReturnOutsideFunction||this.raise(this.start,"'return' outside of function"),this.next(),this.eat(bS.semi)||this.insertSemicolon()?e.argument=null:(e.argument=this.parseExpression(),this.semicolon()),this.finishNode(e,"ReturnStatement")},WS.parseSwitchStatement=function(e){var t;this.next(),e.discriminant=this.parseParenExpression(),e.cases=[],this.expect(bS.braceL),this.labels.push(GS),this.enterScope(0);for(var n=!1;this.type!==bS.braceR;)if(this.type===bS._case||this.type===bS._default){var r=this.type===bS._case;t&&this.finishNode(t,"SwitchCase"),e.cases.push(t=this.startNode()),t.consequent=[],this.next(),r?t.test=this.parseExpression():(n&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),n=!0,t.test=null),this.expect(bS.colon)}else t||this.unexpected(),t.consequent.push(this.parseStatement(null));return this.exitScope(),t&&this.finishNode(t,"SwitchCase"),this.next(),this.labels.pop(),this.finishNode(e,"SwitchStatement")},WS.parseThrowStatement=function(e){return this.next(),yS.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw"),e.argument=this.parseExpression(),this.semicolon(),this.finishNode(e,"ThrowStatement")};var KS=[];WS.parseTryStatement=function(e){if(this.next(),e.block=this.parseBlock(),e.handler=null,this.type===bS._catch){var t=this.startNode();if(this.next(),this.eat(bS.parenL)){t.param=this.parseBindingAtom();var n="Identifier"===t.param.type;this.enterScope(n?32:0),this.checkLVal(t.param,n?4:2),this.expect(bS.parenR)}else this.options.ecmaVersion<10&&this.unexpected(),t.param=null,this.enterScope(0);t.body=this.parseBlock(!1),this.exitScope(),e.handler=this.finishNode(t,"CatchClause")}return e.finalizer=this.eat(bS._finally)?this.parseBlock():null,e.handler||e.finalizer||this.raise(e.start,"Missing catch or finally clause"),this.finishNode(e,"TryStatement")},WS.parseVarStatement=function(e,t){return this.next(),this.parseVar(e,!1,t),this.semicolon(),this.finishNode(e,"VariableDeclaration")},WS.parseWhileStatement=function(e){return this.next(),e.test=this.parseParenExpression(),this.labels.push(qS),e.body=this.parseStatement("while"),this.labels.pop(),this.finishNode(e,"WhileStatement")},WS.parseWithStatement=function(e){return this.strict&&this.raise(this.start,"'with' in strict mode"),this.next(),e.object=this.parseParenExpression(),e.body=this.parseStatement("with"),this.finishNode(e,"WithStatement")},WS.parseEmptyStatement=function(e){return this.next(),this.finishNode(e,"EmptyStatement")},WS.parseLabeledStatement=function(e,t,n,r){for(var i=0,s=this.labels;i<s.length;i+=1){s[i].name===t&&this.raise(n.start,"Label '"+t+"' is already declared")}for(var a=this.type.isLoop?"loop":this.type===bS._switch?"switch":null,o=this.labels.length-1;o>=0;o--){var l=this.labels[o];if(l.statementStart!==e.start)break;l.statementStart=this.start,l.kind=a}return this.labels.push({name:t,kind:a,statementStart:this.start}),e.body=this.parseStatement(r),("ClassDeclaration"===e.body.type||"VariableDeclaration"===e.body.type&&"var"!==e.body.kind||"FunctionDeclaration"===e.body.type&&(this.strict||e.body.generator||e.body.async))&&this.raiseRecoverable(e.body.start,"Invalid labeled declaration"),this.labels.pop(),e.label=n,this.finishNode(e,"LabeledStatement")},WS.parseExpressionStatement=function(e,t){return e.expression=t,this.semicolon(),this.finishNode(e,"ExpressionStatement")},WS.parseBlock=function(e,t){for(void 0===e&&(e=!0),void 0===t&&(t=this.startNode()),t.body=[],this.expect(bS.braceL),e&&this.enterScope(0);!this.eat(bS.braceR);){var n=this.parseStatement(null);t.body.push(n)}return e&&this.exitScope(),this.finishNode(t,"BlockStatement")},WS.parseFor=function(e,t){return e.init=t,this.expect(bS.semi),e.test=this.type===bS.semi?null:this.parseExpression(),this.expect(bS.semi),e.update=this.type===bS.parenR?null:this.parseExpression(),this.expect(bS.parenR),this.exitScope(),e.body=this.parseStatement("for"),this.labels.pop(),this.finishNode(e,"ForStatement")},WS.parseForIn=function(e,t){var n=this.type===bS._in?"ForInStatement":"ForOfStatement";return this.next(),"ForInStatement"===n&&("AssignmentPattern"===t.type||"VariableDeclaration"===t.type&&null!=t.declarations[0].init&&(this.strict||"Identifier"!==t.declarations[0].id.type))&&this.raise(t.start,"Invalid assignment in for-in loop head"),e.left=t,e.right="ForInStatement"===n?this.parseExpression():this.parseMaybeAssign(),this.expect(bS.parenR),this.exitScope(),e.body=this.parseStatement("for"),this.labels.pop(),this.finishNode(e,n)},WS.parseVar=function(e,t,n){for(e.declarations=[],e.kind=n;;){var r=this.startNode();if(this.parseVarId(r,n),this.eat(bS.eq)?r.init=this.parseMaybeAssign(t):"const"!==n||this.type===bS._in||this.options.ecmaVersion>=6&&this.isContextual("of")?"Identifier"===r.id.type||t&&(this.type===bS._in||this.isContextual("of"))?r.init=null:this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):this.unexpected(),e.declarations.push(this.finishNode(r,"VariableDeclarator")),!this.eat(bS.comma))break}return e},WS.parseVarId=function(e,t){e.id=this.parseBindingAtom(t),this.checkLVal(e.id,"var"===t?1:2,!1)};var YS=1,ZS=2;WS.parseFunction=function(e,t,n,r){this.initFunction(e),(this.options.ecmaVersion>=9||this.options.ecmaVersion>=6&&!r)&&(e.generator=this.eat(bS.star)),this.options.ecmaVersion>=8&&(e.async=!!r),t&YS&&(e.id=4&t&&this.type!==bS.name?null:this.parseIdent(),!e.id||t&ZS||this.checkLVal(e.id,this.inModule&&!this.inFunction?2:3));var i=this.yieldPos,s=this.awaitPos;return this.yieldPos=0,this.awaitPos=0,this.enterScope(VS(e.async,e.generator)),t&YS||(e.id=this.type===bS.name?this.parseIdent():null),this.parseFunctionParams(e),this.parseFunctionBody(e,n),this.yieldPos=i,this.awaitPos=s,this.finishNode(e,t&YS?"FunctionDeclaration":"FunctionExpression")},WS.parseFunctionParams=function(e){this.expect(bS.parenL),e.params=this.parseBindingList(bS.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams()},WS.parseClass=function(e,t){this.next(),this.parseClassId(e,t),this.parseClassSuper(e);var n=this.startNode(),r=!1;for(n.body=[],this.expect(bS.braceL);!this.eat(bS.braceR);){var i=this.parseClassElement(null!==e.superClass);i&&(n.body.push(i),"MethodDefinition"===i.type&&"constructor"===i.kind&&(r&&this.raise(i.start,"Duplicate constructor in the same class"),r=!0))}return e.body=this.finishNode(n,"ClassBody"),this.finishNode(e,t?"ClassDeclaration":"ClassExpression")},WS.parseClassElement=function(e){var t=this;if(this.eat(bS.semi))return null;var n=this.startNode(),r=function(e,r){void 0===r&&(r=!1);var i=t.start,s=t.startLoc;return!!t.eatContextual(e)&&(!(t.type===bS.parenL||r&&t.canInsertSemicolon())||(n.key&&t.unexpected(),n.computed=!1,n.key=t.startNodeAt(i,s),n.key.name=e,t.finishNode(n.key,"Identifier"),!1))};n.kind="method",n.static=r("static");var i=this.eat(bS.star),s=!1;i||(this.options.ecmaVersion>=8&&r("async",!0)?(s=!0,i=this.options.ecmaVersion>=9&&this.eat(bS.star)):r("get")?n.kind="get":r("set")&&(n.kind="set")),n.key||this.parsePropertyName(n);var a=n.key,o=!1;return n.computed||n.static||!("Identifier"===a.type&&"constructor"===a.name||"Literal"===a.type&&"constructor"===a.value)?n.static&&"Identifier"===a.type&&"prototype"===a.name&&this.raise(a.start,"Classes may not have a static property named prototype"):("method"!==n.kind&&this.raise(a.start,"Constructor can't have get/set modifier"),i&&this.raise(a.start,"Constructor can't be a generator"),s&&this.raise(a.start,"Constructor can't be an async method"),n.kind="constructor",o=e),this.parseClassMethod(n,i,s,o),"get"===n.kind&&0!==n.value.params.length&&this.raiseRecoverable(n.value.start,"getter should have no params"),"set"===n.kind&&1!==n.value.params.length&&this.raiseRecoverable(n.value.start,"setter should have exactly one param"),"set"===n.kind&&"RestElement"===n.value.params[0].type&&this.raiseRecoverable(n.value.params[0].start,"Setter cannot use rest params"),n},WS.parseClassMethod=function(e,t,n,r){return e.value=this.parseMethod(t,n,r),this.finishNode(e,"MethodDefinition")},WS.parseClassId=function(e,t){e.id=this.type===bS.name?this.parseIdent():!0===t?this.unexpected():null},WS.parseClassSuper=function(e){e.superClass=this.eat(bS._extends)?this.parseExprSubscripts():null},WS.parseExport=function(e,t){if(this.next(),this.eat(bS.star))return this.expectContextual("from"),this.type!==bS.string&&this.unexpected(),e.source=this.parseExprAtom(),this.semicolon(),this.finishNode(e,"ExportAllDeclaration");if(this.eat(bS._default)){var n;if(this.checkExport(t,"default",this.lastTokStart),this.type===bS._function||(n=this.isAsyncFunction())){var r=this.startNode();this.next(),n&&this.next(),e.declaration=this.parseFunction(r,4|YS,!1,n,!0)}else if(this.type===bS._class){var i=this.startNode();e.declaration=this.parseClass(i,"nullableID")}else e.declaration=this.parseMaybeAssign(),this.semicolon();return this.finishNode(e,"ExportDefaultDeclaration")}if(this.shouldParseExportStatement())e.declaration=this.parseStatement(null),"VariableDeclaration"===e.declaration.type?this.checkVariableExport(t,e.declaration.declarations):this.checkExport(t,e.declaration.id.name,e.declaration.id.start),e.specifiers=[],e.source=null;else{if(e.declaration=null,e.specifiers=this.parseExportSpecifiers(t),this.eatContextual("from"))this.type!==bS.string&&this.unexpected(),e.source=this.parseExprAtom();else{for(var s=0,a=e.specifiers;s<a.length;s+=1){var o=a[s];this.checkUnreserved(o.local)}e.source=null}this.semicolon()}return this.finishNode(e,"ExportNamedDeclaration")},WS.checkExport=function(e,t,n){e&&(NS(e,t)&&this.raiseRecoverable(n,"Duplicate export '"+t+"'"),e[t]=!0)},WS.checkPatternExport=function(e,t){var n=t.type;if("Identifier"===n)this.checkExport(e,t.name,t.start);else if("ObjectPattern"===n)for(var r=0,i=t.properties;r<i.length;r+=1){var s=i[r];this.checkPatternExport(e,s)}else if("ArrayPattern"===n)for(var a=0,o=t.elements;a<o.length;a+=1){var l=o[a];l&&this.checkPatternExport(e,l)}else"Property"===n?this.checkPatternExport(e,t.value):"AssignmentPattern"===n?this.checkPatternExport(e,t.left):"RestElement"===n?this.checkPatternExport(e,t.argument):"ParenthesizedExpression"===n&&this.checkPatternExport(e,t.expression)},WS.checkVariableExport=function(e,t){if(e)for(var n=0,r=t;n<r.length;n+=1){var i=r[n];this.checkPatternExport(e,i.id)}},WS.shouldParseExportStatement=function(){return"var"===this.type.keyword||"const"===this.type.keyword||"class"===this.type.keyword||"function"===this.type.keyword||this.isLet()||this.isAsyncFunction()},WS.parseExportSpecifiers=function(e){var t=[],n=!0;for(this.expect(bS.braceL);!this.eat(bS.braceR);){if(n)n=!1;else if(this.expect(bS.comma),this.afterTrailingComma(bS.braceR))break;var r=this.startNode();r.local=this.parseIdent(!0),r.exported=this.eatContextual("as")?this.parseIdent(!0):r.local,this.checkExport(e,r.exported.name,r.exported.start),t.push(this.finishNode(r,"ExportSpecifier"))}return t},WS.parseImport=function(e){return this.next(),this.type===bS.string?(e.specifiers=KS,e.source=this.parseExprAtom()):(e.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),e.source=this.type===bS.string?this.parseExprAtom():this.unexpected()),this.semicolon(),this.finishNode(e,"ImportDeclaration")},WS.parseImportSpecifiers=function(){var e=[],t=!0;if(this.type===bS.name){var n=this.startNode();if(n.local=this.parseIdent(),this.checkLVal(n.local,2),e.push(this.finishNode(n,"ImportDefaultSpecifier")),!this.eat(bS.comma))return e}if(this.type===bS.star){var r=this.startNode();return this.next(),this.expectContextual("as"),r.local=this.parseIdent(),this.checkLVal(r.local,2),e.push(this.finishNode(r,"ImportNamespaceSpecifier")),e}for(this.expect(bS.braceL);!this.eat(bS.braceR);){if(t)t=!1;else if(this.expect(bS.comma),this.afterTrailingComma(bS.braceR))break;var i=this.startNode();i.imported=this.parseIdent(!0),this.eatContextual("as")?i.local=this.parseIdent():(this.checkUnreserved(i.imported),i.local=i.imported),this.checkLVal(i.local,2),e.push(this.finishNode(i,"ImportSpecifier"))}return e},WS.adaptDirectivePrologue=function(e){for(var t=0;t<e.length&&this.isDirectiveCandidate(e[t]);++t)e[t].directive=e[t].expression.raw.slice(1,-1)},WS.isDirectiveCandidate=function(e){return"ExpressionStatement"===e.type&&"Literal"===e.expression.type&&"string"==typeof e.expression.value&&('"'===this.input[e.start]||"'"===this.input[e.start])};var QS=BS.prototype;QS.toAssignable=function(e,t,n){if(this.options.ecmaVersion>=6&&e)switch(e.type){case"Identifier":this.inAsync&&"await"===e.name&&this.raise(e.start,"Can not use 'await' as identifier inside an async function");break;case"ObjectPattern":case"ArrayPattern":case"RestElement":break;case"ObjectExpression":e.type="ObjectPattern",n&&this.checkPatternErrors(n,!0);for(var r=0,i=e.properties;r<i.length;r+=1){var s=i[r];this.toAssignable(s,t),"RestElement"!==s.type||"ArrayPattern"!==s.argument.type&&"ObjectPattern"!==s.argument.type||this.raise(s.argument.start,"Unexpected token")}break;case"Property":"init"!==e.kind&&this.raise(e.key.start,"Object pattern can't contain getter or setter"),this.toAssignable(e.value,t);break;case"ArrayExpression":e.type="ArrayPattern",n&&this.checkPatternErrors(n,!0),this.toAssignableList(e.elements,t);break;case"SpreadElement":e.type="RestElement",this.toAssignable(e.argument,t),"AssignmentPattern"===e.argument.type&&this.raise(e.argument.start,"Rest elements cannot have a default value");break;case"AssignmentExpression":"="!==e.operator&&this.raise(e.left.end,"Only '=' operator can be used for specifying default value."),e.type="AssignmentPattern",delete e.operator,this.toAssignable(e.left,t);case"AssignmentPattern":break;case"ParenthesizedExpression":this.toAssignable(e.expression,t);break;case"MemberExpression":if(!t)break;default:this.raise(e.start,"Assigning to rvalue")}else n&&this.checkPatternErrors(n,!0);return e},QS.toAssignableList=function(e,t){for(var n=e.length,r=0;r<n;r++){var i=e[r];i&&this.toAssignable(i,t)}if(n){var s=e[n-1];6===this.options.ecmaVersion&&t&&s&&"RestElement"===s.type&&"Identifier"!==s.argument.type&&this.unexpected(s.argument.start)}return e},QS.parseSpread=function(e){var t=this.startNode();return this.next(),t.argument=this.parseMaybeAssign(!1,e),this.finishNode(t,"SpreadElement")},QS.parseRestBinding=function(){var e=this.startNode();return this.next(),6===this.options.ecmaVersion&&this.type!==bS.name&&this.unexpected(),e.argument=this.parseBindingAtom(),this.finishNode(e,"RestElement")},QS.parseBindingAtom=function(){if(this.options.ecmaVersion>=6)switch(this.type){case bS.bracketL:var e=this.startNode();return this.next(),e.elements=this.parseBindingList(bS.bracketR,!0,!0),this.finishNode(e,"ArrayPattern");case bS.braceL:return this.parseObj(!0)}return this.parseIdent()},QS.parseBindingList=function(e,t,n){for(var r=[],i=!0;!this.eat(e);)if(i?i=!1:this.expect(bS.comma),t&&this.type===bS.comma)r.push(null);else{if(n&&this.afterTrailingComma(e))break;if(this.type===bS.ellipsis){var s=this.parseRestBinding();this.parseBindingListItem(s),r.push(s),this.type===bS.comma&&this.raise(this.start,"Comma is not permitted after the rest element"),this.expect(e);break}var a=this.parseMaybeDefault(this.start,this.startLoc);this.parseBindingListItem(a),r.push(a)}return r},QS.parseBindingListItem=function(e){return e},QS.parseMaybeDefault=function(e,t,n){if(n=n||this.parseBindingAtom(),this.options.ecmaVersion<6||!this.eat(bS.eq))return n;var r=this.startNodeAt(e,t);return r.left=n,r.right=this.parseMaybeAssign(),this.finishNode(r,"AssignmentPattern")},QS.checkLVal=function(e,t,n){switch(void 0===t&&(t=0),e.type){case"Identifier":this.strict&&this.reservedWordsStrictBind.test(e.name)&&this.raiseRecoverable(e.start,(t?"Binding ":"Assigning to ")+e.name+" in strict mode"),n&&(NS(n,e.name)&&this.raiseRecoverable(e.start,"Argument name clash"),n[e.name]=!0),0!==t&&5!==t&&this.declareName(e.name,t,e.start);break;case"MemberExpression":t&&this.raiseRecoverable(e.start,"Binding member expression");break;case"ObjectPattern":for(var r=0,i=e.properties;r<i.length;r+=1){var s=i[r];this.checkLVal(s,t,n)}break;case"Property":this.checkLVal(e.value,t,n);break;case"ArrayPattern":for(var a=0,o=e.elements;a<o.length;a+=1){var l=o[a];l&&this.checkLVal(l,t,n)}break;case"AssignmentPattern":this.checkLVal(e.left,t,n);break;case"RestElement":this.checkLVal(e.argument,t,n);break;case"ParenthesizedExpression":this.checkLVal(e.expression,t,n);break;default:this.raise(e.start,(t?"Binding":"Assigning to")+" rvalue")}};var XS=BS.prototype;XS.checkPropClash=function(e,t,n){if(!(this.options.ecmaVersion>=9&&"SpreadElement"===e.type||this.options.ecmaVersion>=6&&(e.computed||e.method||e.shorthand))){var r,i=e.key;switch(i.type){case"Identifier":r=i.name;break;case"Literal":r=String(i.value);break;default:return}var s=e.kind;if(this.options.ecmaVersion>=6)"__proto__"===r&&"init"===s&&(t.proto&&(n&&n.doubleProto<0?n.doubleProto=i.start:this.raiseRecoverable(i.start,"Redefinition of __proto__ property")),t.proto=!0);else{var a=t[r="$"+r];if(a)("init"===s?this.strict&&a.init||a.get||a.set:a.init||a[s])&&this.raiseRecoverable(i.start,"Redefinition of property");else a=t[r]={init:!1,get:!1,set:!1};a[s]=!0}}},XS.parseExpression=function(e,t){var n=this.start,r=this.startLoc,i=this.parseMaybeAssign(e,t);if(this.type===bS.comma){var s=this.startNodeAt(n,r);for(s.expressions=[i];this.eat(bS.comma);)s.expressions.push(this.parseMaybeAssign(e,t));return this.finishNode(s,"SequenceExpression")}return i},XS.parseMaybeAssign=function(e,t,n){if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield();this.exprAllowed=!1}var r=!1,i=-1,s=-1,a=-1;t?(i=t.parenthesizedAssign,s=t.trailingComma,a=t.shorthandAssign,t.parenthesizedAssign=t.trailingComma=t.shorthandAssign=-1):(t=new zS,r=!0);var o=this.start,l=this.startLoc;this.type!==bS.parenL&&this.type!==bS.name||(this.potentialArrowAt=this.start);var c=this.parseMaybeConditional(e,t);if(n&&(c=n.call(this,c,o,l)),this.type.isAssign){var u=this.startNodeAt(o,l);return u.operator=this.value,u.left=this.type===bS.eq?this.toAssignable(c,!1,t):c,r||zS.call(t),t.shorthandAssign=-1,this.checkLVal(c),this.next(),u.right=this.parseMaybeAssign(e),this.finishNode(u,"AssignmentExpression")}return r&&this.checkExpressionErrors(t,!0),i>-1&&(t.parenthesizedAssign=i),s>-1&&(t.trailingComma=s),a>-1&&(t.shorthandAssign=a),c},XS.parseMaybeConditional=function(e,t){var n=this.start,r=this.startLoc,i=this.parseExprOps(e,t);if(this.checkExpressionErrors(t))return i;if(this.eat(bS.question)){var s=this.startNodeAt(n,r);return s.test=i,s.consequent=this.parseMaybeAssign(),this.expect(bS.colon),s.alternate=this.parseMaybeAssign(e),this.finishNode(s,"ConditionalExpression")}return i},XS.parseExprOps=function(e,t){var n=this.start,r=this.startLoc,i=this.parseMaybeUnary(t,!1);return this.checkExpressionErrors(t)?i:i.start===n&&"ArrowFunctionExpression"===i.type?i:this.parseExprOp(i,n,r,-1,e)},XS.parseExprOp=function(e,t,n,r,i){var s=this.type.binop;if(null!=s&&(!i||this.type!==bS._in)&&s>r){var a=this.type===bS.logicalOR||this.type===bS.logicalAND,o=this.value;this.next();var l=this.start,c=this.startLoc,u=this.parseExprOp(this.parseMaybeUnary(null,!1),l,c,s,i),h=this.buildBinary(t,n,e,u,o,a);return this.parseExprOp(h,t,n,r,i)}return e},XS.buildBinary=function(e,t,n,r,i,s){var a=this.startNodeAt(e,t);return a.left=n,a.operator=i,a.right=r,this.finishNode(a,s?"LogicalExpression":"BinaryExpression")},XS.parseMaybeUnary=function(e,t){var n,r=this.start,i=this.startLoc;if(this.isContextual("await")&&(this.inAsync||!this.inFunction&&this.options.allowAwaitOutsideFunction))n=this.parseAwait(),t=!0;else if(this.type.prefix){var s=this.startNode(),a=this.type===bS.incDec;s.operator=this.value,s.prefix=!0,this.next(),s.argument=this.parseMaybeUnary(null,!0),this.checkExpressionErrors(e,!0),a?this.checkLVal(s.argument):this.strict&&"delete"===s.operator&&"Identifier"===s.argument.type?this.raiseRecoverable(s.start,"Deleting local variable in strict mode"):t=!0,n=this.finishNode(s,a?"UpdateExpression":"UnaryExpression")}else{if(n=this.parseExprSubscripts(e),this.checkExpressionErrors(e))return n;for(;this.type.postfix&&!this.canInsertSemicolon();){var o=this.startNodeAt(r,i);o.operator=this.value,o.prefix=!1,o.argument=n,this.checkLVal(n),this.next(),n=this.finishNode(o,"UpdateExpression")}}return!t&&this.eat(bS.starstar)?this.buildBinary(r,i,n,this.parseMaybeUnary(null,!1),"**",!1):n},XS.parseExprSubscripts=function(e){var t=this.start,n=this.startLoc,r=this.parseExprAtom(e),i="ArrowFunctionExpression"===r.type&&")"!==this.input.slice(this.lastTokStart,this.lastTokEnd);if(this.checkExpressionErrors(e)||i)return r;var s=this.parseSubscripts(r,t,n);return e&&"MemberExpression"===s.type&&(e.parenthesizedAssign>=s.start&&(e.parenthesizedAssign=-1),e.parenthesizedBind>=s.start&&(e.parenthesizedBind=-1)),s},XS.parseSubscripts=function(e,t,n,r){for(var i=this.options.ecmaVersion>=8&&"Identifier"===e.type&&"async"===e.name&&this.lastTokEnd===e.end&&!this.canInsertSemicolon()&&"async"===this.input.slice(e.start,e.end),s=void 0;;)if((s=this.eat(bS.bracketL))||this.eat(bS.dot)){var a=this.startNodeAt(t,n);a.object=e,a.property=s?this.parseExpression():this.parseIdent(!0),a.computed=!!s,s&&this.expect(bS.bracketR),e=this.finishNode(a,"MemberExpression")}else if(!r&&this.eat(bS.parenL)){var o=new zS,l=this.yieldPos,c=this.awaitPos;this.yieldPos=0,this.awaitPos=0;var u=this.parseExprList(bS.parenR,this.options.ecmaVersion>=8,!1,o);if(i&&!this.canInsertSemicolon()&&this.eat(bS.arrow))return this.checkPatternErrors(o,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=l,this.awaitPos=c,this.parseArrowExpression(this.startNodeAt(t,n),u,!0);this.checkExpressionErrors(o,!0),this.yieldPos=l||this.yieldPos,this.awaitPos=c||this.awaitPos;var h=this.startNodeAt(t,n);h.callee=e,h.arguments=u,e=this.finishNode(h,"CallExpression")}else{if(this.type!==bS.backQuote)return e;var p=this.startNodeAt(t,n);p.tag=e,p.quasi=this.parseTemplate({isTagged:!0}),e=this.finishNode(p,"TaggedTemplateExpression")}},XS.parseExprAtom=function(e){this.type===bS.slash&&this.readRegexp();var t,n=this.potentialArrowAt===this.start;switch(this.type){case bS._super:return this.allowSuper||this.raise(this.start,"'super' keyword outside a method"),t=this.startNode(),this.next(),this.type!==bS.parenL||this.allowDirectSuper||this.raise(t.start,"super() call outside constructor of a subclass"),this.type!==bS.dot&&this.type!==bS.bracketL&&this.type!==bS.parenL&&this.unexpected(),this.finishNode(t,"Super");case bS._this:return t=this.startNode(),this.next(),this.finishNode(t,"ThisExpression");case bS.name:var r=this.start,i=this.startLoc,s=this.containsEsc,a=this.parseIdent(this.type!==bS.name);if(this.options.ecmaVersion>=8&&!s&&"async"===a.name&&!this.canInsertSemicolon()&&this.eat(bS._function))return this.parseFunction(this.startNodeAt(r,i),0,!1,!0);if(n&&!this.canInsertSemicolon()){if(this.eat(bS.arrow))return this.parseArrowExpression(this.startNodeAt(r,i),[a],!1);if(this.options.ecmaVersion>=8&&"async"===a.name&&this.type===bS.name&&!s)return a=this.parseIdent(),!this.canInsertSemicolon()&&this.eat(bS.arrow)||this.unexpected(),this.parseArrowExpression(this.startNodeAt(r,i),[a],!0)}return a;case bS.regexp:var o=this.value;return(t=this.parseLiteral(o.value)).regex={pattern:o.pattern,flags:o.flags},t;case bS.num:case bS.string:return this.parseLiteral(this.value);case bS._null:case bS._true:case bS._false:return(t=this.startNode()).value=this.type===bS._null?null:this.type===bS._true,t.raw=this.type.keyword,this.next(),this.finishNode(t,"Literal");case bS.parenL:var l=this.start,c=this.parseParenAndDistinguishExpression(n);return e&&(e.parenthesizedAssign<0&&!this.isSimpleAssignTarget(c)&&(e.parenthesizedAssign=l),e.parenthesizedBind<0&&(e.parenthesizedBind=l)),c;case bS.bracketL:return t=this.startNode(),this.next(),t.elements=this.parseExprList(bS.bracketR,!0,!0,e),this.finishNode(t,"ArrayExpression");case bS.braceL:return this.parseObj(!1,e);case bS._function:return t=this.startNode(),this.next(),this.parseFunction(t,0);case bS._class:return this.parseClass(this.startNode(),!1);case bS._new:return this.parseNew();case bS.backQuote:return this.parseTemplate();default:this.unexpected()}},XS.parseLiteral=function(e){var t=this.startNode();return t.value=e,t.raw=this.input.slice(this.start,this.end),this.next(),this.finishNode(t,"Literal")},XS.parseParenExpression=function(){this.expect(bS.parenL);var e=this.parseExpression();return this.expect(bS.parenR),e},XS.parseParenAndDistinguishExpression=function(e){var t,n=this.start,r=this.startLoc,i=this.options.ecmaVersion>=8;if(this.options.ecmaVersion>=6){this.next();var s,a=this.start,o=this.startLoc,l=[],c=!0,u=!1,h=new zS,p=this.yieldPos,d=this.awaitPos;for(this.yieldPos=0,this.awaitPos=0;this.type!==bS.parenR;){if(c?c=!1:this.expect(bS.comma),i&&this.afterTrailingComma(bS.parenR,!0)){u=!0;break}if(this.type===bS.ellipsis){s=this.start,l.push(this.parseParenItem(this.parseRestBinding())),this.type===bS.comma&&this.raise(this.start,"Comma is not permitted after the rest element");break}l.push(this.parseMaybeAssign(!1,h,this.parseParenItem))}var f=this.start,m=this.startLoc;if(this.expect(bS.parenR),e&&!this.canInsertSemicolon()&&this.eat(bS.arrow))return this.checkPatternErrors(h,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=p,this.awaitPos=d,this.parseParenArrowList(n,r,l);l.length&&!u||this.unexpected(this.lastTokStart),s&&this.unexpected(s),this.checkExpressionErrors(h,!0),this.yieldPos=p||this.yieldPos,this.awaitPos=d||this.awaitPos,l.length>1?((t=this.startNodeAt(a,o)).expressions=l,this.finishNodeAt(t,"SequenceExpression",f,m)):t=l[0]}else t=this.parseParenExpression();if(this.options.preserveParens){var g=this.startNodeAt(n,r);return g.expression=t,this.finishNode(g,"ParenthesizedExpression")}return t},XS.parseParenItem=function(e){return e},XS.parseParenArrowList=function(e,t,n){return this.parseArrowExpression(this.startNodeAt(e,t),n)};var JS=[];XS.parseNew=function(){var e=this.startNode(),t=this.parseIdent(!0);if(this.options.ecmaVersion>=6&&this.eat(bS.dot)){e.meta=t;var n=this.containsEsc;return e.property=this.parseIdent(!0),("target"!==e.property.name||n)&&this.raiseRecoverable(e.property.start,"The only valid meta property for new is new.target"),this.inNonArrowFunction()||this.raiseRecoverable(e.start,"new.target can only be used in functions"),this.finishNode(e,"MetaProperty")}var r=this.start,i=this.startLoc;return e.callee=this.parseSubscripts(this.parseExprAtom(),r,i,!0),this.eat(bS.parenL)?e.arguments=this.parseExprList(bS.parenR,this.options.ecmaVersion>=8,!1):e.arguments=JS,this.finishNode(e,"NewExpression")},XS.parseTemplateElement=function(e){var t=e.isTagged,n=this.startNode();return this.type===bS.invalidTemplate?(t||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),n.value={raw:this.value,cooked:null}):n.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,"\n"),cooked:this.value},this.next(),n.tail=this.type===bS.backQuote,this.finishNode(n,"TemplateElement")},XS.parseTemplate=function(e){void 0===e&&(e={});var t=e.isTagged;void 0===t&&(t=!1);var n=this.startNode();this.next(),n.expressions=[];var r=this.parseTemplateElement({isTagged:t});for(n.quasis=[r];!r.tail;)this.type===bS.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect(bS.dollarBraceL),n.expressions.push(this.parseExpression()),this.expect(bS.braceR),n.quasis.push(r=this.parseTemplateElement({isTagged:t}));return this.next(),this.finishNode(n,"TemplateLiteral")},XS.isAsyncProp=function(e){return!e.computed&&"Identifier"===e.key.type&&"async"===e.key.name&&(this.type===bS.name||this.type===bS.num||this.type===bS.string||this.type===bS.bracketL||this.type.keyword||this.options.ecmaVersion>=9&&this.type===bS.star)&&!yS.test(this.input.slice(this.lastTokEnd,this.start))},XS.parseObj=function(e,t){var n=this.startNode(),r=!0,i={};for(n.properties=[],this.next();!this.eat(bS.braceR);){if(r)r=!1;else if(this.expect(bS.comma),this.afterTrailingComma(bS.braceR))break;var s=this.parseProperty(e,t);e||this.checkPropClash(s,i,t),n.properties.push(s)}return this.finishNode(n,e?"ObjectPattern":"ObjectExpression")},XS.parseProperty=function(e,t){var n,r,i,s,a=this.startNode();if(this.options.ecmaVersion>=9&&this.eat(bS.ellipsis))return e?(a.argument=this.parseIdent(!1),this.type===bS.comma&&this.raise(this.start,"Comma is not permitted after the rest element"),this.finishNode(a,"RestElement")):(this.type===bS.parenL&&t&&(t.parenthesizedAssign<0&&(t.parenthesizedAssign=this.start),t.parenthesizedBind<0&&(t.parenthesizedBind=this.start)),a.argument=this.parseMaybeAssign(!1,t),this.type===bS.comma&&t&&t.trailingComma<0&&(t.trailingComma=this.start),this.finishNode(a,"SpreadElement"));this.options.ecmaVersion>=6&&(a.method=!1,a.shorthand=!1,(e||t)&&(i=this.start,s=this.startLoc),e||(n=this.eat(bS.star)));var o=this.containsEsc;return this.parsePropertyName(a),!e&&!o&&this.options.ecmaVersion>=8&&!n&&this.isAsyncProp(a)?(r=!0,n=this.options.ecmaVersion>=9&&this.eat(bS.star),this.parsePropertyName(a,t)):r=!1,this.parsePropertyValue(a,e,n,r,i,s,t,o),this.finishNode(a,"Property")},XS.parsePropertyValue=function(e,t,n,r,i,s,a,o){if((n||r)&&this.type===bS.colon&&this.unexpected(),this.eat(bS.colon))e.value=t?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,a),e.kind="init";else if(this.options.ecmaVersion>=6&&this.type===bS.parenL)t&&this.unexpected(),e.kind="init",e.method=!0,e.value=this.parseMethod(n,r);else if(t||o||!(this.options.ecmaVersion>=5)||e.computed||"Identifier"!==e.key.type||"get"!==e.key.name&&"set"!==e.key.name||this.type===bS.comma||this.type===bS.braceR)this.options.ecmaVersion>=6&&!e.computed&&"Identifier"===e.key.type?(this.checkUnreserved(e.key),e.kind="init",t?e.value=this.parseMaybeDefault(i,s,e.key):this.type===bS.eq&&a?(a.shorthandAssign<0&&(a.shorthandAssign=this.start),e.value=this.parseMaybeDefault(i,s,e.key)):e.value=e.key,e.shorthand=!0):this.unexpected();else{(n||r)&&this.unexpected(),e.kind=e.key.name,this.parsePropertyName(e),e.value=this.parseMethod(!1);var l="get"===e.kind?0:1;if(e.value.params.length!==l){var c=e.value.start;"get"===e.kind?this.raiseRecoverable(c,"getter should have no params"):this.raiseRecoverable(c,"setter should have exactly one param")}else"set"===e.kind&&"RestElement"===e.value.params[0].type&&this.raiseRecoverable(e.value.params[0].start,"Setter cannot use rest params")}},XS.parsePropertyName=function(e){if(this.options.ecmaVersion>=6){if(this.eat(bS.bracketL))return e.computed=!0,e.key=this.parseMaybeAssign(),this.expect(bS.bracketR),e.key;e.computed=!1}return e.key=this.type===bS.num||this.type===bS.string?this.parseExprAtom():this.parseIdent(!0)},XS.initFunction=function(e){e.id=null,this.options.ecmaVersion>=6&&(e.generator=e.expression=!1),this.options.ecmaVersion>=8&&(e.async=!1)},XS.parseMethod=function(e,t,n){var r=this.startNode(),i=this.yieldPos,s=this.awaitPos;return this.initFunction(r),this.options.ecmaVersion>=6&&(r.generator=e),this.options.ecmaVersion>=8&&(r.async=!!t),this.yieldPos=0,this.awaitPos=0,this.enterScope(64|VS(t,r.generator)|(n?128:0)),this.expect(bS.parenL),r.params=this.parseBindingList(bS.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams(),this.parseFunctionBody(r,!1),this.yieldPos=i,this.awaitPos=s,this.finishNode(r,"FunctionExpression")},XS.parseArrowExpression=function(e,t,n){var r=this.yieldPos,i=this.awaitPos;return this.enterScope(16|VS(n,!1)),this.initFunction(e),this.options.ecmaVersion>=8&&(e.async=!!n),this.yieldPos=0,this.awaitPos=0,e.params=this.toAssignableList(t,!0),this.parseFunctionBody(e,!0),this.yieldPos=r,this.awaitPos=i,this.finishNode(e,"ArrowFunctionExpression")},XS.parseFunctionBody=function(e,t){var n=t&&this.type!==bS.braceL,r=this.strict,i=!1;if(n)e.body=this.parseMaybeAssign(),e.expression=!0,this.checkParams(e,!1);else{var s=this.options.ecmaVersion>=7&&!this.isSimpleParamList(e.params);r&&!s||(i=this.strictDirective(this.end))&&s&&this.raiseRecoverable(e.start,"Illegal 'use strict' directive in function with non-simple parameter list");var a=this.labels;this.labels=[],i&&(this.strict=!0),this.checkParams(e,!r&&!i&&!t&&this.isSimpleParamList(e.params)),e.body=this.parseBlock(!1),e.expression=!1,this.adaptDirectivePrologue(e.body.body),this.labels=a}this.exitScope(),this.strict&&e.id&&this.checkLVal(e.id,5),this.strict=r},XS.isSimpleParamList=function(e){for(var t=0,n=e;t<n.length;t+=1){if("Identifier"!==n[t].type)return!1}return!0},XS.checkParams=function(e,t){for(var n={},r=0,i=e.params;r<i.length;r+=1){var s=i[r];this.checkLVal(s,1,t?null:n)}},XS.parseExprList=function(e,t,n,r){for(var i=[],s=!0;!this.eat(e);){if(s)s=!1;else if(this.expect(bS.comma),t&&this.afterTrailingComma(e))break;var a=void 0;n&&this.type===bS.comma?a=null:this.type===bS.ellipsis?(a=this.parseSpread(r),r&&this.type===bS.comma&&r.trailingComma<0&&(r.trailingComma=this.start)):a=this.parseMaybeAssign(!1,r),i.push(a)}return i},XS.checkUnreserved=function(e){var t=e.start,n=e.end,r=e.name;(this.inGenerator&&"yield"===r&&this.raiseRecoverable(t,"Can not use 'yield' as identifier inside a generator"),this.inAsync&&"await"===r&&this.raiseRecoverable(t,"Can not use 'await' as identifier inside an async function"),this.keywords.test(r)&&this.raise(t,"Unexpected keyword '"+r+"'"),this.options.ecmaVersion<6&&-1!==this.input.slice(t,n).indexOf("\\"))||(this.strict?this.reservedWordsStrict:this.reservedWords).test(r)&&(this.inAsync||"await"!==r||this.raiseRecoverable(t,"Can not use keyword 'await' outside an async function"),this.raiseRecoverable(t,"The keyword '"+r+"' is reserved"))},XS.parseIdent=function(e,t){var n=this.startNode();return e&&"never"===this.options.allowReserved&&(e=!1),this.type===bS.name?n.name=this.value:this.type.keyword?(n.name=this.type.keyword,"class"!==n.name&&"function"!==n.name||this.lastTokEnd===this.lastTokStart+1&&46===this.input.charCodeAt(this.lastTokStart)||this.context.pop()):this.unexpected(),this.next(),this.finishNode(n,"Identifier"),e||this.checkUnreserved(n),n},XS.parseYield=function(){this.yieldPos||(this.yieldPos=this.start);var e=this.startNode();return this.next(),this.type===bS.semi||this.canInsertSemicolon()||this.type!==bS.star&&!this.type.startsExpr?(e.delegate=!1,e.argument=null):(e.delegate=this.eat(bS.star),e.argument=this.parseMaybeAssign()),this.finishNode(e,"YieldExpression")},XS.parseAwait=function(){this.awaitPos||(this.awaitPos=this.start);var e=this.startNode();return this.next(),e.argument=this.parseMaybeUnary(null,!0),this.finishNode(e,"AwaitExpression")};var eN=BS.prototype;eN.raise=function(e,t){var n=PS(this.input,e);t+=" ("+n.line+":"+n.column+")";var r=new SyntaxError(t);throw r.pos=e,r.loc=n,r.raisedAt=this.pos,r},eN.raiseRecoverable=eN.raise,eN.curPosition=function(){if(this.options.locations)return new AS(this.curLine,this.pos-this.lineStart)};var tN=BS.prototype,nN=function(e){this.flags=e,this.var=[],this.lexical=[]};tN.enterScope=function(e){this.scopeStack.push(new nN(e))},tN.exitScope=function(){this.scopeStack.pop()},tN.declareName=function(e,t,n){var r=!1;if(2===t){var i=this.currentScope();r=i.lexical.indexOf(e)>-1||i.var.indexOf(e)>-1,i.lexical.push(e)}else if(4===t){this.currentScope().lexical.push(e)}else if(3===t){var s=this.currentScope();r=s.lexical.indexOf(e)>-1,s.var.push(e)}else for(var a=this.scopeStack.length-1;a>=0;--a){var o=this.scopeStack[a];if(o.lexical.indexOf(e)>-1&&!(32&o.flags)&&o.lexical[0]===e&&(r=!0),o.var.push(e),o.flags&RS)break}r&&this.raiseRecoverable(n,"Identifier '"+e+"' has already been declared")},tN.currentScope=function(){return this.scopeStack[this.scopeStack.length-1]},tN.currentVarScope=function(){for(var e=this.scopeStack.length-1;;e--){var t=this.scopeStack[e];if(t.flags&RS)return t}},tN.currentThisScope=function(){for(var e=this.scopeStack.length-1;;e--){var t=this.scopeStack[e];if(t.flags&RS&&!(16&t.flags))return t}};var rN=function(e,t,n){this.type="",this.start=t,this.end=0,e.options.locations&&(this.loc=new LS(e,n)),e.options.directSourceFile&&(this.sourceFile=e.options.directSourceFile),e.options.ranges&&(this.range=[t,0])},iN=BS.prototype;function sN(e,t,n,r){return e.type=t,e.end=n,this.options.locations&&(e.loc.end=r),this.options.ranges&&(e.range[1]=n),e}iN.startNode=function(){return new rN(this,this.start,this.startLoc)},iN.startNodeAt=function(e,t){return new rN(this,e,t)},iN.finishNode=function(e,t){return sN.call(this,e,t,this.lastTokEnd,this.lastTokEndLoc)},iN.finishNodeAt=function(e,t,n,r){return sN.call(this,e,t,n,r)};var aN=function(e,t,n,r,i){this.token=e,this.isExpr=!!t,this.preserveSpace=!!n,this.override=r,this.generator=!!i},oN={b_stat:new aN("{",!1),b_expr:new aN("{",!0),b_tmpl:new aN("${",!1),p_stat:new aN("(",!1),p_expr:new aN("(",!0),q_tmpl:new aN("`",!0,!0,function(e){return e.tryReadTemplateToken()}),f_stat:new aN("function",!1),f_expr:new aN("function",!0),f_expr_gen:new aN("function",!0,!1,null,!0),f_gen:new aN("function",!1,!1,null,!0)},lN=BS.prototype;lN.initialContext=function(){return[oN.b_stat]},lN.braceIsBlock=function(e){var t=this.curContext();return t===oN.f_expr||t===oN.f_stat||(e!==bS.colon||t!==oN.b_stat&&t!==oN.b_expr?e===bS._return||e===bS.name&&this.exprAllowed?yS.test(this.input.slice(this.lastTokEnd,this.start)):e===bS._else||e===bS.semi||e===bS.eof||e===bS.parenR||e===bS.arrow||(e===bS.braceL?t===oN.b_stat:e!==bS._var&&e!==bS._const&&e!==bS.name&&!this.exprAllowed):!t.isExpr)},lN.inGeneratorContext=function(){for(var e=this.context.length-1;e>=1;e--){var t=this.context[e];if("function"===t.token)return t.generator}return!1},lN.updateContext=function(e){var t,n=this.type;n.keyword&&e===bS.dot?this.exprAllowed=!1:(t=n.updateContext)?t.call(this,e):this.exprAllowed=n.beforeExpr},bS.parenR.updateContext=bS.braceR.updateContext=function(){if(1!==this.context.length){var e=this.context.pop();e===oN.b_stat&&"function"===this.curContext().token&&(e=this.context.pop()),this.exprAllowed=!e.isExpr}else this.exprAllowed=!0},bS.braceL.updateContext=function(e){this.context.push(this.braceIsBlock(e)?oN.b_stat:oN.b_expr),this.exprAllowed=!0},bS.dollarBraceL.updateContext=function(){this.context.push(oN.b_tmpl),this.exprAllowed=!0},bS.parenL.updateContext=function(e){var t=e===bS._if||e===bS._for||e===bS._with||e===bS._while;this.context.push(t?oN.p_stat:oN.p_expr),this.exprAllowed=!0},bS.incDec.updateContext=function(){},bS._function.updateContext=bS._class.updateContext=function(e){!e.beforeExpr||e===bS.semi||e===bS._else||e===bS._return&&yS.test(this.input.slice(this.lastTokEnd,this.start))||(e===bS.colon||e===bS.braceL)&&this.curContext()===oN.b_stat?this.context.push(oN.f_stat):this.context.push(oN.f_expr),this.exprAllowed=!1},bS.backQuote.updateContext=function(){this.curContext()===oN.q_tmpl?this.context.pop():this.context.push(oN.q_tmpl),this.exprAllowed=!1},bS.star.updateContext=function(e){if(e===bS._function){var t=this.context.length-1;this.context[t]===oN.f_expr?this.context[t]=oN.f_expr_gen:this.context[t]=oN.f_gen}this.exprAllowed=!0},bS.name.updateContext=function(e){var t=!1;this.options.ecmaVersion>=6&&e!==bS.dot&&("of"===this.value&&!this.exprAllowed||"yield"===this.value&&this.inGeneratorContext())&&(t=!0),this.exprAllowed=t};var cN={$LONE:["ASCII","ASCII_Hex_Digit","AHex","Alphabetic","Alpha","Any","Assigned","Bidi_Control","Bidi_C","Bidi_Mirrored","Bidi_M","Case_Ignorable","CI","Cased","Changes_When_Casefolded","CWCF","Changes_When_Casemapped","CWCM","Changes_When_Lowercased","CWL","Changes_When_NFKC_Casefolded","CWKCF","Changes_When_Titlecased","CWT","Changes_When_Uppercased","CWU","Dash","Default_Ignorable_Code_Point","DI","Deprecated","Dep","Diacritic","Dia","Emoji","Emoji_Component","Emoji_Modifier","Emoji_Modifier_Base","Emoji_Presentation","Extender","Ext","Grapheme_Base","Gr_Base","Grapheme_Extend","Gr_Ext","Hex_Digit","Hex","IDS_Binary_Operator","IDSB","IDS_Trinary_Operator","IDST","ID_Continue","IDC","ID_Start","IDS","Ideographic","Ideo","Join_Control","Join_C","Logical_Order_Exception","LOE","Lowercase","Lower","Math","Noncharacter_Code_Point","NChar","Pattern_Syntax","Pat_Syn","Pattern_White_Space","Pat_WS","Quotation_Mark","QMark","Radical","Regional_Indicator","RI","Sentence_Terminal","STerm","Soft_Dotted","SD","Terminal_Punctuation","Term","Unified_Ideograph","UIdeo","Uppercase","Upper","Variation_Selector","VS","White_Space","space","XID_Continue","XIDC","XID_Start","XIDS"],General_Category:["Cased_Letter","LC","Close_Punctuation","Pe","Connector_Punctuation","Pc","Control","Cc","cntrl","Currency_Symbol","Sc","Dash_Punctuation","Pd","Decimal_Number","Nd","digit","Enclosing_Mark","Me","Final_Punctuation","Pf","Format","Cf","Initial_Punctuation","Pi","Letter","L","Letter_Number","Nl","Line_Separator","Zl","Lowercase_Letter","Ll","Mark","M","Combining_Mark","Math_Symbol","Sm","Modifier_Letter","Lm","Modifier_Symbol","Sk","Nonspacing_Mark","Mn","Number","N","Open_Punctuation","Ps","Other","C","Other_Letter","Lo","Other_Number","No","Other_Punctuation","Po","Other_Symbol","So","Paragraph_Separator","Zp","Private_Use","Co","Punctuation","P","punct","Separator","Z","Space_Separator","Zs","Spacing_Mark","Mc","Surrogate","Cs","Symbol","S","Titlecase_Letter","Lt","Unassigned","Cn","Uppercase_Letter","Lu"],Script:["Adlam","Adlm","Ahom","Anatolian_Hieroglyphs","Hluw","Arabic","Arab","Armenian","Armn","Avestan","Avst","Balinese","Bali","Bamum","Bamu","Bassa_Vah","Bass","Batak","Batk","Bengali","Beng","Bhaiksuki","Bhks","Bopomofo","Bopo","Brahmi","Brah","Braille","Brai","Buginese","Bugi","Buhid","Buhd","Canadian_Aboriginal","Cans","Carian","Cari","Caucasian_Albanian","Aghb","Chakma","Cakm","Cham","Cherokee","Cher","Common","Zyyy","Coptic","Copt","Qaac","Cuneiform","Xsux","Cypriot","Cprt","Cyrillic","Cyrl","Deseret","Dsrt","Devanagari","Deva","Duployan","Dupl","Egyptian_Hieroglyphs","Egyp","Elbasan","Elba","Ethiopic","Ethi","Georgian","Geor","Glagolitic","Glag","Gothic","Goth","Grantha","Gran","Greek","Grek","Gujarati","Gujr","Gurmukhi","Guru","Han","Hani","Hangul","Hang","Hanunoo","Hano","Hatran","Hatr","Hebrew","Hebr","Hiragana","Hira","Imperial_Aramaic","Armi","Inherited","Zinh","Qaai","Inscriptional_Pahlavi","Phli","Inscriptional_Parthian","Prti","Javanese","Java","Kaithi","Kthi","Kannada","Knda","Katakana","Kana","Kayah_Li","Kali","Kharoshthi","Khar","Khmer","Khmr","Khojki","Khoj","Khudawadi","Sind","Lao","Laoo","Latin","Latn","Lepcha","Lepc","Limbu","Limb","Linear_A","Lina","Linear_B","Linb","Lisu","Lycian","Lyci","Lydian","Lydi","Mahajani","Mahj","Malayalam","Mlym","Mandaic","Mand","Manichaean","Mani","Marchen","Marc","Masaram_Gondi","Gonm","Meetei_Mayek","Mtei","Mende_Kikakui","Mend","Meroitic_Cursive","Merc","Meroitic_Hieroglyphs","Mero","Miao","Plrd","Modi","Mongolian","Mong","Mro","Mroo","Multani","Mult","Myanmar","Mymr","Nabataean","Nbat","New_Tai_Lue","Talu","Newa","Nko","Nkoo","Nushu","Nshu","Ogham","Ogam","Ol_Chiki","Olck","Old_Hungarian","Hung","Old_Italic","Ital","Old_North_Arabian","Narb","Old_Permic","Perm","Old_Persian","Xpeo","Old_South_Arabian","Sarb","Old_Turkic","Orkh","Oriya","Orya","Osage","Osge","Osmanya","Osma","Pahawh_Hmong","Hmng","Palmyrene","Palm","Pau_Cin_Hau","Pauc","Phags_Pa","Phag","Phoenician","Phnx","Psalter_Pahlavi","Phlp","Rejang","Rjng","Runic","Runr","Samaritan","Samr","Saurashtra","Saur","Sharada","Shrd","Shavian","Shaw","Siddham","Sidd","SignWriting","Sgnw","Sinhala","Sinh","Sora_Sompeng","Sora","Soyombo","Soyo","Sundanese","Sund","Syloti_Nagri","Sylo","Syriac","Syrc","Tagalog","Tglg","Tagbanwa","Tagb","Tai_Le","Tale","Tai_Tham","Lana","Tai_Viet","Tavt","Takri","Takr","Tamil","Taml","Tangut","Tang","Telugu","Telu","Thaana","Thaa","Thai","Tibetan","Tibt","Tifinagh","Tfng","Tirhuta","Tirh","Ugaritic","Ugar","Vai","Vaii","Warang_Citi","Wara","Yi","Yiii","Zanabazar_Square","Zanb"]};Array.prototype.push.apply(cN.$LONE,cN.General_Category),cN.gc=cN.General_Category,cN.sc=cN.Script_Extensions=cN.scx=cN.Script;var uN=BS.prototype,hN=function(e){this.parser=e,this.validFlags="gim"+(e.options.ecmaVersion>=6?"uy":"")+(e.options.ecmaVersion>=9?"s":""),this.source="",this.flags="",this.start=0,this.switchU=!1,this.switchN=!1,this.pos=0,this.lastIntValue=0,this.lastStringValue="",this.lastAssertionIsQuantifiable=!1,this.numCapturingParens=0,this.maxBackReference=0,this.groupNames=[],this.backReferenceNames=[]};function pN(e){return e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode(55296+(e>>10),56320+(1023&e)))}function dN(e){return 36===e||e>=40&&e<=43||46===e||63===e||e>=91&&e<=94||e>=123&&e<=125}function fN(e){return e>=65&&e<=90||e>=97&&e<=122}function mN(e){return fN(e)||95===e}function gN(e){return mN(e)||vN(e)}function vN(e){return e>=48&&e<=57}function bN(e){return e>=48&&e<=57||e>=65&&e<=70||e>=97&&e<=102}function yN(e){return e>=65&&e<=70?e-65+10:e>=97&&e<=102?e-97+10:e-48}function wN(e){return e>=48&&e<=55}hN.prototype.reset=function(e,t,n){var r=-1!==n.indexOf("u");this.start=0|e,this.source=t+"",this.flags=n,this.switchU=r&&this.parser.options.ecmaVersion>=6,this.switchN=r&&this.parser.options.ecmaVersion>=9},hN.prototype.raise=function(e){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+e)},hN.prototype.at=function(e){var t=this.source,n=t.length;if(e>=n)return-1;var r=t.charCodeAt(e);return!this.switchU||r<=55295||r>=57344||e+1>=n?r:(r<<10)+t.charCodeAt(e+1)-56613888},hN.prototype.nextIndex=function(e){var t=this.source,n=t.length;if(e>=n)return n;var r=t.charCodeAt(e);return!this.switchU||r<=55295||r>=57344||e+1>=n?e+1:e+2},hN.prototype.current=function(){return this.at(this.pos)},hN.prototype.lookahead=function(){return this.at(this.nextIndex(this.pos))},hN.prototype.advance=function(){this.pos=this.nextIndex(this.pos)},hN.prototype.eat=function(e){return this.current()===e&&(this.advance(),!0)},uN.validateRegExpFlags=function(e){for(var t=e.validFlags,n=e.flags,r=0;r<n.length;r++){var i=n.charAt(r);-1===t.indexOf(i)&&this.raise(e.start,"Invalid regular expression flag"),n.indexOf(i,r+1)>-1&&this.raise(e.start,"Duplicate regular expression flag")}},uN.validateRegExpPattern=function(e){this.regexp_pattern(e),!e.switchN&&this.options.ecmaVersion>=9&&e.groupNames.length>0&&(e.switchN=!0,this.regexp_pattern(e))},uN.regexp_pattern=function(e){e.pos=0,e.lastIntValue=0,e.lastStringValue="",e.lastAssertionIsQuantifiable=!1,e.numCapturingParens=0,e.maxBackReference=0,e.groupNames.length=0,e.backReferenceNames.length=0,this.regexp_disjunction(e),e.pos!==e.source.length&&(e.eat(41)&&e.raise("Unmatched ')'"),(e.eat(93)||e.eat(125))&&e.raise("Lone quantifier brackets")),e.maxBackReference>e.numCapturingParens&&e.raise("Invalid escape");for(var t=0,n=e.backReferenceNames;t<n.length;t+=1){var r=n[t];-1===e.groupNames.indexOf(r)&&e.raise("Invalid named capture referenced")}},uN.regexp_disjunction=function(e){for(this.regexp_alternative(e);e.eat(124);)this.regexp_alternative(e);this.regexp_eatQuantifier(e,!0)&&e.raise("Nothing to repeat"),e.eat(123)&&e.raise("Lone quantifier brackets")},uN.regexp_alternative=function(e){for(;e.pos<e.source.length&&this.regexp_eatTerm(e););},uN.regexp_eatTerm=function(e){return this.regexp_eatAssertion(e)?(e.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(e)&&e.switchU&&e.raise("Invalid quantifier"),!0):!(e.switchU?!this.regexp_eatAtom(e):!this.regexp_eatExtendedAtom(e))&&(this.regexp_eatQuantifier(e),!0)},uN.regexp_eatAssertion=function(e){var t=e.pos;if(e.lastAssertionIsQuantifiable=!1,e.eat(94)||e.eat(36))return!0;if(e.eat(92)){if(e.eat(66)||e.eat(98))return!0;e.pos=t}if(e.eat(40)&&e.eat(63)){var n=!1;if(this.options.ecmaVersion>=9&&(n=e.eat(60)),e.eat(61)||e.eat(33))return this.regexp_disjunction(e),e.eat(41)||e.raise("Unterminated group"),e.lastAssertionIsQuantifiable=!n,!0}return e.pos=t,!1},uN.regexp_eatQuantifier=function(e,t){return void 0===t&&(t=!1),!!this.regexp_eatQuantifierPrefix(e,t)&&(e.eat(63),!0)},uN.regexp_eatQuantifierPrefix=function(e,t){return e.eat(42)||e.eat(43)||e.eat(63)||this.regexp_eatBracedQuantifier(e,t)},uN.regexp_eatBracedQuantifier=function(e,t){var n=e.pos;if(e.eat(123)){var r=0,i=-1;if(this.regexp_eatDecimalDigits(e)&&(r=e.lastIntValue,e.eat(44)&&this.regexp_eatDecimalDigits(e)&&(i=e.lastIntValue),e.eat(125)))return-1!==i&&i<r&&!t&&e.raise("numbers out of order in {} quantifier"),!0;e.switchU&&!t&&e.raise("Incomplete quantifier"),e.pos=n}return!1},uN.regexp_eatAtom=function(e){return this.regexp_eatPatternCharacters(e)||e.eat(46)||this.regexp_eatReverseSolidusAtomEscape(e)||this.regexp_eatCharacterClass(e)||this.regexp_eatUncapturingGroup(e)||this.regexp_eatCapturingGroup(e)},uN.regexp_eatReverseSolidusAtomEscape=function(e){var t=e.pos;if(e.eat(92)){if(this.regexp_eatAtomEscape(e))return!0;e.pos=t}return!1},uN.regexp_eatUncapturingGroup=function(e){var t=e.pos;if(e.eat(40)){if(e.eat(63)&&e.eat(58)){if(this.regexp_disjunction(e),e.eat(41))return!0;e.raise("Unterminated group")}e.pos=t}return!1},uN.regexp_eatCapturingGroup=function(e){if(e.eat(40)){if(this.options.ecmaVersion>=9?this.regexp_groupSpecifier(e):63===e.current()&&e.raise("Invalid group"),this.regexp_disjunction(e),e.eat(41))return e.numCapturingParens+=1,!0;e.raise("Unterminated group")}return!1},uN.regexp_eatExtendedAtom=function(e){return e.eat(46)||this.regexp_eatReverseSolidusAtomEscape(e)||this.regexp_eatCharacterClass(e)||this.regexp_eatUncapturingGroup(e)||this.regexp_eatCapturingGroup(e)||this.regexp_eatInvalidBracedQuantifier(e)||this.regexp_eatExtendedPatternCharacter(e)},uN.regexp_eatInvalidBracedQuantifier=function(e){return this.regexp_eatBracedQuantifier(e,!0)&&e.raise("Nothing to repeat"),!1},uN.regexp_eatSyntaxCharacter=function(e){var t=e.current();return!!dN(t)&&(e.lastIntValue=t,e.advance(),!0)},uN.regexp_eatPatternCharacters=function(e){for(var t=e.pos,n=0;-1!==(n=e.current())&&!dN(n);)e.advance();return e.pos!==t},uN.regexp_eatExtendedPatternCharacter=function(e){var t=e.current();return!(-1===t||36===t||t>=40&&t<=43||46===t||63===t||91===t||94===t||124===t)&&(e.advance(),!0)},uN.regexp_groupSpecifier=function(e){if(e.eat(63)){if(this.regexp_eatGroupName(e))return-1!==e.groupNames.indexOf(e.lastStringValue)&&e.raise("Duplicate capture group name"),void e.groupNames.push(e.lastStringValue);e.raise("Invalid group")}},uN.regexp_eatGroupName=function(e){if(e.lastStringValue="",e.eat(60)){if(this.regexp_eatRegExpIdentifierName(e)&&e.eat(62))return!0;e.raise("Invalid capture group name")}return!1},uN.regexp_eatRegExpIdentifierName=function(e){if(e.lastStringValue="",this.regexp_eatRegExpIdentifierStart(e)){for(e.lastStringValue+=pN(e.lastIntValue);this.regexp_eatRegExpIdentifierPart(e);)e.lastStringValue+=pN(e.lastIntValue);return!0}return!1},uN.regexp_eatRegExpIdentifierStart=function(e){var t=e.pos,n=e.current();return e.advance(),92===n&&this.regexp_eatRegExpUnicodeEscapeSequence(e)&&(n=e.lastIntValue),function(e){return uS(e,!0)||36===e||95===e}(n)?(e.lastIntValue=n,!0):(e.pos=t,!1)},uN.regexp_eatRegExpIdentifierPart=function(e){var t=e.pos,n=e.current();return e.advance(),92===n&&this.regexp_eatRegExpUnicodeEscapeSequence(e)&&(n=e.lastIntValue),function(e){return hS(e,!0)||36===e||95===e||8204===e||8205===e}(n)?(e.lastIntValue=n,!0):(e.pos=t,!1)},uN.regexp_eatAtomEscape=function(e){return!!(this.regexp_eatBackReference(e)||this.regexp_eatCharacterClassEscape(e)||this.regexp_eatCharacterEscape(e)||e.switchN&&this.regexp_eatKGroupName(e))||(e.switchU&&(99===e.current()&&e.raise("Invalid unicode escape"),e.raise("Invalid escape")),!1)},uN.regexp_eatBackReference=function(e){var t=e.pos;if(this.regexp_eatDecimalEscape(e)){var n=e.lastIntValue;if(e.switchU)return n>e.maxBackReference&&(e.maxBackReference=n),!0;if(n<=e.numCapturingParens)return!0;e.pos=t}return!1},uN.regexp_eatKGroupName=function(e){if(e.eat(107)){if(this.regexp_eatGroupName(e))return e.backReferenceNames.push(e.lastStringValue),!0;e.raise("Invalid named reference")}return!1},uN.regexp_eatCharacterEscape=function(e){return this.regexp_eatControlEscape(e)||this.regexp_eatCControlLetter(e)||this.regexp_eatZero(e)||this.regexp_eatHexEscapeSequence(e)||this.regexp_eatRegExpUnicodeEscapeSequence(e)||!e.switchU&&this.regexp_eatLegacyOctalEscapeSequence(e)||this.regexp_eatIdentityEscape(e)},uN.regexp_eatCControlLetter=function(e){var t=e.pos;if(e.eat(99)){if(this.regexp_eatControlLetter(e))return!0;e.pos=t}return!1},uN.regexp_eatZero=function(e){return 48===e.current()&&!vN(e.lookahead())&&(e.lastIntValue=0,e.advance(),!0)},uN.regexp_eatControlEscape=function(e){var t=e.current();return 116===t?(e.lastIntValue=9,e.advance(),!0):110===t?(e.lastIntValue=10,e.advance(),!0):118===t?(e.lastIntValue=11,e.advance(),!0):102===t?(e.lastIntValue=12,e.advance(),!0):114===t&&(e.lastIntValue=13,e.advance(),!0)},uN.regexp_eatControlLetter=function(e){var t=e.current();return!!fN(t)&&(e.lastIntValue=t%32,e.advance(),!0)},uN.regexp_eatRegExpUnicodeEscapeSequence=function(e){var t=e.pos;if(e.eat(117)){if(this.regexp_eatFixedHexDigits(e,4)){var n=e.lastIntValue;if(e.switchU&&n>=55296&&n<=56319){var r=e.pos;if(e.eat(92)&&e.eat(117)&&this.regexp_eatFixedHexDigits(e,4)){var i=e.lastIntValue;if(i>=56320&&i<=57343)return e.lastIntValue=1024*(n-55296)+(i-56320)+65536,!0}e.pos=r,e.lastIntValue=n}return!0}if(e.switchU&&e.eat(123)&&this.regexp_eatHexDigits(e)&&e.eat(125)&&function(e){return e>=0&&e<=1114111}(e.lastIntValue))return!0;e.switchU&&e.raise("Invalid unicode escape"),e.pos=t}return!1},uN.regexp_eatIdentityEscape=function(e){if(e.switchU)return!!this.regexp_eatSyntaxCharacter(e)||!!e.eat(47)&&(e.lastIntValue=47,!0);var t=e.current();return!(99===t||e.switchN&&107===t)&&(e.lastIntValue=t,e.advance(),!0)},uN.regexp_eatDecimalEscape=function(e){e.lastIntValue=0;var t=e.current();if(t>=49&&t<=57){do{e.lastIntValue=10*e.lastIntValue+(t-48),e.advance()}while((t=e.current())>=48&&t<=57);return!0}return!1},uN.regexp_eatCharacterClassEscape=function(e){var t=e.current();if(function(e){return 100===e||68===e||115===e||83===e||119===e||87===e}(t))return e.lastIntValue=-1,e.advance(),!0;if(e.switchU&&this.options.ecmaVersion>=9&&(80===t||112===t)){if(e.lastIntValue=-1,e.advance(),e.eat(123)&&this.regexp_eatUnicodePropertyValueExpression(e)&&e.eat(125))return!0;e.raise("Invalid property name")}return!1},uN.regexp_eatUnicodePropertyValueExpression=function(e){var t=e.pos;if(this.regexp_eatUnicodePropertyName(e)&&e.eat(61)){var n=e.lastStringValue;if(this.regexp_eatUnicodePropertyValue(e)){var r=e.lastStringValue;return this.regexp_validateUnicodePropertyNameAndValue(e,n,r),!0}}if(e.pos=t,this.regexp_eatLoneUnicodePropertyNameOrValue(e)){var i=e.lastStringValue;return this.regexp_validateUnicodePropertyNameOrValue(e,i),!0}return!1},uN.regexp_validateUnicodePropertyNameAndValue=function(e,t,n){cN.hasOwnProperty(t)&&-1!==cN[t].indexOf(n)||e.raise("Invalid property name")},uN.regexp_validateUnicodePropertyNameOrValue=function(e,t){-1===cN.$LONE.indexOf(t)&&e.raise("Invalid property name")},uN.regexp_eatUnicodePropertyName=function(e){var t=0;for(e.lastStringValue="";mN(t=e.current());)e.lastStringValue+=pN(t),e.advance();return""!==e.lastStringValue},uN.regexp_eatUnicodePropertyValue=function(e){var t=0;for(e.lastStringValue="";gN(t=e.current());)e.lastStringValue+=pN(t),e.advance();return""!==e.lastStringValue},uN.regexp_eatLoneUnicodePropertyNameOrValue=function(e){return this.regexp_eatUnicodePropertyValue(e)},uN.regexp_eatCharacterClass=function(e){if(e.eat(91)){if(e.eat(94),this.regexp_classRanges(e),e.eat(93))return!0;e.raise("Unterminated character class")}return!1},uN.regexp_classRanges=function(e){for(;this.regexp_eatClassAtom(e);){var t=e.lastIntValue;if(e.eat(45)&&this.regexp_eatClassAtom(e)){var n=e.lastIntValue;!e.switchU||-1!==t&&-1!==n||e.raise("Invalid character class"),-1!==t&&-1!==n&&t>n&&e.raise("Range out of order in character class")}}},uN.regexp_eatClassAtom=function(e){var t=e.pos;if(e.eat(92)){if(this.regexp_eatClassEscape(e))return!0;if(e.switchU){var n=e.current();(99===n||wN(n))&&e.raise("Invalid class escape"),e.raise("Invalid escape")}e.pos=t}var r=e.current();return 93!==r&&(e.lastIntValue=r,e.advance(),!0)},uN.regexp_eatClassEscape=function(e){var t=e.pos;if(e.eat(98))return e.lastIntValue=8,!0;if(e.switchU&&e.eat(45))return e.lastIntValue=45,!0;if(!e.switchU&&e.eat(99)){if(this.regexp_eatClassControlLetter(e))return!0;e.pos=t}return this.regexp_eatCharacterClassEscape(e)||this.regexp_eatCharacterEscape(e)},uN.regexp_eatClassControlLetter=function(e){var t=e.current();return!(!vN(t)&&95!==t)&&(e.lastIntValue=t%32,e.advance(),!0)},uN.regexp_eatHexEscapeSequence=function(e){var t=e.pos;if(e.eat(120)){if(this.regexp_eatFixedHexDigits(e,2))return!0;e.switchU&&e.raise("Invalid escape"),e.pos=t}return!1},uN.regexp_eatDecimalDigits=function(e){var t=e.pos,n=0;for(e.lastIntValue=0;vN(n=e.current());)e.lastIntValue=10*e.lastIntValue+(n-48),e.advance();return e.pos!==t},uN.regexp_eatHexDigits=function(e){var t=e.pos,n=0;for(e.lastIntValue=0;bN(n=e.current());)e.lastIntValue=16*e.lastIntValue+yN(n),e.advance();return e.pos!==t},uN.regexp_eatLegacyOctalEscapeSequence=function(e){if(this.regexp_eatOctalDigit(e)){var t=e.lastIntValue;if(this.regexp_eatOctalDigit(e)){var n=e.lastIntValue;t<=3&&this.regexp_eatOctalDigit(e)?e.lastIntValue=64*t+8*n+e.lastIntValue:e.lastIntValue=8*t+n}else e.lastIntValue=t;return!0}return!1},uN.regexp_eatOctalDigit=function(e){var t=e.current();return wN(t)?(e.lastIntValue=t-48,e.advance(),!0):(e.lastIntValue=0,!1)},uN.regexp_eatFixedHexDigits=function(e,t){var n=e.pos;e.lastIntValue=0;for(var r=0;r<t;++r){var i=e.current();if(!bN(i))return e.pos=n,!1;e.lastIntValue=16*e.lastIntValue+yN(i),e.advance()}return!0};var xN=function(e){this.type=e.type,this.value=e.value,this.start=e.start,this.end=e.end,e.options.locations&&(this.loc=new LS(e,e.startLoc,e.endLoc)),e.options.ranges&&(this.range=[e.start,e.end])},EN=BS.prototype;function kN(e){return e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode(55296+(e>>10),56320+(1023&e)))}EN.next=function(){this.options.onToken&&this.options.onToken(new xN(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken()},EN.getToken=function(){return this.next(),new xN(this)},"undefined"!=typeof Symbol&&(EN[Symbol.iterator]=function(){var e=this;return{next:function(){var t=e.getToken();return{done:t.type===bS.eof,value:t}}}}),EN.curContext=function(){return this.context[this.context.length-1]},EN.nextToken=function(){var e=this.curContext();return e&&e.preserveSpace||this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length?this.finishToken(bS.eof):e.override?e.override(this):void this.readToken(this.fullCharCodeAtPos())},EN.readToken=function(e){return uS(e,this.options.ecmaVersion>=6)||92===e?this.readWord():this.getTokenFromCode(e)},EN.fullCharCodeAtPos=function(){var e=this.input.charCodeAt(this.pos);return e<=55295||e>=57344?e:(e<<10)+this.input.charCodeAt(this.pos+1)-56613888},EN.skipBlockComment=function(){var e,t=this.options.onComment&&this.curPosition(),n=this.pos,r=this.input.indexOf("*/",this.pos+=2);if(-1===r&&this.raise(this.pos-2,"Unterminated comment"),this.pos=r+2,this.options.locations)for(wS.lastIndex=n;(e=wS.exec(this.input))&&e.index<this.pos;)++this.curLine,this.lineStart=e.index+e[0].length;this.options.onComment&&this.options.onComment(!0,this.input.slice(n+2,r),n,this.pos,t,this.curPosition())},EN.skipLineComment=function(e){for(var t=this.pos,n=this.options.onComment&&this.curPosition(),r=this.input.charCodeAt(this.pos+=e);this.pos<this.input.length&&!xS(r);)r=this.input.charCodeAt(++this.pos);this.options.onComment&&this.options.onComment(!1,this.input.slice(t+e,this.pos),t,this.pos,n,this.curPosition())},EN.skipSpace=function(){e:for(;this.pos<this.input.length;){var e=this.input.charCodeAt(this.pos);switch(e){case 32:case 160:++this.pos;break;case 13:10===this.input.charCodeAt(this.pos+1)&&++this.pos;case 10:case 8232:case 8233:++this.pos,this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break e}break;default:if(!(e>8&&e<14||e>=5760&&ES.test(String.fromCharCode(e))))break e;++this.pos}}},EN.finishToken=function(e,t){this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());var n=this.type;this.type=e,this.value=t,this.updateContext(n)},EN.readToken_dot=function(){var e=this.input.charCodeAt(this.pos+1);if(e>=48&&e<=57)return this.readNumber(!0);var t=this.input.charCodeAt(this.pos+2);return this.options.ecmaVersion>=6&&46===e&&46===t?(this.pos+=3,this.finishToken(bS.ellipsis)):(++this.pos,this.finishToken(bS.dot))},EN.readToken_slash=function(){var e=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):61===e?this.finishOp(bS.assign,2):this.finishOp(bS.slash,1)},EN.readToken_mult_modulo_exp=function(e){var t=this.input.charCodeAt(this.pos+1),n=1,r=42===e?bS.star:bS.modulo;return this.options.ecmaVersion>=7&&42===e&&42===t&&(++n,r=bS.starstar,t=this.input.charCodeAt(this.pos+2)),61===t?this.finishOp(bS.assign,n+1):this.finishOp(r,n)},EN.readToken_pipe_amp=function(e){var t=this.input.charCodeAt(this.pos+1);return t===e?this.finishOp(124===e?bS.logicalOR:bS.logicalAND,2):61===t?this.finishOp(bS.assign,2):this.finishOp(124===e?bS.bitwiseOR:bS.bitwiseAND,1)},EN.readToken_caret=function(){return 61===this.input.charCodeAt(this.pos+1)?this.finishOp(bS.assign,2):this.finishOp(bS.bitwiseXOR,1)},EN.readToken_plus_min=function(e){var t=this.input.charCodeAt(this.pos+1);return t===e?45!==t||this.inModule||62!==this.input.charCodeAt(this.pos+2)||0!==this.lastTokEnd&&!yS.test(this.input.slice(this.lastTokEnd,this.pos))?this.finishOp(bS.incDec,2):(this.skipLineComment(3),this.skipSpace(),this.nextToken()):61===t?this.finishOp(bS.assign,2):this.finishOp(bS.plusMin,1)},EN.readToken_lt_gt=function(e){var t=this.input.charCodeAt(this.pos+1),n=1;return t===e?(n=62===e&&62===this.input.charCodeAt(this.pos+2)?3:2,61===this.input.charCodeAt(this.pos+n)?this.finishOp(bS.assign,n+1):this.finishOp(bS.bitShift,n)):33!==t||60!==e||this.inModule||45!==this.input.charCodeAt(this.pos+2)||45!==this.input.charCodeAt(this.pos+3)?(61===t&&(n=2),this.finishOp(bS.relational,n)):(this.skipLineComment(4),this.skipSpace(),this.nextToken())},EN.readToken_eq_excl=function(e){var t=this.input.charCodeAt(this.pos+1);return 61===t?this.finishOp(bS.equality,61===this.input.charCodeAt(this.pos+2)?3:2):61===e&&62===t&&this.options.ecmaVersion>=6?(this.pos+=2,this.finishToken(bS.arrow)):this.finishOp(61===e?bS.eq:bS.prefix,1)},EN.getTokenFromCode=function(e){switch(e){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(bS.parenL);case 41:return++this.pos,this.finishToken(bS.parenR);case 59:return++this.pos,this.finishToken(bS.semi);case 44:return++this.pos,this.finishToken(bS.comma);case 91:return++this.pos,this.finishToken(bS.bracketL);case 93:return++this.pos,this.finishToken(bS.bracketR);case 123:return++this.pos,this.finishToken(bS.braceL);case 125:return++this.pos,this.finishToken(bS.braceR);case 58:return++this.pos,this.finishToken(bS.colon);case 63:return++this.pos,this.finishToken(bS.question);case 96:if(this.options.ecmaVersion<6)break;return++this.pos,this.finishToken(bS.backQuote);case 48:var t=this.input.charCodeAt(this.pos+1);if(120===t||88===t)return this.readRadixNumber(16);if(this.options.ecmaVersion>=6){if(111===t||79===t)return this.readRadixNumber(8);if(98===t||66===t)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(e);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(e);case 124:case 38:return this.readToken_pipe_amp(e);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(e);case 60:case 62:return this.readToken_lt_gt(e);case 61:case 33:return this.readToken_eq_excl(e);case 126:return this.finishOp(bS.prefix,1)}this.raise(this.pos,"Unexpected character '"+kN(e)+"'")},EN.finishOp=function(e,t){var n=this.input.slice(this.pos,this.pos+t);return this.pos+=t,this.finishToken(e,n)},EN.readRegexp=function(){for(var e,t,n=this.pos;;){this.pos>=this.input.length&&this.raise(n,"Unterminated regular expression");var r=this.input.charAt(this.pos);if(yS.test(r)&&this.raise(n,"Unterminated regular expression"),e)e=!1;else{if("["===r)t=!0;else if("]"===r&&t)t=!1;else if("/"===r&&!t)break;e="\\"===r}++this.pos}var i=this.input.slice(n,this.pos);++this.pos;var s=this.pos,a=this.readWord1();this.containsEsc&&this.unexpected(s);var o=this.regexpState||(this.regexpState=new hN(this));o.reset(n,i,a),this.validateRegExpFlags(o),this.validateRegExpPattern(o);var l=null;try{l=new RegExp(i,a)}catch(c){}return this.finishToken(bS.regexp,{pattern:i,flags:a,value:l})},EN.readInt=function(e,t){for(var n=this.pos,r=0,i=0,s=null==t?1/0:t;i<s;++i){var a=this.input.charCodeAt(this.pos),o=void 0;if((o=a>=97?a-97+10:a>=65?a-65+10:a>=48&&a<=57?a-48:1/0)>=e)break;++this.pos,r=r*e+o}return this.pos===n||null!=t&&this.pos-n!==t?null:r},EN.readRadixNumber=function(e){this.pos+=2;var t=this.readInt(e);return null==t&&this.raise(this.start+2,"Expected number in radix "+e),uS(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(bS.num,t)},EN.readNumber=function(e){var t=this.pos;e||null!==this.readInt(10)||this.raise(t,"Invalid number");var n=this.pos-t>=2&&48===this.input.charCodeAt(t);n&&this.strict&&this.raise(t,"Invalid number"),n&&/[89]/.test(this.input.slice(t,this.pos))&&(n=!1);var r=this.input.charCodeAt(this.pos);46!==r||n||(++this.pos,this.readInt(10),r=this.input.charCodeAt(this.pos)),69!==r&&101!==r||n||(43!==(r=this.input.charCodeAt(++this.pos))&&45!==r||++this.pos,null===this.readInt(10)&&this.raise(t,"Invalid number")),uS(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");var i=this.input.slice(t,this.pos),s=n?parseInt(i,8):parseFloat(i);return this.finishToken(bS.num,s)},EN.readCodePoint=function(){var e;if(123===this.input.charCodeAt(this.pos)){this.options.ecmaVersion<6&&this.unexpected();var t=++this.pos;e=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos),++this.pos,e>1114111&&this.invalidStringToken(t,"Code point out of bounds")}else e=this.readHexChar(4);return e},EN.readString=function(e){for(var t="",n=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var r=this.input.charCodeAt(this.pos);if(r===e)break;92===r?(t+=this.input.slice(n,this.pos),t+=this.readEscapedChar(!1),n=this.pos):(xS(r,this.options.ecmaVersion>=10)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}return t+=this.input.slice(n,this.pos++),this.finishToken(bS.string,t)};var CN={};EN.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(ZL){if(ZL!==CN)throw ZL;this.readInvalidTemplateToken()}this.inTemplateElement=!1},EN.invalidStringToken=function(e,t){if(this.inTemplateElement&&this.options.ecmaVersion>=9)throw CN;this.raise(e,t)},EN.readTmplToken=function(){for(var e="",t=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var n=this.input.charCodeAt(this.pos);if(96===n||36===n&&123===this.input.charCodeAt(this.pos+1))return this.pos!==this.start||this.type!==bS.template&&this.type!==bS.invalidTemplate?(e+=this.input.slice(t,this.pos),this.finishToken(bS.template,e)):36===n?(this.pos+=2,this.finishToken(bS.dollarBraceL)):(++this.pos,this.finishToken(bS.backQuote));if(92===n)e+=this.input.slice(t,this.pos),e+=this.readEscapedChar(!0),t=this.pos;else if(xS(n)){switch(e+=this.input.slice(t,this.pos),++this.pos,n){case 13:10===this.input.charCodeAt(this.pos)&&++this.pos;case 10:e+="\n";break;default:e+=String.fromCharCode(n)}this.options.locations&&(++this.curLine,this.lineStart=this.pos),t=this.pos}else++this.pos}},EN.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case"\\":++this.pos;break;case"$":if("{"!==this.input[this.pos+1])break;case"`":return this.finishToken(bS.invalidTemplate,this.input.slice(this.start,this.pos))}this.raise(this.start,"Unterminated template")},EN.readEscapedChar=function(e){var t=this.input.charCodeAt(++this.pos);switch(++this.pos,t){case 110:return"\n";case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return kN(this.readCodePoint());case 116:return"\t";case 98:return"\b";case 118:return"\v";case 102:return"\f";case 13:10===this.input.charCodeAt(this.pos)&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";default:if(t>=48&&t<=55){var n=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],r=parseInt(n,8);return r>255&&(n=n.slice(0,-1),r=parseInt(n,8)),this.pos+=n.length-1,t=this.input.charCodeAt(this.pos),"0"===n&&56!==t&&57!==t||!this.strict&&!e||this.invalidStringToken(this.pos-1-n.length,e?"Octal literal in template string":"Octal literal in strict mode"),String.fromCharCode(r)}return String.fromCharCode(t)}},EN.readHexChar=function(e){var t=this.pos,n=this.readInt(16,e);return null===n&&this.invalidStringToken(t,"Bad character escape sequence"),n},EN.readWord1=function(){this.containsEsc=!1;for(var e="",t=!0,n=this.pos,r=this.options.ecmaVersion>=6;this.pos<this.input.length;){var i=this.fullCharCodeAtPos();if(hS(i,r))this.pos+=i<=65535?1:2;else{if(92!==i)break;this.containsEsc=!0,e+=this.input.slice(n,this.pos);var s=this.pos;117!==this.input.charCodeAt(++this.pos)&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos;var a=this.readCodePoint();(t?uS:hS)(a,r)||this.invalidStringToken(s,"Invalid Unicode escape"),e+=kN(a),n=this.pos}t=!1}return e+this.input.slice(n,this.pos)},EN.readWord=function(){var e=this.readWord1(),t=bS.name;return this.keywords.test(e)&&(this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+e),t=gS[e]),this.finishToken(t,e)};var _N=new Set(["Array","ArrayBuffer","atob","AudioContext","Blob","Boolean","BigInt","btoa","clearInterval","clearTimeout","console","crypto","CustomEvent","DataView","Date","decodeURI","decodeURIComponent","devicePixelRatio","document","encodeURI","encodeURIComponent","Error","escape","eval","fetch","File","FileList","FileReader","Float32Array","Float64Array","Function","Headers","Image","ImageData","Infinity","Int16Array","Int32Array","Int8Array","Intl","isFinite","isNaN","JSON","Map","Math","NaN","Number","navigator","Object","parseFloat","parseInt","performance","Path2D","Promise","Proxy","RangeError","ReferenceError","Reflect","RegExp","cancelAnimationFrame","requestAnimationFrame","Set","setInterval","setTimeout","String","Symbol","SyntaxError","TextDecoder","TextEncoder","this","TypeError","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray","undefined","unescape","URIError","URL","WeakMap","WeakSet","WebSocket","Worker","window"]);class SN{constructor(){this._nameNode=null,this._inputNodes=[],this._offsets=[{line:1,column:0,lineOffset:0,columnOffset:0}]}_ensureOffset(e,t){let n=this._closest(e,t);n&&n.line===e&&n.column===t||this._offsets.push({line:e,column:t,lineOffset:n?n.lineOffset:0,columnOffset:n&&n.line===e?n.columnOffset:0})}_closest(e,t){let n=null;return this._offsets.forEach(r=>{(r.line<e||r.line===e&&r.column<=t)&&(!n||r.line>n.line||r.line===n.line&&r.column>n.column)&&(n=r)}),n}translate(e,t){const n=this._closest(e,t);if(n)return{line:e+n.lineOffset,column:e===n.line?t+n.columnOffset:t}}translateError(e){let t;if(e.runtime){const t=e.runtime.input?this._inputNodes.find(t=>e.runtime.input===("ViewExpression"===t.type?`viewof ${t.id.name}`:t.name)):this._nameNode;return t&&{line:t.location.line,column:t.location.column+1}}if(e.message&&(t=/^[\s\S]+\((\d+):(\d+)\)$/m.exec(e.message)))return this.translate(+t[1],+t[2]+1);if(e.message&&e.message.startsWith("JSON.parse")){const t=e.stack.split("\n")[0],n=/eval:(\d+):(\d+)$/.exec(t);if(n)return this.translate(+n[1],+n[2])}else if(e.stack){const n=e.stack.split("\n");for(let e=n.length-1;e>=0;e--){const r=n[e];if((t=/<anonymous>:(\d+):(\d+)\)$/.exec(r))||(t=/Function:(\d+):(\d+)$/.exec(r)),t)return this.translate(+t[1],+t[2])}}}name(e){this._nameNode=e}inputs(e){this._inputNodes=e}insert(e,t,n){const{line:r,column:i}=PS(e,t),s=PS(n,n.length);return--s.line,this._ensureOffset(r,i),this._offsets.forEach(e=>{if(e.line>r)e.line+=s.line,e.lineOffset-=s.line;else if(e.line===r&&e.column>=i)if(e.line+=s.line,e.lineOffset-=s.line,s.line){const t=s.column+(e.column-i);e.columnOffset+=e.column-t,e.column=t}else e.column+=s.column,e.columnOffset-=s.column}),e.slice(0,t)+n+e.slice(t)}delete(e,t,n){const{line:r,column:i}=PS(e,t),{line:s,column:a}=PS(e,n),o=s-r,l=s===r?a-i:0;return this._ensureOffset(s,a),this._offsets=this._offsets.filter(e=>{if(r<e.line&&s>e.line||e.line===r&&s>r&&e.column>=i||e.line===s&&r<s&&e.column<a||r===e.line&&s===e.line&&e.column>=i&&e.column<a)return!1;if(e.line>r){if(e.line===s){const t=i+e.column-a;e.columnOffset+=e.column-t,e.column=t}e.line-=o,e.lineOffset+=o}else e.line===r&&e.line===s&&e.column>=a&&(e.column-=l,e.columnOffset+=l);return!0}),e.slice(0,t)+e.slice(n)}sort(){return this._offsets.sort((e,t)=>e.line===t.line?e.column-t.column:e.line-t.line),this}}async function NN(e,t,n,r){const i=new Map,s=new Map,a=l(e,t,n);function o(e){let t=i.get(e);return t||i.set(e,t=async function(e){const t=await r(e),n=new Map;return t.nodes.forEach(t=>{const r=PN(t.value);if(r.name)if(r.mutable){const e=`mutable ${r.name}`;n.set(e,r),n.set(r.name,{inputs:[e]})}else if(r.view){const e=`viewof ${r.name}`;n.set(e,r),n.set(r.name,{inputs:[e]})}else n.set(r.name,r);else if(r.imports){const i=l(e,t.id,r);r.imports.forEach(e=>{n.set(e.name,{name:e.name,remote:e.remote,module:i})})}}),n}(e)),t}function l(e,t,n){let r=n.module;if(!n.exports)return r;let s=e+"/"+t;return i.set(s,o(r).then(t=>(t=new Map(t),n.exports.forEach(n=>{t.set(n.name,{name:n.name,remote:n.remote,module:e})}),t))),s}try{await async function t(n,r,i){if(n===e)return;if(i>8)throw new RangeError("Maximum import stack size exceeded");const a=await o(n);let l=s.get(n);const c=new Map;l||s.set(n,l=new Map);for(const e of r){let t=a.get(e);if(t)if(l.set(e,t),t.module){let e=c.get(t.module);e||c.set(t.module,e=new Set),e.add(t.remote)}else t.inputs.forEach(r.add,r)}for(const[e,s]of c)await t(e,s,i+1)}(a,function(e){return new Set(e.map(TN))}(n.imports),1)}catch(c){return{name:void 0,view:!1,inputs:[],body:`throw new ${c.constructor.name}(${JSON.stringify(c.message)})`,sourcemap:new SN}}return{id:a,imports:n.imports,module:n.module,modules:Array.from(s,AN)}}function TN(e){return e.remote}function AN(e){return{id:e[0],values:Array.from(e[1].values())}}const LN={globals:_N};function PN(e){const t=new SN;try{const r={},i=Q_(e,LN),s=new Map;let a,o=!1,l=!1;if(null===i.body)return{name:a,view:o,mutable:l,inputs:[],features:r,body:"",sourcemap:t};if("ImportDeclaration"===i.body.type)return function(e){return{module:e.source.value,imports:MN(e.specifiers),exports:e.injections&&MN(e.injections)}}(i.body);const{references:c}=i;for(const t of c)t.location=PS(e,t.start);let u;t.inputs(c);let h=0;const p=function(n){let r=s.get(n.id.name);if(!r){let e=-1;u||(u=function(e){const t=new Set;return j_(e,{Identifier:e=>t.add(e.name)},z_),t}(i.body));do{r=`$${++e}`}while(u.has(r));u.add(r),s.set(n.id.name,r)}const a="ViewExpression"===n.type?r:`${r}.value`;e=t.delete(e,n.start+h,n.end+h),e=t.insert(e,n.start+h,a),h+=n.start-n.end+a.length};if(j_(i.body,{ViewExpression:p,MutableExpression:p},z_),j_(i.body,{Import:function(n,i){const s=i[i.length-2].arguments[0];r.dynamicImport=!0,"Literal"!==s.type||/^(\w+:|\.?\.?\/)/.test(s.value)||(e=t.insert(e,s.end-1+h,"?module"),e=t.insert(e,s.start+1+h,"https://unpkg.com/"),h+=25)}},z_),j_(i.body,{Literal:function(e){e.bigint&&(r.bigInt=!0)}},z_),i.id){o="ViewExpression"===i.id.type,l="MutableExpression"===i.id.type;const n=o||l?i.id.id:i.id;if(a=n.name,n.location=PS(e,n.start),_N.has(a)||"arguments"===a){const{line:e,column:t}=n.location;throw new ReferenceError(`${a} is reserved (${e}:${t})`)}t.name(n)}i.body.end+h<e.length&&(e=t.delete(e,i.body.end+h,e.length)),i.body.start>0&&(e=t.delete(e,0,i.body.start)),i.async&&i.generator&&(r.asyncGenerator=!0);let d=`${i.async?"async ":""}function${i.generator?"*":""}`;const f=c.map(ON,s);return"BlockStatement"===i.body.type?(e=t.insert(e,0,`"use strict";(${d}(${f})\n`),e=t.insert(e,e.length,"\n)")):(e=t.insert(e,0,`"use strict";(${d}(${f}){return(\n`),e=t.insert(e,e.length,"\n)})")),t.sort(),{name:a,view:o,mutable:l,inputs:c.map(IN),body:e,features:r,sourcemap:t}}catch(n){return{name:void 0,view:!1,mutable:!1,features:{},inputs:[],body:`throw new ${n.constructor.name}(${JSON.stringify(n.message)})`,sourcemap:new SN}}}function IN(e){return"ViewExpression"===e.type?`viewof ${e.id.name}`:"MutableExpression"===e.type?`mutable ${e.id.name}`:e.name}function ON(e){return"ViewExpression"===e.type||"MutableExpression"===e.type?this.get(e.id.name):e.name}function MN(e){const t=[];for(const{local:{name:n},imported:{name:r},view:i,mutable:s}of e)t.push({name:n,remote:r}),i?t.push({name:`viewof ${n}`,remote:`viewof ${r}`}):s&&t.push({name:`mutable ${n}`,remote:`mutable ${r}`});return t}const RN=160;function DN({onDismiss:e,safeModeURL:t}){return Y.createElement("div",{className:"fixed bottom-2 right-0 left-0 z-max"},Y.createElement("div",{className:zf},Y.createElement("div",{className:"ph3 pv2 bg-washed-yellow ba b--black-20 br3"},Y.createElement("div",{className:"f5 lh-copy cf"},Y.createElement("div",{className:"flex items-stretch ml2-ns mb2 mb0-ns fr-ns"},Y.createElement("button",{className:"inline-flex items-center ph3 pa1 mr2 fw5 no-underline black-70 hover-black bg-white hover-bg-white ba b--black-10 br2 pointer",onClick:e},"Dismiss warning"),Y.createElement(fh,{className:"inline-flex items-center ph2 pa1 fw5 no-underline blue hover-dark-blue bg-white hover-bg-white ba b--black-10 br2",to:t},Y.createElement(Gd,{className:"mr2",style:{flexShrink:0}}),"Safe mode")),Y.createElement(zd,{className:"dib mr1 red"}),Y.createElement("span",{className:"fw5"},"Notebook not responding.")," There may be an infinite loop or another bug that has made this notebook upset. Use Safe mode to fix this notebook without running its code."))))}const FN=e=>e?`https://${e}.static.observableusercontent.com`:"https://anonymous.static.observableusercontent.com";class VN extends Y.Component{constructor(...e){super(...e),bh(this,"state",{panic:!1}),bh(this,"ref",null),bh(this,"queue",null),bh(this,"workerResolve",null),bh(this,"worker",null),bh(this,"hoverId",null),bh(this,"onRef",e=>{this.ref=e}),bh(this,"onDismiss",()=>{this.setState({panic:!1,panicDismissed:!0})}),bh(this,"onWorkerLoaded",()=>{const{id:e,path:t}=this.props;this.worker.postMessage({type:"hello",id:e,path:t},"*")}),bh(this,"onWorkerMessaged",e=>{const{login:t}=this.props;if(e.origin!==FN(t)||e.source!==this.worker)return;const{onWorkerEvent:n,onNodeHover:r}=this.props;switch(e.data.type){case"ready":this.workerResolve();break;case"hover":return void r(this.hoverId=e.data.id);case"ping":this.state.panic&&this.setState({panic:!1}),clearTimeout(this.panicTimer),this.panicTimer=setTimeout(this.panic,Mm*Rm)}n(e.data)}),bh(this,"panic",()=>{this.state.panicDismissed||function(){return(outerWidth-innerWidth>RN)+(outerHeight-innerHeight>RN)===1}()||this.setState({panic:!0})}),bh(this,"importNotebook",async e=>{if(!/^([0-9a-f]{16}|@[0-9a-z_-]+\/[0-9a-z_-]+(\/[0-9]+)?)(@\d+)?$/i.test(e))throw new ReferenceError('invalid notebook identifier; try a notebook name ("@observablehq/demo") or id ("5619eceafed5879d")');const t=await fetch(`https://api.observablehq.com/document/${e}`,{credentials:"include"});if(404===t.status)throw new ReferenceError("notebook not found");if(!t.ok)throw new Error("unable to load notebook");const n=await t.json(),{login:r}=this.props;if(!n.publish_time&&n.owner.login!==r)throw new ReferenceError("notebook not found");return n})}componentDidMount(){addEventListener("message",this.onWorkerMessaged),this.queue=new Promise(e=>this.workerResolve=e),this.worker=this.ref.contentWindow,this.panicTimer=setTimeout(this.panic,Mm*Rm),this.queueEvents()}componentWillReceiveProps({id:e,path:t}){this.props.id===e&&this.props.path===t||this.worker.postMessage({type:"hello",id:e,path:t},"*")}componentDidUpdate(){this.queueEvents()}componentWillUnmount(){removeEventListener("message",this.onWorkerMessaged),clearTimeout(this.panicTimer),this.queue=null,this.workerResolve=null,this.worker=null}queueEvents(){const{events:e}=this.props;e.length&&(this.queue=this.queue.then(this.postEvents.bind(this,e.map(this.processEvent,this))),e.length=0)}async processEvent(e){const{id:t,onNodeFeatures:n}=this.props;switch(e.type){case"insert_node":case"modify_node":let r=e.new_node_value;r.imports&&((r=await NN(t,e.node_id,r,this.importNotebook)).origin="https://observablehq.com",e.new_node_value=r),n(e.node_id,function(e){const t=new Set;if(e.features)for(const n in e.features)t.add(n);else if(e.modules)for(const n of e.modules)for(const e of n.values)for(const n in e.features)t.add(n);return t}(r));break;case"remove_node":n(e.node_id,null)}return e}async postEvents(e){e=await Promise.all(e),this.worker&&this.worker.postMessage({type:"bundle",events:e},"*")}render(){const{login:e,height:t,pointerEvents:n,path:r,type:i}=this.props,{panic:s}=this.state,a=`${r.split("?")[0]}/safe`;return Y.createElement(Y.Fragment,null,s&&"default"===i?Y.createElement(DN,{onDismiss:this.onDismiss,safeModeURL:a}):null,Y.createElement("iframe",{ref:this.onRef,onLoad:this.onWorkerLoaded,style:{height:t,minWidth:"100%",width:0},className:`absolute bn ${n?"":"pen"}`,scrolling:"no",sandbox:`allow-same-origin allow-scripts allow-popups allow-forms allow-popups-to-escape-sandbox allow-top-navigation${/\bfirefox\b/i.test(navigator.userAgent)?"":"-by-user-activation"}`,allow:"geolocation; microphone; camera; midi; encrypted-media; autoplay; accelerometer; magnetometer; gyroscope; vr",allowFullScreen:!0,src:FN(e)+"/worker/worker.dd9535076d0183e806262f9c55604314f48d59871fcccb87a6d3c46406d7165d.html"}))}}function jN({onDismiss:e,recipient:t,suggester:n,editable:r,notebookStatus:i,suggest:s,suggestFromTeam:a}){const[o,l]=Z(!1),[c,u]=Z("");return Y.createElement(wd,{onDismiss:e},Y.createElement("form",{onSubmit:function(e){e.preventDefault(),l(!0),s({description:c,team:a})}},Y.createElement("div",{className:Mg},"Send suggestion"),Y.createElement("p",{className:"f6 lh-copy black-50"},Y.createElement(Wf,{user:t,s:16,className:"mr1 br-100",style:{verticalAlign:"sub"}}),Og(t)," will be notified",n.id!==t.id?" and allowed to comment":"","."),Y.createElement(Fg,{type:"text",maxLength:"255",placeholder:"Brief description of changes…",autoFocus:!0,value:c,onChange:({target:{value:e}})=>u(e),className:"w-100"}),Y.createElement("div",{className:"flex-ns items-center-ns justify-between-ns mt3 tr"},Y.createElement("div",{className:"mt2 mt0-ns mr3-ns f7 tl black-50"},(!r||"private"===i)&&n.id!==t.id&&"The notebook will be visible to anyone with the link."),Y.createElement("div",{className:"flex justify-end mt3 mt0-ns"},Y.createElement("span",{className:"mr2"},Y.createElement(Dg,{type:"button",secondary:!0,onClick:e},"Cancel")),Y.createElement(Dg,{type:"submit",highlight:!o,disabled:o},"Send")))))}const BN=Symbol("ALREADY_PUBLISHED"),UN=Symbol("ALREADY_SHARED"),HN=Symbol("NEVER_PUBLISHED"),$N=Symbol("NEVER_PUBLISHED_IN_TEAM"),zN=Symbol("NEEDS_REPUBLISH"),WN=Symbol("NEEDS_RESHARE");function qN({notebook:e,state:t,publish:n,share:r,inList:i}){const{owner:s}=e;const a={[BN]:"This notebook has already been published with these changes.",[zN]:"This notebook has been edited since publishing.",[UN]:"This notebook has already been shared with these changes.",[WN]:"This notebook has been edited since sharing."}[t]||"",o=i?"bg-animate flex w-100 items-center ph3 pv2 f6 fw6 dark-gray bn bg-white hover-near-black hover-bg-near-white pointer":`bn bg-animate br2 pv2 ph2 f6 inline-flex fw6 mr2 ${{[HN]:"dark-gray hover-near-black bg-silver hover-bg-light-silver pointer",[$N]:"dark-gray hover-near-black bg-silver hover-bg-light-gray pointer",[zN]:"white bg-blue hover-bg-light-blue pointer",[BN]:"mid-gray bg-near-white",[WN]:"white bg-blue hover-bg-light-blue pointer",[UN]:"mid-gray bg-near-white"}[t]}`;return Y.createElement("button",{onClick:r||(()=>{(function(e){const{owner:t,slug:n}=e;return null==n&&"team"===t.type})(e)&&!confirm(`Are you sure you want to publish this ${Og(s)} team notebook? This will make the notebook publicly visible.`)||n()}),disabled:!i&&(t===BN||t===UN),title:a,className:o},Y.createElement(of,{className:`w1 h1 ${i?"mr2":"mr1-ns"}`}),Y.createElement("span",{className:i?"db":"dn db-ns"},r?"Reshare":"Publish"))}class GN extends Y.PureComponent{constructor(...e){super(...e),bh(this,"state",{actionsPopover:!1,notebookCollectionsModal:!1,suggestModal:!1}),bh(this,"toggleActionsPopover",e=>{e.stopPropagation(),this.setState({actionsPopover:!this.state.actionsPopover})}),bh(this,"share",async()=>{!function(e){const t=document.body.appendChild(document.createElement("input"));t.style.position="absolute",t.style.left="-9999px",t.setAttribute("readonly",""),t.value=""+e,t.select();try{document.execCommand("copy")}catch(ZL){return!1}finally{t.parentNode.removeChild(t)}}(window.location.href);const{user:e,notebook:t,publishUnlisted:n}=this.props;this.setState({actionsPopover:!1}),function(e,t){return!!rg(e,t)&&(!dg(t)||wg(t))}(e,t)&&await n()}),bh(this,"unpublish",async()=>{const{unpublish:e}=this.props;this.setState({actionsPopover:!1}),e()}),bh(this,"merge",()=>{const{merge:e,baseNotebook:t}=this.props;confirm(`Are you sure you want to merge these changes into ‘${Sg(t)}’?`)&&e()}),bh(this,"showNotebookCollectionsModal",()=>{this.setState({notebookCollectionsModal:!0,actionsPopover:!1})}),bh(this,"hideNotebookCollectionsModal",()=>{const{reloadCollections:e}=this.props;this.setState({notebookCollectionsModal:!1}),e()}),bh(this,"trash",()=>{if(!confirm("Are you sure you want to move this notebook to the trash?"))return;const{trash:e}=this.props;this.setState({actionsPopover:!1}),e()}),bh(this,"toggleSuggestModal",(e={})=>{const{team:t}=e;this.setState(({suggestModal:e})=>({suggestFromTeam:t||void 0,suggestModal:!e,actionsPopover:!1}))}),bh(this,"revert",()=>{const{revert:e,notebook:t,type:n}=this.props;("versioned"===n||confirm(`Are you sure you want to discard your ${ug(t)?"unpublished":"unshared"} changes?`))&&(this.setState({actionsPopover:!1}),e())}),bh(this,"fullscreen",()=>{const{fullscreen:e}=this.props;this.setState({actionsPopover:!1}),e()}),bh(this,"fork",(...e)=>{this.setState({actionsPopover:!1}),this.props.fork.apply(this,e)}),bh(this,"suggest",(...e)=>{this.setState({actionsPopover:!1}),this.props.suggest.apply(this,e)}),bh(this,"closeSuggestion",(...e)=>{this.setState({actionsPopover:!1}),this.props.closeSuggestion.apply(this,e)}),bh(this,"transfer",(...e)=>{this.setState({actionsPopover:!1}),this.props.transfer.apply(this,e)})}render(){const{actionsPopover:e,notebookCollectionsModal:t,suggestModal:n,suggestFromTeam:r}=this.state,{user:i,type:s,publish:a,notebook:o,baseNotebook:l,primaryAction:c,unsavedChanges:u,hasUnpublishedChanges:h,loadHistory:p,editable:d,notebookStatus:f,fullscreen:m,suggestion:g,hasHistoryPanel:v}=this.props,{comments:b,slug:y,id:w,fork_of:x,owner:E}=o,k=hg(o),C=c===Fm||c===Vm||c===jm,_=k?h?WN:UN:y?h?zN:BN:"team"===E.type?$N:HN,S=r||(d?E:i),N="compare"===s?l&&l.owner:d?x?x.owner:null:E,T="w-100 bn flex items-center ph3 pv2 f6 lh-solid fw6 dark-gray hover-near-black bg-transparent hover-bg-near-white pointer no-underline bg-animate";return Y.createElement(Y.Fragment,null,Y.createElement("div",{className:"relative",key:"2"},Y.createElement("button",{onClick:this.toggleActionsPopover,"aria-label":"Notebook actions",className:`pointer flex fw6 moon-gray hover-mid-gray hover-bg-near-white bg-transparent mr2 br2 pv2 ph2 bn f6 ${e?"":"tooltipped tooltipped-s"}`},Y.createElement(Id,null)),e&&Y.createElement(zg,{extraStyle:{right:-2,width:"versioned"===s?"14rem":"13rem"},onClickOutside:this.toggleActionsPopover},Y.createElement("div",{className:"pv2"},(og(i,o)||function(e,t){return ag(e,t)&&!rg(e,t)&&bg(t)&&!kg(t)&&(yg(t)||xg(t))}(i,o))&&c!==zm&&c!==Wm&&Y.createElement("div",null," ",Y.createElement(Fb,{inList:!0,notebook:o,onClick:this.toggleSuggestModal}),Y.createElement("div",{className:"mt2 mb2 bb b--light-silver"})),lg(i,g)&&Y.createElement("div",null,Y.createElement("button",{onClick:this.closeSuggestion,className:T},Y.createElement(ff,{className:"mr2 w1"}),"Close suggestion"),Y.createElement("div",{className:"mt2 mb2 bb b--light-silver"})),("default"===s||"versioned"===s&&!v)&&ng(i,o)&&Y.createElement(fh,{onClick:()=>{this.setState({actionsPopover:!1}),p()},to:_g(o,o.save_version),className:T},Y.createElement($d,{className:"mr2"}),"View history"),("compare"!==s&&d&&h||"versioned"===s&&o.latest_version!==o.save_version)&&Y.createElement("button",{onClick:this.revert,className:T},Y.createElement(tf,{className:"mr2"}),"versioned"===s?`Revert to version ${o.save_version}`:"Revert"),d&&!y&&!(C&&k)&&Y.createElement("button",{onClick:this.share,className:`${T} justify-between`},Y.createElement("div",{className:"flex items-center"},Y.createElement(qd,{className:"mr2"}),"Enable link sharing")),d&&(sg(i,o)||function(e,t){return rg(e,t)&&hg(t)}(i,o))&&Y.createElement("button",{onClick:this.unpublish,className:"w-100 flex items-center ph3 pv2 f6 fw6 dark-gray bg-transparent hover-red hover-bg-near-white pointer bn"},Y.createElement(df,{className:"mr2"}),y?"Unpublish":"Disable link sharing"),"compare"!==s&&"versioned"!==s&&d&&Y.createElement(Db,{transfer:this.transfer,owner:E,inList:!0}),d&&(!C||C&&k)&&Y.createElement(qN,{notebook:o,inList:!0,publish:a,state:_}),d&&Y.createElement("div",{className:"mt2 mb2 bb b--light-silver"}),ag(i,o)&&c!==Bm&&c!==Um&&Y.createElement(Rb,{notebook:o,fork:this.fork,inList:!0}),"default"===s&&x&&Y.createElement(fh,{to:`/compare/${x.id}...${w}`,className:T},Y.createElement(Sd,{className:"mr2"}),"Compare fork"),"versioned"===s&&!bg(o,o.save_version)&&Y.createElement(fh,{to:`/compare/${w}@${o.save_version}`,className:T},Y.createElement(Sd,{className:"mr2"}),"Compare to latest"),"compare"===s&&!function(e,t){return e&&t&&e.id===t.id&&e.save_version===t.save_version}(l,o)&&Y.createElement(Y.Fragment,null,Y.createElement(fh,{className:T,to:Pg(o,o.save_version,l,l.save_version)},Y.createElement(Sd,{className:"mr2"}),"Compare reverse")),m&&Y.createElement("button",{onClick:this.fullscreen,className:T},Y.createElement(Vd,{className:"mr2"}),"View in fullscreen"),d&&Y.createElement("div",{className:"mt2 mb2 bb b--light-silver"}),"compare"!==s&&"versioned"!==s&&dg(o)&&Y.createElement(Y.Fragment,null,Y.createElement("a",{href:Ag(o,"js?v=3"),onClick:this.toggleActionsPopover,rel:"noopener noreferrer",target:"_blank",className:T},Y.createElement(Od,{className:"mr2"}),"Download code"),Y.createElement("a",{href:Ag(o,"tgz?v=3"),onClick:this.toggleActionsPopover,rel:"noopener noreferrer",target:"_blank",className:T},Y.createElement(Od,{className:"mr2"}),"Download tarball")),"compare"!==s&&"versioned"!==s&&i&&(d||function(e){if(null==e)return!1;const{teams:t}=e,n=t.find(e=>"observablehq"===e.login);return void 0!==n&&(Gm(n)||Km(n))}(i))&&Y.createElement("button",{onClick:this.showNotebookCollectionsModal,className:T},Y.createElement(kd,{className:"mr2"}),"Add to collections"),d&&"versioned"!==s&&Y.createElement("button",{onClick:this.trash,className:"w-100 flex items-center ph3 pv2 f6 fw6 black-70 hover-red bg-transparent hover-bg-near-white pointer bn bg-animate"},Y.createElement(lf,{className:"mr2"}),"Move to trash"))),t&&Y.createElement(Bf.Consumer,null,e=>Y.createElement(Ug,{notebook:o,api:e,user:i,team:"team"===E.type?E:null,onDismiss:this.hideNotebookCollectionsModal}))),C?Y.createElement("div",{className:"inline-flex items-center"},Y.createElement(qN,{notebook:o,share:k&&this.share,publish:a,state:_})):c===Bm||c===Um?Y.createElement(Rb,{notebook:o,fork:this.fork,highlight:c===Um}):c===Hm||c===$m?Y.createElement("button",{onClick:this.merge,className:`br2 pa2 f6 inline-flex fw6 mr1 bn pointer bg-animate ${c===$m?"white bg-blue hover-bg-light-blue":"dark-gray hover-near-black bg-silver hover-bg-light-silver"}`},Y.createElement(Zd,{className:"w1 h1 v-top mr1-ns"}),Y.createElement("span",{className:"dn db-ns"},"Merge")):c===zm||c===Wm?Y.createElement(Fb,{onClick:this.toggleSuggestModal,notebook:o,highlight:c===Wm}):null,n?Y.createElement(jN,{suggest:this.suggest,suggestFromTeam:r,onDismiss:()=>this.setState({suggestModal:!1}),recipient:N,suggester:S,unsavedChanges:u,editable:d,notebookStatus:f,highlight:u>0||b.length>0,type:s}):null)}}const KN=Y.memo(function({notebook:{collections:e}}){let t=xw(e.map(({slug:e,owner:{login:t},title:n},r)=>Y.createElement(fh,{key:r,className:"no-underline dark-gray hover-blue",to:`/collection/@${t}/${e}`},n)));return Y.createElement("div",{className:"inline-flex mr4 f6 mid-gray"},Y.createElement(Ad,{className:"mr1 moon-gray"}),Y.createElement("div",null,"Listed in ",t))});function YN({notebook:e}){return Y.createElement("div",{className:"relative"},Y.createElement("div",{className:"br--top cover bg-center",style:{paddingTop:"62.5%",backgroundImage:e&&e.thumbnail?`url(https://static.observableusercontent.com/thumbnail/${e.thumbnail}.jpg)`:"var(--checkerboard)"}}),Y.createElement("div",{className:"truncate"},Y.createElement("div",{className:"f6 fw4 db ph2 flex lh-solid"},Y.createElement("div",{title:e.title||"",className:"pv2 truncate"},Sg(e)))))}const ZN=Y.memo(function({collection:{owner:{login:e},slug:t,title:n,documents:r},notebook:{id:i}}){const s=r.findIndex(e=>e.id===i),a=r[s-1],o=r[s+1];return Y.createElement("div",{className:"pb4"},Y.createElement("div",{className:"pv2 pt2 pt4-ns f5 fw7 black-50"},"Continue reading"," ",Y.createElement(fh,{className:"no-underline black-70 hover-blue",to:`/collection/@${e}/${t}`},n)),Y.createElement("div",{className:"mw6 pt2 cf"},a&&Y.createElement(fh,{to:`${Cg(a)}?collection=@${e}/${t}`,className:"w-50 pr1 pr2-ns no-underline fl"},Y.createElement("div",{className:"db pv1 f7 fw4 tracked ttu black-50"},"Previous"),Y.createElement("div",{className:"black hover-blue bg-white br2 overflow-hidden hover-shadow-4"},Y.createElement(YN,{notebook:a,id:i}))),o&&Y.createElement(fh,{to:`${Cg(o)}?collection=@${e}/${t}`,className:`fl w-50 no-underline${a?" pl1 pl2-ns":""}`},Y.createElement("div",{className:"db pv1 f7 fw4 tracked ttu black-50"},"Next"),Y.createElement("div",{className:"black hover-blue bg-white br2 overflow-hidden hover-shadow-4"},Y.createElement(YN,{notebook:o,id:i})))))});function QN({suggestion:e,toNotebook:t,type:n,closeSuggestion:r}){const{close_time:i,creator:s,closer:a,merge:o,to_title:l,description:c}=e,u=ee(jf);return Y.createElement("div",{className:`flex justify-between items-center ph3 pa2 ${"compare"===n?"br--top bb b--black-05":"mb3"} f6 fw4 lh-copy black-70 bg-washed-yellow br2`,style:{marginLeft:21}},Y.createElement("div",{className:"flex items-start pv1 mr2"},null!=o?Y.createElement(Zd,{className:"flex-shrink-0 relative mr1 purple",style:{top:3}}):null!=i?Y.createElement(Dd,{className:"flex-shrink-0 relative mr1 dark-red",style:{top:3}}):Y.createElement(Kd,{className:"flex-shrink-0 relative mr1 dark-green",style:{top:3}}),Y.createElement("div",null,null!=o?Y.createElement(Y.Fragment,null,Y.createElement(fh,{className:"no-underline black hover-blue",to:Ig(a)},Og(a))," merged this","compare"!==n&&" into "):null!=i?Y.createElement(Y.Fragment,null,Y.createElement(fh,{className:"no-underline black hover-blue",to:Ig(a)},Og(a))," ","closed this suggestion","compare"!==n&&" to "):Y.createElement(Y.Fragment,null,Y.createElement(fh,{className:"no-underline black hover-blue",to:Ig(s)},Og(s))," ","suggests merging this","compare"!==n&&" into "),"compare"!==n&&Y.createElement(fh,{className:"no-underline black hover-blue",to:Cg(t)},Sg({title:l})),i&&Y.createElement(Y.Fragment,null," ","on"," ",Nm(new Date(i),{month:"short",day:"numeric",year:"numeric"})),c?`: “${c}”`:".","compare"!==n&&null==i?Y.createElement(fh,{className:"ml1 no-underline black hover-blue",to:Lg(e)},"View changes?"):null!=o&&rg(u,t)&&Y.createElement(fh,{className:"ml1 no-underline black hover-blue",to:Pg(t,o.start_version,t,o.end_version)},"View changes?"))),"compare"===n&&lg(u,e)&&Y.createElement("button",{className:"ph3 pa1 nt1 nb1 no-underline black-50 hover-blue bg-transparent bn pointer",onClick:()=>{confirm("Are you sure you want to close this suggestion?")&&r()}},"Close…"))}function XN({unsavedChanges:e,editable:t,type:n,baseNotebook:r,notebook:i}){const s=ee(jf);return e&&"demo"!==n?Y.createElement("div",{className:`fixed bottom-0 left-0 right-0 pv2 f6 black-80 bg-near-white bt b--black-10 z-2 ${t?"fade-in delay-short":""}`},Y.createElement("div",{className:zf},Y.createElement("div",{className:"flex items-center mr5 mr0-ns lh-title"},t?Y.createElement(Y.Fragment,null,Y.createElement(kf,{className:"w1 h1 mr2 red",style:{flexShrink:0}}),"You have ",e," unsaved change",1===e?"":"s",", which will be saved when the server reconnects."):Y.createElement(Y.Fragment,null,Y.createElement(Ef,{className:"w1 h1 mr2 red",style:{flexShrink:0}}),ag(s,i)?`You have ${e} unsaved change${1===e?"":"s"}. ${og(s,i)?`Suggest ${1===e?"it":"them"}, or fork`:"compare"===n&&cg(s,r)?"Merge or fork":"Fork"} this notebook to save.`:"You do not have permission to save changes.")))):null}function JN(e){let{time:t}=e,n=wh(e,["time"]);const[r,i]=Z(Tm(t)),s=J();return Q(()=>{const e=setInterval(()=>{Tm(t)!==r&&i(Tm(t))},1e3);return s.current=e,()=>{clearInterval(s.current)}}),Y.createElement("span",Object.assign({},n,{title:Nm(t)}),r)}var eT=/[\0-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,tT=/[\0-\x1F\x7F-\x9F]/,nT=/[ \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000]/,rT=/[!-#%-\*,-\/:;\?@\[-\]_\{\}\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4E\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDF55-\uDF59]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDC4B-\uDC4F\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDF3C-\uDF3E]|\uD806[\uDC3B\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8]|\uD809[\uDC70-\uDC74]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD81B[\uDE97-\uDE9A]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]|\uD83A[\uDD5E\uDD5F]/,iT=function(e){var t={};t.src_Any=eT.source,t.src_Cc=tT.source,t.src_Z=nT.source,t.src_P=rT.source,t.src_ZPCc=[t.src_Z,t.src_P,t.src_Cc].join("|"),t.src_ZCc=[t.src_Z,t.src_Cc].join("|");return t.src_pseudo_letter="(?:(?![><｜]|"+t.src_ZPCc+")"+t.src_Any+")",t.src_ip4="(?:(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)",t.src_auth="(?:(?:(?!"+t.src_ZCc+"|[@/\\[\\]()]).)+@)?",t.src_port="(?::(?:6(?:[0-4]\\d{3}|5(?:[0-4]\\d{2}|5(?:[0-2]\\d|3[0-5])))|[1-5]?\\d{1,4}))?",t.src_host_terminator="(?=$|[><｜]|"+t.src_ZPCc+")(?!-|_|:\\d|\\.-|\\.(?!$|"+t.src_ZPCc+"))",t.src_path="(?:[/?#](?:(?!"+t.src_ZCc+"|[><｜]|[()[\\]{}.,\"'?!\\-]).|\\[(?:(?!"+t.src_ZCc+"|\\]).)*\\]|\\((?:(?!"+t.src_ZCc+"|[)]).)*\\)|\\{(?:(?!"+t.src_ZCc+'|[}]).)*\\}|\\"(?:(?!'+t.src_ZCc+'|["]).)+\\"|\\\'(?:(?!'+t.src_ZCc+"|[']).)+\\'|\\'(?="+t.src_pseudo_letter+"|[-]).|\\.{2,3}[a-zA-Z0-9%/]|\\.(?!"+t.src_ZCc+"|[.]).|"+(e&&e["---"]?"\\-(?!--(?:[^-]|$))(?:-*)|":"\\-+|")+"\\,(?!"+t.src_ZCc+").|\\!(?!"+t.src_ZCc+"|[!]).|\\?(?!"+t.src_ZCc+"|[?]).)+|\\/)?",t.src_email_name='[\\-;:&=\\+\\$,\\"\\.a-zA-Z0-9_]+',t.src_xn="xn--[a-z0-9\\-]{1,59}",t.src_domain_root="(?:"+t.src_xn+"|"+t.src_pseudo_letter+"{1,63})",t.src_domain="(?:"+t.src_xn+"|(?:"+t.src_pseudo_letter+")|(?:"+t.src_pseudo_letter+"(?:-|"+t.src_pseudo_letter+"){0,61}"+t.src_pseudo_letter+"))",t.src_host="(?:(?:(?:(?:"+t.src_domain+")\\.)*"+t.src_domain+"))",t.tpl_host_fuzzy="(?:"+t.src_ip4+"|(?:(?:(?:"+t.src_domain+")\\.)+(?:%TLDS%)))",t.tpl_host_no_ip_fuzzy="(?:(?:(?:"+t.src_domain+")\\.)+(?:%TLDS%))",t.src_host_strict=t.src_host+t.src_host_terminator,t.tpl_host_fuzzy_strict=t.tpl_host_fuzzy+t.src_host_terminator,t.src_host_port_strict=t.src_host+t.src_port+t.src_host_terminator,t.tpl_host_port_fuzzy_strict=t.tpl_host_fuzzy+t.src_port+t.src_host_terminator,t.tpl_host_port_no_ip_fuzzy_strict=t.tpl_host_no_ip_fuzzy+t.src_port+t.src_host_terminator,t.tpl_host_fuzzy_test="localhost|www\\.|\\.\\d{1,3}\\.|(?:\\.(?:%TLDS%)(?:"+t.src_ZPCc+"|>|$))",t.tpl_email_fuzzy="(^|[><｜]|\\(|"+t.src_ZCc+")("+t.src_email_name+"@"+t.tpl_host_fuzzy_strict+")",t.tpl_link_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|｜]|"+t.src_ZPCc+"))((?![$+<=>^`|｜])"+t.tpl_host_port_fuzzy_strict+t.src_path+")",t.tpl_link_no_ip_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|｜]|"+t.src_ZPCc+"))((?![$+<=>^`|｜])"+t.tpl_host_port_no_ip_fuzzy_strict+t.src_path+")",t};function sT(e){return Array.prototype.slice.call(arguments,1).forEach(function(t){t&&Object.keys(t).forEach(function(n){e[n]=t[n]})}),e}function aT(e){return Object.prototype.toString.call(e)}function oT(e){return"[object Function]"===aT(e)}function lT(e){return e.replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}var cT={fuzzyLink:!0,fuzzyEmail:!0,fuzzyIP:!1};var uT={"http:":{validate:function(e,t,n){var r=e.slice(t);return n.re.http||(n.re.http=new RegExp("^\\/\\/"+n.re.src_auth+n.re.src_host_port_strict+n.re.src_path,"i")),n.re.http.test(r)?r.match(n.re.http)[0].length:0}},"https:":"http:","ftp:":"http:","//":{validate:function(e,t,n){var r=e.slice(t);return n.re.no_http||(n.re.no_http=new RegExp("^"+n.re.src_auth+"(?:localhost|(?:(?:"+n.re.src_domain+")\\.)+"+n.re.src_domain_root+")"+n.re.src_port+n.re.src_host_terminator+n.re.src_path,"i")),n.re.no_http.test(r)?t>=3&&":"===e[t-3]?0:t>=3&&"/"===e[t-3]?0:r.match(n.re.no_http)[0].length:0}},"mailto:":{validate:function(e,t,n){var r=e.slice(t);return n.re.mailto||(n.re.mailto=new RegExp("^"+n.re.src_email_name+"@"+n.re.src_host_strict,"i")),n.re.mailto.test(r)?r.match(n.re.mailto)[0].length:0}}},hT="a[cdefgilmnoqrstuwxz]|b[abdefghijmnorstvwyz]|c[acdfghiklmnoruvwxyz]|d[ejkmoz]|e[cegrstu]|f[ijkmor]|g[abdefghilmnpqrstuwy]|h[kmnrtu]|i[delmnoqrst]|j[emop]|k[eghimnprwyz]|l[abcikrstuvy]|m[acdeghklmnopqrstuvwxyz]|n[acefgilopruz]|om|p[aefghklmnrstwy]|qa|r[eosuw]|s[abcdeghijklmnortuvxyz]|t[cdfghjklmnortvwz]|u[agksyz]|v[aceginu]|w[fs]|y[et]|z[amw]",pT="biz|com|edu|gov|net|org|pro|web|xxx|aero|asia|coop|info|museum|name|shop|рф".split("|");function dT(){return function(e,t){t.normalize(e)}}function fT(e){var t=e.re=iT(e.__opts__),n=e.__tlds__.slice();function r(e){return e.replace("%TLDS%",t.src_tlds)}e.onCompile(),e.__tlds_replaced__||n.push(hT),n.push(t.src_xn),t.src_tlds=n.join("|"),t.email_fuzzy=RegExp(r(t.tpl_email_fuzzy),"i"),t.link_fuzzy=RegExp(r(t.tpl_link_fuzzy),"i"),t.link_no_ip_fuzzy=RegExp(r(t.tpl_link_no_ip_fuzzy),"i"),t.host_fuzzy_test=RegExp(r(t.tpl_host_fuzzy_test),"i");var i=[];function s(e,t){throw new Error('(LinkifyIt) Invalid schema "'+e+'": '+t)}e.__compiled__={},Object.keys(e.__schemas__).forEach(function(t){var n=e.__schemas__[t];if(null!==n){var r={validate:null,link:null};if(e.__compiled__[t]=r,function(e){return"[object Object]"===aT(e)}(n))return!function(e){return"[object RegExp]"===aT(e)}(n.validate)?oT(n.validate)?r.validate=n.validate:s(t,n):r.validate=function(e){return function(t,n){var r=t.slice(n);return e.test(r)?r.match(e)[0].length:0}}(n.validate),void(oT(n.normalize)?r.normalize=n.normalize:n.normalize?s(t,n):r.normalize=dT());!function(e){return"[object String]"===aT(e)}(n)?s(t,n):i.push(t)}}),i.forEach(function(t){e.__compiled__[e.__schemas__[t]]&&(e.__compiled__[t].validate=e.__compiled__[e.__schemas__[t]].validate,e.__compiled__[t].normalize=e.__compiled__[e.__schemas__[t]].normalize)}),e.__compiled__[""]={validate:null,normalize:dT()};var a=Object.keys(e.__compiled__).filter(function(t){return t.length>0&&e.__compiled__[t]}).map(lT).join("|");e.re.schema_test=RegExp("(^|(?!_)(?:[><｜]|"+t.src_ZPCc+"))("+a+")","i"),e.re.schema_search=RegExp("(^|(?!_)(?:[><｜]|"+t.src_ZPCc+"))("+a+")","ig"),e.re.pretest=RegExp("("+e.re.schema_test.source+")|("+e.re.host_fuzzy_test.source+")|@","i"),function(e){e.__index__=-1,e.__text_cache__=""}(e)}function mT(e,t){var n=e.__index__,r=e.__last_index__,i=e.__text_cache__.slice(n,r);this.schema=e.__schema__.toLowerCase(),this.index=n+t,this.lastIndex=r+t,this.raw=i,this.text=i,this.url=i}function gT(e,t){var n=new mT(e,t);return e.__compiled__[n.schema].normalize(n,e),n}function vT(e,t){if(!(this instanceof vT))return new vT(e,t);t||function(e){return Object.keys(e||{}).reduce(function(e,t){return e||cT.hasOwnProperty(t)},!1)}(e)&&(t=e,e={}),this.__opts__=sT({},cT,t),this.__index__=-1,this.__last_index__=-1,this.__schema__="",this.__text_cache__="",this.__schemas__=sT({},uT,e),this.__compiled__={},this.__tlds__=pT,this.__tlds_replaced__=!1,this.re={},fT(this)}vT.prototype.add=function(e,t){return this.__schemas__[e]=t,fT(this),this},vT.prototype.set=function(e){return this.__opts__=sT(this.__opts__,e),this},vT.prototype.test=function(e){if(this.__text_cache__=e,this.__index__=-1,!e.length)return!1;var t,n,r,i,s,a,o,l;if(this.re.schema_test.test(e))for((o=this.re.schema_search).lastIndex=0;null!==(t=o.exec(e));)if(i=this.testSchemaAt(e,t[2],o.lastIndex)){this.__schema__=t[2],this.__index__=t.index+t[1].length,this.__last_index__=t.index+t[0].length+i;break}return this.__opts__.fuzzyLink&&this.__compiled__["http:"]&&(l=e.search(this.re.host_fuzzy_test))>=0&&(this.__index__<0||l<this.__index__)&&null!==(n=e.match(this.__opts__.fuzzyIP?this.re.link_fuzzy:this.re.link_no_ip_fuzzy))&&(s=n.index+n[1].length,(this.__index__<0||s<this.__index__)&&(this.__schema__="",this.__index__=s,this.__last_index__=n.index+n[0].length)),this.__opts__.fuzzyEmail&&this.__compiled__["mailto:"]&&e.indexOf("@")>=0&&null!==(r=e.match(this.re.email_fuzzy))&&(s=r.index+r[1].length,a=r.index+r[0].length,(this.__index__<0||s<this.__index__||s===this.__index__&&a>this.__last_index__)&&(this.__schema__="mailto:",this.__index__=s,this.__last_index__=a)),this.__index__>=0},vT.prototype.pretest=function(e){return this.re.pretest.test(e)},vT.prototype.testSchemaAt=function(e,t,n){return this.__compiled__[t.toLowerCase()]?this.__compiled__[t.toLowerCase()].validate(e,n,this):0},vT.prototype.match=function(e){var t=0,n=[];this.__index__>=0&&this.__text_cache__===e&&(n.push(gT(this,t)),t=this.__last_index__);for(var r=t?e.slice(t):e;this.test(r);)n.push(gT(this,t)),r=r.slice(this.__last_index__),t+=this.__last_index__;return n.length?n:null},vT.prototype.tlds=function(e,t){return e=Array.isArray(e)?e:[e],t?(this.__tlds__=this.__tlds__.concat(e).sort().filter(function(e,t,n){return e!==n[t-1]}).reverse(),fT(this),this):(this.__tlds__=e.slice(),this.__tlds_replaced__=!0,fT(this),this)},vT.prototype.normalize=function(e){e.schema||(e.url="http://"+e.url),"mailto:"!==e.schema||/^mailto:/i.test(e.url)||(e.url="mailto:"+e.url)},vT.prototype.onCompile=function(){};const bT=vT().add("@",{validate:function(e,t,n){const r=e.slice(t);return n.re.mention||(n.re.mention=new RegExp("^([a-zA-Z0-9_]){1,15}(?!_)(?=$|"+n.re.src_ZPCc+")")),n.re.mention.test(r)?!(t>=2&&"@"===r[t-2])&&r.match(n.re.mention)[0].length:0},normalize:function(e){e.url="/"+e.url,e.mention=!0}});function yT({content:e}){const t=[];let n=0,r=0;const i=e.split("\n");for(let s of i){const e=bT.match(s);if(e){let r=0;for(let i of e){let{mention:e,index:a,lastIndex:o,text:l,url:c}=i;a>r&&t.push(s.substring(r,a)),e?t.push(Y.createElement(fh,{key:++n,to:c,className:"no-underline black hover-blue"},l)):t.push(Y.createElement("a",{rel:"noopener noreferrer",className:"no-underline black hover-blue",target:"_blank",key:++n,href:c},l)),r=o}s.length>r&&t.push(s.substring(r))}else t.push(s);i.length>1&&++r<i.length&&t.push(Y.createElement("br",{key:++n}))}return t}const wT=Y.memo(function({comment:{create_time:e,update_time:t,content:n,user:r,id:i,nonce:s},onCommentRemove:a,isRepeat:o,first:l}){return Y.createElement("div",{className:`ph3 pv2 ${o||l?"":"bt b--light-gray"}`},Y.createElement("div",{className:"flex items-center justify-between pb1 sans-serif f6 lh-title dark-gray"},Y.createElement("div",{className:"flex items-center"},o?void 0:Y.createElement(Y.Fragment,null,Y.createElement(fh,{to:`/@${r.login}`,className:"inline-flex items-center no-underline dark-gray hover-blue"},Y.createElement(Wf,{user:r,s:24,className:"mr2 br-100",style:{flexShrink:"0"}}),Y.createElement("span",{className:"fw5"},Og(r)))),Y.createElement("span",{className:`inline-flex items-end ${o?"":"ml2"} mid-gray`},Y.createElement(JN,{time:new Date(t||e)}))),a&&Y.createElement("div",{className:"inline-flex items-center"},Y.createElement("div",{className:"inline-flex items-center ph1 nr1 moon-gray hover-red pointer tooltipped tooltipped-w","aria-label":"Delete comment",onClick:()=>a(i,s)},Y.createElement(ff,{className:"w1 h1 ml1"})))),Y.createElement("div",{className:"sans-serif f6 lh-f6 dark-gray comment-content overflow-x-hidden",style:{textOverflow:"ellipsis"}},Y.createElement(yT,{content:n})))});function xT({children:e}){return Y.createElement("span",{className:"disappear-child relative v-mid",style:{lineHeight:0}},Y.createElement("span",{className:"dib ml2 f7 fw6 tc mid-gray hover-dark-gray bg-white ba b--silver br-pill hover-b--light-silver pointer",style:{width:"1.1rem",height:"1.1rem",lineHeight:"1.15rem"}},"?"),Y.createElement("nav",{className:"db absolute lh-solid tl z-2 child",style:{right:"-11px",width:"16rem"},"aria-label":"submenu","aria-hidden":""+!open},Y.createElement("div",{className:"f6 white bg-black br2 overflow-hidden",style:{marginTop:"7px"}},Y.createElement("div",{className:"ph2 pv1 lh-copy"},e)),Y.createElement("div",{className:"absolute right-1",style:{top:"-2px",clip:"rect(0 18px 14px -4px)"}},Y.createElement("div",{className:"bg-black",style:{width:8,height:8,transform:"rotate(45deg) translate(4px, 4px)"}}))))}function ET({node:e,comments:t=[],open:n=!1,onCommentHeight:r=(()=>{}),commentNodeId:i,suggestion:s,notebook:a,onCommentInsert:o,onCommentClose:l,onCommentRemove:c,onCommentResolve:u,onCommentOpen:h}){const[p,d]=Z(""),f=J(),m=J(),g=ee(jf);function v(){l(i),d("")}function b(e){e.preventDefault(),p.trim()&&(o(p.trim(),i),l(i),d(""))}Q(()=>(r(e.id,f.current.getBoundingClientRect().height),()=>{r(e.id,0)}));const{owner:y}=a;let w;const x=ig(g,a),E=s?"Participants in the suggestion will see this.":x?mg(a)?`Only members of ${Og(y)} will see this.`:"Only you will see this.":`Suggest to share this with ${mg(a)?`members of ${Og(y)}`:`${Og(y)}`}.`;return Y.createElement("div",{ref:f,className:"pt2 f5"},Y.createElement("div",{className:"relative w-100 pea",style:{maxWidth:640}},t.length>0?Y.createElement("div",{className:"pv1 bg-washed-yellow"},t.map((e,t)=>{const{user:{id:n}}=e,r=n===g.id,i=w===n;return w=n,Y.createElement(wT,{key:e.id||`nonce-${e.nonce}`,comment:e,isRepeat:i,onCommentRemove:(e.id||!x)&&r&&c,first:0===t})})):null,n?Y.createElement("div",{className:"sans-serif"},Y.createElement("form",{onSubmit:b,className:"flex flex-column relative items-stretch bg-washed-yellow bt",style:{borderColor:"#e6e2d4"}},Y.createElement("textarea",{className:"w-100 pa3 sans-serif f6 lh-copy dark-gray bg-transparent br3 bn",style:{resize:"none"},onKeyDown:function(e){"Enter"===e.key&&e.shiftKey?b(e):"Escape"!==e.key||p.trim()||v()},autoFocus:n,rows:1,ref:m,value:p,name:"comment_description",placeholder:"",maxLength:"65536",onChange:function({target:{value:e}}){const{current:t}=m;t.style.height="auto",t.style.height=`${t.scrollHeight}px`,d(e)}}),Y.createElement("div",{className:"flex justify-between pa2"},Y.createElement("button",{type:"button",onClick:v,className:"inline-flex items-center pa2 f6 fw6 mid-gray hover-red bg-washed-yellow br2 pointer bn"},"Cancel"),Y.createElement("div",{className:"inline-flex items-center"},Y.createElement("div",{className:"db-ns dn ml2 f6 f7 mid-gray"},E),Y.createElement(xT,null,"Use plain text. URLs are auto-linked.",Y.createElement("span",{className:"dn-ns di"}," ",E)),Y.createElement("button",{style:{boxShadow:"0 0 0 1px var(--light-gray)"},className:`ml2 ph3 pv2 f6 fw6 bg-animate white ${p.trim()?"bg-blue hover-bg-dark-blue pointer":"bg-light-gray disabled"} br2 bn`},"Comment"))))):Y.createElement("div",{className:`flex justify-${x?"between":"end"} bg-washed-yellow`},x&&Y.createElement("button",{type:"button",onClick:()=>u(i),className:"inline-flex items-center ph3 pt1 pb3 f6 fw6 mid-gray hover-blue bg-transparent br2 pointer bn"},"Resolve"),Y.createElement("button",{className:"inline-flex items-center ph3 pt1 pb3 f6 fw6 mid-gray hover-blue bg-transparent br2 pointer bn",onClick:()=>h(i)},Y.createElement(Jd,{className:"mr1"}),"Comment"))))}const kT=Y.createElement(Y.Fragment,null,Y.createElement("div",{className:"flex items-center justify-between ph3 pb1 o-50"},Y.createElement("div",{className:"f5 fw5"},"History"),Y.createElement("div",{className:"black-50 hover-black bn pointer tooltipped tooltipped-sw","aria-label":"Close history panel"},Y.createElement(ff,null))),Y.createElement("div",{className:"ph2 pv2 overflow-y-auto",style:{display:"grid",gridGap:"10px 0"}},Array.from({length:5},(e,t)=>Y.createElement("div",{key:t,className:"h2 ph2 pv2 f6 br2 bn tl lh-copy db hover-black no-underline bg-near-white black outline-0"}))));function CT({event:{publish_type:e,publish_time:t,latest_publish:n}}){const r="dib ph1 mr1 f7 fw5 br2 nowrap",i="publish"===e?"Published":"Shared";return t?n?Y.createElement("div",{className:`${r} fw6 blue`,style:{background:"#dbe4ff"}},"Current ",i):Y.createElement("div",{className:`${r} black-50 bg-light-gray`},i):null}const _T=Y.memo(function({event:e,selected:t,forceScroll:n,fade:r,historyUrl:i,userCount:s,mobile:a,version:o}){const l=J(null);Q(()=>{!a&&l.current&&(t||n)&&Tk(l.current,{scrollMode:"if-needed",block:"nearest",behavior:"instant"})},[n,a,t]);const{user:c}=e?e.merge?e.merge:e:{},u=e?Y.createElement("div",{className:"f6"},Y.createElement("div",{className:"flex items-center fw5 black",title:`Version ${o}`},a&&Y.createElement(CT,{event:e}),Y.createElement("span",{className:"dib truncate"},a?`Version ${o}: `:null,function({type:e,node_name:t,node_old_name:n,node_value_start:r,title:i,node_id:s,is_new:a,fork:o,merge:l}){if(l)return`Merged “${Sg(l.document)}”`;let c=t||r?"":" empty cell",u="insert_node"===e||a?`Added${c}`:"modify_node"===e?n?"Renamed":`Edited${c}`:"remove_node"===e?`Removed${c}`:"move_node"===e?`Moved${c}`:"pin_node"===e?`Pinned${c}`:"unpin_node"===e?`Unpinned${c}`:"modify_title"===e?`Titled “${i}”`:"revert"===e?`Reverted to ${s}`:"create"===e?o?`Forked from “${Sg(o)}”`:"Created":"";return Y.createElement(Y.Fragment,null,u," ","Renamed"===u&&Y.createElement(Y.Fragment,null,Y.createElement("span",{style:{fontSize:"0.8rem"},className:"code"},n)," ","to"," "),t||r?Y.createElement("span",{style:{fontSize:"0.8rem"},className:"code"},t||r," "):null)}(e))),Y.createElement("div",{className:"flex items-center justify-between"},Y.createElement("div",{title:e.time.toISOString(),className:"f7 fw5 black-50"},`${function(e){const t=Nm(e,{hour:"numeric",minute:"numeric"}).toLowerCase(),n=Nm(e,{weekday:"long"}),r=Nm(e,{month:"numeric",day:"numeric"});return Em===e.getFullYear()?km===e.getMonth()&&Cm===e.getDate()?t:+fm(e)==+fm(new Date)?`${n}, ${r} · ${t}`:+fm(e)==+mm(new Date)?`Last ${n}, ${r} · ${t}`:Nm(e,{hour:"numeric",minute:"numeric",month:"short",day:"numeric"}):Nm(e,{hour:"numeric",minute:"numeric",month:"short",day:"numeric"})}(e.time)}`),1===s?null:Y.createElement("span",{className:`dib tooltipped ${"create"===e.type?"tooltipped-nw":"tooltipped-sw"}`,style:{lineHeight:0},"aria-label":Og(c)},Y.createElement(Wf,{user:c,s:16,className:"dib v-top br-pill"}))),!a&&Y.createElement(CT,{event:e})):Y.createElement("div",{className:"f6"},Y.createElement("div",{className:"flex items-center fw5 black"},Y.createElement("span",{className:"dib truncate"},`Version ${o}`)));return a?Y.createElement("div",{className:"flex-auto ph3 pv2 f6 lh-copy"},u):Y.createElement("div",{ref:l},Y.createElement(fh,{to:i,replace:!0,key:o,style:{maxWidth:240},className:"pa2 f6 tl br1 br--right lh-copy db hover-black no-underline bl bw1 "+(r?"o-50 ":"")+(t?"b--blue bg-near-white black outline-0":"b--white focus-ring hover-bg-near-white")},u))});function ST({fold:e,notebook:t,historyVersion:n,revertVersion:r,events:i,currentEvent:s,prevEvent:a,userCount:o}){const[l,c]=Z(!1);let u=e[1]-e[0]+1;if(1===u){const[e]=i;return Y.createElement(_T,{key:e.version,selected:n===e.version,fade:n<e.version||r&&n!==e.version&&r<e.version,historyUrl:_g(t,e.version),userCount:o,event:e,version:e?e.version:n})}const h=`${u} change${u>1?"s":""}`,p=i[0].version>=n&&i[i.length-1].version<=n,d=l||p;return Y.createElement("div",{className:" "+(d?"bl b--black-10":"bl b--white")},Y.createElement("div",{className:"ph2 pv1"},Y.createElement("button",{onClick:()=>c(e=>!e),disabled:p,className:`flex justify-center items-center pv1 f7 lh-solid fw6 bg-transparent ba br2 ${p?"black-20 b--black-05":"black-40 b--black-10 pointer hover-black "} z-0 focus-ring`},Y.createElement("span",{className:"v-top mr1 lh-f7"},h),l?Y.createElement(_d,null):Y.createElement(Cd,null))),d?i.map(e=>Y.createElement(_T,{key:e.version,selected:n===e.version,forceScroll:null==s&&e.version===a.version,fade:n<e.version||r&&!n!==e.version&&r<e.version,historyUrl:_g(t,e.version),userCount:o,event:e,version:e.version})):null)}function NT({range:{folds:e,events:t,title:n},historyIdx:r,historyVersion:i,revertVersion:s,userCount:a,notebook:o,first:l,currentEvent:c,prevEvent:u}){const[h,p]=Z(!0);if(!t.length)return null;const d=t[0].version>=i&&t[t.length-1].version<=i,f=new Set;for(let m of t)f.add(m.user),m.publish_user&&f.add(m.publish_user);return Y.createElement("div",{className:"pb1 bb b--black-10"},n&&!l?Y.createElement("div",{className:"ph2"},Y.createElement("div",{onClick:()=>p(e=>!e),className:`flex justify-between items-center pv3 f7 fw6 black-50 ${d?"":"hover-black pointer"}`},Y.createElement("span",null,Y.createElement("span",{className:"v-top mr1 lh-f7"},n),h||d?Y.createElement(_d,null):Y.createElement(Cd,null)),f.size>1?Y.createElement("div",null,[...f].sort((e,t)=>(e.name||e.login).localeCompare(t.name||t.login)).map(e=>Y.createElement(Wf,{key:e.id,user:e,s:16,className:"dib v-top ml1 br-pill"}))):null)):null,h||d||l?e.map((e,l)=>Y.createElement(ST,{fold:e,historyIdx:r,events:t.slice(e[0],e[1]+1),currentEvent:c,prevEvent:u,historyVersion:i,revertVersion:s,userCount:a,notebook:o,key:`${n}${l}`})):null)}function TT({history:e,mobile:t,unloadHistory:n,notebook:r,historyVersion:i}){if(e===Dm)return t?null:kT;const{ranges:s,events:a,userCount:o}=e,l=a.findIndex(e=>e.version===i),c=a[l],u=c&&"revert"===c.type?c.node_id:void 0;let h,p;for(let d=0;d<a.length;d++)if(a[d].version<i){h=a[d];break}for(let d=a.length-1;d>=0;d--)if(a[d].version>i){p=a[d];break}return t?Y.createElement("div",{className:"top-0 pv3 mb4 nt4 bg-white bb b--black-05 sticky z-2"},Y.createElement("div",{className:"flex items-center justify-between ph3 pb1"},Y.createElement("div",{className:"f5 fw5"},"History"),Y.createElement(fh,{className:"black-50 hover-black bn pointer",to:Cg(r)},Y.createElement(ff,null))),Y.createElement("div",{className:"flex justify-between items-center"},Y.createElement(_T,{mobile:!0,selected:c&&c.version===i,event:c,userCount:o,version:c?c.version:i}),Y.createElement("div",{className:"pr2"},h?Y.createElement(fh,{to:_g(r,h.version),className:"ph2 pv1 mr2 f6 no-underline black-70 bg-light-gray br2 bn"},"Back"):Y.createElement("span",{className:"ph2 pv1 mr2 f6 black-20 bg-near-white br2 bn"},"Back"),p?Y.createElement(fh,{to:_g(r,p.version),className:"ph2 pv1 mr2 f6 no-underline black-70 bg-light-gray br2 bn"},"Next"):Y.createElement("span",{className:"ph2 pv1 mr2 f6 black-20 bg-near-white br2 bn"},"Next")))):Y.createElement(Y.Fragment,null,Y.createElement("div",{className:"flex items-center justify-between ph3 pb2 pb1"},Y.createElement("div",{className:"f4 fw6"},"History"),Y.createElement(fh,{onClick:n,className:"mt1 mid-gray hover-red bn nowrap pointer tooltipped tooltipped-sw","aria-label":"Close history panel",to:Cg(r,i)},Y.createElement(ff,{className:""}))),Y.createElement("div",{className:"ph2 pv2 overflow-y-auto"},s.map((e,t)=>Y.createElement(NT,{key:t,revertVersion:u,historyVersion:i,userCount:o,notebook:r,range:e,first:0===t,currentEvent:c,prevEvent:h}))))}function AT({children:e}){return Y.createElement("span",{style:{padding:"1px 5px",boxShadow:"1px 1px 0px rgba(0, 0, 0, 0.1)",fontSize:12},className:"dib f6 ba b--black-10 br2"},e)}const LT=Y.memo(function({visualSelection:e,visualFocus:t}){let n=new Set(e);return n.add(t),Y.createElement("div",{className:"fixed bottom-0 left-0 right-0 pv2 f6 black-80 bg-white bt b--black-10 z-2 shadow-4"},Y.createElement("div",{className:zf},Y.createElement("div",{className:"flex items-center justify-between mr5 mr0-ns fw5 lh-title dark-gray",style:{height:40}},Y.createElement("div",{className:"w-50-l w-30-m w-auto"},Y.createElement("div",null,Y.createElement("span",{className:"fw6"},n.size)," ",Y.createElement("span",{className:""},"cell",n.size>1?"s":""," selected")),Y.createElement("div",{className:"pt1",style:{fontSize:12}},"Press ",Y.createElement(AT,null,"Esc")," to exit")),Y.createElement("div",{className:"dn db-ns tc"},Y.createElement("div",null,"Navigate"),Y.createElement("div",{className:"pt1",style:{fontSize:12}},Y.createElement(AT,null,"j")," / ",Y.createElement(AT,null,"k"))),Y.createElement("div",{className:"dn db-ns tc"},Y.createElement("div",null,"Move cells"),Y.createElement("div",{className:"pt1",style:{fontSize:12}},Y.createElement(AT,null,"Shift-↑")," / ",Y.createElement(AT,null,"Shift-↓"))),Y.createElement("div",{className:"dn db-ns tc"},Y.createElement("div",null,"Select"),Y.createElement("div",{className:"pt1",style:{fontSize:12}},Y.createElement(AT,null,"x"))),Y.createElement("div",{className:"dn db-ns tc"},Y.createElement("div",null,"All shortcuts"),Y.createElement("div",{className:"pt1",style:{fontSize:12}},Y.createElement(AT,null,"?"))))))});let PT=0;class IT{constructor({name:e,loaded:t=!1,edited:n=!1,imports:r,selections:i=[],source:s,empty:a=!1,disabled:o=!1,editorHeight:l=0,workerHeight:c=Am,commentHeight:u=0,diff:h,error:p,sourcemap:d,features:f=new Set,downloadType:m,codemirrorHistory:g}){this.name=e,this.loaded=t,this.edited=n,this.imports=r,this.selections=i,this.source=s,this.empty=a,this.disabled=o,this.editorHeight=l,this.comparerHeight=h&&"noop"!==h.type?Am:0,this.workerHeight=c,this.commentHeight=u,this.diff=h,this.error=p,this.sourcemap=d,this.features=f,this.downloadType=m,this.codemirrorHistory=g}}const OT=(e,t)=>{const{editorHeight:n,comparerHeight:r,commentHeight:i,empty:s}=t;return{type:"offset_node",node_id:e,height:n+r+i+(s?-Am:0)}},MT=wk(e=>{let t=new Set;for(let n of e.values())if(n.name&&t.add(n.name),n.imports)for(let e of n.imports){let{name:n}=e;t.add(n)}return t});const RT=(e,t,n,r)=>{for(let i of n){let{type:n,node_id:s,new_node_value:a,new_node_pinned:o,new_next_node_id:l}=i;switch(n){case"insert_node":case"modify_node":const i=PN(a),{sourcemap:c}=i;let u;if(e=new Map(e),t.push({type:n,node_id:s,new_node_value:i,new_next_node_id:l}),"insert_node"===n){const e=r&&r.get(s);u=new IT({name:i.name,imports:i.imports,diff:e,source:e&&("modify_node"===e.type?"diff":"target"),disabled:e&&!e.target,empty:""===i.body,editorHeight:o?Am:void 0,sourcemap:c}),t.push(OT(s,u))}else{(u=e.get(s)).empty!==(u=new IT(yh({},u,{name:i.name,imports:i.imports,empty:""===i.body,error:void 0,sourcemap:c}))).empty&&t.push(OT(s,u))}e.set(s,u),u.sourcemap=i.sourcemap,delete i.sourcemap;break;case"remove_node":(e=new Map(e)).delete(s),t.push({type:n,node_id:s});break;case"move_node":t.push({type:n,node_id:s,new_next_node_id:l})}}return{workerEvents:t,cells:e}};function DT(e,t,n,r){const{model:i}=e;let s=!0,a=[],o=i.apply(r,e=>{"noop"!==e.type&&(s=!1),a.push(e)});return s?{notebook:yh({},e,{model:i}),workerEvents:n,cells:t}:(({workerEvents:n,cells:t}=RT(t,n,a)),i.nodes[0]!==o.nodes[0]&&n.push({type:"extract_title",node_id:o.nodes[0].id}),{notebook:yh({},e,{model:o}),workerEvents:n,cells:t})}function FT(e,t,n,r=!0,i=!0){return({workerEvents:s,notebook:a,cells:o})=>{let{model:l}=a;const{nodes:c}=l,u=l.events.length;let h;if(n)h=e;else if(null===e){h=c[0].id}else{const t=c.findIndex(t=>t.id===e);h=t<c.length-1?c[t+1].id:null}if(({notebook:a,workerEvents:s,cells:o}=DT(a,o,s,[{type:"insert_node",node_id:u,new_node_value:t,new_node_pinned:i,new_next_node_id:h}])),n){const e=t.length;(o=new Map(o)).set(u,new IT(yh({},o.get(u),{selections:[{anchor:e,head:e}]})))}return{notebook:a,cells:o,workerEvents:s,focusId:r?u:e}}}function VT(e,t,n,r){return FT(e,t,!1,n,r)}function jT(e,t,n,r){return FT(e,t,!0,n,r)}const BT=(e,t,n)=>({notebook:r,cells:i,workerEvents:s})=>{let{model:{nodes:a}}=r;const o=a.findIndex(t=>t.id===e),l=a[n?o-1:o+1];if(!l)return;const c=[{type:"remove_node",node_id:e}];t&&(c.push({type:"modify_node",node_id:l.id,new_node_value:n?l.value+t:t+l.value}),a[o].pinned&&!l.pinned&&c.push({type:"pin_node",node_id:l.id})),({notebook:r,workerEvents:s,cells:i}=DT(r,i,s,c));const u=(n?l.value:t).length;return(i=new Map(i)).set(l.id,new IT(yh({},i.get(l.id),{selections:[{anchor:u,head:u}]}))),{notebook:r,cells:i,workerEvents:s,focusId:l.id}},UT=e=>({notebook:t,cells:n,workerEvents:r})=>{const{model:{nodes:i}}=t;if(i.find(t=>t.id===e))return DT(t,n,r,[1===i.length?{type:"modify_node",node_id:e,new_node_value:""}:{type:"remove_node",node_id:e}])},HT=({notebook:e,cells:t,workerEvents:n,visualSelection:r,visualFocus:i})=>{let s=new Set(r);s.add(i);const{model:{nodes:a}}=e;let o=a[a.indexOf(a.find(e=>s.has(e.id)))-1],l=new Set(a.map(e=>e.id)),c=[];for(let u of s)l.has(u)&&(l.delete(u),c.push(0===l.size?{type:"modify_node",node_id:u,new_node_value:""}:{type:"remove_node",node_id:u}));if(0!==c.length)return yh({},DT(e,t,n,c),{visualFocus:null,lastFocusId:o?o.id:null,visualSelection:new Set})},$T=({notebook:e})=>({visualFocus:e.model.nodes[0].id,visualSelection:new Set(e.model.nodes.map(e=>e.id))}),zT=({visualFocus:e})=>({visualFocus:null,visualSelection:new Set,lastFocusId:e}),WT=e=>({notebook:{model:{nodes:t}},visualFocus:n,lastFocusId:r})=>{if(null===n)return null!==r&&t.find(e=>e.id===r)?{visualFocus:r}:-1==e?{visualFocus:t[t.length-1].id}:{visualFocus:t[0].id};const i=t[t.findIndex(e=>e.id===n)+e];return i?{visualFocus:i.id}:void 0},qT=({visualFocus:e,visualSelection:t})=>{if(null===e)return;let n=new Set(t);return n.has(e)?n.delete(e):n.add(e),{visualSelection:n}},GT=e=>({visualSelection:t,visualFocus:n,notebook:r})=>{let i=new Set(t);i.add(n);let s=r.model.nodes.filter(e=>i.has(e.id));if(1===e){let e=r.model.nodes[r.model.nodes.findIndex(e=>e.id===s[s.length-1].id)+1];if(e)return i.add(e.id),{visualSelection:i,visualFocus:e.id}}else{let e=r.model.nodes[r.model.nodes.findIndex(e=>e.id===s[0].id)-1];if(e)return i.add(e.id),{visualSelection:i,visualFocus:e.id}}},KT=(e,t,n)=>({notebook:{model:{nodes:r}},cells:i})=>{const s=r[r.findIndex(t=>t.id===e)+t];if(!s)return;const{id:a}=s;if(!n)return{focusId:a};const o=t<0?s.value.length:0;return(i=new Map(i)).set(a,new IT(yh({},i.get(a),{selections:[{anchor:o,head:o}]}))),{cells:i,focusId:a}},YT=(e,t)=>({notebook:n,cells:r,workerEvents:i})=>{const{model:{nodes:s}}=n,a=s.findIndex(t=>t.id===e);if(t>0&&++t,a+t<0||a+t>s.length)return;const o=s[a+t];return DT(n,r,i,[{type:"move_node",node_id:e,new_next_node_id:o?o.id:null}])},ZT=e=>({notebook:t,cells:n,workerEvents:r,visualSelection:i,visualFocus:s})=>{const{model:{nodes:a}}=t;let o=new Set(i);o.add(s),e>0&&e++;let l=a.filter(e=>o.has(e.id)),c=a.indexOf(l[e>0?l.length-1:0]),u=a[c],h=a[Math.max(0,c+e)],p=[];if(0===e||0===c&&-1===e||c===a.length-1&&1===e)return p;if(p.push({type:"move_node",node_id:u.id,new_next_node_id:h&&h.id}),e>0)for(let e=l.length-2;e>=0;--e)p.push({type:"move_node",node_id:l[e].id,new_next_node_id:l[e+1].id});else for(let e=1;e<l.length;++e)p.push({type:"move_node",node_id:l[e].id,new_next_node_id:h&&h.id});return DT(t,n,r,p)},QT=(e,t)=>({notebook:n,cells:r,workerEvents:i})=>yh({},DT(n,r,i,[{type:"move_node",node_id:e,new_next_node_id:t}]),{dragging:!1}),XT=(e,t)=>({notebook:n})=>({notebook:yh({},n,{model:n.model.apply([{type:t?"pin_node":"unpin_node",node_id:e}])})}),JT=({notebook:e,visualSelection:t,visualFocus:n})=>{let r=new Set(t);r.add(n);const i=e.model.nodes.filter(e=>r.has(e.id)),s=!e.model.nodes.find(e=>e.id===n).pinned;let a=[];for(let o of i)o.pinned!==s&&a.push({type:s?"pin_node":"unpin_node",node_id:o.id});return{notebook:yh({},e,{model:e.model.apply(a)})}},eA=({id:e,error:t})=>({cells:n})=>{const r=n.get(e);if(r)return t&&r.sourcemap&&(t=r.sourcemap.translateError(t)),(n=new Map(n)).set(e,new IT(yh({},r,{error:t}))),{cells:n}},tA=(e,t)=>({cells:n})=>{const r=n.get(e);if(r)return(n=new Map(n)).set(e,new IT(yh({},r,{downloadType:t}))),{cells:n}},nA=({notebook:{model:{nodes:e}},visualSelection:t,visualFocus:n,workerEvents:r})=>{let i=new Set(t);i.add(n);let s=e.filter(e=>i.has(e.id));for(let a of s){const e=PN(a.value,a.id);delete e.sourcemap,r.push({type:"modify_node",node_id:a.id,new_node_value:e})}return{workerEvents:r}},rA=(e,t,n)=>({notebook:r,cells:i,workerEvents:s})=>{const{model:a}=r;if(!i.has(e))return;const o={type:"modify_node",node_id:e,new_node_value:t};let l;if((i=new Map(i)).set(e,new IT(yh({},i.get(e),{edited:!0}))),({notebook:l,cells:i,workerEvents:s}=DT(r,i,s,[o])),a!==l.model)return{notebook:l,cells:i,workerEvents:s};if(n){i=new Map(i);const n=PN(t),{sourcemap:r}=n;let o=new IT(yh({},i.get(e),{name:n.name,imports:n.imports,error:void 0,sourcemap:r}));return i.set(e,o),o.sourcemap=n.sourcemap,delete n.sourcemap,s.push({type:"modify_node",node_id:e,new_node_value:n}),a.nodes[0].id===e&&s.push({type:"extract_title",node_id:e}),{cells:i,workerEvents:s}}},iA=e=>({notebook:t})=>{let{model:n}=t;if(n.title!==e)return{notebook:yh({},t,{model:n=n.apply([{type:"modify_title",new_node_value:e}])})}},sA=({notebook:e,cells:t,workerEvents:n,ancestry:r})=>{const i=new Set(Eg(r));t=new Map(t);const s=[];for(let[a,o]of t){const e=o.diff&&o.diff.baseId;if(null!=e&&i.has(e)){const e=o.diff.base;t.set(a,new IT(yh({},o,{edited:!1,disabled:!e,source:"base"}))),s.push({type:"modify_node",node_id:a,new_node_value:e&&e.value})}}return DT(e,t,n,s)},aA=(e,t)=>({notebook:n,cells:r,workerEvents:i})=>{r=new Map(r);const s=[];for(let[a,o]of r){if("all"!==t&&t!==a||"noop"===o.diff.type)continue;const n="diff"===e&&"modify_node"!==o.diff.type?"target":e,i=o.diff["diff"===n?"target":n];r.set(a,new IT(yh({},o,{edited:!1,disabled:!i,source:n}))),(o.edited||o.source!==n&&!("diff"===o.source&&"target"===n||"target"===o.source&&"diff"===n))&&s.push({type:"modify_node",node_id:a,new_node_value:i&&i.value})}return DT(n,r,i,s)},oA=(e,t,n)=>({notebook:r,workerEvents:i,focusId:s,cells:a,visualFocus:o})=>{const l=null!==o?{visualFocus:null,visualSelection:new Set,lastFocusId:o}:{},c=s===e,{pinned:u}=r.model.nodes.find(t=>t.id===e),h=a.get(e),p="compare"===n&&h.diff&&"noop"!==h.diff.type;return t&&(({notebook:r,cells:a,workerEvents:i}=DT(r,a,i,[{type:u?"unpin_node":"pin_node",node_id:e}])),c||u)?yh({},l,{notebook:r,workerEvents:i}):yh({},l,{notebook:r,focusId:!c||u||p?e:null,cells:a,workerEvents:i})},lA=(e,t)=>({notebook:n,cells:r,workerEvents:i,notebook:{publish_version:s}})=>{const a=n.model.events.length,o={version:a,type:"revert",node_id:s};try{({notebook:n,cells:r,workerEvents:i}=DT(n,r,i,[o]))}catch(l){return n.model.events.push(o),e(a).then(t),{notebook:n}}return{notebook:n,cells:r,workerEvents:i}},cA=(e,t)=>({cells:n})=>{const r=n.get(e);if(r)return(n=new Map(n)).set(e,new IT(yh({},r,{selections:t.slice()}))),{cells:n}},uA=(e,t)=>({cells:n})=>{const r=n.get(e);if(r)return(n=new Map(n)).set(e,new IT(yh({},r,{codemirrorHistory:t}))),{cells:n}},hA=(e,t)=>({cells:n})=>{const r=n.get(e);if(r&&r.features&&(r.features.size||t.size))return(n=new Map(n)).set(e,new IT(yh({},r,{features:t}))),{cells:n}},pA=(e,t,n,r,i)=>({notebook:s})=>{const{id:a,model:{version:o},comments:l}=s,c=a&&rg(r,s);for(let h=l.length-1;h>=0;--h){const a=l[h];if(a.node_id===t){if(a.user.id===r.id&&(a.id?new Date(a.create_time)>Date.now()-18e4:!c&&!i)){e=a.content+"\n\n"+e,(c||i)&&n.send({type:"commentmodify",id:a.id,content:e});const t=l.slice();return t.splice(h,1,yh({},a,{version:o,content:e,update_time:new Date})),{notebook:yh({},s,{comments:t})}}break}}const u=++PT;return(c||i)&&n.send({type:"comment",nonce:u,node_id:t,content:e}),{notebook:yh({},s,{comments:l.concat({nonce:u,node_id:t,version:o,content:e,user:r,create_time:new Date,update_time:null})})}},dA=(e,t,n,r)=>({notebook:i})=>{const{id:s,comments:a}=i;return s&&rg(r,i)&&n.send({type:"commentdelete",ids:[e]}),{notebook:yh({},i,{comments:a.filter(e?t=>t.id!==e:e=>e.nonce!==t)})}},fA=(e,t)=>({notebook:n})=>{const{comments:r}=n,i=r.filter(t=>null!=e&&t.id&&t.node_id===e);if(!i.length)return{};const s=r.filter(t=>t.id&&t.node_id!==e);return t.send({type:"commentresolve",ids:i.map(e=>e.id),resolved:!0}),{notebook:yh({},n,{comments:s})}},mA=e=>({notebook:t})=>{const{comments:n}=t,r=n.slice();for(const i of e){const e=r.findIndex(e=>e.id===i.id);-1!==e?i.resolved||i.deleted?r.splice(e,1):r.splice(e,1,i):i.resolved||i.deleted||r.push(i)}return{notebook:yh({},t,{comments:r})}};function gA(e){return(t,n)=>({cells:r,workerEvents:i,openComments:s,notebook:{comments:a}})=>{let o=r.get(t);if(o&&("commentHeight"!==e||0!==n||!s.has(t)&&!a.some(e=>e.node_id===t))&&o[e]!==n)return(o=new IT(yh({},o)))[e]=n,r=new Map(r).set(t,o),i.push(OT(t,o)),{cells:r,workerEvents:i}}}const vA=gA("editorHeight"),bA=gA("workerHeight"),yA=gA("commentHeight");function wA(){}function xA(e,t,n,r,i){for(var s=0,a=t.length,o=0,l=0;s<a;s++){var c=t[s];if(c.removed){if(c.value=e.join(r.slice(l,l+c.count)),l+=c.count,s&&t[s-1].added){var u=t[s-1];t[s-1]=t[s],t[s]=u}}else{if(!c.added&&i){var h=n.slice(o,o+c.count);h=h.map(function(e,t){var n=r[l+t];return n.length>e.length?n:e}),c.value=e.join(h)}else c.value=e.join(n.slice(o,o+c.count));o+=c.count,c.added||(l+=c.count)}}var p=t[a-1];return a>1&&"string"==typeof p.value&&(p.added||p.removed)&&e.equals("",p.value)&&(t[a-2].value+=p.value,t.pop()),t}function EA(e){return{newPos:e.newPos,components:e.components.slice(0)}}wA.prototype={diff:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.callback;"function"==typeof n&&(r=n,n={}),this.options=n;var i=this;function s(e){return r?(setTimeout(function(){r(void 0,e)},0),!0):e}e=this.castInput(e),t=this.castInput(t),e=this.removeEmpty(this.tokenize(e));var a=(t=this.removeEmpty(this.tokenize(t))).length,o=e.length,l=1,c=a+o,u=[{newPos:-1,components:[]}],h=this.extractCommon(u[0],t,e,0);if(u[0].newPos+1>=a&&h+1>=o)return s([{value:this.join(t),count:t.length}]);function p(){for(var n=-1*l;n<=l;n+=2){var r=void 0,c=u[n-1],h=u[n+1],p=(h?h.newPos:0)-n;c&&(u[n-1]=void 0);var d=c&&c.newPos+1<a,f=h&&0<=p&&p<o;if(d||f){if(!d||f&&c.newPos<h.newPos?(r=EA(h),i.pushComponent(r.components,void 0,!0)):((r=c).newPos++,i.pushComponent(r.components,!0,void 0)),p=i.extractCommon(r,t,e,n),r.newPos+1>=a&&p+1>=o)return s(xA(i,r.components,t,e,i.useLongestToken));u[n]=r}else u[n]=void 0}l++}if(r)!function e(){setTimeout(function(){if(l>c)return r();p()||e()},0)}();else for(;l<=c;){var d=p();if(d)return d}},pushComponent:function(e,t,n){var r=e[e.length-1];r&&r.added===t&&r.removed===n?e[e.length-1]={count:r.count+1,added:t,removed:n}:e.push({count:1,added:t,removed:n})},extractCommon:function(e,t,n,r){for(var i=t.length,s=n.length,a=e.newPos,o=a-r,l=0;a+1<i&&o+1<s&&this.equals(t[a+1],n[o+1]);)a++,o++,l++;return l&&e.components.push({count:l}),e.newPos=a,o},equals:function(e,t){return this.options.comparator?this.options.comparator(e,t):e===t||this.options.ignoreCase&&e.toLowerCase()===t.toLowerCase()},removeEmpty:function(e){for(var t=[],n=0;n<e.length;n++)e[n]&&t.push(e[n]);return t},castInput:function(e){return e},tokenize:function(e){return e.split("")},join:function(e){return e.join("")}};var kA=/^[A-Za-z\xC0-\u02C6\u02C8-\u02D7\u02DE-\u02FF\u1E00-\u1EFF]+$/,CA=/\S/,_A=new wA;function SA(e,t,n){return _A.diff(e,t,n)}_A.equals=function(e,t){return this.options.ignoreCase&&(e=e.toLowerCase(),t=t.toLowerCase()),e===t||this.options.ignoreWhitespace&&!CA.test(e)&&!CA.test(t)},_A.tokenize=function(e){for(var t=e.split(/(\s+|[()[\]{}'"]|\b)/),n=0;n<t.length-1;n++)!t[n+1]&&t[n+2]&&kA.test(t[n])&&kA.test(t[n+2])&&(t[n]+=t[n+2],t.splice(n+1,2),n--);return t};var NA=new wA;function TA(e,t,n){return NA.diff(e,t,n)}function AA(e){return(AA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}NA.tokenize=function(e){var t=[],n=e.split(/(\n|\r\n)/);n[n.length-1]||n.pop();for(var r=0;r<n.length;r++){var i=n[r];r%2&&!this.options.newlineIsToken?t[t.length-1]+=i:(this.options.ignoreWhitespace&&(i=i.trim()),t.push(i))}return t},(new wA).tokenize=function(e){return e.split(/(\S.+?[.!?])(?=\s+|$)/)},(new wA).tokenize=function(e){return e.split(/([{}:;,]|\s+)/)};var LA=Object.prototype.toString,PA=new wA;PA.useLongestToken=!0,PA.tokenize=NA.tokenize,PA.castInput=function(e){var t=this.options,n=t.undefinedReplacement,r=t.stringifyReplacer,i=void 0===r?function(e,t){return void 0===t?n:t}:r;return"string"==typeof e?e:JSON.stringify(function e(t,n,r,i,s){n=n||[];r=r||[];i&&(t=i(s,t));var a;for(a=0;a<n.length;a+=1)if(n[a]===t)return r[a];var o;if("[object Array]"===LA.call(t)){for(n.push(t),o=new Array(t.length),r.push(o),a=0;a<t.length;a+=1)o[a]=e(t[a],n,r,i,s);return n.pop(),r.pop(),o}t&&t.toJSON&&(t=t.toJSON());if("object"===AA(t)&&null!==t){n.push(t),o={},r.push(o);var l,c=[];for(l in t)t.hasOwnProperty(l)&&c.push(l);for(c.sort(),a=0;a<c.length;a+=1)l=c[a],o[l]=e(t[l],n,r,i,l);n.pop(),r.pop()}else o=t;return o}(e,null,null,i),i,"  ")},PA.equals=function(e,t){return wA.prototype.equals.call(PA,e.replace(/,([\r\n])/g,"$1"),t.replace(/,([\r\n])/g,"$1"))};var IA=new wA;function OA(e){return[e[1],e[0]]}function MA(e){const{type:t,base:n,target:r}=e;return"insert_node"!==t||r?"remove_node"!==t||n?t:"insert_node":"remove_node"}function RA({model:e,diff:t,cells:n}){const r=new Map(t.map(e=>[e.id,e])),i=[],s=[],a=e.nodes.filter(e=>!n.get(e.id).disabled),o=$y.of(yh({},e,{nodes:a}));return a.forEach(e=>{const t=r.get(e.id);t&&(null!=t.baseId&&i.push([t.baseId,e.id]),null!=t.targetId&&s.push([t.targetId,e.id]))}),{patchModel:o,baseToLocal:i,targetToLocal:s}}function DA(e,t){for(let n of e.events)n.version=++t}function FA(e,t,n){const r=new Map(n.map(OA)),i=new Map(e.mapping.filter(([,e])=>r.has(e)).map(([e,t])=>[e,r.get(t)]));for(let s of e.events)"insert_node"===s.type&&i.has(s.node_id)&&(s.target_document_id=t,s.target_node_id=i.get(s.node_id))}IA.tokenize=function(e){return e.slice()},IA.join=IA.removeEmpty=function(e){return e};const VA=aw(),jA=1e3;function BA(e){const t=Math.max(e.indexOf("@",1),e.indexOf("~",1));return t>0?[e.slice(0,t),e.slice(t)]:[e,""]}class UA extends Y.Component{constructor(...e){super(...e),bh(this,"state",{notebook:{comments:[],likes:0,forks:0,like:!1,collections:[]},shiftKey:!1,created:!1,bottomHover:!1,hoverId:null,focusId:null,lastFocusId:null,visualFocus:null,visualSelection:new Set,hintVisible:!1,keyboardShortcutsPane:!1,cells:new Map,workerEvents:[],platformSupport:[],participants:[],openComments:new Set}),bh(this,"anchorId",null),bh(this,"autocompleteResolve",null),bh(this,"cropResolve",null),bh(this,"contentRef",null),bh(this,"clientRef",null),bh(this,"onFullScreen",()=>{_y.fullscreenElement===this.contentRef?(this.contentRef.focus(),this.contentRef.classList.add("fullscreen-stretch")):this.contentRef.classList.remove("fullscreen-stretch")}),bh(this,"fullscreen",()=>{_y.requestFullscreen(this.contentRef)}),bh(this,"reloadCollections",async()=>{const{notebook:{id:e}}=this.state,{api:t}=this.props,{collections:n}=await t.init({cache:"no-cache"}).documentLoad(e);this.setState(({notebook:e})=>({notebook:yh({},e,{collections:n})})),n.length?t.collectionLoad(n[0].owner.login,n[0].slug).then(e=>{this.setState({collectionContext:e})}):this.setState({collectionContext:void 0})}),bh(this,"workerAutocomplete",({name:e,path:t,prefix:n,nonce:r})=>(this.setState(({workerEvents:i})=>(i.push({type:"autocomplete",name:e,path:t,prefix:n,nonce:r}),{workerEvents:i})),new Promise(e=>this.autocompleteResolve=e))),bh(this,"onContentRef",e=>{this.contentRef=e}),bh(this,"commit",async()=>{const{focusId:e,notebook:{model:{version:t}}}=this.state;return null!==e&&(await new Promise(e=>this.setState({focusId:null},e)),await new Promise(e=>this.setState({},e))),t}),bh(this,"save",async e=>{let{notebook:{save_version:t}}=this.state;for(;t<e;)t=await new Promise(e=>this.saveResolve=e)}),bh(this,"publish",async e=>{if(e){let{target:t}=e;for(;t&&t.tabIndex<0;)t=t.parentNode;t&&t.blur&&t.blur()}const{api:t,match:{params:{specifier:n}},history:r}=this.props,i=await this.commit();await this.save(i);try{const{notebook:{id:e,owner:{login:a},model:{title:o}}}=this.state,{update_time:l,slug:c}=await t.documentPublish(e,i,o);this.setState(({notebook:e})=>({notebook:yh({},e,{slug:c,edit_unpublished:!1,publish_time:e.publish_time||new Date(l),publish_version:i})}),n!==`@${a}/${c}`?()=>r.replace(`/@${a}/${c}`):void 0)}catch(s){this.setState({errorMessage:"Oops, publishing failed. Try again?"})}}),bh(this,"publishUnlisted",async()=>{const{api:e}=this.props,t=await this.commit();await this.save(t);const{notebook:{id:n,model:{title:r}}}=this.state;try{const{update_time:s}=await e.documentPublish(n,t,r,!0);this.setState(({notebook:e})=>({notebook:yh({},e,{edit_unpublished:!1,publish_time:new Date(s),publish_version:t})}))}catch(i){this.setState({errorMessage:"Oops, sharing failed. Try again?"})}}),bh(this,"unpublish",async()=>{const{notebook:{id:e,slug:t}}=this.state,{api:n,match:{params:{specifier:r}},history:i}=this.props;try{await n.documentUnpublish(e),this.setState(({notebook:e})=>({notebook:yh({},e,{slug:void 0,edit_unpublished:!1,publish_time:void 0,publish_version:void 0})}),"@"===r[0]?()=>i.replace(`/d/${e}`):void 0)}catch(s){this.setState({errorMessage:`Oops, un${t?"publishing":"sharing"} failed. Try again?`})}}),bh(this,"reload",e=>{e&&e.preventDefault(),window.location.reload(!0)}),bh(this,"trash",async()=>{const{api:e,history:t}=this.props,{notebook:{id:n}}=this.state;try{await e.documentTrash(n),t.push("/")}catch(r){console.log(r),this.setState({errorMessage:"Oops, trashing failed. Try again?"})}}),bh(this,"setError",e=>this.setState({errorMessage:e})),bh(this,"unsavedEvents",()=>{const{notebook:{save_version:e,model:t}}=this.state;return t.events.slice(e+1,t.version+1).map(zy)}),bh(this,"doFork",async({team:e}={})=>{const{api:t,user:n}=this.props,{notebook:r}=this.state;return t.documentFork(r.id,r.save_version,{events:this.unsavedEvents(),comments:rg(n,r)?[]:r.comments.map(e=>{return wh(e,["id","user","create_time"])}),team:e})}),bh(this,"fork",async({team:e}={})=>{await this.commit();const{history:t,user:n,type:r}=this.props,{notebook:{id:i,save_version:s,comments:a},openComments:o}=this.state;if("compare"===r)return this.forkFromCompare({team:e});if(!o.size||confirm("Your unsaved comments will be lost. Continue?"))if(n)try{const n=await this.doFork({team:e});t.push(`/d/${n.id}`)}catch(l){this.setState({errorMessage:"Oops, forking failed. Try again?"})}else this.props.showLogin({loginReason:"fork",loginAction:()=>{Gy&&(Gy.setItem("forkId",i),Gy.setItem("fork",JSON.stringify({save_version:s,events:this.unsavedEvents(),comments:a})))}})}),bh(this,"forkFromDemo",async()=>{await this.commit();const{notebook:{id:e,save_version:t}}=this.state;this.props.showLogin({loginReason:"demo",loginAction:()=>{Gy&&(Gy.setItem("forkId",e),Gy.setItem("fork",JSON.stringify({save_version:t,events:this.unsavedEvents()}))),qy&&qy.removeItem("playground")}})}),bh(this,"forkFromCompare",async({team:e,internal:t}={})=>{await this.commit();const{api:n,history:r}=this.props,{notebook:i,baseNotebook:s,diff:a,cells:o,openComments:l}=this.state;if(l.size&&!confirm("Your unsaved comments will be lost. Continue?"))return;const{patchModel:c,baseToLocal:u,targetToLocal:h}=RA({model:i.model,diff:a,cells:o}),p=i.save_model.patch(c,h);DA(p,i.save_version),FA(p,s.id,u);try{const a=await n.documentFork(i.id,i.save_version,{events:[],team:e});if(await n.documentMerge(a.id,i.save_version,{events:p.events.map(zy),target:{id:s.id,version:s.save_version}}),t)return a;r.push(`/d/${a.id}`)}catch(d){if(t)return!1;this.setState({errorMessage:"Oops, forking failed. Try again?"})}}),bh(this,"transfer",async e=>{await this.commit();const{api:t}=this.props,{notebook:{id:n}}=this.state;try{await t.documentTransfer(n,e),this.load(this.props)}catch(r){this.setState({errorMessage:"Oops, transfer failed. Try again?"})}}),bh(this,"merge",async()=>{await this.commit();const{api:e,history:t}=this.props,{notebook:n,baseNotebook:r,diff:i,cells:s}=this.state,{patchModel:a,baseToLocal:o,targetToLocal:l}=RA({model:n.model,diff:i,cells:s}),c=r.save_model.patch(a,o);DA(c,r.save_version),FA(c,n.id,l);try{await e.documentMerge(r.id,r.save_version,{events:c.events.map(zy),target:{id:n.id,version:n.save_version}}),t.push(`/d/${r.id}`)}catch(u){this.setState({errorMessage:"Oops, merging failed. Try again?"})}}),bh(this,"closeSuggestion",async()=>{const{api:e,history:t,location:n,user:r}=this.props,{notebook:i}=this.state;try{await e.suggestionClose(i.suggestion_from.id),Cg(i)!==n.pathname?t.push(Cg(i)):this.setState(({notebook:e})=>({notebook:yh({},e,{suggestion_from:yh({},e.suggestion_from,{close_time:new Date,closer:r})})}))}catch(s){this.setState({errorMessage:"Oops, closing the suggestion failed. Try again?"})}}),bh(this,"targetPatchSize",()=>{const{notebook:e,diff:t,cells:n}=this.state,{patchModel:r,targetToLocal:i}=RA({model:e.model,diff:t,cells:n});return e.save_model.patch(r,i).events.length}),bh(this,"suggest",async({description:e,team:t}={})=>{await this.commit();const{api:n,history:r,type:i,user:s,location:a}=this.props,{notebook:o,baseNotebook:l}=this.state;let c,u,h;try{if(rg(s,o))if("compare"===i)c=o.id,u=l.id,h=o.save_version;else{if(!o.fork_of)throw new Error("can't suggest");c=o.id,u=o.fork_of.id,h=await this.commit()}else{const e=await("compare"===i?this.forkFromCompare({team:t,internal:!0}):this.doFork({team:t}));c=e.id,u=o.id,h=e.version}const d=Lg(await n.documentSuggest(c,{to_id:u,from_title:o.model.title,version:h,description:e}));d!==a.pathname?r.push(d):this.reload()}catch(p){this.setState({errorMessage:"Oops, suggesting failed. Try again?"})}}),bh(this,"detectDownloadType",e=>{this.setState(({workerEvents:t})=>(t.push({type:"detect_download_type",node_id:e}),{workerEvents:t}))}),bh(this,"resetDownloadType",e=>{this.setState(tA(e,void 0))}),bh(this,"onFocus",()=>{this.setState({workerFocused:!1})}),bh(this,"onWorkerFocus",()=>{this.setState({workerFocused:!0})}),bh(this,"onKeydown",e=>{const{match:{params:{historyPanel:t}}}=this.props,n=t&&this.state.notebookHistory;if("Shift"===e.key)this.setState({shiftKey:!0});else if("s"===e.key&&e.metaKey)e.preventDefault();else if(!Im.has(e.target.tagName)&&"true"!==e.target.contentEditable){switch([e.ctrlKey&&"Ctrl",e.shiftKey&&!e.key.match(/^[a-zA-Z?]$/)&&"Shift",e.altKey&&"Alt",e.metaKey&&"Meta",e.key].filter(Boolean).join("-")){case"?":this.setState(({notebook:e,keyboardShortcutsPane:t})=>{if(e.model&&!fg(e))return{keyboardShortcutsPane:!t}});break;case"Alt-Tab":this.setState(({notebook:{model:t},lastFocusId:n,focusId:r})=>{if(t){if(e.preventDefault(),null===r)return{focusId:t.nodes.find(e=>e.id===n)?n:t.nodes[e.shiftKey?t.nodes.length-1:0].id};const i=document.querySelector(`[data-node-id="${r}"] textarea`);i&&i.focus()}});break;case"ArrowLeft":if(n)return this.moveHistory(1);break;case"ArrowRight":if(n)return this.moveHistory(-1);break;case"j":e.preventDefault(),this.setState(WT(1),this.scrollVisualFocus);break;case"k":e.preventDefault(),this.setState(WT(-1),this.scrollVisualFocus);break;case"J":if(null===this.state.visualFocus)return;e.preventDefault(),this.setState(GT(1),this.scrollVisualFocus);break;case"K":if(null===this.state.visualFocus)return;e.preventDefault(),this.setState(GT(-1),this.scrollVisualFocus);break;case"Shift-ArrowUp":if(null===this.state.visualFocus)return;e.preventDefault(),this.setState(ZT(-1),this.scrollVisualFocus);break;case"Shift-ArrowDown":if(null===this.state.visualFocus)return;e.preventDefault(),this.setState(ZT(1),this.scrollVisualFocus);break;case"A":e.preventDefault(),this.setState($T);break;case"p":if(null===this.state.visualFocus)return;this.setState(JT);break;case"o":if(null===this.state.visualFocus)return;e.preventDefault(),this.setState(e=>yh({},VT(this.state.visualFocus,"")(e),{visualFocus:null}));break;case"O":if(null===this.state.visualFocus)return;e.preventDefault(),this.setState(e=>yh({},jT(this.state.visualFocus,"")(e),{visualFocus:null}));break;case"x":e.preventDefault(),this.setState(qT);break;case"d":{let{visualFocus:e}=this.state;null!==e&&this.setState(HT);break}case"Shift-Enter":if(null===this.state.visualFocus)return;return e.preventDefault(),this.setState(nA);case"Enter":if(null===this.state.visualFocus)return;e.preventDefault(),this.setState({focusId:null}),this.setState({focusId:this.state.visualFocus,visualFocus:null,visualSelection:new Set});break;case"Escape":this.exitVisualMode()}}}),bh(this,"moveHistory",e=>{const{notebook:t,notebookHistory:{events:n}}=this.state;let{history:r,match:{params:{historyVersion:i}}}=this.props;i=+i;const s=n.findIndex(e=>e.version===i);(-1===e&&s>0||1===e&&s<n.length-1)&&r.replace(_g(t,n[s+e].version))}),bh(this,"exitVisualMode",()=>{null!==this.state.visualFocus&&this.setState(zT)}),bh(this,"onKeyup",e=>{"Shift"===e.key&&this.setState({shiftKey:!1})}),bh(this,"onNodeEditorMoveFocus",(e,t,n)=>{this.setState(KT(e,t,n))}),bh(this,"onNodeEditorSelect",(e,t)=>{this.setState(cA(e,t))}),bh(this,"onNodeEditorHistory",(e,t,n)=>{this.setState(uA(e,t,n))}),bh(this,"onNodeEditorInput",(e,t,n)=>{this.setState(rA(e,t,n))}),bh(this,"onNodeEditorInsertBefore",(e,t,n,r)=>{this.setState(jT(e,t,n,r))}),bh(this,"onNodeEditorInsertAfter",(e,t,n,r)=>{this.setState(VT(e,t,n,r))}),bh(this,"onNodeEditorMoveNode",(e,t)=>{this.setState(YT(e,t))}),bh(this,"onNodeEditorPinNode",(e,t)=>{this.setState(XT(e,t))}),bh(this,"onNodeEditorRemoveNode",e=>{const{type:t}=this.props,{cells:n}=this.state,r=n.get(e),i="compare"===t?r&&r.diff&&r.diff.targetId:e;this.setState(t=>UT(e)(yh({},t,fA(i,this.clientRef)(t))))}),bh(this,"onNodeEditorMergeNode",(e,t,n)=>{this.setState(BT(e,t,n))}),bh(this,"onNodeInserterInsert",e=>{this.setState(jT(e,"",!0))}),bh(this,"setError",e=>{this.setState(eA(e))}),bh(this,"onNodeComparerChangeSource",(e,t)=>{this.setState(aA(t,e))}),bh(this,"revert",async()=>{const{type:e,api:t}=this.props,{notebook:n}=this.state;if("versioned"===e){const{id:e,model:{version:r}}=n;if(!confirm(`Are you sure you want to revert to version ${r}?`))return;await t.documentRevert(e,r),window.location=Cg(n)}else this.setState(lA(this.save,()=>window.location.reload()))}),bh(this,"onLike",()=>{const{api:e,user:t}=this.props;if(!t)return this.props.showLogin({loginReason:"like"});const{notebook:n}=this.state;this.setState({notebook:yh({},n,{like:!n.like,likes:n.like?n.likes-1:n.likes+1})},async()=>{try{await e.documentLike(n.id,!n.like)}catch(t){this.setState(({notebook:e})=>({notebook:yh({},e,{like:e.like,likes:e.likes})})),this.setState({errorMessage:"Oops, liking failed. Try again?"})}})}),bh(this,"onCommentOpen",e=>{this.setState(({openComments:t})=>(t.add(e),{openComments:t}))}),bh(this,"onCommentClose",e=>{this.setState(({openComments:t})=>(t.delete(e),{openComments:t}))}),bh(this,"onCommentHeight",(e,t)=>{this.setState(yA(e,t))}),bh(this,"insertComment",(e,t)=>{const{notebook:n}=this.state;this.setState(pA(e,t,this.clientRef,this.props.user,kg(n)))}),bh(this,"removeComment",(e,t)=>{confirm("Delete this comment?")&&this.setState(dA(e,t,this.clientRef,this.props.user))}),bh(this,"resolveComments",e=>{this.setState(fA(e,this.clientRef))}),bh(this,"onClientComments",e=>{this.setState(mA(e))}),bh(this,"onClientCommentConfirm",async(e,t)=>{this.setState(({notebook:n})=>({notebook:yh({},n,{comments:n.comments.map(n=>n.nonce===t?yh({id:e},n):n)})}))}),bh(this,"onDownloadCell",(e,t,n,r)=>{this.setState(({notebook:i,workerEvents:s})=>{const a=`${null!=t?t:i.slug?i.slug:"untitled"}.${r}`;return this._awaitingDownload=!0,s.push({type:"request_download",node_id:e,filename:a,download_type:n,format:r}),{workerEvents:s}})}),bh(this,"onNodeEditorFocus",e=>{this.setState({focusId:e,visualFocus:null,visualSelection:new Set})}),bh(this,"onNodeEditorInputBlur",e=>{this.setState(({focusId:t,lastFocusId:n})=>({lastFocusId:null!==t&&t===e?t:n}))}),bh(this,"onNodeEditorBlur",e=>{this.setState(({focusId:t,lastFocusId:n})=>({focusId:t===e?null:t,lastFocusId:null!==t&&t===e?t:n}))}),bh(this,"onNodeEditorHeight",(e,t)=>{this.setState(vA(e,t))}),bh(this,"onNodeFeatures",(e,t)=>{this.setState(hA(e,t))}),bh(this,"onNodeInserterMerge",e=>{const{notebook:{model:{nodes:t}}}=this.state;this.onNodeEditorMergeNode(e,t.find(t=>t.id===e).value,!0)}),bh(this,"onNodeHover",e=>{this.setState({hoverId:e})}),bh(this,"onWorkerEvent",e=>{const{history:t}=this.props,{cells:n}=this.state;let r;switch(e.type){case"load":if(!(r=n.get(e.id)))return;r.loaded=!0,this.maybeScrollIfLoaded();break;case"cropped":this.cropResolve(e);break;case"download_type":this.setState(tA(e.id,e.download_type));break;case"download_ready":this.onDownload(e);break;case"download_error":this.setState({errorMessage:"Oops, downloading failed."});case"error":this.setError(e);break;case"focus":this.onWorkerFocus();break;case"resize":this.setState(bA(e.id,e.height));break;case"secrets":this.onSecrets();break;case"data_connector":this.onDataConnector(e.name);break;case"title":this.setState(iA(e.value));break;case"autocompleted":this.autocompleteResolve(e);break;case"ready":this.setState({platformSupport:e.platformSupport});break;case"navigate":t.push(""+e.href)}}),bh(this,"onClientRef",e=>{this.clientRef=e}),bh(this,"onClientSave",(e,t)=>{this.setState(({focusId:n,cells:r,workerEvents:i,notebook:s})=>{let a;const o=s.model;try{const n=[];s=yh({},s,{model:a=o.merge(e,e=>n.push(e)),save_version:t,update_time:new Date}),({cells:r,workerEvents:i}=RT(r,i,n))}catch(l){return{errorMessage:Y.createElement("div",null,"Oops, someone reverted this notebook!",Y.createElement("a",{href:"#",className:"ml1 black-70 hover-blue link",onClick:this.reload},"Please reload?"))}}if(null!=n&&!r.has(n)){let e,t=o.nodes.findIndex(e=>e.id===n)+1;for(;t<o.nodes.length;){let n=o.nodes[t].id;if(a.nodes.some(e=>e.id===n)){e=n;break}}({notebook:s,cells:r,workerEvents:i}=DT(s,r,i,[{type:"insert_node",node_id:n,new_next_node_id:e}]))}return{cells:r,workerEvents:i,notebook:s}})}),bh(this,"onClientSaveConfirm",e=>{this.saveResolve&&(this.saveResolve(e),this.saveResolve=null),this.setState(({notebook:t})=>({notebook:yh({},t,{save_version:e,latest_version:e,update_time:new Date})}))}),bh(this,"onClientError",()=>{this.setState({errorMessage:Y.createElement("div",null,"Oops, unable to connect.",Y.createElement("a",{href:"#",className:"ml1 black-70 hover-blue link",onClick:this.reload},"Try reloading?"))})}),bh(this,"onClientPresence",e=>{this.setState({participants:e})}),bh(this,"onDownload",e=>{this._awaitingDownload&&(this._awaitingDownload=!1,function(e,t){const n=URL.createObjectURL(e);let r=document.createElement("a");r.style.display="none",r.href=n,r.download=t,document.body.appendChild(r),r.click(),r.remove(),URL.revokeObjectURL(n)}(e.blob,e.filename))}),bh(this,"onPutBack",async()=>{const{api:e}=this.props,{notebook:{id:t}}=this.state;await e.documentPutBack(t),this.setState(({notebook:e})=>({notebook:yh({},e,{trashed:!1})}))}),bh(this,"onNodeGutterClick",(e,t)=>{const{type:n}=this.props;this.disallowHint(),this.setState(oA(e,t,n))}),bh(this,"onNodeDragStart",e=>{this.nodeDraggingId=e,this.nodePositions=[...document.querySelectorAll("[data-node-id]")].map(e=>{const t=e.getBoundingClientRect();return{id:+e.dataset.nodeId,elem:e,top:t.top+window.scrollY,bottom:t.bottom+window.scrollY}}),this.setState({dragging:!0})}),bh(this,"findClosest",e=>{if(!this.nodePositions)return;let t=1/0,n=void 0,r=void 0;for(let i=0;i<this.nodePositions.length;i++){const s=this.nodePositions[i];let a=Math.abs(e-s.top),o=Math.abs(e-s.bottom);a<t&&(t=a,n=s.id),o<t&&(t=o,n=this.nodePositions.length>i+1?this.nodePositions[i+1].id:null,r=s.id)}return{next:n,before:r}}),bh(this,"clearPreview",()=>{for(let e of document.querySelectorAll(".show-before,.show-after"))e.classList.remove("show-before","show-after")}),bh(this,"onNodeDrag",e=>{if(null==this.nodeDraggingId)return;let{next:t,before:n}=this.findClosest(e);this.clearPreview(),null!==t?document.querySelector(`[data-node-id="${t}"]`).classList.add("show-before"):document.querySelector(`[data-node-id="${n}"]`).classList.add("show-after")}),bh(this,"onNodeDrop",e=>{if(void 0===this.nodeDraggingId)return;let{next:t}=this.findClosest(e);this.nodePositions=[];const{nodeDraggingId:n}=this;return this.nodeDraggingId=void 0,this.clearPreview(),this.setState(QT(n,t))}),bh(this,"onSecrets",async()=>{const{user:e}=this.props,{notebook:{id:t},notebook:n}=this.state;let r=void 0;if(function(e,t){return ng(e,t)&&!dg(t)}(e,n)){const{api:i}=this.props;null===(r=await i.documentLoadSecrets(t))&&function(e,t){return rg(e,t)&&!dg(t)}(e,n)&&(r=!!confirm("Allow this notebook to access your secrets?")&&await i.documentAllowSecrets(t,!0))}this.setState(({workerEvents:e})=>(e.push({type:"secrets",secrets:r}),{workerEvents:e}))}),bh(this,"onDataConnector",async e=>{const{user:t}=this.props,{notebook:{id:n},notebook:r}=this.state;let i=void 0;if(function(e,t){return ng(e,t)&&!dg(t)}(t,r)){const{api:a}=this.props;try{null===(i=await a.documentLoadDataConnector(n,e))&&function(e,t){return rg(e,t)&&!dg(t)}(t,r)&&(i=!!confirm(r.owner.id===t.id?`Allow this notebook to access your database client “${e}”?`:`Allow this notebook to access ${Og(r.owner)}’s database client “${e}”?`)&&await a.documentAllowDataConnector(n,e,!0))}catch(s){if(i=null,!(s instanceof _h))throw s}}this.setState(({workerEvents:t})=>(t.push({type:"data_connector",name:e,dataConnector:i}),{workerEvents:t}))}),bh(this,"onSelectVersion",_b(e=>{const{notebook:{id:t,model:n}}=this.state;let{api:r}=this.props;return this.onSelectVersion.cancel(),this.selectVersionController&&(this.selectVersionController.abort(),this.selectVersionController=null),this.selectVersionController=new AbortController,new Promise(i=>{r.init({signal:this.selectVersionController.signal}).documentLoad(t,e).then(t=>{this.selectVersionController=null;const r=$y.of(yh({},t,{version:e}));this.setState(({notebook:t,cells:i,workerEvents:s})=>{const{events:a}=n.patch(r,n.nodes.map(e=>e.id).concat(r.nodes.map(e=>e.id)).map(e=>[e,e]));return({workerEvents:s,cells:i}=RT(i,s,a)),{notebook:yh({},t,{save_version:e,model:r}),workerEvents:s,cells:i}},i)},()=>{})})},150)),bh(this,"maybeScrollIfLoaded",e=>{if(this.anchorId){const{notebook:{model:t},cells:n}=this.state;if(!e)for(const e of t.nodes){const{id:t}=e;if(t===this.anchorId)break;if(!n.get(t).loaded)return}const r=n.get(this.anchorId);if(r){const e=document.getElementById(r.name);window.scrollBy(0,e.getBoundingClientRect().top)}this.anchorId=null}}),bh(this,"showKeyboardShortcuts",()=>{this.setState({keyboardShortcutsPane:!0})}),bh(this,"hideKeyboardShortcuts",()=>{this.setState({keyboardShortcutsPane:!1})}),bh(this,"dismissHint",()=>{this.setState({hintVisible:!1}),this.disallowHint()}),bh(this,"disallowHint",()=>{let e=new Date(Date.now()+31536e6).toUTCString();document.cookie=`sawClickToEdit=true; Expires=${e}; Path=/`}),bh(this,"changeAllSource",e=>{this.setState(aA(e,"all"))}),bh(this,"autoMerge",()=>{this.setState(sA)}),bh(this,"loadHistory",async()=>{const{api:e,type:t}=this.props;if("versioned"!==t)return;const{notebook:n}=this.state;this.setState({notebookHistory:Dm}),this.setState({notebookHistory:wm(await e.documentLoadHistory(n.id),n)})}),bh(this,"unloadHistory",()=>{this.selectVersionController&&(this.selectVersionController.abort(),this.selectVersionController=null),this.setState({notebookHistory:void 0})})}componentDidMount(){this._awaitingDownload=!1,this.load(this.props),addEventListener("keydown",this.onKeydown),addEventListener("keyup",this.onKeyup),window.addEventListener("focus",this.onFocus),_y.addEventListener("fullscreenchange",this.onFullScreen)}componentWillReceiveProps(e){const{type:t,match:{params:{specifier:n,historyVersion:r}}}=e;n&&n===this.state.notebook.id&&!this.props.match.params.specifier&&t===this.props.type&&"compare"!==t&&"versioned"!==t||this.props.location.pathname===e.location.pathname||(r&&this.props.match.params.historyVersion&&"versioned"===t&&"versioned"===this.props.type?this.onSelectVersion(+r):this.load(e))}componentDidUpdate(e,{notebook:{model:t}}){VA.endOperation();const{api:n,type:r,history:i}=this.props,{created:s,notebook:{id:a,owner:o,save_version:l,model:c}}=this.state;"demo"===r&&c&&c!==t&&c.version>l&&qy&&qy.setItem("playground",JSON.stringify({id:a,save_version:l,events:c.events.slice(l+1).map(zy)})),"default"===r&&c&&c.version>1&&!a&&!s&&(this.setState({created:!0}),n.documentNew(c,"team"===o.type?o.id:void 0).then(({id:e,version:t,update_time:n})=>{this.setState(({notebook:r})=>({notebook:yh({},r,{update_time:new Date(n),id:e,save_version:t})}),()=>i.replace(`/d/${e}`))}))}componentWillUnmount(){removeEventListener("keydown",this.onKeydown),removeEventListener("keyup",this.onKeyup),window.removeEventListener("focus",this.onFocus),_y.removeEventListener("fullscreenchange",this.onFullScreen)}async load(e){VA.startOperation();const{user:t}=e;let{cells:n,workerEvents:r}=this.state,{api:i,type:s,match:{params:{historyPanel:a="",historyVersion:o,specifier:l,teamLogin:c}},location:{search:u,pathname:h},history:p}=e;n.clear(),r.length=0,this.setState({cells:n,hoverId:null,focusId:null,workerFocused:!1,errorMessage:void 0,keyboardShortcutsPane:!1,hintVisible:this.hintAllowed(),workerEvents:r,workerKey:Date.now(),notebook:{likes:0,like:!1,collections:[],comments:[]},baseNotebook:void 0,ancestry:void 0,diff:void 0,collectionContext:void 0,openComments:new Set,participants:[],created:!!l});let d,f,m,g,v={};switch(s){case"safe":case"default":if(l){const e=`${Cg(v=await i.documentLoad(l+(t&&(l.startsWith(`@${t.login}/`)||t.teams.some(e=>l.startsWith(`@${e.login}/`)))?"@latest":"")))}${"safe"===s?"/safe":""}`;if(e!==h)return p.replace(e)}else{if(c&&!t.teams.some(e=>e.login===c&&"viewer"!==e.role))throw new _h;v={version:1,creator:t,owner:c?yh({},t.teams.find(e=>e.login===c),{type:"team"}):yh({},t,{type:"individual"}),update_time:new Date,nodes:[{id:0,value:"md`# Untitled`",pinned:!0}]}}if(v.collections){const{collection:e}=Mh(u),t=e?v.collections.find(t=>`@${t.owner.login}/${t.slug}`===e):v.collections[0];t&&i.collectionLoad(t.owner.login,t.slug).then(e=>this.setState({collectionContext:e}))}break;case"compare":{let e,n,[[r,s],[a,o]=[r,""]]=h.slice(9).split("...").map(BA);if(""===o&&(/^[0-9]+$/.test(a)?a=`${r}@${a}`:/^~[0-9]+$/.test(a)&&(a=r+a)),v=i.documentLoad(a+o),d=i.documentLoad(r+s),"@"===r[0]||"@"!==s[0]||"@"===a[0]||"@"!==o[0])return[v,d]=await Promise.all([v,d]),p.replace(`/compare/${d.id}@${d.version}...${v.id}@${v.version}`);[v,d,e,n,f]=await Promise.all([v,d,t&&i.documentLoadMeta(a),t&&i.documentLoadMeta(r),i.documentsLoadCommonAncestry(r+s,a+o)]),Object.assign(v,e),Object.assign(d,n);break}case"versioned":case"thumbnail":{o&&(l+=`@${o}`);const e=`/d/${(v=await i.documentLoad(l)).id}@${v.version}`;if(e!==`/d/${l}`)return p.replace(e+a);break}case"demo":{let e=qy&&qy.getItem("playground");if(e)try{e=JSON.parse(e)}catch(E){}e&&e.id?(v=await i.documentLoad(e.id,e.version),m=e.events):v=await i.documentLoad("@observablehq/demo");break}}v.comments=[],d&&(d.comments=[]),"thumbnail"!==s&&"compare"!==s&&v&&v.id&&t&&("versioned"===s&&a&&this.setState({notebookHistory:Dm}),Promise.all([i.documentLoadMeta(v.id),"versioned"===s&&a&&i.documentLoadHistory(v.id)]).then(([{latest_version:e,forks:t,fork_of:n,like:r,suggestion_from:i,suggestions_to:s,thumbnail:a,custom_thumbnail:o},l])=>{this.setState(({notebook:c})=>({notebook:c=yh({},c,{latest_version:e,forks:t,fork_of:n,like:r,suggestion_from:i,suggestions_to:s,thumbnail:a,custom_thumbnail:o}),notebookHistory:l&&wm(l,c)}))})),"compare"===s?(v.save_model=$y.of(v),v.collections=[],d.save_model=$y.of(d),({diff:g}=function(e,{mapping:t,target_changes:n,base_changes:r}){const i=new Map(t.map(OA)),s=new Set(n),a=new Set(r),o={insert_node:0,modify_node:0,remove_node:0,noop:0,total:0};for(const[l,c]of e.entries())if(o[MA(c)]++,"noop"!==c.type&&o.total++,c.id=l,c.baseId=c.base?c.base.id:null,c.targetId=c.target?c.target.id:null,null==c.baseId&&i.has(c.targetId)&&(c.baseId=i.get(c.targetId)),c.base&&c.target){c.modified_by=s.has(c.targetId)&&a.has(c.baseId)?"both":a.has(c.baseId)?"base":"target";const e=TA(c.base.value,c.target.value);e.forEach((t,n)=>{const r=e[n-1],i=e[n+1];let s;if(t.added&&r&&r.removed&&(s=r),t.removed&&i&&i.added&&(s=i),s){const e=SA(t.added?s.value:t.value,t.added?t.value:s.value).filter(e=>t.added?!e.removed:!e.added);e.forEach((e,t,n)=>{const r=n[t-1],i=n[t+1];r&&r.added&&i&&i.added&&" "===e.value&&!e.added&&(e.added=!0),r&&r.removed&&i&&i.removed&&" "===e.value&&!e.removed&&(e.removed=!0)}),t.wordDiff=e}}),c.lineDiff=e}return{diff:e,count:o}}(d.save_model.diff(v.save_model,f.mapping),f)),d.save_version=d.version,v.save_version=v.version):(v.save_version=v.version,v.model=$y.of(v),v.save_version&&(v.model.events.length=v.save_version+1)),m&&(v.model=v.model.apply(m));const b="compare"===s?g.map(e=>yh({},e.target||yh({},e.base,{value:"",disabled:!0}),{id:e.id})):v.model.nodes,y=function(e){return e.map(e=>{const{id:t,value:n,pinned:r}=e;return{type:"insert_node",node_id:t,new_node_value:n,new_node_pinned:r}})}(b);if(({cells:n,workerEvents:r}=RT(n,r,y,g&&new Map(g.map(e=>[e.id,e])))),"compare"===s&&(v.model=$y.of({version:y.length,title:v.title,nodes:b})),("default"===s||"safe"===s)&&qy&&qy.getItem(`notebook-${v.id}`))try{const e=JSON.parse(qy.getItem(`notebook-${v.id}`));if(qy.removeItem(`notebook-${v.id}`),v.model.version===e[0].version-1){const t=[];v.model=v.model.merge(e,e=>t.push(e)),({cells:n,workerEvents:r}=RT(n,r,t))}}catch(E){}const w="default"===s&&1===v.model.version?v.model.nodes[0].id:null;null!==w&&(n.get(w).selections=[{anchor:5,head:13}]);const x=e.location.hash;if(x)for(const[k,{name:C}]of n)if(C===x.substr(1)){this.anchorId=k,setTimeout(()=>this.maybeScrollIfLoaded(!0),jA);break}v.update_time&&(v.update_time=new Date(v.update_time)),v.publish_time&&(v.publish_time=new Date(v.publish_time)),delete v.version,d&&delete d.version,this.setState({notebook:v,baseNotebook:d,ancestry:f,cells:n,focusId:w,workerEvents:r,diff:g})}scrollVisualFocus(){let e=document.querySelector(`[data-node-id="${this.state.visualFocus}"]`);e&&Tk(e,{scrollMode:"if-needed",block:"nearest",behavior:t=>{t.forEach(({el:t,top:n,left:r})=>{e.getClientBoundingRect,t.scroll({top:n,left:r,behavior:"instant"});const i=e.getBoundingClientRect();Math.abs(i.bottom-window.innerHeight)<5?(n+=64,t.scroll({top:n,left:r,behavior:"instant"})):i.top<3&&(n-=64,t.scroll({top:n,left:r,behavior:"instant"}))})}})}hintAllowed(){const{type:e}=this.props;return"default"===e&&!document.cookie.split("; ").includes("sawClickToEdit=true")}render(){let{type:e,user:t,location:n,match:r}=this.props;const{params:{historyVersion:i,historyPanel:s}}=r,{notebook:a,baseNotebook:o,notebookHistory:l,shiftKey:c,cells:u,bottomHover:h,hoverId:p,focusId:d,workerEvents:f,workerKey:m,workerFocused:g,errorMessage:v,keyboardShortcutsPane:b,hintVisible:y,collectionContext:w,platformSupport:x,ancestry:E,participants:k,openComments:C,dragging:_,visualFocus:S,visualSelection:N}=this.state;let T=Lm;const{model:A,comments:L,save_version:P,suggestion_from:I,suggestions_to:O}=a;if(A)for(const Y of A.nodes){const{editorHeight:e,commentHeight:t,comparerHeight:n,workerHeight:r}=u.get(Y.id);T+=e+t+n+r+Pm}const M=k.find(e=>e.id!==t.id),R=a.id&&"versioned"!==e&&"compare"!==e&&rg(t,a),D=kg(a),F=pg(a)?"private":hg(a)?"shared":"published",V="versioned"===e&&s?A&&`History: ${Sg(A)} / ${Og(a.owner)}`:"compare"!==e?A&&`${Sg(A)} / ${Og(a.owner)}`:a&&o&&`Comparing ‘${Sg(o)}’ to ‘${Sg(a)}’`,j=wg(a);let B=A&&("compare"!==e?A.events.length-1-P:this.targetPatchSize());const U=ig(t,a),H=t&&("default"===e||"safe"===e||"compare"===e&&gg(a)&&vg(a,o)&&bg(a));let $=U?0:L.filter(e=>e.user.id===t.id).length;B+=$;const z="versioned"===e?function(e,t){return ag(e,t)?yg(t)?Um:Bm:null}(t,a):"compare"===e?function(e,t,n){return cg(e,t)?(vg(t,n)||vg(n,t))&&bg(n)&&bg(t)?$m:Hm:og(e,n)&&vg(n,t)&&bg(n)&&bg(t)?xg(n)?Wm:zm:null}(t,o,a):function(e,t){return xg(t)&&!ig(e,t)?Wm:rg(e,t)?dg(t)?wg(t)?jm:Vm:Fm:ag(e,t)?yg(t)?Um:Bm:null}(t,a),W=!(!a.collections||!a.collections.length),q=!("demo"===e||!(a.fork_of||a.forks||W||I||O&&O.length)),G="demo"!==e,K=v||function(e){return e===$m||e===jm||e===Um||e===Wm}(z),Z=N.size>0||null!==S;return Y.createElement(Av,{query:{maxWidth:1024}},r=>Y.createElement(Av,{query:{maxWidth:640}},P=>Y.createElement($b,Object.assign({contextUI:A&&("demo"===e?Y.createElement(aC,{forkFromDemo:this.forkFromDemo}):fg(a)?null:"compare"===e||A.version>1?Y.createElement(GN,{user:t,notebook:a,baseNotebook:o,primaryAction:z,fullscreen:_y.fullscreenEnabled&&this.fullscreen,editable:R,notebookStatus:F,unsavedChanges:B,hasUnpublishedChanges:j,suggestion:D&&I,type:e,publish:this.publish,publishUnlisted:this.publishUnlisted,unpublish:this.unpublish,suggest:this.suggest,merge:this.merge,revert:this.revert,trash:this.trash,reloadCollections:this.reloadCollections,closeSuggestion:this.closeSuggestion,fork:this.fork,transfer:this.transfer,hasHistoryPanel:s,loadHistory:this.loadHistory}):null),headerMessage:v?Y.createElement(yw,{errorMessage:v}):A&&R&&j&&"versioned"!==e?Y.createElement(ww,{notebook:a}):null,isNotebook:!0,footerContent:w&&Y.createElement(ZN,{collection:w,notebook:a}),grayFooter:!!w,nofooter:"thumbnail"===e,stickyHeader:K,hintVisible:y&&!K,onDismissHint:this.dismissHint},this.props),Y.createElement("div",{className:"flex w-100 mw8 center mt4"},Y.createElement("div",{className:"flex-auto"},Y.createElement(wc,null,A&&Y.createElement("title",null,V)),fg(a)?Y.createElement(Bk,{onPutBack:this.onPutBack}):A&&(R||D)&&H&&Y.createElement(sw,{ref:this.onClientRef,notebook:a,editable:R,onSave:this.onClientSave,onSaveConfirm:this.onClientSaveConfirm,onPresence:this.onClientPresence,onComments:this.onClientComments,onCommentConfirm:this.onClientCommentConfirm,onError:this.onClientError}),I&&("default"===e||"compare"===e&&I.to_id===o.id&&bg(o)&&bg(a))?Y.createElement(QN,{type:e,suggestion:I,toNotebook:"compare"===e?o:a.fork_of,closeSuggestion:this.closeSuggestion}):null,"compare"===e&&a&&a.id&&o&&o.id&&Y.createElement(tC,{type:e,user:t,notebook:a,baseNotebook:o,ancestry:E,autoMerge:this.autoMerge,changeAllSource:this.changeAllSource}),"versioned"===e&&!(P&&l)&&Y.createElement(Kk,{exitTo:Cg(a)},Y.createElement("b",null,"Showing"," ",bg(a,a.save_version)?"latest version":`version ${a.save_version}`,".")," ","Changes will not be saved."),"safe"===e&&Y.createElement(Kk,{exitTo:n.pathname.slice(0,-5)},Y.createElement("b",null,"Safe mode enabled.")," Use this code-only view to fix issues that might crash or hang the normal editor."),l&&a&&s&&P?Y.createElement(TT,{mobile:!0,notebook:a,unloadHistory:this.unloadHistory,history:l,historyVersion:+i}):null,Y.createElement(Av,{query:{maxWidth:480}},t=>Y.createElement(Y.Fragment,null,G&&a.owner&&Y.createElement("div",{className:"flex justify-between ph3"},Y.createElement(fy,{user:a.owner,creator:a.creator,time:"versioned"===e?a.update_time:a.publish_time||a.update_time,updateTime:"versioned"!==e&&a.publish_time&&a.update_time>a.publish_time?a.update_time:void 0,status:F}),("compare"!==e&&a.publish_version||M&&!t)&&Y.createElement("div",{className:"flex items-center ml2 f6"},M&&!t&&Y.createElement(Gk,{participants:k}),"compare"!==e&&"versioned"!==e&&a.publish_version&&Y.createElement("div",{className:"ml3"},Y.createElement(iC,{notebook:a,onClick:this.onLike})))),M&&t?Y.createElement(Gk,{mobile:!0,participants:k}):null)),q?Y.createElement("div",{className:"pl2-ns mh3 mt4",style:{minHeight:"2rem"}},W?Y.createElement(KN,{notebook:a}):null,O&&O.length?Y.createElement(rC,{id:a.id,suggestions:O}):null,Y.createElement(qk,{notebook:a})):null,"demo"===e&&Y.createElement(sC,{save:this.forkFromDemo,onHelp:this.showKeyboardShortcuts}),"default"===e&&Y.createElement(kw,{cells:u,platformSupport:x}),A&&Y.createElement("div",{className:`relative mh0-ns nl3 mb5 ${q||"demo"===e?"":"mt5"}`,style:{marginLeft:21}},Y.createElement("div",{ref:this.onContentRef,tabIndex:"-1",className:"relative outline-0",onMouseLeave:()=>this.onNodeHover(null)},"safe"!==e&&Y.createElement(VN,{key:m,type:e,id:a.id,login:a.owner.login,events:f,height:T,path:n.pathname+n.search,pointerEvents:!_,onNodeFeatures:this.onNodeFeatures,onNodeHover:this.onNodeHover,onWorkerEvent:this.onWorkerEvent}),Y.createElement("div",{className:"absolute h-100",style:{width:"50vw",left:"-50vw"}}),Y.createElement("div",{className:"dib relative w-100 code f6 lh-copy black pen"},A&&A.nodes&&A.nodes.map((n,i)=>{const s=u.get(n.id),l=n.id===d||n.pinned||s.empty||"safe"===e||"compare"===e&&s.diff&&"noop"!==s.diff.type,h="compare"===e&&s.diff?MA(s.diff):"normal",f={};s.name&&(f.id=s.name);const m="compare"===e?s.diff&&s.diff.targetId:n.id,v=L.filter(e=>e.node_id===m),b=C.has(m),y=g?{bright:"--black-10",mid:"--black-05",light:"--black-025"}:{bright:"--lightest-blue",mid:"--washed-blue",light:"--faint-blue"};return Y.createElement("div",Object.assign({},f,{"data-node-id":n.id,key:n.id,className:"relative",onMouseEnter:()=>this.onNodeHover(n.id),style:yh({marginTop:Lm,marginBottom:Pm,paddingTop:"safe"===e||s.empty||s.disabled?0:s.workerHeight},N.has(n.id)||S===n.id?{borderRadius:2,boxShadow:N.has(n.id)&&S===n.id?`0px 0px 0px 2px var(${y.bright}), 0px 0px 0px 5px var(${y.light})`:N.has(n.id)?`0px 0px 0px 2px var(${y.mid}), 0px 0px 0px 5px var(${y.light})`:`0px 0px 0px 2px var(${y.bright})`}:{})}),Y.createElement("div",{className:"bg-light-blue drag-marker-before"}),Y.createElement("div",{className:"bg-light-blue drag-marker-after"}),!Z&&Y.createElement(Wk,{id:n.id,merge:c,visible:n.id===p||n.id===d||i>0&&A.nodes[i-1].id===p||i>0&&A.nodes[i-1].id===d,onInsert:this.onNodeInserterInsert,onMerge:i>0&&this.onNodeInserterMerge}),l&&Y.createElement(Y.Fragment,null,"compare"===e&&s.diff&&"noop"!==s.diff.type&&Y.createElement($k,{id:n.id,source:s.source,edited:s.edited,onChangeSource:this.onNodeComparerChangeSource,diff:s.diff,notebook:a,baseNotebook:o}),("compare"!==e||"diff"!==s.source)&&Y.createElement(Dk,{id:n.id,value:s.disabled?s.diff["base"===s.source?"target":"base"].value:n.value,hasBorder:N.has(n.id)||S===n.id,pinned:n.pinned,type:h,cell:s,hovered:n.id===p,focused:n.id===d,cellNames:MT(u),workerAutocomplete:this.workerAutocomplete,onFocus:this.onNodeEditorFocus,onBlur:this.onNodeEditorBlur,onInputBlur:this.onNodeEditorInputBlur,onHeight:this.onNodeEditorHeight,onInput:this.onNodeEditorInput,onInsertBefore:this.onNodeEditorInsertBefore,onInsertAfter:this.onNodeEditorInsertAfter,onMergeNode:this.onNodeEditorMergeNode,onRemoveNode:this.onNodeEditorRemoveNode,onMoveFocus:this.onNodeEditorMoveFocus,onMoveNode:this.onNodeEditorMoveNode,onPinNode:this.onNodeEditorPinNode,onHistory:this.onNodeEditorHistory,onSelect:this.onNodeEditorSelect,autoClosePairs:t&&t.setting_autoclose_pairs,alwaysOnAutocomplete:!t||t.setting_always_on_autocomplete}),"compare"===e&&"diff"===s.source&&Y.createElement(zk,{id:n.id,diff:s.diff,onHeight:this.onNodeEditorHeight})),Y.createElement(jk,{mobile:r,cell:s,node:n,hovered:n.id===p,focused:n.id===d,type:e,open:l,visuallySelected:n.id===S||N.has(n.id),commentable:H&&null!=m,commentNodeId:m,onCommentOpen:this.onCommentOpen,onDownloadCell:this.onDownloadCell,onRemove:A.nodes.length>1&&this.onNodeEditorRemoveNode,onNodeDragStart:this.onNodeDragStart,onNodeDrag:this.onNodeDrag,onNodeDrop:this.onNodeDrop,onClick:this.onNodeGutterClick,detectDownloadType:this.detectDownloadType,exitVisualMode:this.exitVisualMode,resetDownloadType:this.resetDownloadType}),(v.length>0||b)&&Y.createElement(ET,{node:n,commentNodeId:m,open:b,notebook:a,suggestion:D&&I,onCommentOpen:this.onCommentOpen,onCommentClose:this.onCommentClose,onCommentHeight:this.onCommentHeight,onCommentInsert:this.insertComment,onCommentRemove:this.removeComment,onCommentResolve:this.resolveComments,comments:v}))}),!Z&&Y.createElement("div",{className:"relative",style:{marginTop:Lm,marginBottom:Pm}},Y.createElement(Wk,{id:null,merge:c,hovered:h,visible:h||A.nodes[A.nodes.length-1].id===p||A.nodes[A.nodes.length-1].id===d,onInsert:this.onNodeInserterInsert}))))),nc.createPortal(Y.createElement("div",null,Y.createElement(XN,{type:e,unsavedChanges:B,editable:R,baseNotebook:o,notebook:a}),Y.createElement("div",{className:"fixed bottom-1 right-1 tc z-2"},!Z&&!b&&"thumbnail"!==e&&Y.createElement(Bb,{keyboardShortcuts:!0,showKeyboardShortcuts:this.showKeyboardShortcuts}))),document.getElementsByClassName("overlay")[0])),b&&!P&&Y.createElement(bw,{stickyHeader:K,onDismiss:this.hideKeyboardShortcuts}),l&&a&&s&&!P?Y.createElement("div",{className:"w5 pl2 mb5",style:{flexShrink:0}},Y.createElement("div",{className:"flex flex-column top-1",style:{position:"sticky",height:"calc(100vh - 110px)"}},Y.createElement(TT,{notebook:a,unloadHistory:this.unloadHistory,history:l,historyVersion:+i}))):null,Z&&nc.createPortal(Y.createElement(LT,{visualFocus:S,visualSelection:N}),document.getElementsByClassName("overlay")[0])))))}}function HA(e){return Y.createElement(UA,Object.assign({},e,{type:"versioned"}))}bh(UA,"defaultProps",{type:"default"});var $A=[{license:{license:"Apache-2.0"},modules:[{author:"Microsoft Corp.",modules:["tslib"]}]},{license:{license:"BSD-3-Clause"},modules:[{author:"Berkeley Martinez",modules:["warning"]},{author:"Jed Watson",modules:["exenv"]},{author:"Kevin Decker",modules:["diff"]},{author:"Michael Ridgway",modules:["hoist-non-react-statics"]},{author:"Mike Bostock",modules:["d3-dsv"]}]},{license:{license:"ISC"},modules:[{author:"Observable, Inc.",modules:["@observablehq/inspector","@observablehq/parser","@observablehq/runtime","@observablehq/stdlib","d3-require"]},{author:"theKashey",modules:["focus-lock","react-focus-lock"]}]},{license:{license:"MIT"},modules:[{author:"Moritz Schwoerer",modules:["react-avatar-editor"]},{author:"Sebastian McKenzie",modules:["@babel/runtime"]},{author:"NFL",modules:["react-helmet"]},{author:"Michael Jackson and Ryan Florence",modules:["react-router","react-router-dom"]},{author:"John-David Dalton",modules:["lodash-es"]},{author:"Michael Jackson",modules:["history","react-media","resolve-pathname","value-equal"]},{author:"Marijn Haverbeke",modules:["codemirror"]},{author:"Mark Dalgleish",modules:["react-themeable"]},{author:"Christopher Jeffrey",modules:["marked"]},{author:"Rafael Pedicini",modules:["fscreen"]},{author:"Ryan Florence",modules:["@reach/component-component","@reach/dialog","@reach/utils"]},{author:"Marijn Haverbeke, Ingvar Stepanyan and Adrian Heine",modules:["acorn","acorn-walk"]},{author:"Facebook, Inc.",modules:["prop-types"]},{author:"Alberto Leal",modules:["shallowequal"]},{author:"Misha Moroshko",modules:["react-autosuggest","react-autowhatever","section-iterator","shallow-equal"]},{author:"Blake Embrey",modules:["path-to-regexp"]},{author:"Facebook, Inc. and its affiliates.",modules:["react","react-dom","react-is","scheduler"]},{author:"Dan Abramov",modules:["react-clientside-effect","react-side-effect"]},{author:"James Halliday",modules:["deep-equal"]},{author:"Andres Suarez",modules:["invariant"]},{author:"Kevin Mårtensson",modules:["strict-uri-encode"]},{author:"Sam Verschueren",modules:["decode-uri-component"]},{author:"Julian Gruber",modules:["isarray"]},{author:"Cody Olsen",modules:["compute-scroll-into-view"]},{author:"Anton Korzunov",modules:["react-remove-scroll","react-remove-scroll-bar","react-style-singleton"]},{author:"",modules:["@reach/portal"]},{author:"Mathias Bynens",modules:["uc.micro"]},{author:"Sindre Sorhus",modules:["object-assign","query-string"]},{author:"Stian Didriksen",modules:["scroll-into-view-if-needed"]},{author:"Vitaly Puzrin.",modules:["linkify-it"]},{author:"by Adrian Heine",modules:["acorn-bigint"]},{author:"mrmrs",modules:["tachyons-custom"]}]}];function zA(e){return Y.createElement($b,Object.assign({},e,{gray:!0}),Y.createElement(wc,null,Y.createElement("title",null,"Open Source")),Y.createElement("div",{className:zf},Y.createElement("h2",{className:"mt4 mb2 f4 fw7 lh-title black-70"},"Open Source"),Y.createElement("div",{className:"measure-wide f5 fw4 lh-copy black-70"},Y.createElement("p",null,"Observable wouldn’t be possible without the code written and freely shared by the open source community. This web application includes code from the following modules."),$A.map(({license:e,modules:t},n)=>Y.createElement("div",{key:n,className:"mt4"},Y.createElement("div",{className:"mb3 f5 fw7 semitracked"},function e(t){return t.license?-1!==t.license.indexOf("LicenseRef")?'License Reference "'+t.license+'"':[Y.createElement("a",{key:1,className:"no-underline black-70 hover-blue",href:`https://spdx.org/licenses/${t.license}.html`},t.license),t.plus?" or newer":"",t.exception?" with "+t.exception:""]:[e(t.left)," ",t.conjunction," ",e(t.right)]}(e)),Y.createElement("div",{className:"mt2 lh-copy"},t.map(({author:e,modules:t},n)=>Y.createElement("div",{key:n,className:"mt1"},function(e){if(2===(e=e.map((e,t)=>Y.createElement("a",{key:t,className:"no-underline blue hover-dark-blue",href:`https://npmjs.org/package/${e}`},e))).length)e.splice(1,0," and ");else if(e.length>2){let t=[];for(let n=0;n<e.length;n++)t.push(e[n]),n<e.length-1&&(n==e.length-2?t.push(", and "):t.push(", "));e=t}return e}(t)," © ",e))))))))}$A.find(e=>"MIT"===e.license.license).modules.push({author:"Cole Bemis",modules:["feather-icons"]},{author:"Khan Academy",modules:["katex"]},{author:"Christopher Jeffrey",modules:["marked"]}),$A.find(e=>"ISC"===e.license.license).modules.push({author:"Dominic Tobias",modules:["react-image-crop"]});const WA=rh(class extends Y.Component{async componentDidMount(){let{api:e,history:t,match:{params:{path:n}},location:{search:r}}=this.props;const{signup:i}=Mh(r);if(n=n?`/${n.replace(/^(loggedin\/)+/,"")}`:"/",!Hf.user)return window.history.replaceState(null,"",n),void window.location.reload(!0);const s=Gy&&Gy.getItem("fork");if(s){const t=Gy.getItem("forkId"),r=JSON.parse(s),{save_version:i}=r,a=wh(r,["save_version"]),{id:o}=await e.documentFork(t,i,a);n=`/d/${o}`,Gy.removeItem("forkId"),Gy.removeItem("fork")}t.replace(n,{signup:i})}render(){return Y.createElement($b,this.props,Y.createElement(wc,null,Y.createElement("title",null,"Logged In")))}});function qA(){throw new _h}class GA extends Y.Component{constructor(...e){super(...e),bh(this,"controller",null)}componentWillMount(){this.load(this.props)}componentWillReceiveProps(e){this.load(e)}componentWillUnmount(){this.abort()}parseParams(e){const{query:t,offset:n}=Mh(e.location.search);return{query:t,offset:+n||0}}abort(){this.controller&&(this.controller.abort(),this.controller=null)}load(e){const{query:t,offset:n}=this.parseParams(e);if(this.abort(),!t)return void this.setState({notebooks:[]});const{api:r}=e;this.controller=new AbortController,this.setState({notebooks:new Array(27).fill(void 0)}),r.init({signal:this.controller.signal}).documentSearch(t,n).then(e=>{this.controller=null,this.setState({notebooks:e})})}render(){const{notebooks:e}=this.state,{query:t,offset:n}=this.parseParams(this.props);return Y.createElement($b,Object.assign({},this.props,{gray:!0}),Y.createElement(wc,null,Y.createElement("title",null,"Search")),Y.createElement("div",{className:zf},t?Y.createElement("div",null,Y.createElement("div",{className:"mv4 f4 fw4 lh-copy black-70"},"Search results for ‘",t,"’"),0===e.length?Y.createElement("div",{className:"flex h5 items-center justify-center"},Y.createElement("div",{className:"black-50"},"We couldn’t find any notebooks that matched your search.")):Y.createElement("div",null,Y.createElement("div",{className:"listing-grid"},e.slice(0,27).map((e,n)=>Y.createElement(uv,Object.assign({},this.props,{key:e?e.id:n,notebook:e,query:t})))),e.length>27&&Y.createElement("div",{className:"mt4 tc"},Y.createElement(fh,{to:`?query=${encodeURIComponent(t)}&offset=${n+27}`,className:"pv2 ph3 dib br2 link blue bg-white hover-dark-blue"},"Show more…")))):Y.createElement("div",{className:"flex justify-center pv5"},Y.createElement("form",null,Y.createElement("div",{className:"mb3 f4 lh-copy black-50"},"🔍 Search for notebooks"),Y.createElement("div",{className:"flex content-stretch items-top"},Y.createElement(Fg,{name:"query",maxLength:"256",className:"flex-auto ph2 mr2 w-auto"}),Y.createElement("input",{type:"submit",value:"Search",className:"pa2 white bg-blue hover-bg-dark-blue br2 pointer bn"}))))))}}class KA extends Y.Component{render(){const{code:e}=Mh(this.props.location.search);switch(window.history.replaceState(null,"","/"),e){case"401":throw new kh;case"404":throw new _h;default:throw new xh}}}function YA(){return window.getStripe?window.getStripe():Vx("https://checkout.stripe.com/checkout.js").catch(()=>window.StripeCheckout)}const ZA={month:"monthly",year:"yearly"};class QA extends Y.PureComponent{constructor(...e){super(...e),bh(this,"state",{}),bh(this,"onToken",async e=>{const{team:{id:t},api:n}=this.props;try{const i=await n.teamBillingUpdate(t,e.id);this.setState({customer:i})}catch(r){this.setState({error:"Whoops, this payment method could not be used. Please try again, or use another form of payment."})}}),bh(this,"updateBilling",()=>{this.openHandler("Update")}),bh(this,"switchCycle",async e=>{const{team:{id:t},api:n}=this.props,r="monthly"===e?"yearly":"monthly";if(!confirm(`Are you sure you want to switch to ${r} billing?`))return;const i=await n.teamBillingCycleUpdate(t,r);this.setState({customer:i})}),bh(this,"addBilling",()=>{this.openHandler("Subscribe")}),bh(this,"openHandler",e=>{const{team:t,user:n,team:{id:r}}=this.props,{handler:i}=this.state,s=n.teams.find(e=>e.id===r).email;i.open({name:"Observable, Inc.",image:"https://static.observablehq.com/favicon-512.e85350a27dfadeea7c7c78c797c24419525df5579de174d86d258c40ae57473a.png",description:`${Og(t)}: Team account`,email:s,panelLabel:e})}),bh(this,"removeBilling",async()=>{const{team:e}=this.props;if(!confirm(`Are you sure you want to cancel the subscription for ${Og(e)}?`))return;const{team:{id:t},api:n}=this.props;await n.teamBillingDelete(t),this.load(this.props)}),bh(this,"dismissError",()=>{this.setState({error:void 0})})}componentWillMount(){YA().then(e=>this.setState({handler:e.configure({key:"pk_live_A5hiyxHhT8FK6EIWYFZMuHo8",locale:"auto",zipCode:!0,token:this.onToken})})),this.load(this.props)}componentDidUpdate(e){e.team!==this.props.team&&this.load(this.props.team)}componentWillUnmount(){const{handler:e}=this.state;e&&e.close()}load({team:e,api:t}){e&&t.teamBilling(e.id).then(e=>this.setState({customer:e}))}render(){const{customer:e,error:t}=this.state;if(void 0===e)return Y.createElement(ay,null,"Loading billing information…");let n,r,i,s,a,o;try{({sources:{data:[n]}}=e),({subscriptions:{data:[{quantity:r,plan:{amount:i,interval:o}}]}}=e),a=ZA[o],s=!!(n&&r&&i)}catch(l){s=!1}return Y.createElement(Y.Fragment,null,t&&Y.createElement("div",{className:"relative pa3 mb4 bg-washed-yellow br2"},Y.createElement("button",{className:"inline-flex absolute right-1 top-1 pa1 black-50 hover-black bg-transparent bn pointer",onClick:this.dismissError},Y.createElement(ff,{className:"w1 h1"})),Y.createElement("div",{className:"mr3 lh-copy black-70"},t)),Y.createElement("div",{className:"fw5"},"Your plan"),!0===s?Y.createElement("div",{className:"mt3"},Y.createElement("div",null,Y.createElement("span",{className:"mr2 fw5 black"},"$",(i*r/100).toFixed(0),"/",o),Y.createElement("span",{className:"black-30"},r," editor",1===r?"":"s"," at $",(i/100).toFixed(0),"/",o)),Y.createElement("div",{className:"mt4 fw5"},"Payment method"),Y.createElement("div",{className:"mt3"},n.brand," ending in ",n.last4," Expiration ",n.exp_month,"/",n.exp_year),Y.createElement("div",{className:"mt3"},Y.createElement(Dg,{secondary:!0,onClick:this.updateBilling},"Update payment method")),Y.createElement("div",{className:"mt4 fw5"},"Billing cycle"),Y.createElement("div",{className:"mt3 "},"Billed ",a),Y.createElement("div",{className:"mt3"},Y.createElement(Dg,{secondary:!0,onClick:()=>this.switchCycle(a)},"Switch to ","monthly"===a?"yearly":"monthly"," billing…")),Y.createElement("div",{className:"flex items-center justify-center mt5"},Y.createElement(Dg,{secondary:!0,className:"black-70 hover-white bg-transparent hover-bg-red b--black-20 pointer",style:{borderWidth:1,borderStyle:"solid"},onClick:this.removeBilling},"Cancel subscription…"))):!1===s?Y.createElement("div",null,Y.createElement("div",{className:"mv3 lh-copy black-70"},"This team has no attached payment information. To avoid it being deactivated in the next billing cycle, please set up billing."),Y.createElement("button",{className:"ph3 pv2 f6 fw6 white bg-blue hover-bg-dark-blue br2 pointer bn",onClick:this.addBilling},"Add payment method")):null)}}const XA="pb2 tl fw5";function JA({invoice:{amount_due:e,date:t,status:n,invoice_pdf:r}}){const i=`pv2 f6 lh-copy ${"draft"===n?"bg-near-white black-70 ":" black-80 "}`;return Y.createElement("tr",{className:`${"draft"===n?"ba br2":"bt"} b--black-10`},Y.createElement("td",{className:i},Y.createElement("span",{className:"ph1 ttu"},"draft"===n?"upcoming":n)),Y.createElement("td",{className:i,style:{fontVariantNumeric:"tabular-nums"}},Nm(new Date(1e3*t),{day:"2-digit",month:"2-digit",year:"numeric"})),Y.createElement("td",{className:i+" tr pr2",style:{fontVariantNumeric:"tabular-nums"}},(e/100).toLocaleString(void 0,{style:"currency",currency:"USD"})),Y.createElement("td",{className:i+" tr pr2 tc"},r?Y.createElement("a",{download:!0,href:r,title:"Download invoice PDF",className:"flex items-center justify-center blue hover-black"},Y.createElement(_f,null)):null))}function eL({invoices:e,upcomingInvoice:t}){return Y.createElement("div",null,Y.createElement("table",{className:"w-100 collapse"},Y.createElement("thead",null,Y.createElement("tr",null,Y.createElement("th",{className:XA},"Status"),Y.createElement("th",{className:XA},"Date"),Y.createElement("th",{className:XA+" tr pr2"},"Amount"),Y.createElement("th",{className:XA+" tc"},"PDF"))),Y.createElement("tbody",null,Y.createElement(JA,{invoice:t}),e.data.map(e=>Y.createElement(JA,{key:e.id,invoice:e})))))}class tL extends Y.PureComponent{constructor(...e){super(...e),bh(this,"state",{}),bh(this,"dismissError",()=>{this.setState({error:void 0})})}componentWillMount(){this.load(this.props)}componentDidUpdate(e){e.team===this.props.team&&e.location.search===this.props.location.search||this.load(this.props)}componentWillUnmount(){const{handler:e}=this.state;e&&e.close()}load({team:e,api:t,location:{search:n}}){const{starting_after:r}=Mh(n);this.setState({invoices:void 0,invoice:void 0}),e&&Promise.all([t.teamInvoiceUpcoming(e.id),t.teamInvoices(e.id,r)]).then(([e,t])=>this.setState({upcomingInvoice:e,invoices:t}))}render(){const{team:e,location:{pathname:t,search:n}}=this.props,{starting_after:r}=Mh(n),{invoices:i,upcomingInvoice:s,error:a}=this.state;return Y.createElement(Y.Fragment,null,a&&Y.createElement("div",{className:"relative pa3 mb4 bg-washed-yellow br2"},Y.createElement("button",{className:"inline-flex absolute right-1 top-1 pa1 black-50 hover-black bg-transparent bn pointer",onClick:this.dismissError},Y.createElement(ff,{className:"w1 h1"})),Y.createElement("div",{className:"mr3 lh-copy black-70"},a)),i?Y.createElement("div",null,r?null:Y.createElement(eL,{invoices:i,upcomingInvoice:s,team:e}),i.has_more?Y.createElement("div",{className:"justify-center flex mt4"},Y.createElement(fh,{to:`${t}?${Dh({starting_after:i.data[i.data.length-1].id})}`,className:"pv2 ph3 dib br2 link blue hover-bg-light-gray hover-dark-blue"},"Show more…")):null):Y.createElement(ay,null,"Loading invoices…"))}}function nL({history:e,api:t,user:n,team:r,member:i,reload:s,members:a}){const[o,l]=Z(!1),[c,u]=Z(i.role);function h(e){e.stopPropagation(),l(e=>!e)}const p=Xm(i,n);let d=!1,f=!1,m=!1;return"owner"===r.role&&p&&!a.some(e=>"owner"===e.role&&e.id!==n.id)?d=!0:"owner"===r.role?(f=!0,m=!0):p&&(f=!0),Y.createElement("div",{className:"flex justify-between items-center pv2","data-cy":`team-member-${i.id}`},Y.createElement(fh,{className:"inline-flex items-center f6 fw5 no-underline near-black hover-blue",to:`/@${i.login}`},Y.createElement(Wf,{user:i,s:16,className:"mr2 br-100"}),Og(i),p?Y.createElement("span",{className:"mh2 f7 mid-gray"},"YOU"):null),Y.createElement("div",{className:"inline-flex relative items-center"},Y.createElement("span",{className:"dib ph1 mh2 ml2 f7 fw6 lh-f7 nowrap ttc mid-gray bg-near-white ba b--light-silver br2"},Qm(c)),(f||m||p)&&Y.createElement("button",{onClick:h,title:"Team member actions…",className:"inline-flex pa0 moon-gray hover-dark-gray bg-transparent bn pointer"},Y.createElement(jd,null)),o&&Y.createElement(zg,{onClickOutside:h,extraStyle:{right:-16,width:"15rem",top:18}},Y.createElement("div",{className:"pv2"},d?Y.createElement(Y.Fragment,null,Y.createElement("div",{className:"ph3 pv2 f6 lh-copy black-70 hover-black"},"You’re the only owner of this team. Change another member to an owner in order to leave or change your role.")):Y.createElement(Y.Fragment,null,f&&Y.createElement("button",{onClick:async function(){const a=Xm(i,n);if(confirm(a?"Are you sure you want to leave this team?":`Are you sure you want to remove @${i.login} from the team?`)){if(await t.teamMemberRemove(r.id,i.id),a)return n.teams=n.teams.filter(e=>e.id!==r.id),e.push("/");await s()}},className:"w-100 bn bg-transparent flex items-center ph3 pv2 f6 fw6 black-70 hover-black hover-bg-near-white pointer"},p?"Leave team…":"Remove from team…"),m&&["owner","member","viewer"].filter(e=>c!==e).map(e=>Y.createElement("button",{key:e,onClick:()=>(async function(e){Xm(i,n)&&"owner"!==e&&!confirm("Are you sure you want to stop being an owner of this team? You will immediately lose the ability to administrate the team.")||(u(e),l(!1),await t.teamMemberRole(r.id,i.id,e),await s())})(e),className:"bg-transparent bn w-100 tl ph3 pv2 f6 fw6 black-70 hover-black hover-bg-near-white pointer"},"Change role to ",Qm(e)," ","viewer"===e?Y.createElement("span",{className:"ml1 f7 ttu black-30 fw4"},"free"):"viewer"===i.role?Y.createElement("span",{className:"ml1 f7 ttu black-30 fw4"},"paid"):null)))))))}class rL extends Y.PureComponent{constructor(...e){super(...e),bh(this,"state",{members:Dm,email:"",role:"member",invitations:[]}),bh(this,"reload",async()=>{const{api:e,refreshUser:t}=this.props;await t(),this.load(yh({},this.props,{api:e.init({cache:"no-cache"})}))}),bh(this,"onChangeEmail",e=>{const{target:{value:t}}=e;this.setState({email:t})}),bh(this,"onChangeRole",e=>{const{target:{value:t}}=e;this.setState({role:t})}),bh(this,"rescind",async e=>{if(!e.id)return void alert("This invitation was just sent; please wait a moment.");if(!confirm(`Are you sure you want to rescind the invitation to ${e.email}?`))return;const{api:t,team:n}=this.props;this.setState(({invitations:t})=>({invitations:t.filter(t=>e!==t)})),await t.teamRescindInvitation(n.id,e.id),this.load(this.props)}),bh(this,"invite",async e=>{e.preventDefault();const{api:t,team:n,user:r}=this.props,{email:i,role:s}=this.state;this.setState(({invitations:e})=>({email:"",invitations:e.filter(e=>e.email!==i).concat({email:i,role:s,create_time:new Date,accept_time:null,owner:r})})),await t.teamInvite(n.id,i,s),this.load(this.props)})}componentWillMount(){this.load(this.props)}componentDidUpdate(e){e.team!==this.props.team&&this.load(this.props.team)}load({team:e,api:t}){e&&(t.teamMembers(e.id).then(e=>this.setState({members:e.sort((e,t)=>Og(e).localeCompare(Og(t)))})),"owner"===e.role&&t.teamInvitations(e.id).then(e=>this.setState({invitations:e.map(e=>{let{create_time:t}=e;return yh({},wh(e,["create_time"]),{create_time:new Date(t)})})})))}render(){const{team:e}=this.props,{members:t,email:n,role:r,invitations:i}=this.state,s=i.filter(e=>!e.accept_time);return Y.createElement("div",null,Y.createElement("div",{className:"mb3 fw5"},"Team members"),t===Dm?Y.createElement("div",{className:"pv3 tc blue bt bb b--black-10"},Y.createElement("span",{className:"fade-in delay-short"},Y.createElement(wf,{className:"spin"}))):Y.createElement("div",{className:"pv2 bt bb b--black-10"},t.map(e=>Y.createElement(nL,Object.assign({key:e.id,member:e,members:t,reload:this.reload},this.props)))),"owner"===e.role?Y.createElement("div",null,s.length>0&&Y.createElement(Y.Fragment,null,Y.createElement("div",{className:"mt5 mb3 fw5"},"Invitations"),Y.createElement("div",{className:"pv2 bt bb b--black-10"},s.map((e,t)=>Y.createElement("div",{key:t,className:"pv2"},Y.createElement("div",{className:"flex justify-between items-center"},Y.createElement("div",null,e.email,Y.createElement("span",{className:"ml2 f7 fw4 ttu black-30"},Qm(e.role))),e.id?Y.createElement("button",{onClick:this.rescind.bind(this,e),title:"Click to rescind invitation.",className:"inline-flex pa0 black-30 hover-white bg-transparent hover-bg-dark-red bn pointer"},Y.createElement(ff,{className:"w1 h1 ma1"})):null),Y.createElement("div",{className:"mt1 f7 fw4 black-50"},"Invited"," ",Y.createElement(JN,{time:e.create_time})," by"," ",Y.createElement(fh,{to:`/@${e.owner.login}`,className:"no-underline black-50 hover-blue"},Og(e.owner))))))),Y.createElement("div",{className:"mt5"},Y.createElement("form",{className:"flex flex-column mw5-ns center items-stretch",onSubmit:this.invite},Y.createElement("h3",{className:"ma0 f6 fw5 black-70"},"Invite team member"),Y.createElement("label",{className:"db mt3 mb1 f6 fw5 black-50",htmlFor:"invite-role"},"Role"),Y.createElement("div",null,Y.createElement(Vg,{className:"mb0-ns mb4 f6 fw6 black-50 bg-light-gray bn",value:r,onChange:this.onChangeRole},Y.createElement("option",{value:"owner"},"Owner"),Y.createElement("option",{value:"member"},"Editor"),Y.createElement("option",{value:"viewer"},"Viewer [free]"))),Y.createElement("label",{className:"db mt3 mb1 f6 fw5 black-50",htmlFor:"invite-email"},"Email"),Y.createElement(Fg,{id:"invite-email",name:"email",type:"email",maxLength:"255",required:!0,value:n,onChange:this.onChangeEmail,className:"mb2",placeholder:"user@email.com"}),Y.createElement(Dg,{disabled:!n,highlight:n},"Send"))),Y.createElement("div",{className:"pv2 mt4 f6 lh-copy black-50"},Y.createElement("div",null,Y.createElement("span",{className:"fw6"},"Viewers")," can read, search and comment on team notebooks."),Y.createElement("div",null,Y.createElement("span",{className:"fw6"},"Editors")," can also create, edit, publish, suggest and trash."),Y.createElement("div",null,Y.createElement("span",{className:"fw6"},"Owners")," can also invite members, assign roles and empty the trash."))):Y.createElement("div",{className:"pv2 mt3 f6 tc black-30"},"Owners in this team can invite new members and change roles."))}}var iL=({onDismiss:e})=>Y.createElement(wd,{onDismiss:e},Y.createElement("div",{className:"relative"},Y.createElement(Rg,{onDismiss:e}),Y.createElement("div",{className:Mg},"Please check your email to accept this change."),Y.createElement("div",{className:"mt3 f6 lh-copy"},"You should receive an email momentarily confirming this email address change. If you do not receive it, please check your Spam folder, wait a few minutes, or contact Observable support."),Y.createElement("div",{className:"flex items-center justify-end mt3"},Y.createElement(Dg,{onClick:e,highlight:!0},"Close"))));function sL(e){let{name:t="",className:n="",spacing:r="pv2"}=e,i=wh(e,["name","className","spacing"]);const{checked:s,disabled:a}=i;return Y.createElement("label",{className:`fw6 f6 flex items-center form-custom-switch ${a?" disabled mid-gray":" not-disabled dark-gray hover-near-black pointer blue-ring-focus"}  ${r} ${n}`},Y.createElement("span",{className:`${i.autoFocus&&"focused"} ${s?"switch-on bg-blue":"switch-off b--silver bg-silver"} form-switch-container br-pill w2 dib flex items-center h1 mr2`},Y.createElement("input",Object.assign({},i,{name:t,type:"checkbox",className:"o-0 form-default-clear",style:{width:0,height:0}})),Y.createElement("span",{style:{width:12,height:12},className:`absolute br-pill ba form-switch-knob bg-white animate-all \n            ${s&&!a&&"switch-on b--dark-blue"}\n            ${!s&&!a&&"switch-off b--black-20"}\n            ${a&&" disabled"} \n            dib `})),i.label)}const aL=460;function oL({hideAvatarModal:e,teamId:t,refreshUser:n,reloadTeam:r,fileURL:i,api:s}){const[a,o]=Z(!1),[l,c]=Z(1),u=J(null);return Y.createElement(wd,{onDismiss:e},Y.createElement("div",{className:"relative"},Y.createElement(Rg,{onDismiss:e}),Y.createElement("div",{className:Mg},"Set your avatar"),Y.createElement("div",{className:"pv2"},Y.createElement(Kg,{image:i,ref:u,width:396,height:396,border:10,borderRadius:198,scale:l}),Y.createElement("div",{className:"flex justify-center items-center mt2"},Y.createElement("label",{className:"mr2 f6 black-70",htmlFor:"scale-range"},"Zoom"),Y.createElement(Zg,{name:"scale-range",className:"w4",onChange:e=>c(e.target.valueAsNumber),value:l,step:"any",min:1,max:2}))),Y.createElement("div",{className:`flex items-center justify-end mt3 ${a?"pen o-50":""}`},Y.createElement("div",{className:"mr2"},Y.createElement(Dg,{secondary:!0,onClick:e},"Cancel")),Y.createElement(Dg,{highlight:!0,onClick:async function(){if(o(!0),u.current){const i=u.current.getImage(),a=document.createElement("canvas");a.width=aL,a.height=aL;const o=a.getContext("2d");o.fillStyle="#fff",o.fillRect(0,0,aL,aL),o.drawImage(i,0,0,i.width,i.height,0,0,aL,aL);const l=a.toDataURL("image/jpeg",.7);await(t?s.teamEditAvatar(t,l):s.userEditAvatar(l)),await Promise.all([n(),r&&r()]),e()}}},"Save"))))}class lL extends Y.PureComponent{constructor(e){super(e),bh(this,"state",{user:{},saved:!1,sendingEmailConfirmation:!1,emailConfirmationModal:!1,avatarModal:!1}),bh(this,"hideEmailConfirmation",()=>{this.setState({emailConfirmationModal:!1})}),bh(this,"onChange",e=>{const{target:{name:t,value:n,type:r,checked:i}}=e;this.setState(({user:e})=>({user:yh({},e,{[t]:"checkbox"===r?i:n})}))}),bh(this,"onChangeEmail",e=>{const{target:{value:t}}=e;this.setState({email:t})}),bh(this,"save",async e=>{e.preventDefault();const{teamId:t,api:n,refreshUser:r,reloadTeam:i}=this.props,{user:s}=this.state;await(t?n.teamEdit(t,s):n.userEdit(s)),await Promise.all([r(),i&&i()]),this.setState({saved:!0,saveTimer:setTimeout(()=>{this.setState({saved:!1})},1e3)})}),bh(this,"saveEmail",async e=>{e.preventDefault(),document.activeElement&&document.activeElement.blur();const{teamId:t,api:n}=this.props,{email:r}=this.state;this.setState({sendingEmailConfirmation:!0}),await(t?n.teamEditEmail(t,r):n.userEditEmail(r)),this.setState({emailConfirmationModal:!0,sendingEmailConfirmation:!1})}),bh(this,"triggerAvatar",()=>{const e=this.fileInputRef.current;e&&e.click()}),bh(this,"onFileChange",async e=>{const[t]=e.target.files;e.target.value="",this.setState({avatarModal:!0,file:t,fileURL:URL.createObjectURL(t)})}),bh(this,"hideAvatarModal",()=>{const{fileURL:e}=this.state;URL.revokeObjectURL(e),this.setState({avatarModal:!1,fileURL:void 0})}),this.fileInputRef=Y.createRef()}componentWillMount(){this.reload()}componentWillReceiveProps(e){this.state.avatar_url===e.user.avatar_url?this.reload(e):this.setState({avatar_url:e.user.avatar_url})}reload(e=this.props){const{user:{name:t,home_url:n,bio:r,email:i,setting_autoclose_pairs:s,setting_always_on_autocomplete:a,avatar_url:o}}=e;this.setState({user:{name:t,home_url:n,bio:r,setting_autoclose_pairs:s,setting_always_on_autocomplete:a},avatar_url:o,email:i})}render(){const{refreshUser:e}=this.props,{user:t,saved:n,email:r,emailConfirmationModal:i,sendingEmailConfirmation:s,avatarModal:a,fileURL:o,avatar_url:l}=this.state,{teamId:c,user:u,reloadTeam:h}=this.props,p=u.name!==t.name||u.home_url!==t.home_url||u.bio!==t.bio||u.setting_autoclose_pairs!==t.setting_autoclose_pairs||u.setting_always_on_autocomplete!==t.setting_always_on_autocomplete,d=u.email!==r;return Y.createElement(Y.Fragment,null,Y.createElement(ou,{when:p||d,message:"Are you sure you want to leave before saving changes?"}),Y.createElement("form",{onSubmit:this.save,className:"flex flex-column items-stretch"},Y.createElement("h3",{className:"ma0 mb2 f4 fw6 near-black"},"Profile"),Y.createElement("div",{className:"flex-ns flex-row"},Y.createElement("div",{className:"tc mt4 flex-no-shrink w4-ns"},Y.createElement("img",{style:{height:100,width:100},className:`br-100 bg-near-white ${l?"":"ba b--black-10"}`,src:l?`${l}?s=256`:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII="}),Y.createElement(Yg,{buttonType:"transparent",className:"w-100 blue hover-light-blue mt2 nowrap",onClick:this.triggerAvatar},"Change avatar")),Y.createElement("div",{className:"flex flex-column flex-auto items-stretch mt4 mt0-ns ml4-ns"},Y.createElement("label",{className:"pt3 pb2 f6 fw5 mid-gray",htmlFor:"name"},c?"Team display name":"Display name"),Y.createElement(Fg,{id:"name",name:"name",maxLength:"255",onChange:this.onChange,value:t.name}),Y.createElement("label",{className:"pt3 pb2 f6 fw5 mid-gray",htmlFor:"home_url"},c?"Team website":"Website"),Y.createElement(Fg,{id:"home_url",name:"home_url",type:"url",maxLength:"255",onChange:this.onChange,value:t.home_url}),Y.createElement("label",{className:"pt3 pb2 f6 fw5 mid-gray",htmlFor:"bio"},c?"Team bio":"Bio"),Y.createElement(my,{id:"bio",name:"bio",maxLength:"255",onChange:this.onChange,rows:"3",value:t.bio}),!c&&Y.createElement("div",{className:"mt4"},Y.createElement("div",{className:"f6 fw5 mid-gray"},"Advanced settings"),Y.createElement("div",{className:"flex items-start pt2"},Y.createElement(sL,{onChange:this.onChange,className:"",checked:!!t.setting_autoclose_pairs,name:"setting_autoclose_pairs"}),Y.createElement("label",{className:"",htmlFor:"setting_autoclose_pairs"},Y.createElement("div",{className:"f6 fw5 mb1 dark-gray lh-solid pt2"},"Enable auto-close pairs"),Y.createElement("div",{className:"f7 fw5 mid-gray lh-f7"},"When you type the first character of a pair like"," ","({['\"",", the editor will automatically insert its closing character."))),Y.createElement("div",{className:"flex items-start pt2"},Y.createElement(sL,{onChange:this.onChange,checked:!!t.setting_always_on_autocomplete,name:"setting_always_on_autocomplete"}),Y.createElement("label",{htmlFor:"setting_always_on_autocomplete"},Y.createElement("div",{className:"f6 fw5 mb1 dark-gray lh-solid pt2"},"Always-on autocomplete"),Y.createElement("div",{className:"f7 fw5 mid-gray lh-f7"},"Always show code completions, also available by pressing"," ",Y.createElement("span",{className:"code-in-text f7 ba br2 bg-near-white b--light-silver"},"tab"),".")))),Y.createElement("div",{className:"mt3"},n&&Y.createElement("div",{className:"mr3 f6 ttu black-30"},"Saved"),Y.createElement(Yg,{className:"ph3",disabled:!p},"Save changes"))))),Y.createElement("h3",{className:"pt5 ma0 mb2 f4 fw6 near-black"},"Email settings"),Y.createElement("form",{onSubmit:this.saveEmail,className:"flex flex-column items-stretch",style:s?{pointerEvents:"none",opacity:.5}:{}},Y.createElement("label",{className:"flex justify-between pt3 pb2 f6 fw5 mid-gray",htmlFor:"email"},c?"Team email":"Email"),Y.createElement(Fg,{id:"email",name:"email",type:"email",maxLength:"255",onChange:this.onChangeEmail,value:r}),Y.createElement("div",{className:"mt3"},Y.createElement(Yg,{className:"ph3",disabled:!d},s?"Sending…":"Change email"))),i&&Y.createElement(iL,{onDismiss:this.hideEmailConfirmation}),a&&Y.createElement(oL,{api:this.props.api,refreshUser:e,reloadTeam:h,fileURL:o,hideAvatarModal:this.hideAvatarModal,teamId:c}),Y.createElement("input",{type:"file",className:"dn",accept:".jpg, .jpeg, .png",onChange:this.onFileChange,ref:this.fileInputRef}))}}function cL(e,t){return e.name.localeCompare(t.name)}class uL extends Y.Component{constructor(e){super(e),bh(this,"state",{name:"",value:"",saveValue:"",focused:!1}),bh(this,"onFocus",()=>{this.setState({focused:!0})}),bh(this,"onBlur",()=>{this.setState({focused:!1})}),bh(this,"onChangeName",e=>{const{target:{value:t}}=e;this.setState({name:t})}),bh(this,"onChangeValue",e=>{const{target:{value:t}}=e;this.setState({value:t})}),bh(this,"setSecret",e=>{e.preventDefault();const{isNew:t}=this.props,{name:n,value:r}=this.state;this.props.setSecret({name:n,value:r}),this.setState(t?{name:"",value:""}:{saveValue:r})}),e.secret&&(this.state.name=e.secret.name,this.state.value=e.secret.value,this.state.saveValue=e.secret.value)}componentWillReceiveProps(e){e.secret!==this.props.secret&&this.setState({name:e.secret.name,value:e.secret.value,saveValue:e.secret.value})}render(){const{deleteSecret:e,isNew:t}=this.props,{name:n,value:r,focused:i,saveValue:s}=this.state;return Y.createElement("form",{onSubmit:this.setSecret,style:{display:"grid",gridTemplateColumns:"1fr 1fr auto",gridGap:"12px",marginBottom:12}},t?Y.createElement(Fg,{name:"name",maxLength:"255",required:!0,placeholder:"SECRET_KEY_NAME",spellCheck:"false",autoComplete:"off",value:n,onChange:this.onChangeName,className:"w-100 code code-font-size lh-solid"}):Y.createElement("div",{style:{fontSize:"0.9em",lineHeight:"16px"},className:"pa2 code fw6 truncate dark-gray bg-near-white br2"},n),Y.createElement(Fg,{name:"value",type:i?"text":"password",maxLength:"1023",placeholder:"Value",spellCheck:"false",autoComplete:"new-password",required:!0,value:r,onFocus:this.onFocus,onBlur:this.onBlur,onChange:this.onChangeValue,className:"w-100 code code-font-size lh-solid"}),t||s!==r?Y.createElement(Dg,{disabled:!n||!r,highlight:n&&r},"Save"):Y.createElement("button",{onClick:()=>e(n),type:"button",title:"Click to delete secret.",className:"inline-flex w3 pa0 black-30 hover-white hover-dark-red bg-transparent bn pointer"},Y.createElement(ff,{className:"w1 h1 ma1"})))}}class hL extends Y.PureComponent{constructor(...e){super(...e),bh(this,"state",{secrets:Dm,name:"",value:""}),bh(this,"deleteSecret",async e=>{const{api:t,teamId:n}=this.props;this.setState(({secrets:t})=>({secrets:t.filter(t=>t.name!==e)})),await(n?t.teamSetSecret(n,{name:e,value:null}):t.userSetSecret({name:e,value:null})),this.load(this.props)}),bh(this,"setSecret",async({name:e,value:t})=>{const{api:n,teamId:r}=this.props;this.setState(({secrets:n})=>({name:"",value:"",secrets:n.filter(t=>t.name!==e).concat({name:e,value:t}).sort(cL)})),await(r?n.teamSetSecret(r,{name:e,value:t}):n.userSetSecret({name:e,value:t})),this.load(this.props)})}componentWillMount(){this.load(this.props)}componentWillReceiveProps(e){this.load(e)}load({teamId:e,api:t}){(e?t.teamSecrets(e):t.userSecrets()).then(e=>this.setState({secrets:e.sort(cL)}))}render(){const{secrets:e}=this.state;return Y.createElement("div",{className:"mw6-ns center"},Y.createElement("div",{className:"mb2 f4 fw6 near-black"},"Secrets"),Y.createElement("div",{className:"mb4 f7 fw5 lh-copy mid-gray"},"Secrets can be accessed by your notebooks using the"," ",Y.createElement("code",{className:"code-in-text f7 bg-near-white ba b--light-silver br2"},'Secret("KEY_NAME")')," ","function. Use secrets to store API keys and other sensitive values you don’t want to be public."," "),e===Dm?Y.createElement("div",{className:"flex items-center justify-center pv3 fw5 light-gray fade-in delay-short"},Y.createElement(wf,null),Y.createElement("span",{className:"ml2"},"Loading")):Y.createElement("div",{className:"f6"},e.map(e=>Y.createElement(uL,{key:e.name,secret:e,setSecret:this.setSecret,deleteSecret:this.deleteSecret})),Y.createElement(uL,{setSecret:this.setSecret,isNew:!0})),Y.createElement(fh,{className:"flex db items-center mt4 f7 fw5 lh-solid blue hover-dark-blue link",to:"/@observablehq/secrets"},Y.createElement(Wd,{style:{background:"#dae4ff"},className:"dib w1 h1 mr2 lh-f7 tc light-blue br-pill"}),"Learn more about secrets",Y.createElement(Qd,null)))}}function pL(e){let{type:t="error",spacing:n=" pv3 ph3",className:r="",title:i="",description:s="",children:a}=e,o=wh(e,["type","spacing","className","title","description","children"]);return Y.createElement("div",Object.assign({className:`\n          ${"warning"!==t?"success"===t?" success-alert bg-washed-green":" error-alert bg-washed-red ":" warning-alert bg-washed-yellow"} ${n} ${r} br2 `},o),"error"===t&&Y.createElement("div",{className:"flex items-center fw6 lh-solid dark-red br2"},Y.createElement(Rd,{className:"w1 h1 mr2 white bg-red b--dark-red br-pill"}),i),"warning"===t&&Y.createElement("div",{className:"flex items-center fw6 lh-solid gold"},Y.createElement(Rd,{className:"w1 h1 mr2 white bg-yellow b--gold br-pill"}),i),"success"===t&&Y.createElement("div",{className:"flex items-center fw6 lh-solid dark-green"},Y.createElement(Pd,{className:"flex w1 h1 mr2 white bg-green b--dark-green br-pill"}),i),a||Y.createElement("div",{className:"pl2 mt1 ml3 f7 fw5 lh-f7 dark-gray"},s))}function dL(e,t){return e.name.localeCompare(t.name)}const fL={mysql:{port:3306,name:"MySQL"},postgres:{port:5432,name:"PostgreSQL"}},mL="dib fw6 mb2 mid-gray",gL={spellCheck:"false",autoComplete:"off",className:"w-100 pa2"};function vL({password:e,setPassword:t,initialPassword:n}){const r="fw5 ml2 blue link pointer bn bg-transparent pa0",[i,s]=Z(!1),a=J();function o(){i||(s(!0),t(""))}return Q(()=>{i&&a.current.focus()},[i]),Y.createElement("div",null,Y.createElement("label",{htmlFor:"password",className:`${mL} flex justify-between`},Y.createElement("span",null,"Password"),i?Y.createElement("button",{type:"button",className:r,onClick:function(){s(!1),t(n)}},"Cancel"):Y.createElement("button",{type:"button",className:r,onClick:o},"Edit")),Y.createElement(Fg,Object.assign({},gL,{id:"password",name:"password",ref:a,disabled:!i,readOnly:!i,value:i?e:"",placeholder:null===e?"••••••••":"",onChange:e=>t(e.target.value),onDoubleClick:o})))}function bL({dataConnector:e={},existingNames:t=[],isNew:n,onDismiss:r,dispatch:i}){const[s,a]=Z(e.name||""),[o,l]=Z(e.type||"postgres"),{credentials:c={}}=e,[u,h]=Z(c.user||""),[p,d]=Z(c.password),[f,m]=Z(c.host||""),[g,v]=Z(c.port||fL[o].port),[b,y]=Z(c.database||""),[w,x]=Z(c.ssl||"required"),E=u===c.user&&(p===c.password||""===p&&void 0===c.password)&&f===c.host&&g==c.port&&b===c.database&&w===c.ssl,k=s&&o&&u&&f&&g&&b&&(!n||!t.includes(s));return Y.createElement(wd,null,Y.createElement("div",{className:"relative"},Y.createElement(Rg,{onDismiss:r}),Y.createElement("div",{className:Mg},n?"Create a new database client":"Edit database"),Y.createElement("form",{onSubmit:function(e){e.preventDefault();const t={name:s,type:o,credentials:{user:u,password:p,host:f,port:+g,database:b,ssl:w}};i(n?{type:"create",value:t}:{type:"update",value:t}),r()},className:"mt4 f6",style:{display:"grid",gridTemplateColumns:"1.5fr 1fr",gridGap:"var(--spacing-medium)",alignItems:"baseline"}},n?Y.createElement(Y.Fragment,null,Y.createElement("div",null,Y.createElement("label",{htmlFor:"name",className:mL},"Name"),Y.createElement(Fg,Object.assign({},gL,{id:"name",name:"name",maxLength:"255",required:!0,value:s,onChange:e=>a(e.target.value)}))),Y.createElement("div",null,Y.createElement("label",{htmlFor:"type",className:mL},"Type"),Y.createElement(Vg,{id:"type",name:"type",className:`${gL.className} bg-light-gray input-reset`,onChange:function(e){g==fL[o].port&&v(fL[e.target.value].port),l(e.target.value)},value:o},Object.entries(fL).map(([e,{name:t}])=>Y.createElement("option",{value:e,key:e},t))))):Y.createElement(Y.Fragment,null,Y.createElement("div",null,Y.createElement("label",{htmlFor:"name",className:mL},"Name"),Y.createElement("div",{className:"pv2 fw5"},s)),Y.createElement("div",null,Y.createElement("label",{htmlFor:"type",className:mL},"Type"),Y.createElement("div",{className:"pv2 fw5"},o))),Y.createElement("div",null,Y.createElement("label",{htmlFor:"user",className:mL},"User"),Y.createElement(Fg,Object.assign({},gL,{id:"user",name:"user",required:!0,value:u,onChange:e=>h(e.target.value)}))),n?Y.createElement("div",null,Y.createElement("label",{htmlFor:"password",className:mL},"Password"),Y.createElement(Fg,Object.assign({},gL,{id:"password",name:"password",value:p||"",onChange:e=>d(e.target.value)}))):Y.createElement(vL,{password:p,setPassword:d,initialPassword:c.password}),Y.createElement("div",null,Y.createElement("label",{htmlFor:"host",className:mL},"Host"),Y.createElement(Fg,Object.assign({},gL,{id:"host",name:"host",required:!0,value:f,onChange:e=>m(e.target.value)}))),Y.createElement("div",null,Y.createElement("label",{htmlFor:"port",className:mL},"Port"),Y.createElement(Fg,Object.assign({},gL,{id:"port",name:"port",required:!0,value:g,onChange:e=>v(e.target.value)}))),Y.createElement("div",null,Y.createElement("label",{htmlFor:"database",className:mL},"Database"),Y.createElement(Fg,Object.assign({},gL,{id:"database",name:"database",required:!0,value:b,onChange:e=>y(e.target.value)}))),Y.createElement("div",null,Y.createElement("div",{className:"flex relative items-center mt2",style:{top:24}},Y.createElement(sL,{id:"ssl",name:"ssl",checked:"required"===w,onChange:e=>x(e.target.checked?"required":"disabled")}),Y.createElement("label",{htmlFor:"ssl",className:"dib fw6 dark-gray"},"Require SSL/TLS"))),Y.createElement("div",{className:"flex justify-end mt3",style:{gridColumnEnd:"span 2"}},Y.createElement(Yg,{className:"mr2",buttonType:"gray",onClick:r},"Cancel"),Y.createElement(Yg,{className:"ph2",disabled:!k||E},n?"Add new":"Save changes")))))}function yL({name:e,check:t,onClick:n}){if(!t)return null;const r="flex items-baseline pa1 ba br2 mt3 mb2";return t.loading?Y.createElement("div",{className:`${r} b--black-10`},Y.createElement("span",{className:"db pa1 ma2 blue"},Y.createElement(wf,{className:"w1 h1 v-mid"})),Y.createElement("span",{className:"fw5 lh-copy"},"Checking connection…")):t.ok?Y.createElement("div",{className:`${r} b--light-green bg-washed-green`},Y.createElement("span",{className:"db pa1 ma2 white br-100 bg-green"},Y.createElement(Ld,{className:"w1 h1 v-mid"})),Y.createElement("span",{className:"fw5 lh-copy"},Y.createElement("span",{className:"green"},"Connection successful"),Y.createElement("p",{className:"mt1 mb2 fw4"},"Use this client from a private notebook with"," ",Y.createElement("code",{className:"fw6 black"},'DatabaseClient("',e,'")'),"."))):Y.createElement("div",{onClick:n},Y.createElement(pL,{type:"warning",title:t.message?t.message:"Connection failed",description:"You can still attempt to use this client from a notebook, but it may\nnot work properly."}))}function wL({dataConnector:e,isEditing:t,setEditing:n,dispatch:r}){const{name:i}=e,[s,a]=Z(!1);const o="bn bg-transparent pv2 ph3 db pointer w-100 flex fw6 items-center-nowrap hover-bg-light-silver dark-gray hover-near-black";return Y.createElement(Y.Fragment,null,Y.createElement("button",{onClick:()=>a(!s),type:"button",title:"Click to edit this database client.",className:"inline-flex w1 pa0 black-30 hover-blue bg-transparent bn pointer"},Y.createElement(Id,{className:"w1 h1"})),s&&Y.createElement(zg,{onClickOutside:()=>a(!1)},Y.createElement("div",{className:"pv2",onClick:()=>a(!1)},Y.createElement("button",{onClick:()=>n(!0),className:o},"Edit"),Y.createElement("button",{className:o,onClick:function(){r({type:"check_request",name:i})}},"Test"),Y.createElement("hr",{className:"bt b--black-10 br-0 bl-0 bb-0"}),Y.createElement("button",{className:`${o} red hover-red`,onClick:function(){confirm(`Are you sure you want to delete "${i}"?`)&&r({type:"delete",name:i})}},"Delete"))),t&&Y.createElement(bL,{dataConnector:e,onDismiss:()=>n(!1),dispatch:r}))}function xL({dataConnector:e,dispatch:t}){const{name:n,type:r,credentials:{user:i,host:s,port:a,database:o},check:l}=e,c=`${r}://${i}@${s}:${a}/${o}`,[u,h]=Z(!1);return Y.createElement("div",{className:"pv2 f6 bb b--black-10"},Y.createElement("div",{className:"flex relative justify-between items-end mv2 fw6"},Y.createElement("span",null,n),Y.createElement(wL,{dataConnector:e,isEditing:u,setEditing:h,dispatch:t})),Y.createElement("div",{className:"mv2 code f7 nowrap mid-gray overflow-hidden",style:{textOverflow:"ellipsis"}},c),Y.createElement(yL,{name:n,check:l,onClick:()=>h(!0)}))}function EL({teamId:e,api:t}){const[n,r]=function({teamId:e,api:t}){const[n,r]=X(CL,kL),{action:i}=n;return Q(()=>{(e?t.teamDataConnectors(e):t.userDataConnectors()).then(e=>{r({type:"read",value:e.sort(dL)})})},[e,t]),Q(()=>{if(!i)return;const n=n=>e?t.teamSetDataConnector(e,n):t.userSetDataConnector(n);(async()=>{const{type:s,name:a,value:o}=i;switch(s){case"create":case"update":await n(o),r({type:"check_request",name:o.name});break;case"delete":(n=>e?t.teamDeleteDataConnector(e,n):t.userDeleteDataConnector(n))(a);break;case"check_request":r({type:"check",name:a,check:{loading:!0}});try{const n=await(async n=>{const r=await(e?t.teamLoadDataConnectorCheckToken(e,n):t.userLoadDataConnectorCheckToken(n));return(await fetch("https://connector.observableusercontent.com/check",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${r}`}})).json()})(a);r({type:"check",name:a,check:n})}catch(l){r({type:"check",name:a,check:l})}}})()},[i,e,t]),[n,r]}({teamId:e,api:t}),[i,s]=Z(!1),{dataConnectors:a,loading:o}=n;return Y.createElement("div",{className:"mw6-ns center"},Y.createElement("div",{className:"pa2 mb4 f7 fw5 lh-copy mid-gray bg-washed-yellow br2 warning-alert"},"This feature is currently in beta. Please send your feedback to"," ",Y.createElement("a",{href:"mailto:support@observablehq.com",className:"fw6 blue hover-dark-blue link"},"support@observablehq.com"),"."),Y.createElement("div",{className:"flex justify-between items-center mb3 f4 fw6 near-black"},"Databases",Y.createElement(Yg,{onClick:()=>s(!0),size:"small",className:"ph2 nowrap"},Y.createElement("div",{className:"flex items-center pr1"},Y.createElement(Jd,{className:"mr1"})," Add new"))),i&&Y.createElement(bL,{isNew:!0,existingNames:a.map(e=>e.name),onDismiss:()=>s(!1),dispatch:r}),Y.createElement("div",{className:"mb3 f7 fw5 lh-copy mid-gray"},"You can query PostgreSQL and MySQL databases from your private notebooks with"," ",Y.createElement("code",{className:"code-in-text f7 bg-near-white ba b--light-silver br2"},'DatabaseClient("dbname")'),"."),a.map(e=>Y.createElement(xL,{key:e.name,dispatch:r,dataConnector:e})),!o&&0===a.length&&Y.createElement("button",{className:"w-100 pa4 f6 tc gray bg-transparent ba b--dashed b--light-gray br2 pointer",onClick:()=>s(!0)},"You haven't created any database clients yet.",Y.createElement("div",{className:"flex justify-center items-center mt2 fw6 tc blue hover-dark-blue link"},Y.createElement(Jd,{className:"mr1"})," New database")),Y.createElement(fh,{className:"flex db items-center mt4 f7 fw5 lh-solid blue hover-dark-blue link",to:"/d/a856f2a939b81d53"},Y.createElement(Wd,{style:{background:"#dae4ff"},className:"dib w1 h1 mr2 fw7 lh-f7 tc light-blue br-pill"}),"Learn more about databases",Y.createElement(Qd,null)))}const kL={dataConnectors:[],loading:!0},CL=(e,t)=>{const{dataConnectors:n}=e,{name:r,value:i}=t,s=yh({},e,{action:t});switch(t.type){case"read":return yh({},s,{dataConnectors:i,loading:!1});case"create":return yh({},s,{dataConnectors:n.concat(_L(i)).sort(dL)});case"update":return yh({},s,{dataConnectors:n.map(e=>e.name===i.name?_L(i):e)});case"delete":return yh({},s,{dataConnectors:n.filter(e=>e.name!==r)});case"check":const{check:e}=t;return yh({},s,{dataConnectors:n.map(t=>t.name===r?yh({},t,{check:e}):t)});default:return s}};function _L(e){const{credentials:t}=e;return yh({},e,{credentials:yh({},t,{password:""===t.password||void 0===t.password?void 0:null})})}function SL({tabs:e,location:t,mobile:n}){const r=`db fw5 pv2 f6 no-underline nowrap br2 bt bl br ${n?"ph2 bb":"ph3 mr2 br--top"}`;return Y.createElement("div",{className:`mt4 ${n?"bg-near-white br2":""} overflow-auto`},Y.createElement("div",{className:`flex w-100 b--black-10 ${n?"":"bb ph4"}`},e.filter(Boolean).map(({to:e,title:i},s)=>Y.createElement(fh,{key:s,style:n?{}:{marginBottom:-1},className:`${r} ${e===t.pathname?"black-70 bg-white b--black-10":"black-50 hover-black b--transparent"}`,to:e},i))))}class NL extends Y.Component{constructor(...e){super(...e),bh(this,"state",{walkthrough:this.props.location.state&&this.props.location.state.walkthrough}),bh(this,"dismissTeamWalkthrough",()=>{this.setState({walkthrough:!1})})}hasRole(...e){const{user:t,match:{params:{teamLogin:n}}}=this.props,r=t.teams.find(e=>e.login===n);if(e.includes(r.role))return!0;throw new _h}render(){const{user:e,match:{params:{tab:t,teamLogin:n}},location:r}=this.props,{walkthrough:i}=this.state,s=this.props.location.state&&this.props.location.state.inviteFailures,a=e.teams.find(e=>e.login===n);if(!a)throw new _h;if("/databases"===t&&(!a.flag_data_connectors||"viewer"===a.role))throw new _h;return Y.createElement(Av,{query:{maxWidth:480}},n=>Y.createElement($b,Object.assign({},this.props,{gray:!n}),Y.createElement(wc,null,Y.createElement("title",null,Og(a))),i&&Y.createElement("div",{className:"flex mw6-ns center-ns pa3 bg-washed-yellow br2 br--bottom"},Y.createElement("div",{className:"flex-auto f6 lh-copy black-50"},"Finish setting up your team with a display name, avatar, URL, and team email address. Then"," ",Y.createElement(fh,{className:"no-underline black hover-blue",to:`/team/@${a.login}/settings`},"invite the rest of your team."),s&&Y.createElement("div",{className:"pt2 black"},Y.createElement(xf,{className:"w1 h1 v-mid mr1 red"}),"Some initial invitations to this team failed:"," ",xw(s))),Y.createElement("div",{onClick:this.dismissTeamWalkthrough,className:"pl2 light-silver hover-black pointer"},Y.createElement(ff,{className:"w1 h1"}))),Y.createElement("div",{className:"center-ns ph0-ns ph2 pb5 bg-white b--black-10 br2 ba-ns pt4 "+(i?"mt4-ns":"mt5-ns"),style:{maxWidth:600}},Y.createElement("div",{className:"ph4-ns"},Y.createElement(fy,{user:a})),Y.createElement(SL,{mobile:n,location:r,tabs:[{title:"Team",to:`/team/@${a.login}/settings`},Gm(a)&&{title:"Profile",to:`/team/@${a.login}/settings/profile`},(Gm(a)||Km(a))&&{title:"Secrets",to:`/team/@${a.login}/settings/secrets`},...a.flag_data_connectors&&"viewer"!==a.role?[{title:"Databases",to:`/team/@${a.login}/settings/databases`}]:[],Gm(a)&&{title:"Billing",to:`/team/@${a.login}/settings/billing`},Gm(a)&&{title:"Invoices",to:`/team/@${a.login}/settings/invoices`}].filter(Boolean)}),Y.createElement("div",{className:"pt4"},Y.createElement("div",{className:"ph4-ns"},void 0===t?Y.createElement(rL,Object.assign({},this.props,{team:a})):"/billing"===t&&this.hasRole("owner")?Y.createElement(QA,Object.assign({},this.props,{team:a})):"/invoices"===t&&this.hasRole("owner")?Y.createElement(tL,Object.assign({},this.props,{team:a})):"/profile"===t&&this.hasRole("owner")?Y.createElement(lL,Object.assign({},this.props,{reloadTeam:this.reload,teamId:a.id,user:yh({email:e.teams.find(e=>e.id===a.id).email},a)})):"/secrets"===t&&this.hasRole("member","owner")?Y.createElement(hL,Object.assign({},this.props,{teamId:a.id})):"/databases"===t?Y.createElement(EL,Object.assign({},this.props,{teamId:a.id})):null)))))}}function TL({suggestion:e={},first:t,mobile:n}){let{to_title:r,from_id:i,description:s,create_time:a,close_time:o,merge:l,creator:c}=e;const u=Y.createElement(JN,{time:new Date(o||a)}),h=Y.createElement("div",{style:n?{flexBasis:0,flexGrow:"3"}:null,className:`flex-auto ${n?"pt1":"pr2"} pv1 truncate`},Sg({title:r})," ",Y.createElement("span",{className:"o-80"},s?` – ${function(e,t=55){if(e.length<=t)return e;const n=e.split(" ");let r="";for(;r.length<t;)r&&(r+=" "),r+=n.shift();return r+"…"}(s)}`:""));return Y.createElement(fh,{to:o?Cg({id:i}):Lg(e),className:`db ph3 pv2 no-underline black-70 hover-blue ${t?"":"bt b--black-10"}`},Y.createElement("div",{className:"flex items-start justify-between"},Y.createElement("div",{style:n?null:{flexBasis:"12rem",flexShrink:0},className:"flex items-center pv1 mr2 truncate"},Y.createElement("span",{style:{lineHeight:0},title:null!=l?"Merged":o?"Closed":"Open"},null!=l?Y.createElement(Zd,{className:"w1 h1 mr2 purple"}):o?Y.createElement(Dd,{className:"w1 h1 mr2 red"}):Y.createElement(Kd,{className:"w1 h1 mr2 green"})),Y.createElement(Wf,{user:c,s:16,className:"mr2 br-100"}),Y.createElement("span",{className:"truncate"},Og(c))),n?null:h,Y.createElement("div",{style:n?null:{flexBasis:"8rem"},className:"flex-shrink-0 pv1 truncate o-60"},u)),n?h:null)}function AL({suggestions:e,youDont:t,type:n,mobile:r}){return Y.createElement("div",{className:"mt3"},e===Dm?Y.createElement("div",{className:"flex items-center justify-center pv3 fw5 mid-gray fade-in delay-short"},Y.createElement(wf,null),Y.createElement("span",{className:"ml2"},"Loading")):e.length?Y.createElement(Y.Fragment,null,Y.createElement("div",{className:"b--black-10 ba w-100 br2 overflow-hidden bg-white lh-copy f6"},e.map((e,t)=>Y.createElement(TL,{mobile:r,key:e.id,suggestion:e,first:0===t}))),e.length>27&&Y.createElement("div",{className:"mt4 tc"},Y.createElement(fh,{to:`?${Dh({tab:"suggestions",before:e[26].update_time},{encode:!1})}`,className:"pv2 ph3 dib br2 link blue bg-white hover-dark-blue"},"Show more…"))):Y.createElement(ay,null,`${t} ${`have any ${"closed"===n?"closed ":"open"} suggestions.`}`))}function LL({userLogin:e,query:t}){const n="flex items-center pv1 mr3 no-underline black-50 hover-blue ph2 pv1 fw5 ba br2 ";return Y.createElement("div",{className:"flex justify-between items-center nt3 f5"},Y.createElement("div",{className:"flex items-start"},Y.createElement(fh,{to:`/@${e}?${Dh({tab:"suggestions"})}`,className:n+("closed"!==t.type?" bg-white black b--black-10":" b--transparent")},Y.createElement("span",null,"Open")),Y.createElement(fh,{to:`/@${e}?${Dh({tab:"suggestions",type:"closed"})}`,className:n+("closed"===t.type?" bg-white black b--black-10":" b--transparent")},Y.createElement("span",null,"Closed"))))}function PL({pinnedCollections:e}){const t=e.some(e=>e.pinned);return Y.createElement("div",{className:"pv3 mb4"},Y.createElement("div",{className:"flex justify-between mb3"},Y.createElement(fh,{to:"?tab=collections",className:"inline-flex items-center f5 fw4 no-underline black-70 hover-blue hide-child"},t?"Pinned collections":"Collections",Y.createElement(yf,{className:"w1 h1 ml1 child",style:{strokeWidth:1}}))),Y.createElement("div",{className:"dg-ns",style:{gridTemplateColumns:"repeat(4, 1fr)",gridGap:16}},e.slice(0,4).map(e=>Y.createElement(IL,{key:e.id,collection:e}))))}function IL({collection:e}){const t=e?`/collection/@${e.owner.login}/${e.slug}`:"#",n=e&&e.thumbnail,r=Xf("(max-width: 640px)");return Y.createElement(fh,{to:t,className:`flex-auto no-underline black br2 ${r?"":"hover-blue hover-shadow-4-trigger"} hide-child`,style:{scrollSnapAlign:"start"}},Y.createElement("div",{className:`bg-white br2 ${n?"cover bg-center":""} ${r?"ba b--black-10":"hover-shadow-4"}`,style:{height:"7rem",backgroundImage:n?`url(https://static.observableusercontent.com/thumbnail/${n}.jpg)`:"var(--checkerboard)"}}),Y.createElement("div",{className:"flex items-center justify-between pt2 pb3 pb0-ns f6"},Y.createElement("div",{className:"fw7 truncate"},e?Y.createElement(Y.Fragment,null,e.title,"private"===e.type&&Y.createElement("span",{className:"dib ph1 ml2 f7 fw6 lh-f7 v-mid nowrap ttc mid-gray bg-light-gray br2"},"private")):Y.createElement("span",{className:"light-gray bg-light-gray"},"~~~~~~~~~~"),Y.createElement(yf,{className:"w1 h1 v-top ml1 child",style:{strokeWidth:1.5}}))))}function OL({stats:e}){return Y.createElement("div",{className:"flex items-center pt3 pt0-ns f6"},e?Y.createElement(Y.Fragment,null,e.document_count>0&&Y.createElement(Y.Fragment,null,Y.createElement("div",{className:"mr1 fw6 near-black"},rv(e.document_count)),Y.createElement("div",{className:"mr3 mid-gray fw5"},`notebook${1===e.document_count?"":"s"}`)),e.like_count>0&&Y.createElement(Y.Fragment,null,Y.createElement("div",{className:"mr1 fw6 near-black"},rv(e.like_count)),Y.createElement("div",{className:"mr3 mid-gray fw5"},1===e.like_count?"like":"likes")),e.fork_count>0&&Y.createElement(Y.Fragment,null,Y.createElement("div",{className:"mr1 fw6 near-black"},rv(e.fork_count)),Y.createElement("div",{className:"mid-gray fw5"},1===e.fork_count?"fork":"forks"))):Y.createElement("span",{className:"near-white bg-near-white"},"~~~~~~~~~~~~~~"))}function ML({document_count:e}){return e>0}function RL(e){const t=Mh(e),{type:n,types:r,tab:i}=t;return yh({},wh(t,["type","types","tab"]),{type:"trash"===i?"trash":n||r,tab:i})}function DL({showCollectionModal:e}){return Y.createElement("div",{onClick:e,className:"inline-flex items-center pv2 mr3 f6 fw5 nowrap no-underline mid-gray hover-near-black pointer"},Y.createElement(Jd,{className:"w1 h1 mr1"}),Y.createElement("div",null,"New collection"))}function FL({emptyTrash:e}){return Y.createElement(Y.Fragment,null,Y.createElement("div",{className:"pa3 f5 lh-copy bg-white ba b--red br2 mb0 mb4-ns"},Y.createElement("div",{className:"flex items-center"},Y.createElement(xf,{className:"mr3 red",style:{width:"1.5em",height:"1.5em",strokeWidth:1,flexShrink:0}}),Y.createElement("div",{className:"flex-auto"},Y.createElement("span",{className:"flex-auto f6 lh-copy dark-gray",style:{maxWidth:500}},"Notebooks in the trash for more than 30 days will be automatically deleted.")),null!=e&&Y.createElement("button",{onClick:e,className:"dn db-ns ph3 pa2 f6 nowrap no-underline dark-red hover-dark-red bg-white hover-bg-washed-red br2 pointer bn"},"Empty trash now"))),null!=e&&Y.createElement("button",{onClick:e,className:"db dn-ns center ph3 pa2 mt3 f6 f5 nowrap no-underline dark-red hover-dark-red bg-white hover-bg-washed-red br2 pointer bn mb4"},"Empty trash now"))}function VL({user:e,tab:t,userLogin:n,role:r}){const i=(e,t)=>`db pv2 mr3 f6 no-underline br2 br--top bb bw1 fw5 ${e==t?"near-black b--light-blue":"mid-gray hover-near-black b--transparent"}`;return Y.createElement("div",{className:"flex flex-auto overflow-x-auto overflow-x-visible-ns"},Y.createElement(fh,{className:i(void 0,t),to:`/@${n}`},"Notebooks"),Y.createElement(fh,{className:i("collections",t),to:"?tab=collections"},"Collections"),"self"===r&&Y.createElement(fh,{className:i("likes",t),to:"?tab=likes"},"Likes"),("self"===r||"viewer"===r||"member"===r||"owner"===r)&&e&&Y.createElement(fh,{className:i("suggestions",t),to:"?tab=suggestions"},"Suggestions"),("self"===r||"member"===r||"owner"===r)&&Y.createElement(fh,{className:i("trash",t),to:"?tab=trash"},"Trash"))}function jL({collections:e,role:t,owner:n,youDont:r}){return e===Dm?Y.createElement("div",{className:"flex h4 items-center justify-center mid-gray delay-short fade-in"},Y.createElement(wf,null)," ",Y.createElement("span",{className:"ml2"},"Loading collections…")):Y.createElement("div",null,e.length?Y.createElement("div",null,Y.createElement("div",{className:"dg grid-gap1 grid-template-columns-1 grid-template-columns-3-ns"},e.map((e,t)=>Y.createElement(Gf,{key:e?e.id:t,collection:e})))):"none"===t?Y.createElement(ay,null,"📦 This ","team"===n.type?"team":"person"," doesn’t have any collections."):Y.createElement(ay,null,r," have any collections."))}function BL({notebooks:e,tab:t,role:n,youDont:r,owner:i,type:s,reload:a}){return e.length>0?Y.createElement("div",null,Y.createElement("div",{className:"listing-grid"},e.slice(0,27).map((e,t)=>Y.createElement(uv,{key:e?e.id:t,notebook:e,reload:a}))),e.length>27&&Y.createElement("div",{className:"mt4 tc"},Y.createElement(fh,{to:`?${Dh({tab:t,types:s,before:"likes"===t?e[26].like_time:e[26].update_time},{encode:!1})}`,className:"pv2 ph3 dib br2 link blue bg-white hover-dark-blue"},"Show more…"))):"none"!==n?Y.createElement("div",{className:"flex flex-column justify-center items-center pv5"},Y.createElement("div",{className:"mb2 f4 lh-copy tc mid-gray"},"trash"===t?`${r} have anything in the trash.`:"likes"===t?`${r} have any likes.`:`${r} have any ${s?`${s} `:""}notebooks.`),!t&&Y.createElement(fh,{to:"team"===i.type?`/team/@${i.login}/new`:"/new",className:"inline-flex items-center justify-center ph3 pa2 blue hover-dark-blue bg-white br2 link shadow-hover"},Y.createElement(Jd,{className:"w1 h1 mr1",style:{strokeWidth:1}}),Y.createElement("div",null,"Start a new notebook"))):Y.createElement(ay,null,"📚 This ","team"===i.type?"team":"person"," hasn’t published any notebooks.")}class UL extends Y.Component{constructor(e){super(e),bh(this,"state",{notebooks:new Array(27).fill(void 0),collections:new Array(27).fill(void 0),suggestions:Dm,pinnedCollections:[],collectionModal:!1,role:"none"}),bh(this,"emptyTrash",async()=>{document.activeElement.blur();const{owner:e}=this.state;"team"===e.type?await this.props.api.documentsEmptyTrash(e.id):await this.props.api.documentsEmptyTrash(),this.reload(this.props)}),bh(this,"reload",({user:e,match:{params:{userLogin:t}},location:{search:n},api:r}=this.props)=>{const{before:i,tab:s,type:a}=RL(n);let o,l="none";const c=qm(e,t),u=c?r.collectionsLoadUserPinned:r.collectionsLoadUserPinnedPublic,h=c?r.collectionsLoadUser:r.collectionsLoadUserPublic;if(e&&(t===e.login?(l="self",o=e,r.userStats().then(e=>this.setState({stats:e}))):(o=e.teams.find(e=>t===e.login))&&(l=o.role,o=yh({type:"team"},o),r.teamStats(o.id).then(e=>this.setState({stats:e})))),o?this.setState({owner:o,role:l}):((o=r.userLoad(t)).then(e=>this.setState({owner:e})),this.setState({role:l}),r.userStats(t).then(e=>this.setState({stats:e}))),s||Promise.all([o,u(t)]).then(([e,t])=>{this.setState({pinnedCollections:t.map(t=>yh({},t,{owner:e}))})}),"collections"===s)this.setState({collections:Dm,notebooks:[]}),Promise.all([o,h(t,{type:a})]).then(([e,t])=>{"none"===l&&(t=t.filter(ML)),this.setState({collections:t.map(t=>yh({},t,{owner:e}))})});else if("suggestions"===s)this.setState({suggestions:Dm}),("self"===l?r.userSuggestions({type:a,before:i}):r.teamSuggestions(o.id,{type:a,before:i})).then(e=>this.setState({suggestions:e}));else{let e;switch(l){case"none":e=Promise.all([o,r.documentLoadByUser(t,i)]).then(([e,t])=>t.map(t=>yh({},t,{owner:e})));break;case"self":e="likes"===s?r.documentsLoadUserLikes(i):r.documentsLoadUser({before:i,types:a}).then(e=>e.map(e=>yh({},e,{owner:o})));break;case"viewer":case"member":case"owner":e=r.documentsLoadTeam(o.id,{before:i,types:a}).then(e=>e.map(e=>yh({},e,{owner:o})))}"trash"===s&&(e=e.then(e=>e.map(e=>yh({},e,{trashed:!0})))),e.then(e=>this.setState({notebooks:e}))}}),bh(this,"changeFilter",e=>{const{history:t,location:n}=this.props;let r=e.target.value;const{tab:i}=RL(n.search),s={};i&&(s.tab=i),r&&(s.type=r),t.push(yh({},n,{search:Dh(s)}))}),bh(this,"showCollectionModal",()=>{this.setState({collectionModal:!0})}),bh(this,"hideCollectionModal",()=>{this.setState({collectionModal:!1})}),e.preloadData&&(this.state=yh({preloaded:!0},e.preloadData))}componentDidMount(){this.state.preloaded||this.reload(this.props)}componentWillReceiveProps(e){this.setState({notebooks:new Array(27).fill(void 0)}),this.reload(e)}render(){const{user:e,location:{search:t},match:{params:{userLogin:n}}}=this.props;let{notebooks:r,collections:i,suggestions:s,owner:a,role:o,stats:l,collectionModal:c,pinnedCollections:u}=this.state;const h=Mh(t),{tab:p,type:d}=RL(t),f=(!p||"collections"===p)&&"none"!==o&&Y.createElement("select",{className:"w-100 mb0-ns mb4 f6 fw6 mid-gray bg-light-gray w-auto-ns bn",onChange:this.changeFilter,value:d||""},Y.createElement("option",{value:""},"All"),Y.createElement("option",{value:"public"},"Public"),!p&&Y.createElement("option",{value:"shared"},"Shared"),Y.createElement("option",{value:"private"},"Private")),m="self"===o?"You don’t":"This team doesn’t";return Y.createElement(Av,{query:{maxWidth:700}},t=>Y.createElement($b,Object.assign({},this.props,{gray:!0,seamless:!0}),Y.createElement(wc,null,a&&Y.createElement("title",null,Og(a)),Y.createElement("link",{rel:"alternate",type:"application/rss+xml",href:`https://api.observablehq.com/documents/@${n}.rss`}),a&&Y.createElement("meta",{name:"description",content:`Recently published notebooks by ${Og(a)}`})),Y.createElement("div",{className:"mb4 bg-white bb b--light-gray"},Y.createElement("div",{className:zf},Y.createElement("div",{className:"flex-ns justify-between pv4"},a&&Y.createElement(fy,{user:a,socialLinks:!0}),Y.createElement(OL,{stats:l})),("none"!==o||u.length>0)&&Y.createElement("div",{className:"flex justify-between items-center",style:{marginBottom:-1}},Y.createElement(VL,{user:e,userLogin:n,tab:p,role:o}),!t&&"collections"===p&&("self"===o||"member"===o||"owner"===o)&&Y.createElement(DL,{showCollectionModal:this.showCollectionModal}),("self"===o||"viewer"===o||"member"===o||"owner"===o)&&Y.createElement("div",{className:"inline-flex items-center"},a&&Y.createElement(fh,{className:"inline-flex items-center pv2 mr3 f6 fw5 no-underline mid-gray hover-near-black",to:"team"===a.type?`/team/@${a.login}/settings`:"/settings"},Y.createElement(jd,{className:"mr1"}),Y.createElement("span",{className:"dn di-ns fw6"},"Settings")),f&&!t&&f)))),Y.createElement("div",{className:zf},f&&t&&f,t&&"collections"===p&&("self"===o||"member"===o||"owner"===o)&&Y.createElement("div",{className:"flex justify-end pb2"},Y.createElement(DL,{showCollectionModal:this.showCollectionModal})),"collections"===p?Y.createElement(jL,{collections:i,tab:p,type:d,role:o,owner:a,youDont:m}):"suggestions"===p?Y.createElement(Y.Fragment,null,Y.createElement(LL,{history:this.props.history,userLogin:n,query:h}),Y.createElement(AL,{mobile:t,type:d,owner:a,suggestions:s!==Dm?s.slice(0,29):s,youDont:m}),s!==Dm&&s.length>29&&Y.createElement("div",{className:"mt4 tc"},Y.createElement(fh,{to:`?${Dh({tab:p,type:d,before:s[28].create_time},{encode:!1})}`,className:"pv2 ph3 dib br2 link blue bg-white hover-light-blue"},"Show more…"))):Y.createElement(Y.Fragment,null,("self"===o||"member"===o||"owner"===o)&&"trash"===p&&r.length>0?Y.createElement(FL,{emptyTrash:"member"===o?null:this.emptyTrash}):null,!p&&!d&&u.length>0?Y.createElement(PL,{pinnedCollections:u}):null,Y.createElement(BL,{notebooks:r,tab:p,role:o,youDont:m,owner:a,type:d,reload:this.reload}))),c&&Y.createElement(wd,{onDismiss:this.hideCollectionModal},Y.createElement(gy,Object.assign({onDismiss:this.hideCollectionModal,owner:a},this.props)))))}}bh(UL,"preload",({match:{params:{userLogin:e}},location:{search:t},api:n,user:r})=>{const{before:i,tab:s,type:a}=Mh(t);if("trash"===s||"likes"===s)return null;const o=qm(r,e),l=o?n.collectionsLoadUserPinned:n.collectionsLoadUserPinnedPublic,c=o?n.collectionsLoadUser:n.collectionsLoadUserPublic;return Promise.all([n.userLoad(e),n.userStats(e),s?[]:l(e),"collections"===s?c(e,{type:a}):[],"collections"!==s?n.documentLoadByUser(e,i):[]]).then(([e,t,n,r,i])=>({owner:e,notebooks:i.map(t=>yh({},t,{owner:e})),collections:r.filter(ML).map(t=>yh({},t,{owner:e})),pinnedCollections:n.map(t=>yh({},t,{owner:e})),stats:t,role:"none"}))});class HL extends Y.PureComponent{render(){const{user:e,location:t,match:{params:{tab:n}}}=this.props;if("/databases"===n&&!e.flag_data_connectors)throw new _h;return Y.createElement(Av,{query:{maxWidth:480}},r=>Y.createElement($b,Object.assign({},this.props,{gray:!r}),Y.createElement(wc,null,Y.createElement("title",null,"Settings")),Y.createElement("div",{className:"mw6-ns center-ns ph0-ns ph3 pt4 pb4 mt5-ns bg-white b--black-10 br2 ba-ns"},Y.createElement("div",{className:"ph4-ns"},Y.createElement(fy,{user:e})),Y.createElement("div",null,Y.createElement(SL,{location:t,mobile:r,tabs:[{title:"Profile",to:"/settings"},{title:"Secrets",to:"/settings/secrets"},...e.flag_data_connectors?[{title:"Databases",to:"/settings/databases"}]:[]]}),Y.createElement("div",{className:"pt4"},Y.createElement("div",{className:"ph4-ns"},void 0===n?Y.createElement(lL,this.props):"/secrets"===n?Y.createElement(hL,this.props):"/databases"===n?Y.createElement(EL,this.props):null))))))}}function $L({api:e,cardError:t,serverError:n,loading:r,invites:i,cycle:s,coupon:a,loginValid:o,addBilling:l,createTeam:c,onLoginChange:u,onCycleChange:h,onLoginValid:p,onInvitesChange:d,stripeSource:f}){const m=f&&f.card;return Y.createElement("div",{className:"mw6-ns center-ns ph0-ns ph2 pt3 pb5 mt5-ns"},Y.createElement("h1",{className:"ma0 f3 fw7 black"},"Create your team"),Y.createElement("div",{className:"pv2 mt1 f5 lh-copy black-70"},"Team accounts include unlimited public and private team notebooks, multiplayer editing, shared secrets and email support."),Y.createElement("div",{className:"flex-ns justify-between items-start mt0 mb2"},Y.createElement("div",{className:"flex-auto mr4-ns"},Y.createElement(ey,{title:"Team URL",name:"team URL",api:e,serverError:n,onLoginChange:u,onLoginValid:p}),Y.createElement("div",{className:"flex flex-column items-stretch"},Y.createElement("label",{className:"pb1 f5 fw5 black-70",htmlFor:"team-invites"},"Invite team members by email",Y.createElement("span",{className:"ml3 f7 ttu black-70"},"optional")),Y.createElement(my,{id:"team-invites",name:"team-invites",autoComplete:"off",style:{resize:"none"},maxLength:"255",value:i,onChange:e=>d(e.target.value)}),Y.createElement("div",{className:"mt1 f7 lh-copy black-70"},"List team members by email address, separated by commas or spaces.",Y.createElement("br",null),"You can also do this later.")),Y.createElement("div",{className:"mt4"},Y.createElement("div",{className:"pb2 f5 fw5 black-70",htmlFor:"team-invites"},"Billing cycle"),Y.createElement("div",{className:"flex items-center pv1"},Y.createElement("input",{checked:"yearly"===s,onChange:()=>h("yearly"),type:"radio",name:"cycle",value:"yearly",id:"cycle-yearly",className:"ma1"}),Y.createElement("label",{htmlFor:"cycle-yearly",className:"ml1"},Y.createElement("strong",null,"Yearly")," −  $",qb.yearly," / member / month")),Y.createElement("div",{className:"flex items-center pv1"},Y.createElement("input",{checked:"monthly"===s,onChange:()=>h("monthly"),type:"radio",name:"cycle",value:"monthly",id:"cycle-monthly",className:"ma1"}),Y.createElement("label",{htmlFor:"cycle-monthly",className:"ml1"},Y.createElement("strong",null,"Monthly")," − $",qb.monthly," / member / month"))),a?Y.createElement("div",{className:"mt4"},Y.createElement("div",{className:"pb2 f5 fw5 lh-copy black-70"},"💖 Coupon"),Y.createElement("div",{className:"mt1 i"},a.name)):null,m?Y.createElement(Y.Fragment,null,Y.createElement("div",{className:"fw5 f5 mt4 black-70"},"Payment Method"),Y.createElement("div",{className:"mt2"},Y.createElement("span",{className:"black-70 bg-near-white br2 pv2 pl2 pr3 ba b--black-20 f6"},Y.createElement(Ld,{className:"green w1 h1 v-mid mr1"}),m.brand," ending in ",m.last4," Expiration"," ",m.exp_month,"/",m.exp_year),Y.createElement("button",{className:"ml3 ph3 pv2 f5 fw6  br2 pointer bn bg-light-gray hover-bg-moon-gray black-70 hover-black",onClick:l},"Change"))):Y.createElement("div",{className:"mt4"},t&&Y.createElement("div",{className:"flex items-center pv1 f6 dark-red"},Y.createElement(xf,{className:"w1 h1 mr1"}),"We weren’t able to charge this card."),Y.createElement("button",{className:`mt3 inline-flex justify-center items-center ph3 pv2 f5 fw6 br2 pointer bn\n                      ${o?" bg-blue hover-bg-dark-blue white hover-white ":"bg-light-gray hover-bg-moon-gray black-70 hover-black  "}`,onClick:l},"Add payment method")),o&&f?Y.createElement("div",{className:"pt4 mt3"},Y.createElement("button",{className:`flex items-center ph3 pv2 f5 fw6 br2 pointer bn\n\n                       bg-blue hover-bg-dark-blue white hover-white  ${r?"o-90 pen":""}`,onClick:c},"Create team",r?Y.createElement(wf,{className:"ml2"}):null)):null)))}class zL extends Y.Component{constructor(...e){super(...e),bh(this,"state",{login:"",invites:"",cycle:"yearly",email:this.props.user.email,cardError:!1}),bh(this,"onToken",async e=>{this.setState({stripe_source:e})}),bh(this,"createTeam",async()=>{const{api:e,history:t,refreshUser:n}=this.props,{login:r,stripe_source:i,invites:s,cycle:a,coupon:o}=this.state;this.setState({loading:!0});const l=s.split(/[,\s]/).map(e=>e.trim()).filter(Boolean);try{const s=await e.teamNew(yh({login:r,cycle:a,stripe_token:i.id},o?{coupon:o.id}:{})),u=(await Promise.all(l.map(t=>e.teamInvite(s.id,t,"member").catch(()=>({failure:!0,email:t}))))).map(e=>e&&e.failure&&e.email).filter(Boolean);await n(),ga("send",{hitType:"event",eventCategory:"team",eventAction:"signup",eventLabel:a,eventValue:1+l.length}),t.push(`/team/@${r}/settings/profile`,yh({walkthrough:!0},u.length?{inviteFailures:u}:{}))}catch(c){if(!c.errors)throw c;const e=c.errors[0].code;switch(e){case"LOGIN_CONFLICT":case"LOGIN_INVALID":return void this.setState({loginValid:!1,serverError:e,loading:!1});case"CARD_ERROR":return void this.setState({cardError:!0,loading:!1})}throw c}}),bh(this,"addBilling",()=>{const{email:e,login:t,handler:n}=this.state;n.open({name:"Observable, Inc.",image:"https://static.observablehq.com/favicon-512.e85350a27dfadeea7c7c78c797c24419525df5579de174d86d258c40ae57473a.png",description:`${t}: Team account`,email:e,panelLabel:"Save"})}),bh(this,"onChange",e=>{const{target:{name:t,value:n}}=e;this.setState({[t]:n})}),bh(this,"onLoginChange",e=>{this.setState({serverError:void 0,login:e})}),bh(this,"onCycleChange",e=>{this.setState({cycle:e})}),bh(this,"onInvitesChange",e=>{this.setState({invites:e})}),bh(this,"onLoginValid",e=>{this.setState({loginValid:e})})}componentWillMount(){const{api:e,user:t,location:{search:n}}=this.props;if(!t)throw new _h;YA().then(e=>this.setState({handler:e.configure({key:"pk_live_A5hiyxHhT8FK6EIWYFZMuHo8",locale:"auto",zipCode:!0,token:this.onToken})}));const{coupon:r}=Mh(n);r&&e.couponLoad(r).then(e=>{if(!e.valid)throw new Error("Invalid coupon");this.setState({coupon:e})}).catch(()=>{this.setState({coupon:!1})})}render(){const{loginValid:e,loading:t,cycle:n,invites:r,cardError:i,serverError:s,stripe_source:a,coupon:o}=this.state;return Y.createElement($b,this.props,Y.createElement(wc,null,Y.createElement("title",null,"Observable / Create your team")),Y.createElement($L,{api:this.props.api,coupon:o,loginValid:e,stripeSource:a,loading:t,cycle:n,invites:r,cardError:i,serverError:s,addBilling:this.addBilling,onInvitesChange:this.onInvitesChange,onLoginChange:this.onLoginChange,onLoginValid:this.onLoginValid,onCycleChange:this.onCycleChange,createTeam:this.createTeam}))}}function WL(e){return Y.createElement($b,Object.assign({},e,{gray:!0,seamless:!0}),Y.createElement(wc,null,Y.createElement("meta",{name:"description",content:"Discover insights faster and communicate more effectively with interactive notebooks for data analysis, visualization, and exploration."})),Y.createElement(um,null))}class qL extends Y.Component{constructor(...e){super(...e),bh(this,"state",{confirmed:"initial"})}componentDidMount(){this.confirm()}async confirm(){const{match:{params:{token:e}},api:t,refreshUser:n}=this.props;try{await t.userEmailConfirm(e),await n(),this.setState({confirmed:!0})}catch(r){this.setState({confirmed:!1})}}render(){const{confirmed:e}=this.state;return Y.createElement(Av,{query:{maxWidth:640}},t=>Y.createElement($b,Object.assign({},this.props,{gray:!t}),Y.createElement(wc,null,"Confirm email"),Y.createElement("div",{className:"flex flex-column measure-narrow center-ns items-center justify-center ph0 ph4-ns ph2 pv5 mt5-ns black-70 bg-white b--black-10 br2 ba-ns"},"initial"===e?Y.createElement("h3",{className:"ma0 mb2 f4 fw4"},"Confirming…"):e?Y.createElement(Y.Fragment,null,Y.createElement("h3",{className:"ma0 mb2 f4 fw4"},"Email change confirmed"),Y.createElement(fh,{to:"/",className:"inline-flex ph3 pv2 mt4 f6 fw6 no-underline white bg-blue hover-bg-dark-blue br2 pointer bn"},"Return to home page")):Y.createElement(Y.Fragment,null,Y.createElement("h3",{className:"ma0 mb2 f4 fw4"},"Email could not be confirmed"),Y.createElement("div",{className:"mv3 f6 lh-copy"},"The confirmation link you followed may have already been used, or was issued for another user. The email attached to your account has not been changed."),Y.createElement(fh,{to:"/",className:"inline-flex ph3 pv2 mt4 f6 fw6 no-underline white bg-blue hover-bg-dark-blue br2 pointer bn"},"Return to home page")))))}}class GL extends Y.Component{render(){const{user:{login:e},match:{params:{folder:t}}}=this.props,n={"/trash":{tab:"trash"},"/public":{types:"public"},"/likes":{tab:"likes"},undefined:{types:"private"}}[t];return Y.createElement(Au,{to:`/@${e}?${Dh(n)}`})}}const KL=({match:{params:{collectionSlug:e}}})=>Y.createElement(Au,{to:`/collection/@observablehq/${e}`});class YL extends Y.Component{render(){return Y.createElement(Y.Fragment,null,Y.createElement(wc,{defaultTitle:"Observable",titleTemplate:"%s / Observable"}),Y.createElement(ch,null,Y.createElement(ny,{error:this.props.error},Y.createElement(qu,null,Y.createElement($f,{exact:!0,path:"/",component:Wb}),Y.createElement($f,{noUserRedirect:"/",exact:!0,path:"/home",component:WL}),Y.createElement($f,{exact:!0,path:"/teams",component:Kb}),Y.createElement($f,{permissions:"private",exact:!0,path:"/notebooks:folder(/public|/trash)?",component:GL}),Y.createElement($f,{permissions:"private",exact:!0,path:"/likes",component:({user:{login:e}})=>Y.createElement(Au,{to:`/@${e}?${Dh({tab:"likes"})}`})}),Y.createElement($f,{permissions:"private",exact:!0,path:"/new",component:UA}),Y.createElement($f,{exact:!0,path:"/d/:specifier([0-9a-f]+)",component:UA}),Y.createElement($f,{exact:!0,path:"/d/:specifier([0-9a-f]+[@~][0-9]+)",component:HA}),Y.createElement($f,{exact:!0,path:"/d/:specifier([0-9a-f]+):historyPanel(/history)",component:HA}),Y.createElement($f,{exact:!0,path:"/d/:specifier([0-9a-f]+~[0-9]+):historyPanel(/history)",component:HA}),Y.createElement($f,{exact:!0,path:"/d/:specifier([0-9a-f]+)@:historyVersion([0-9]+):historyPanel(/history)",component:HA}),Y.createElement($f,{exact:!0,path:"/d/:specifier([0-9a-f]+)/safe",component:e=>Y.createElement(UA,Object.assign({},e,{type:"safe"}))}),Y.createElement($f,{userRedirect:"/@observablehq/demo",exact:!0,path:"/demo",component:e=>Y.createElement(UA,Object.assign({},e,{type:"demo"}))}),Y.createElement($f,{path:"/compare/",component:e=>Y.createElement(UA,Object.assign({},e,{type:"compare"}))}),Y.createElement($f,{permissions:"private",exact:!0,path:"/settings:tab(/secrets|/databases)?",component:HL}),Y.createElement($f,{permissions:"private",exact:!0,path:"/settings/confirm-email/:token([0-9a-z]+)",component:qL}),Y.createElement($f,{permissions:"private",exact:!0,path:"/team/new",component:zL}),Y.createElement($f,{permissions:"private",exact:!0,path:"/team/@:teamLogin([0-9a-z_-]+)/settings:tab(/billing|/profile|/secrets|/databases|/invoices)?",component:NL}),Y.createElement($f,{permissions:"private",exact:!0,path:"/team/@:teamLogin([0-9a-z_-]+)/new",component:UA}),Y.createElement($f,{permissions:"private",exact:!0,path:"/team/:teamId/accept/:id([0-9a-f]+)",component:sy}),Y.createElement($f,{exact:!0,path:"/:specifier(@[0-9a-z_-]+/[0-9a-z_-]+)",component:UA}),Y.createElement($f,{exact:!0,path:"/:specifier(@[0-9a-z_-]+/[0-9a-z_-]+/[0-9]+)",component:UA}),Y.createElement($f,{exact:!0,path:"/:specifier(@[0-9a-z_-]+/[0-9a-z_-]+[@~][0-9]+)",component:HA}),Y.createElement($f,{exact:!0,path:"/:specifier(@[0-9a-z_-]+/[0-9a-z_-]+/[0-9]+[@~][0-9]+)",component:HA}),Y.createElement($f,{exact:!0,path:"/:specifier(@[0-9a-z_-]+/[0-9a-z_-]+):historyPanel(/history)",component:HA}),Y.createElement($f,{exact:!0,path:"/:specifier(@[0-9a-z_-]+/[0-9a-z_-]+/[0-9]+):historyPanel(/history)",component:HA}),Y.createElement($f,{exact:!0,path:"/:specifier(@[0-9a-z_-]+/[0-9a-z_-]+)@:historyVersion([0-9]+):historyPanel(/history)",component:HA}),Y.createElement($f,{exact:!0,path:"/:specifier(@[0-9a-z_-]+/[0-9a-z_-]+/[0-9]+)@:historyVersion([0-9]+):historyPanel(/history)",component:HA}),Y.createElement($f,{exact:!0,path:"/:specifier(@[0-9a-z_-]+/[0-9a-z_-]+)/safe",component:e=>Y.createElement(UA,Object.assign({},e,{type:"safe"}))}),Y.createElement($f,{exact:!0,path:"/:specifier(@[0-9a-z_-]+/[0-9a-z_-]+/[0-9]+)/safe",component:e=>Y.createElement(UA,Object.assign({},e,{type:"safe"}))}),Y.createElement($f,{exact:!0,path:"/@:userLogin([0-9a-z_-]+)/:documentSlug([0-9a-z_-]+)/forks",component:by}),Y.createElement($f,{exact:!0,path:"/@:userLogin([0-9a-z_-]+)/:documentSlug([0-9a-z_-]+/[0-9]+)/forks",component:by}),Y.createElement($f,{exact:!0,path:"/d/:id/forks",component:by}),Y.createElement($f,{exact:!0,path:"/@:userLogin([0-9a-z_-]+)",component:UL}),Y.createElement($f,{exact:!0,path:"/search",component:GA}),Y.createElement($f,{exact:!0,path:"/recent",component:iy}),Y.createElement($f,{exact:!0,path:"/collection/:collectionSlug([0-9a-z_-]+)",component:KL}),Y.createElement($f,{exact:!0,path:"/collection/:collectionSlug([0-9a-z_-]+/[0-9]+)",component:KL}),Y.createElement($f,{exact:!0,path:"/collection/@:userLogin([0-9a-z_-]+)/:collectionSlug([0-9a-z_-]+)",component:vy}),Y.createElement($f,{exact:!0,path:"/collection/@:userLogin([0-9a-z_-]+)/:collectionSlug([0-9a-z_-]+/[0-9]+)",component:vy}),Y.createElement(Au,{from:"/collections/featured",to:"/@observablehq?tab=collections"}),Y.createElement(Au,{from:"/scratchpad",to:"/demo"}),Y.createElement(Au,{from:"/playground",to:"/demo"}),Y.createElement($f,{permissions:"anon-only",path:"/login",component:Qb}),Y.createElement($f,{exact:!0,path:"/loggedin/",component:e=>Y.createElement(WA,e)}),Y.createElement($f,{path:"/loggedin/:path*",component:e=>Y.createElement(WA,e)}),Y.createElement($f,{exact:!0,path:"/error",component:KA}),Y.createElement($f,{exact:!0,path:"/thumbnail/:specifier([0-9a-f]+@[0-9]+)",component:e=>Y.createElement(UA,Object.assign({},e,{type:"thumbnail"}))}),Y.createElement($f,{exact:!0,path:"/open-source",component:zA}),Y.createElement($f,{component:qA})))))}}addEventListener("keydown",()=>{const e=document.querySelector(".tooltipped:hover");e&&(e.classList.remove("tooltipped"),e.addEventListener("mouseleave",()=>e.classList.add("tooltipped"),{once:!0}))},!0),window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-112925870-1","auto"),ga("set","transport","beacon"),ga("set","anonymizeIp",!0),ga("set","page",location.pathname+location.search),ga("send","pageview"),window.AbortController||(window.AbortController=class{abort(){}}),async function(){const e=document.querySelector("#app");try{await("anonymous"in e.dataset?async function(){Hf.user=null,Hf.api=jh()}():Uf()),nc.render(Y.createElement(YL,null),e)}catch(t){nc.render(Y.createElement(YL,{error:t}),e)}}()}();

//# sourceMappingURL=bundle.e57353904f6ff2c594014dee0d50b13949fe055802753718cefe8d451028d226.js.map